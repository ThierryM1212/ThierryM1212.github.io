{"version":3,"sources":["ergo-related/serializer.js","components/ImageButton.js","components/InputString.js","components/ImageButtonLabeled.js","components/InputAddress.js","ergo-related/explorer.js","ergo-related/utxos.js","utils/utils.js","components/UtxosSummary.js","components/OutputEditable.js","components/OutputBoxCreator.js","components/TransactionSummary.js","components/QRCode.js","components/QRCodes.js","resources/logo_telegram.svg","resources/dApps.svg","components/Footer.js","resources/GitHub.png","components/UtxoItem.js","ergo-related/yoroi.js","transaction-builder-page.js","App.js","reportWebVitals.ts","index.tsx","ergo-related/rest.js","ergo-related/node.js","resources/Spin-1.5s-94px.svg","utils/Alerts.js"],"names":["ergolib","byteArrayToBase64","byteArray","binary","len","byteLength","i","String","fromCharCode","window","btoa","base64ToByteArray","base64","binary_string","atob","length","bytes","Uint8Array","charCodeAt","encodeHex","reg","a","Constant","from_byte_array","Buffer","from","encode_to_base16","encodeStr","str","Serializer","stringToHex","encodeAddress","address","Address","from_mainnet_str","to_bytes","encodeInt","num","from_i32","encodeLong","I64","from_str","from_i64","encodeLongArray","longArray","from_i64_str_array","encodeContract","Contract","from_base58","tmp","pay_to_address","ergo_tree","to_base16_bytes","getTxReducedAndCSR","json","inputs","dataInputs","console","log","getTxReduced","reducedTx","txReducedBase64","sigma_serialize_bytes","inputsB64","map","chunk","JSONBigInt","stringify","csrDict","csrDictStr","pageNumber","Math","floor","csrResult","match","getErgoStateContext","BlockHeaders","getLastHeaders","block_headers","from_json","pre_header","PreHeader","from_block_header","get","ErgoStateContext","unsignedTx","UnsignedTransaction","inputBoxes","ErgoBoxes","from_boxes_json","inputDataBoxes","ctx","ReducedTransaction","from_unsigned_tx","getTxReducedFromB64","txReducedB64","sigma_parse_bytes","getTxJsonFromTxReduced","txReduced","unsigned_tx","to_js_eip12","signTxReduced","mnemonic","getWalletForAddress","wallet","signedTx","sign_reduced_transaction","deriveSecretKey","rootSecret","path","derive","signTxWithMnemonic","sign_transaction","seed","Mnemonic","to_seed","ExtSecretKey","derive_master","getDerivationPathForAddress","changePath","toString","changeSecretKey","dlogSecret","SecretKey","dlog_from_bytes","secret_key_bytes","SecretKeys","secretKeys","add","Wallet","from_secrets","DerivationPath","new","Uint32Array","j","found","changePubKey","public_key","NetworkAddress","NetworkPrefix","Mainnet","to_address","to_base58","ImageButton","props","className","color","onClick","data-tip","data-for","id","icon","place","effect","html","tips","InputString","htmlFor","label","pattern","onChange","e","target","value","type","ImageButtonLabeled","InputAddress","fetchYoroi","explorerApi","getRequest","url","then","res","data","currentHeight","items","height","unspentBoxesFor","boxById","parseUtxo","addExtention","mode","undefined","boxId","ergoTree","Array","isArray","assets","asset","tokenId","amount","parseAdditionalRegisters","additionalRegisters","creationHeight","txId","transactionId","index","parseUtxos","utxos","utxosFixed","push","enrichUtxos","key","box","registterOut","Object","entries","forEach","v","Date","parseSignedInputSwagger","input","spendingProof","extension","generateSwaggerTx","newInsputs","hasOwnProperty","tx_id","data_inputs","outputs","getUtxosListValue","reduce","acc","utxo","BigInt","getTokenListFromUtxos","tokenList","parseInt","getMissingErg","amountIn","amountOut","getMissingTokens","tokensIn","tokensOut","token","buildTokenList","tokens","missingErgs","contract","UtxosSummary","ergAmount","parseFloat","list","toFixed","tokenDict","keys","border","name","OutputEditable","state","onEdit","delete","moveUp","moveDown","nextProps","this","setState","src","theme","collapsed","collapseStringsAfterLength","item","updated_src","onAdd","defaultToken","prevState","onDelete","React","Component","OutputBoxCreator","setLongArrayEncoded","split","encoded","longArrayEncoded","catch","setLongEncoded","long","longEncoded","setIntEncoded","int","intEncoded","setSigmaPropEncoded","sigmaProp","sigmaPropEncoded","setAddressContractEncoded","addressContract","addressContractEncoded","setCollByteEncoded","collByte","collByteEncoded","setNanoErg","erg","nanoErg","reset","fee","balance","bind","step","min","max","defaultValue","readOnly","TransactionSummary","inputNanoErgAmount","outputsNanoErgAmount","inputTokens","outputTokens","tokenDiffArray","replace","QR","size","zoomInOut","includeMargin","QRCodes","Footer","class","href","logo_telegram","width","alt","dApps","UtxoItem","substring","action","action2","isYoroiConnected","ergo_check_read_access","error","connectYoroi","alreadyConnected","ergo_request_read_access","access_granted","errorAlert","ergo","get_change_address","yoroiSignTx","tx","alert","waitingAlert","yoroiAccessGranted","update","title","processTx","closeAlert","displayTransaction","signTx","txToBeSigned","sign_tx","submitTx","txToBeSubmitted","submit_tx","txToBeProcessed","msg","s","get_utxos","initCreateBox","feeBox","TxBuilder","setCreateBoxJson","outputCreateJson","setOutputItem","outputListNew","outputList","resetCreateBoxJson","setFeeBoxJson","setBalanceBoxBoxJson","buildBalanceBox","selectedBoxList","balanceBox","setAddress","addressBoxList","otherBoxList","selectedDataBoxList","searchBoxId","setSearchBoxId","searchAddress","setSearchAddress","txJsonRaw","CSR","signedTransaction","fetchUtxos","fetchByBoxId","fetchByAddress","selectInputBox","selectDataInputBox","unSelectInputBox","unSelectDataInputBox","addOutputBox","unSelectOutoutBox","moveOutputBoxDown","moveOutputBoxUp","moveInputBoxUp","moveInputBoxDown","setTxJsonRaw","getYoroiTx","setTxYoroiJsonRaw","setTxSwaggerJsonRaw","loadTxFromJsonRaw","setTxReduced","loadTxReduced","resetTxReduced","setSignedTransaction","setMnemonic","sendTxNode","sendTxYoroi","signTxJsonMnemonic","loadSignedTxFromJson","status","addressListFixed","otherBoxListFixed","boxFixed","getAllUtxos","getChangeAddress","yoroiAddress","close","boxFound","filter","boxinlist","splice","selectedBoxListNew","yoroiConnected","txSent","txSigned","txSubmitted","textAreaInput","loadTxFromJson","sendTx","ok","JSON","parse","jsonFixed","txJson","appTips","keu","arr","signAndSendTxYoroi","signTxYoroi","swaggertips","join","evn","App","localStorage","setItem","getItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","post","body","fetch","method","headers","response","Promise","all","responseOk","apiKey","Accept","api_key","nodeApi","postRequest","err","MySwal","withReactContent","Swal","fire","imageUrl","Spinner","allowOutsideClick","showConfirmButton","text"],"mappings":"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","file":"static/js/main.7511d038.chunk.js","sourcesContent":["import {Serializer} from \"@coinbarn/ergo-ts\";\r\nimport JSONBigInt from 'json-bigint';\r\nimport { getLastHeaders } from \"./node\";\r\n\r\n\r\nlet ergolib = import('ergo-lib-wasm-browser')\r\n\r\nexport async function encodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.from_i32(n).encode_to_base16()\r\n    else return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(n)).encode_to_base16()\r\n}\r\n\r\nexport async function decodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.decode_from_base16(n).to_i32()\r\n    else return (await ergolib).Constant.decode_from_base16(n).to_i64().to_str()\r\n\r\n}\r\n\r\nfunction byteArrayToBase64( byteArray ) {\r\n    var binary = '';\r\n    var len = byteArray.byteLength;\r\n    for (var i = 0; i < len; i++) {\r\n        binary += String.fromCharCode( byteArray[ i ] );\r\n    }\r\n    return window.btoa( binary );\r\n}\r\n\r\nfunction base64ToByteArray(base64) {\r\n    var binary_string = window.atob(base64);\r\n    var len = binary_string.length;\r\n    var bytes = new Uint8Array(len);\r\n    for (var i = 0; i < len; i++) {\r\n        bytes[i] = binary_string.charCodeAt(i);\r\n    }\r\n    return bytes;\r\n}\r\n\r\nexport async function encodeHex(reg) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(reg, 'hex')).encode_to_base16()\r\n}\r\n\r\nexport async function encodeStr(str) {\r\n    return encodeHex(Serializer.stringToHex(str))\r\n}\r\n\r\nfunction toHexString(byteArray) {\r\n    return Array.from(byteArray, function(byte) {\r\n        return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r\n    }).join('')\r\n}\r\n\r\nexport async function decodeString(encoded) {\r\n    return Serializer.stringFromHex(toHexString((await ergolib).Constant.decode_from_base16(encoded).to_byte_array()))\r\n}\r\n\r\nexport function ergToNano(erg) {\r\n    if (erg === undefined) return 0\r\n    if (erg.startsWith('.')) return parseInt(erg.slice(1) + '0'.repeat(9 - erg.length + 1))\r\n    let parts = erg.split('.')\r\n    if (parts.length === 1) parts.push('')\r\n    if (parts[1].length > 9) return 0\r\n    return parseInt(parts[0] + parts[1] + '0'.repeat(9 - parts[1].length))\r\n}\r\n\r\nexport async function encodeAddress(address) {\r\n    const byteArray = (await ergolib).Address.from_mainnet_str(address).to_bytes();\r\n    return (await ergolib).Constant.from_byte_array(byteArray);\r\n}\r\n\r\nexport async function decodeAddress(addr) {\r\n    const address = (await ergolib).Address.from_bytes(addr);\r\n    return address.to_base58();\r\n}\r\n\r\nexport async function encodeInt(num) {\r\n    return (await ergolib).Constant.from_i32(num);\r\n}\r\nexport async function decodeInt(num) {\r\n    return num.to_i32();\r\n}\r\n\r\nexport async function encodeLong(num) {\r\n    return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(num));\r\n}\r\nexport async function decodeLong(num) {\r\n    return num.to_i64().to_str();\r\n}\r\n\r\nexport async function encodeLongArray(longArray) {\r\n    return (await ergolib).Constant.from_i64_str_array(longArray);\r\n}\r\n\r\nexport async function decodeLongArray(encodedArray) {\r\n    return encodedArray.to_i64_str_array();\r\n}\r\n\r\nexport async function decodeLongArray2(encodedArray) {\r\n    const tmp = (await ergolib).Constant.from_i64_str_array(encodedArray);\r\n    return tmp.to_i64_str_array();\r\n}\r\n\r\nexport async function encodeContract(address) {\r\n    const tmp = (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address));\r\n    return tmp.ergo_tree().to_base16_bytes();\r\n}\r\n\r\nexport async function getTxReducedAndCSR(json, inputs, dataInputs, address) {\r\n    console.log(\"getTxReduced\", json, inputs, dataInputs);\r\n    const reducedTx = await getTxReduced(json, inputs, dataInputs);\r\n    // Reduced transaction is encoded with Base64\r\n    const txReducedBase64 = byteArrayToBase64(reducedTx.sigma_serialize_bytes());\r\n\r\n    var inputsB64 = inputs.map(function (chunk) {\r\n        return  window.btoa(JSONBigInt.stringify(chunk));\r\n    });\r\n    // build Cold Signing Request as described in https://github.com/ergoplatform/eips/blob/34445e3e69c12f6e6dc2507c5f7bc3fc33ca4830/eip-0019.md\r\n    const csrDict = {\r\n        \"reducedTx\":txReducedBase64,\r\n        \"sender\": address,\r\n        \"inputs\": inputsB64\r\n    };\r\n    const csrDictStr = JSONBigInt.stringify(csrDict);\r\n    var pageNumber = Math.floor(csrDictStr.length/1000);\r\n    if (csrDictStr.length%1000 !== 0) {pageNumber++};\r\n    var csrResult = \"CSR\";\r\n    if (pageNumber > 1) {\r\n        csrResult += \"/1/\"+pageNumber;\r\n    }\r\n    csrResult += \"-\"+csrDictStr;\r\n\r\n    // split by chunk of 1000 char to generates the QR codes\r\n    return [txReducedBase64.match(/.{1,1000}/g), csrResult.match(/.{1,1000}/g)];\r\n}\r\n\r\nexport async function getErgoStateContext() {\r\n    const block_headers = (await ergolib).BlockHeaders.from_json(await getLastHeaders());\r\n    const pre_header = (await ergolib).PreHeader.from_block_header(block_headers.get(0));\r\n    return new (await ergolib).ErgoStateContext(pre_header, block_headers);\r\n}\r\n\r\nexport async function getTxReduced(json, inputs, dataInputs) {\r\n    // build ergolib objects from json\r\n    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(json));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const inputDataBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    const ctx = await getErgoStateContext();\r\n    \r\n    return (await ergolib).ReducedTransaction.from_unsigned_tx(unsignedTx,inputBoxes,inputDataBoxes,ctx);\r\n}\r\n\r\nexport async function getTxReducedFromB64(txReducedB64) {\r\n    return (await ergolib).ReducedTransaction.sigma_parse_bytes(base64ToByteArray(txReducedB64));\r\n}\r\n\r\n\r\n\r\nexport async function getTxJsonFromTxReduced(txReduced){\r\n    const reducedTx = await getTxReducedFromB64(txReduced);\r\n    console.log(\"getTxJsonFromTxReduced\", reducedTx);\r\n    return await reducedTx.unsigned_tx().to_js_eip12();\r\n}\r\n\r\nexport async function signTxReduced(txReducedB64, mnemonic, address) {\r\n    const reducedTx = await getTxReducedFromB64(txReducedB64);\r\n    const wallet = await getWalletForAddress(mnemonic, address);\r\n    const signedTx = wallet.sign_reduced_transaction(reducedTx);\r\n    return await signedTx.to_js_eip12();\r\n}\r\n\r\nconst deriveSecretKey = (rootSecret, path) =>\r\n    rootSecret.derive(path); \r\n\r\nconst nextPath = (rootSecret, lastPath) => \r\n    rootSecret.derive(lastPath).path().next();\r\n\r\n\r\nexport async function signTxWithMnemonic(json, inputs, dataInputs, mnemonic, address) {\r\n    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(json));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const inputDataBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n\r\n    const wallet = await getWalletForAddress(mnemonic, address);\r\n    console.log(\"wallet\",wallet);\r\n    const ctx = await getErgoStateContext();\r\n    const signedTx = wallet.sign_transaction(ctx, unsignedTx, inputBoxes, inputDataBoxes);\r\n    return await signedTx.to_js_eip12();\r\n}\r\n\r\nasync function getWalletForAddress (mnemonic, address) {\r\n    const seed = (await ergolib).Mnemonic.to_seed(mnemonic, \"\");\r\n    const rootSecret = (await ergolib).ExtSecretKey.derive_master(seed);\r\n\r\n    const changePath = await getDerivationPathForAddress(rootSecret, address);\r\n    console.log(\"changePath\",changePath.toString());\r\n    const changeSecretKey = deriveSecretKey(rootSecret, changePath);\r\n    //const changePubKey = changeSecretKey.public_key();\r\n    //const changeAddress = (await ergolib).NetworkAddress.new((await ergolib).NetworkPrefix.Mainnet, changePubKey.to_address());\r\n    //console.log(`address: ${changeAddress.to_base58()}`);\r\n    \r\n    const dlogSecret = (await ergolib).SecretKey.dlog_from_bytes(changeSecretKey.secret_key_bytes());\r\n    const secretKeys = new (await ergolib).SecretKeys();\r\n    secretKeys.add(dlogSecret);\r\n\r\n    const wallet = (await ergolib).Wallet.from_secrets(secretKeys);\r\n    console.log(\"wallet\",wallet);\r\n    return wallet;\r\n}\r\n\r\nasync function getDerivationPathForAddress(rootSecret, address) {\r\n    let path = (await ergolib).DerivationPath.new(0, new Uint32Array([0]));\r\n    var i = 0, j = 0, found = false;\r\n    while (i<100 && !found) {\r\n        while (j<100 && !found) {\r\n            let path = (await ergolib).DerivationPath.new(i, new Uint32Array([j]));\r\n            const changeSecretKey = deriveSecretKey(rootSecret, path);\r\n            const changePubKey = changeSecretKey.public_key();\r\n            const changeAddress = (await ergolib).NetworkAddress.new((await ergolib).NetworkPrefix.Mainnet, changePubKey.to_address()).to_base58();\r\n            if (changeAddress === address) {\r\n                found = true;\r\n                break;\r\n            }\r\n            j++;\r\n        }\r\n        if (!found) i++;\r\n    }\r\n    path = (await ergolib).DerivationPath.new(i, new Uint32Array([j]));\r\n\r\n    return path;\r\n}\r\n\r\n//export async function signTx(json, inputs, dataInputs, mnemonic) {\r\n//    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(json));\r\n//    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n//    const inputDataBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n//    var secrets = new (await ergolib).SecretKeys();\r\n//    const secret = (await ergolib).SecretKey.from\r\n//    const wallet = (await ergolib).Wallet.from_mnemonic(mnemonic, \"\");\r\n//    const ctx = await getErgoStateContext();\r\n//    const signedTx = wallet.sign_transaction(ctx, unsignedTx, inputBoxes, inputDataBoxes);\r\n//    return await signedTx.to_js_eip12();\r\n//}\r\n","import React from \"react\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nexport default function ImageButton(props) {\r\n    return (\r\n        <div>\r\n            <span\r\n                className={\"material-icons \" + props.color}\r\n                onClick={props.onClick}\r\n                data-tip\r\n                data-for={props.id}\r\n            >\r\n                {props.icon}\r\n            </span>\r\n            <ReactTooltip id={props.id} place=\"top\" effect=\"solid\" html={true} >\r\n                {props.tips}\r\n            </ReactTooltip>\r\n            &nbsp;\r\n        </div>\r\n    )\r\n\r\n}","import ImageButton from \"./ImageButton\"\r\n\r\n\r\n\r\nexport default function InputString(props) {\r\n    return (\r\n        <div className=\"flew-row d-flex align-content-center p-1\">\r\n            \r\n            <label className=\"col-sm\" htmlFor=\"ref\" >{props.label}:&nbsp;</label>\r\n            <div className=\"col-sm\">\r\n            <input className=\"form-control grey-input\"\r\n                id=\"ref\"\r\n                pattern=\"[a-zA-Z0-9]*\"\r\n                onChange={e => props.onChange(e.target.value)}\r\n                value={props.value} \r\n                type={props.type} \r\n                />\r\n                </div>\r\n            &nbsp;\r\n            { props.onClick ?\r\n                <ImageButton color=\"blue\" icon=\"download\" tips=\"Fetch explorer\" onClick={e => props.onClick()}/>\r\n                : null\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import ImageButton from './ImageButton';\r\n\r\nexport default function ImageButtonLabeled(props) {\r\n    return (\r\n        <div className=\"d-flex flew-row\">\r\n            &nbsp;\r\n            <ImageButton\r\n                id={props.id}\r\n                color={props.color}\r\n                icon={props.icon}\r\n                tips={props.label}\r\n                onClick={props.onClick}\r\n            />\r\n            &nbsp;{props.label}\r\n        </div>\r\n    )\r\n\r\n}\r\n","\r\nimport ImageButtonLabeled from \"./ImageButtonLabeled\"\r\n\r\n\r\nexport default function InputAddress(props) {\r\n    \r\n    return (\r\n        <div className=\"flew-row d-flex align-items-center\">\r\n            <label htmlFor=\"input-address\" >{props.label}:&nbsp;</label>\r\n            <div className=\"col-sm\">\r\n            <input className=\"form-control grey-input\"\r\n                id=\"input-address\"\r\n                pattern=\"[a-zA-Z0-9]*\"\r\n                onChange={e => props.onChange(e.target.value)}\r\n                value={props.value} />\r\n            </div>\r\n            &nbsp;\r\n            <div className=\"d-flex flex-row align-items-center\">\r\n\r\n                <ImageButtonLabeled id=\"fetch-explorer\" color=\"blue\" icon=\"download\" label=\"Fetch explorer\" onClick={e => props.onClick()}/>\r\n                <ImageButtonLabeled id=\"fetch-yoroi\" color=\"blue\" icon=\"download\" label=\"Fetch dApp connector\" onClick={e => props.fetchYoroi()}/>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { get } from './rest';\r\n\r\nexport const trueAddress = '4MQyML64GnzMxZgm'; // dummy address to get unsigned tx from node, we only care about the boxes though in this case\r\nexport const explorerApi = 'https://api.ergoplatform.com/api/v0';\r\n\r\nasync function getRequest(url) {\r\n    return get(explorerApi + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nexport async function currentHeight() {\r\n    return getRequest('/blocks?limit=1')\r\n        .then(res => res.data)\r\n        .then(res => res.items[0].height);\r\n}\r\n\r\nexport function unspentBoxesFor(address) {\r\n    return getRequest(`/transactions/boxes/byAddress/unspent/${address}`).then(\r\n        (res) => res.data\r\n    );\r\n}\r\n\r\nexport function boxById(id) {\r\n    return getRequest(`/transactions/boxes/${id}`).then((res) => res.data);\r\n}\r\n\r\nexport function txById(id) {\r\n    return getRequest(`/transactions/${id}`).then((res) => res.data);\r\n}\r\n\r\nexport async function getSpendingTx(boxId) {\r\n    const data = getRequest(`/transactions/boxes/${boxId}`);\r\n    return data\r\n        .then((res) => res.data)\r\n        .then((res) => res.spentTransactionId)\r\n        .catch((_) => null);\r\n}\r\n\r\nexport function getUnconfirmedTxsFor(addr) {\r\n    return getRequest(\r\n        `/transactions/unconfirmed/byAddress/${addr}`\r\n    )\r\n        .then((res) => res.data)\r\n        .then((res) => res.items);\r\n}\r\n\r\nexport function getTokenBox(addr) {\r\n    return getRequest(\r\n        `/assets/${addr}/issuingBox`\r\n    )\r\n        .then((res) => res.data[0])\r\n}\r\n\r\nexport function getBalanceFor(addr, token = null) {\r\n    return getRequest(\r\n        `/addresses/${addr}`\r\n    )\r\n        .then((res) => res.data)\r\n        .then((res) => res.transactions)\r\n        .then(res => {\r\n            if (!token) return res.confirmedBalance;\r\n            let tok = res.confirmedTokensBalance.filter(tok => tok.tokenId === token);\r\n            if (tok.length === 0) return 0;\r\n            else return tok[0].amount;\r\n        });\r\n}\r\n\r\n\r\n","import { isDict } from \"../utils/utils\";\r\nimport { boxById, currentHeight } from \"./explorer\";\r\nimport { encodeContract } from \"./serializer\";\r\n\r\n/* global BigInt */\r\n\r\nexport function parseUtxo(json, addExtention = true, mode = 'input') {\r\n    console.log(json)\r\n    if (json === undefined) {\r\n        return {};\r\n    }\r\n    var res = {};\r\n    if (mode === 'input') {\r\n        if (\"id\" in json) {\r\n            res[\"boxId\"] = json.id;\r\n        } else {\r\n            res[\"boxId\"] = json.boxId;\r\n        }\r\n    }\r\n    \r\n    res[\"value\"] = json.value.toString();\r\n    res[\"ergoTree\"] = json.ergoTree;\r\n\r\n    if (Array.isArray(json.assets)){\r\n        res[\"assets\"] = json.assets.map(asset => ({\r\n            tokenId: asset.tokenId,\r\n            amount: asset.amount.toString(),\r\n        }));\r\n    } else {\r\n        res[\"assets\"] = [];\r\n    }\r\n\r\n    res[\"additionalRegisters\"] = parseAdditionalRegisters(json.additionalRegisters);\r\n    res[\"creationHeight\"] = json.creationHeight;\r\n\r\n    if (mode === 'input') {\r\n        if (\"txId\" in json) {\r\n            res[\"transactionId\"] = json.txId;\r\n        } else {\r\n            res[\"transactionId\"] = json.transactionId;\r\n        }\r\n        res[\"index\"] = json.index;\r\n    }\r\n\r\n    if (addExtention) {\r\n        res[\"extension\"] = {};\r\n    }\r\n    return res;\r\n}\r\n\r\nexport function parseUtxos(utxos, addExtention, mode = 'input') {\r\n    \r\n    var utxosFixed = [];\r\n    for (const i in utxos) {\r\n        utxosFixed.push(parseUtxo(utxos[i], addExtention, mode))\r\n    }\r\n    return utxosFixed;\r\n}\r\n\r\nexport async function enrichUtxos(utxos) {\r\n    var utxosFixed = [];\r\n    \r\n    for (const i in utxos) {\r\n        var key = \"boxId\";\r\n        if (\"id\" in utxos[i]) {\r\n            key = \"id\";\r\n        }\r\n        const box = await boxById(utxos[i][key]);\r\n        utxosFixed.push(parseUtxo(box));\r\n    }\r\n    return utxosFixed;\r\n}\r\n\r\nfunction parseAdditionalRegisters(json) {\r\n    var registterOut = {};\r\n    Object.entries(json).forEach(([key, value]) => {\r\n        if (isDict(value)) {\r\n            registterOut[key] = value[\"serializedValue\"];\r\n        } else {\r\n            registterOut[key] = value;\r\n        }\r\n    });\r\n    return registterOut;\r\n}\r\n\r\nfunction parseInputSwagger(input) {\r\n    return {\r\n        boxId: input.boxId,\r\n        extension: {},\r\n    }\r\n}\r\n\r\nfunction parseSignedInputSwagger(input) {\r\n    return {\r\n        boxId: input.boxId,\r\n        spendingProof: input.spendingProof,\r\n        extension: {},\r\n    }\r\n}\r\n\r\nexport function generateSwaggerTx(json) {\r\n    console.log(\"generateSwaggerTx\",json);\r\n    var res = {};\r\n\r\n    var newInsputs = [];\r\n    for (const input of json.inputs) {\r\n        newInsputs.push(parseSignedInputSwagger(input));\r\n    }\r\n    if (json.hasOwnProperty(\"tx_id\")) {\r\n        res[\"id\"] = json.tx_id;\r\n    }\r\n    res[\"inputs\"] = newInsputs;\r\n    if (json.hasOwnProperty(\"data_inputs\")) {\r\n        res[\"dataInputs\"] = json.data_inputs;\r\n    } else {\r\n        res[\"dataInputs\"] = json.dataInputs;\r\n    }\r\n    \r\n    res[\"outputs\"] = json.outputs;\r\n    return res;\r\n}\r\n\r\nexport function getUtxosListValue(utxos) {\r\n    return utxos.reduce((acc, utxo) => acc += BigInt(utxo.value), BigInt(0));\r\n}\r\n\r\nexport function getTokenListFromUtxos(utxos) {\r\n    var tokenList = {};\r\n    for (const i in utxos) {\r\n        for (const j in utxos[i].assets) {\r\n            if (utxos[i].assets[j].tokenId in tokenList) {\r\n                tokenList[utxos[i].assets[j].tokenId] = parseInt(tokenList[utxos[i].assets[j].tokenId]) + parseInt(utxos[i].assets[j].amount);\r\n            } else {\r\n                tokenList[utxos[i].assets[j].tokenId] = parseInt(utxos[i].assets[j].amount);\r\n            }\r\n        }\r\n    }\r\n    return tokenList;\r\n}\r\n\r\nexport function getMissingErg(inputs, outputs) {\r\n    const amountIn = getUtxosListValue(inputs);\r\n    const amountOut = getUtxosListValue(outputs);\r\n    if (amountIn >= amountOut) {\r\n        return amountIn - amountOut;\r\n    } else {\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function getMissingTokens(inputs, outputs) {\r\n    const tokensIn = getTokenListFromUtxos(inputs);\r\n    const tokensOut = getTokenListFromUtxos(outputs);\r\n    var res = {};\r\n    console.log(\"getMissingTokens\", tokensIn, tokensOut);\r\n    if (tokensIn !== {}) {\r\n        for (const token in tokensIn) {\r\n            if (tokensOut !== {} && token in tokensOut) {\r\n                if (tokensIn[token] - tokensOut[token] > 0) {\r\n                    res[token] = tokensIn[token] - tokensOut[token];\r\n                }\r\n            } else {\r\n                res[token] = tokensIn[token];\r\n            }\r\n        }\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\nexport function buildTokenList(tokens) {\r\n    var res = [];\r\n    if (tokens !== {}) {\r\n        for (const i in tokens) {\r\n            res.push({ \"tokenId\": i, \"amount\": tokens[i].toString() });\r\n        }\r\n    };\r\n    return res;\r\n}\r\n\r\nexport async function buildBalanceBox(inputs, outputs, address) {\r\n    const missingErgs = getMissingErg(inputs, outputs).toString();\r\n    const contract = await encodeContract(address);\r\n    const tokens = buildTokenList(getMissingTokens(inputs, outputs));\r\n    const height = await currentHeight();\r\n    console.log(\"buildBalanceBox\",missingErgs,contract,tokens,height)\r\n\r\n    return {\r\n        value: missingErgs,\r\n        ergoTree: contract,\r\n        assets: tokens,\r\n        additionalRegisters: {},\r\n        creationHeight: height,\r\n        extension: {}\r\n    };\r\n}\r\n\r\n\r\n","\r\nexport function isDict(v) {\r\n    return typeof v === 'object' && v !== null && !(v instanceof Array) && !(v instanceof Date);\r\n}\r\n\r\nexport function formatLongString(str, num) {\r\n    if (str.length > 2 * num) {\r\n        return str.substring(0, num) + \"...\" + str.substring(str.length - num, str.length);\r\n    } else {\r\n        return str;\r\n    }\r\n}\r\n","import { getUtxosListValue, getTokenListFromUtxos } from '../ergo-related/utxos';\r\n\r\nexport default function UtxosSummary(props) {\r\n\r\n    const ergAmount = parseFloat(parseInt(getUtxosListValue(props.list)) / 1000000000).toFixed(4);\r\n    const tokenDict = getTokenListFromUtxos(props.list);\r\n    return (\r\n        <div className=\"card m-1 p-1\" >\r\n            <div className=\"d-flex flex-row\">\r\n            <h6>Total selected:&nbsp; {ergAmount} ERG</h6>\r\n            </div>\r\n            { Object.keys(tokenDict).length > 0 ?\r\n            <table border=\"1\" >\r\n                <thead>\r\n                    <tr><td><h6>Tokens</h6></td>\r\n                        <td><h6>Amount</h6></td></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        Object.entries(tokenDict).map(([key, value]) => (\r\n                            <tr key={key}><td>{key}</td><td>{value}</td></tr>\r\n                        ))\r\n                    }\r\n                </tbody>\r\n            </table>\r\n            : <h6>No token in selected {props.name} boxes</h6>\r\n            }\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react';\r\nimport ReactJson from 'react-json-view';\r\nimport ImageButton from './ImageButton';\r\n\r\n\r\nexport default class OutputEditable extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            onEdit: props.onEdit,\r\n            json: props.json,\r\n            delete: props.delete,\r\n            key: props.key,\r\n            id: props.id,\r\n            moveUp: props.moveUp,\r\n            moveDown: props.moveDown,\r\n        };\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            json: nextProps.json,\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"card m-1 p-1 row\" key={this.state.key} id={this.state.id}>\r\n                {this.state.delete ?\r\n                    <div className=\"d-flex \">\r\n                        <h6>OUTPUTS({this.state.id})</h6>\r\n                        &nbsp;\r\n                        <div className=\"p-1 d-flex flex-row\">\r\n                            <ImageButton id=\"move-up\" color=\"green\" onClick={() => { this.state.moveUp(this.state.id) }} icon=\"arrow_upward\" tips=\"Move up\"/>\r\n                            <ImageButton id=\"move-down\" color=\"green\" onClick={() => { this.state.moveDown(this.state.id) }} icon=\"arrow_downward\" tips=\"Move down\"/>\r\n                            <ImageButton id=\"delete\" color=\"red\" onClick={() => { this.state.delete(this.state.id) }} icon=\"clear\" tips=\"Delete output box\"/>\r\n                        </div>\r\n                    </div>\r\n                    : null\r\n                }\r\n                <ReactJson src={this.state.json}\r\n                    theme=\"monokai\" \r\n                    collapsed={false} \r\n                    name={false}\r\n                    collapseStringsAfterLength={25}\r\n                    onEdit={(item) => {\r\n                        this.state.onEdit(this.state.id, item.updated_src);\r\n                        this.setState({ json: item.updated_src });\r\n                    }}\r\n                    onAdd={(item) => {\r\n                        if (item.name === \"assets\") {\r\n                            const defaultToken = { \"tokenId\": \"\", \"amount\": 0 };\r\n                            this.setState(prevState => ({\r\n                                json: {\r\n                                    ...prevState.json,\r\n                                    [\"assets\"]: [...prevState.json.assets, defaultToken]\r\n                                }\r\n                            }));\r\n                        } else {\r\n                            this.setState({ json: item.updated_src });\r\n                        }\r\n                    }}\r\n                    onDelete={(item) => {\r\n                        console.log(\"onDelete\", item)\r\n                        this.setState({ json: item.updated_src });\r\n                    }}\r\n                />\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport OutputEditable from './OutputEditable';\r\nimport ImageButton from './ImageButton';\r\nimport { encodeStr, encodeAddress, encodeInt, encodeLong, encodeLongArray, encodeContract } from '../ergo-related/serializer';\r\n\r\nexport default class OutputBoxCreator extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            onEdit: props.onChange,\r\n            reset: props.reset,\r\n            json: props.json,\r\n            add: props.add,\r\n            fee: props.fee,\r\n            balance: props.balance,\r\n            collByte: '',\r\n            collByteEncoded: '',\r\n            sigmaProp: '',\r\n            sigmaPropEncoded: '',\r\n            int: '',\r\n            intEncoded: '',\r\n            long: '',\r\n            longEncoded: '',\r\n            longArray: [\"1\", \"0\"],\r\n            longArrayEncoded: '',\r\n            addressContract: '',\r\n            addressContractEncoded: '',\r\n\r\n        };\r\n\r\n        this.setLongEncoded = this.setLongEncoded.bind(this);\r\n        this.setLongArrayEncoded = this.setLongArrayEncoded.bind(this);\r\n        this.setIntEncoded = this.setIntEncoded.bind(this);\r\n        this.setSigmaPropEncoded = this.setSigmaPropEncoded.bind(this);\r\n        this.setCollByteEncoded = this.setCollByteEncoded.bind(this);\r\n        this.setNanoErg = this.setNanoErg.bind(this);\r\n        this.setAddressContractEncoded = this.setAddressContractEncoded.bind(this);\r\n        //this.reset = this.reset.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            json: nextProps.json,\r\n        });\r\n    }\r\n\r\n    setLongArrayEncoded = (item) => {\r\n        this.setState({\r\n            longArray: item.target.value.split(\",\"),\r\n        })\r\n        encodeLongArray(item.target.value.split(\",\")).then(encoded => {\r\n            this.setState({\r\n                longArrayEncoded: encoded.encode_to_base16(),\r\n            })\r\n        }).catch(e => {\r\n            console.log(e);\r\n            this.setState({\r\n                longArrayEncoded: \"Invalid long array\",\r\n            })\r\n        })\r\n    }\r\n\r\n    setLongEncoded = (item) => {\r\n        this.setState({\r\n            long: parseInt(item.target.value),\r\n        })\r\n        encodeLong(item.target.value).then(encoded => {\r\n            this.setState({\r\n                longEncoded: encoded.encode_to_base16(),\r\n            })\r\n        }).catch(e => {\r\n            console.log(e);\r\n            this.setState({\r\n                longEncoded: \"Invalid long\",\r\n            })\r\n        })\r\n    }\r\n\r\n    setIntEncoded = (item) => {\r\n        this.setState({\r\n            int: parseInt(item.target.value),\r\n        })\r\n        encodeInt(item.target.value).then(encoded => {\r\n            console.log(encoded, item);\r\n            this.setState({\r\n                intEncoded: encoded.encode_to_base16(),\r\n            })\r\n        }).catch(e => {\r\n            console.log(\"error\", e);\r\n            this.setState({\r\n                intEncoded: \"Invalid integer\",\r\n            })\r\n        })\r\n    }\r\n\r\n    setSigmaPropEncoded = (item) => {\r\n        this.setState({\r\n            sigmaProp: item.target.value,\r\n        })\r\n        encodeAddress(item.target.value).then(encoded => {\r\n            console.log(encoded, item);\r\n            this.setState({\r\n                sigmaPropEncoded: encoded.encode_to_base16(),\r\n            })\r\n        }).catch(e => {\r\n            console.log(e);\r\n            this.setState({\r\n                sigmaPropEncoded: \"Invalid address\",\r\n            })\r\n        })\r\n    }\r\n\r\n    setAddressContractEncoded = (item) => {\r\n        this.setState({\r\n            addressContract: item.target.value,\r\n        })\r\n        encodeContract(item.target.value).then(encoded => {\r\n            console.log(encoded, item);\r\n            this.setState({\r\n                addressContractEncoded: encoded,\r\n            })\r\n        }).catch(e => {\r\n            console.log(e);\r\n            this.setState({\r\n                addressContractEncoded: \"Invalid address\",\r\n            })\r\n        })\r\n    }\r\n\r\n    setCollByteEncoded = (item) => {\r\n        this.setState({\r\n            collByte: item.target.value,\r\n        })\r\n        encodeStr(item.target.value).then(encoded => {\r\n            console.log(encoded, item);\r\n            this.setState({\r\n                collByteEncoded: encoded,\r\n            })\r\n        })\r\n    }\r\n\r\n    setNanoErg = (item) => {\r\n        this.setState({\r\n            erg: item.target.value,\r\n        })\r\n        encodeStr(item.target.value).then(encoded => {\r\n            this.setState({\r\n                nanoErg: parseInt(parseFloat(item.target.value) * 1000000000),\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div >\r\n                <div className=\"card p-1 m-1\">\r\n                    \r\n                    <table >\r\n                        <thead>\r\n                            <tr><th><h6>Converter</h6></th><th>Value</th><th>Converted</th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>ERG &gt; NanoERG</td>\r\n                                <td>\r\n                                    <input className=\"grey-input\" value={this.state.erg}\r\n                                        type=\"number\"\r\n                                        step=\"0.000000001\" min=\"0\" max=\"10000000\"\r\n                                        onChange={this.setNanoErg} />\r\n                                </td>\r\n                                <td>\r\n                                    <input className=\"w-100 grey-input\" defaultValue={this.state.nanoErg} readOnly />\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Coll[byte]</td>\r\n                                <td>\r\n                                    <input className=\"grey-input\" value={this.state.collByte}\r\n                                        onChange={this.setCollByteEncoded} />\r\n                                </td>\r\n                                <td>\r\n                                    <input className=\"w-100 grey-input\" defaultValue={this.state.collByteEncoded} readOnly />\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>SigmaProp</td>\r\n                                <td>\r\n                                    <input className=\"grey-input\" value={this.state.sigmaProp}\r\n                                        onChange={this.setSigmaPropEncoded} />\r\n                                </td>\r\n                                <td>\r\n                                    <input className=\"w-100 grey-input\" defaultValue={this.state.sigmaPropEncoded} readOnly />\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Int</td>\r\n                                <td>\r\n                                    <input className=\"grey-input\" value={this.state.int}\r\n                                        type=\"number\"\r\n                                        step=\"1\" min=\"0\" max=\"100000000000000000\"\r\n                                        onChange={this.setIntEncoded} />\r\n                                </td>\r\n                                <td>\r\n                                    <input className=\"w-100 grey-input\" defaultValue={this.state.intEncoded} readOnly />\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Long</td>\r\n                                <td>\r\n                                    <input className=\"grey-input\" value={this.state.long}\r\n                                        type=\"number\"\r\n                                        step=\"1\" min=\"0\" max=\"100000000000000000\"\r\n                                        onChange={this.setLongEncoded} />\r\n                                </td>\r\n                                <td>\r\n                                    <input className=\"w-100 grey-input\" defaultValue={this.state.longEncoded} readOnly />\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Coll[Long]</td>\r\n                                <td>\r\n                                    <input className=\"grey-input\" value={this.state.longArray}\r\n                                        onChange={this.setLongArrayEncoded} />\r\n                                </td>\r\n                                <td>\r\n                                    <input className=\"w-100 grey-input\" defaultValue={this.state.longArrayEncoded} readOnly />\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Pay to address</td>\r\n                                <td>\r\n                                    <input className=\"grey-input\" value={this.state.addressContract}\r\n                                        onChange={this.setAddressContractEncoded} />\r\n                                </td>\r\n                                <td>\r\n                                    <input className=\"w-100 grey-input\" defaultValue={this.state.addressContractEncoded} readOnly />\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                <div className=\"card p-1 m-1\">\r\n                    <div className=\"d-flex \">\r\n                        <h6>New OUTPUT box</h6>\r\n                        &nbsp;\r\n                        <div className=\"d-flex flex-row\">\r\n                            <ImageButton id=\"reset\" color=\"red\" onClick={this.state.reset} icon=\"restart_alt\" tips=\"Reset\" />\r\n                            <ImageButton id=\"fee\" color=\"blue\" onClick={this.state.fee} icon=\"monetization_on\" tips=\"Setup transaction fee output box<br/>(default 0.002 ERG)\" />\r\n                            <ImageButton id=\"balance\" color=\"blue\" onClick={this.state.balance} icon=\"balance\" tips=\"Setup a change box to balance the transaction.<br/>Add not attribuated ERG and tokens in inputs to the box.<br/>Set the ergoTree to the configured address.\" />\r\n                            <ImageButton id=\"add\" color=\"green\" onClick={this.state.add} icon=\"add_box\" tips=\"Add to transation output list\" />\r\n                        </div>\r\n                    </div>\r\n                    <OutputEditable json={this.state.json} onEdit={this.state.onEdit} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import ImageButtonLabeled from './ImageButtonLabeled';\r\nimport { getUtxosListValue, getTokenListFromUtxos } from '../ergo-related/utxos';\r\n\r\nexport default function TransactionSummary(props) {\r\n    const inputNanoErgAmount = parseInt(getUtxosListValue(props.json.inputs));\r\n    const outputsNanoErgAmount = parseInt(getUtxosListValue(props.json.outputs));\r\n    const inputTokens = getTokenListFromUtxos(props.json.inputs);\r\n    const outputTokens = getTokenListFromUtxos(props.json.outputs);\r\n\r\n    var tokenDiffArray = {};\r\n    for (const [key, value] of Object.entries(inputTokens)) {\r\n        tokenDiffArray[key] = [parseInt(value), 0];\r\n    }\r\n    for (const [key, value] of Object.entries(outputTokens)) {\r\n        if (key in tokenDiffArray) {\r\n            tokenDiffArray[key] = [tokenDiffArray[key][0], parseInt(value)];\r\n        } else {\r\n            tokenDiffArray[key] = [0, parseInt(value)];\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"card m-1 p-1\" >\r\n            <h6>Transaction summary</h6>\r\n\r\n            <table border=\"1\" >\r\n                <thead>\r\n                    <tr><td><h6>Asset</h6></td>\r\n                        <td><h6>Inputs</h6></td>\r\n                        <td><h6>Output</h6></td>\r\n                        <td><h6>Check</h6></td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr key=\"tx-sum-2\">\r\n                        <td>ERGs</td><td>{parseFloat(inputNanoErgAmount / 1000000000).toFixed(9).replace(/(\\.0+|0+)$/, '')}</td><td>{parseFloat(outputsNanoErgAmount / 1000000000).toFixed(9).replace(/(\\.0+|0+)$/, '')}</td>\r\n                        <td>\r\n                            {(inputNanoErgAmount === outputsNanoErgAmount) ?\r\n                                <ImageButtonLabeled id=\"nanoerg-diff\" color=\"green\" icon=\"price_check\" label=\"OK\" />\r\n                                : <ImageButtonLabeled id=\"nanoerg-diff\" color=\"red\" icon=\"error_outline\" label=\"Wrong erg balance\" />\r\n                            }\r\n                        </td>\r\n                    </tr>\r\n                    {\r\n                        Object.entries(tokenDiffArray).map(([key, value]) => (\r\n                            <tr key={key}><td>{key}</td><td>{value[0]}</td><td>{value[1]}</td><td>\r\n                                {\r\n                                    (value[0] === value[1]) ?\r\n                                    <ImageButtonLabeled id=\"token-diff\" color=\"green\" icon=\"verified\" label=\"OK\" />\r\n                                        : (value[0] > value[1]) ?\r\n                                            <ImageButtonLabeled id=\"token-diff\" color=\"orange\" icon=\"warning_amber\" label=\"Tokens burned in output\" />\r\n                                            : <ImageButtonLabeled id=\"token-diff\" color=\"orange\" icon=\"error_outline\" label=\"Not enough token in input\" />\r\n                                }\r\n                            </td>\r\n                            </tr>\r\n                        ))\r\n                    }\r\n\r\n                </tbody>\r\n\r\n            </table>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react';\r\nimport QRCode from 'qrcode.react';\r\n\r\nexport default class QR extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: props.value,\r\n            key: props.key,\r\n            size: 256,\r\n        };\r\n        this.zoomInOut = this.zoomInOut.bind(this);\r\n    }\r\n\r\n    zoomInOut() {\r\n        if (this.state.size === 256) {\r\n            this.setState({size: 512});\r\n        } else {\r\n            this.setState({size: 256});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"m-1 p-1 \">\r\n            {\r\n               this.state.value !== '' ? \r\n               <QRCode value={this.state.value} \r\n               size={this.state.size} \r\n               includeMargin={true} onClick={this.zoomInOut}/> : null\r\n            }\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\n","\r\nimport QR from \"./QRCode\";\r\n\r\nexport default function QRCodes(props) {\r\n    return (\r\n        <div className=\"d-flex flex-wrap\">\r\n            {props.list.map((item, index) => (\r\n                <div key={index} className=\"m-2\" >\r\n                    <QR value={item}  key={index}/>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo_telegram.24d175fe.svg\";","export default __webpack_public_path__ + \"static/media/dApps.3d65efcf.svg\";","import logo_telegram from \"../resources/logo_telegram.svg\";\r\nimport GitHub from \"../resources/GitHub.png\";\r\nimport dApps from \"../resources/dApps.svg\";\r\n\r\n\r\nexport default function Footer() {\r\n    return (\r\n        <footer class=\"align-items-center\">\r\n            <div class=\"col-md-12 text-muted \">\r\n                © 2021 ThierryM1212&nbsp;-&nbsp;\r\n                <a href=\"https://t.me/ThierryM1212\" target=\"_blank\">\r\n                    <img src={logo_telegram} width=\"20\" height=\"20\" class=\"d-inline-block align-top\" alt=\"\" />\r\n                </a>\r\n                &nbsp;\r\n                <a href=\"https://github.com/ThierryM1212/\" target=\"_blank\">\r\n                    <img src={GitHub} width=\"20\" height=\"20\" class=\"d-inline-block align-top\" alt=\"\" />\r\n                </a>\r\n                &nbsp;\r\n                <a href=\"https://dapp.ergo.ga/\" target=\"_blank\">\r\n                    <img src={dApps} width=\"50\" height=\"20\" class=\"d-inline-block align-top\" alt=\"\" />\r\n                </a>\r\n            </div>\r\n        </footer>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII=\"","\r\nimport ReactJson from 'react-json-view';\r\nimport ImageButton from './ImageButton';\r\nimport { formatLongString } from '../utils/utils';\r\n\r\nexport function UtxoItem(props) {\r\n    return (\r\n        <div className=\"d-flex flex-column m-1 p-1\">\r\n            { props.id !== undefined ? <h6>INPUTS({props.id})</h6> : null }\r\n            <div className=\"d-flex flex-row\">\r\n                <div className=\"monospace\">Box id: {formatLongString(props.boxId, 15)}&nbsp;</div>\r\n                {\r\n                    props.moveUp ? <ImageButton id=\"move-up\" color=\"green\"\r\n                        onClick={() => props.moveUp(props.id)}\r\n                        icon=\"arrow_upward\"\r\n                        tips=\"Move up\"\r\n                    />\r\n                        : null\r\n                }\r\n                {\r\n                    props.moveDown ? <ImageButton id=\"move-up\" color=\"green\"\r\n                        onClick={() => props.moveDown(props.id)}\r\n                        icon=\"arrow_downward\"\r\n                        tips=\"Move down\"\r\n                    />\r\n                        : null\r\n                }\r\n                <ImageButton id=\"add\" color={props.color}\r\n                    onClick={() => props.action(props.json)}\r\n                    icon={props.icon}\r\n                    tips={props.tips} />\r\n                {\r\n                    props.action2 ? <ImageButton id=\"add2\" color={props.color}\r\n                        onClick={() => props.action2(props.json)}\r\n                        icon=\"post_add\"\r\n                        tips=\"Add to data inputs\"\r\n                    />\r\n                        : null\r\n                }\r\n                \r\n            </div>\r\n            <ReactJson\r\n                src={props.json}\r\n                theme=\"monokai\"\r\n                collapsed={true}\r\n                name=\"box\"\r\n                collapseStringsAfterLength={25}\r\n            />\r\n            <div className=\"d-flex justify-content-between \">\r\n                <span>{parseFloat(parseInt(props.json.value) / 1000000000).toFixed(4)} ERG </span>\r\n                <span>{props.json.assets.length} tokens</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { closeAlert, waitingAlert, errorAlert, displayTransaction } from '../utils/Alerts';\r\n\r\n/* global ergo */\r\n\r\n\r\nexport async function isYoroiConnected() {\r\n    console.log('isYoroiConnected');\r\n    try {\r\n        return await window.ergo_check_read_access();\r\n    } catch (e) {\r\n        console.error(e);\r\n        return false;\r\n    }\r\n}\r\n\r\n// Connect to Yoroi, return True is success\r\nexport async function connectYoroi() {\r\n    const alreadyConnected = await isYoroiConnected();\r\n    console.log('connectYoroi', alreadyConnected);\r\n    if (!alreadyConnected) {\r\n        try{\r\n            return await window.ergo_request_read_access().then(access_granted => {\r\n                return access_granted;\r\n            });\r\n        } catch (e) {\r\n            errorAlert(\"Yoroi nightly extension not found\", e);\r\n        }\r\n    } else return alreadyConnected;\r\n}\r\n\r\nexport async function getChangeAddress() {\r\n    const yoroiConnected = await connectYoroi();\r\n    if (yoroiConnected) {\r\n        const address = await ergo.get_change_address();\r\n        return address;\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function yoroiSignTx(tx) {\r\n    const alert = waitingAlert(\"Connecting to Yoroi...\");\r\n    const yoroiAccessGranted = await connectYoroi();\r\n    console.log('yoroiSignTx', yoroiAccessGranted);\r\n    if (yoroiAccessGranted) {\r\n        alert.update({ title: \"Waiting for transaction signing...\" });\r\n        processTx(tx).then(txId => {\r\n            closeAlert(alert);\r\n            if (txId) {\r\n                console.log('[txId]', txId);\r\n                displayTransaction(txId);\r\n            } else {\r\n                const title = \"Transaction not signed\";\r\n                const message = \"Something went wrong, the transaction was not sent.\";\r\n                errorAlert(title, message);\r\n            }\r\n        })\r\n    } else {\r\n        closeAlert(alert);\r\n        console.log('Wallet access denied');\r\n    }\r\n}\r\n\r\nexport async function signTx(txToBeSigned) {\r\n    try {\r\n        console.log(\"signTx\", txToBeSigned);\r\n        return await ergo.sign_tx(txToBeSigned);\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function submitTx(txToBeSubmitted) {\r\n    try {\r\n        console.log(\"submitTx\", txToBeSubmitted);\r\n        return await ergo.submit_tx(txToBeSubmitted);\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function processTx(txToBeProcessed) {\r\n    const msg = s => {\r\n        console.log('[processTx]', s);\r\n    };\r\n    const signedTx = await signTx(txToBeProcessed);\r\n    if (!signedTx) {\r\n        console.error(`No signed transaction found`);\r\n        return null;\r\n    }\r\n    msg(\"Transaction signed - awaiting submission\");\r\n    const txId = await submitTx(signedTx);\r\n    if (!txId) {\r\n        console.log(`No submitted tx ID`);\r\n        return null;\r\n    }\r\n    msg(\"Transaction submitted \");\r\n    return txId;\r\n}\r\n\r\nexport async function getAllUtxos() {\r\n    return await ergo.get_utxos();\r\n}\r\n\r\n","import React, { Fragment } from 'react';\r\nimport InputString from './components/InputString';\r\nimport InputAddress from './components/InputAddress';\r\nimport UtxosSummary from './components/UtxosSummary';\r\nimport OutputBoxCreator from './components/OutputBoxCreator';\r\nimport OutputEditable from './components/OutputEditable';\r\nimport TransactionSummary from './components/TransactionSummary';\r\nimport ImageButton from './components/ImageButton';\r\nimport ImageButtonLabeled from './components/ImageButtonLabeled';\r\nimport QRCodes from './components/QRCodes';\r\nimport Footer from './components/Footer';\r\nimport ReactJson from 'react-json-view';\r\nimport { UtxoItem } from './components/UtxoItem';\r\nimport { unspentBoxesFor, boxById } from './ergo-related/explorer';\r\nimport { getAllUtxos, connectYoroi, getChangeAddress, yoroiSignTx, signTx, submitTx } from './ergo-related/yoroi';\r\nimport { parseUtxo, parseUtxos, generateSwaggerTx, enrichUtxos, buildBalanceBox } from './ergo-related/utxos';\r\nimport { getTxReducedAndCSR, getTxJsonFromTxReduced, signTxReduced, signTxWithMnemonic } from './ergo-related/serializer';\r\nimport JSONBigInt from 'json-bigint';\r\nimport { displayTransaction, errorAlert, waitingAlert } from './utils/Alerts';\r\nimport { sendTx } from './ergo-related/node';\r\n/* global BigInt */\r\n\r\nconst initCreateBox = {\r\n    value: '0',\r\n    ergoTree: '',\r\n    assets: [],\r\n    additionalRegisters: {},\r\n    creationHeight: 600000,\r\n    extension: {}\r\n};\r\n\r\nconst feeBox = {\r\n    value: \"2000000\",\r\n    ergoTree: \"1005040004000e36100204a00b08cd0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798ea02d192a39a8cc7a701730073011001020402d19683030193a38cc7b2a57300000193c2b2a57301007473027303830108cdeeac93b1a57304\",\r\n    assets: [],\r\n    additionalRegisters: {},\r\n    creationHeight: 600000,\r\n    extension: {}\r\n}\r\n\r\n\r\nexport default class TxBuilder extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            address: props.address,\r\n            setAddress: props.setAddress,\r\n            addressBoxList: [],\r\n            otherBoxList: [],\r\n            outputList: [],\r\n            selectedBoxList: [],\r\n            selectedDataBoxList: [],\r\n            searchBoxId: props.searchBoxId,\r\n            setSearchBoxId: props.setSearchBoxId,\r\n            searchAddress: props.searchAddress,\r\n            setSearchAddress: props.setSearchAddress,\r\n            outputCreateJson: initCreateBox,\r\n            txJsonRaw: '',\r\n            txReduced: [],\r\n            CSR: [],\r\n            signedTransaction: {},\r\n            mnemonic: '',\r\n        };\r\n        this.fetchUtxos = this.fetchUtxos.bind(this);\r\n        this.fetchByBoxId = this.fetchByBoxId.bind(this);\r\n        this.fetchByAddress = this.fetchByAddress.bind(this);\r\n        this.selectInputBox = this.selectInputBox.bind(this);\r\n        this.selectDataInputBox = this.selectDataInputBox.bind(this);\r\n        this.unSelectInputBox = this.unSelectInputBox.bind(this);\r\n        this.unSelectDataInputBox = this.unSelectDataInputBox.bind(this);\r\n        this.fetchYoroi = this.fetchYoroi.bind(this);\r\n        this.addOutputBox = this.addOutputBox.bind(this);\r\n        this.resetCreateBoxJson = this.resetCreateBoxJson.bind(this);\r\n        this.unSelectOutoutBox = this.unSelectOutoutBox.bind(this);\r\n        this.moveOutputBoxDown = this.moveOutputBoxDown.bind(this);\r\n        this.moveOutputBoxUp = this.moveOutputBoxUp.bind(this);\r\n        this.moveInputBoxUp = this.moveInputBoxUp.bind(this);\r\n        this.moveInputBoxDown = this.moveInputBoxDown.bind(this);\r\n        this.setSearchAddress = this.setSearchAddress.bind(this);\r\n        this.setTxJsonRaw = this.setTxJsonRaw.bind(this);\r\n        this.getYoroiTx = this.getYoroiTx.bind(this);\r\n        this.setTxYoroiJsonRaw = this.setTxYoroiJsonRaw.bind(this);\r\n        this.setTxSwaggerJsonRaw = this.setTxSwaggerJsonRaw.bind(this);\r\n        this.loadTxFromJsonRaw = this.loadTxFromJsonRaw.bind(this);\r\n        this.setTxReduced = this.setTxReduced.bind(this);\r\n        this.loadTxReduced = this.loadTxReduced.bind(this);\r\n        this.resetTxReduced = this.resetTxReduced.bind(this);\r\n        this.setSignedTransaction = this.setSignedTransaction.bind(this);\r\n        this.setMnemonic = this.setMnemonic.bind(this);\r\n        this.signTxReduced = this.signTxReduced.bind(this);\r\n        this.signTx = this.signTx.bind(this);\r\n        this.sendTxNode = this.sendTxNode.bind(this);\r\n        this.sendTxYoroi = this.sendTxYoroi.bind(this);\r\n        this.signTxJsonMnemonic = this.signTxJsonMnemonic.bind(this);\r\n        this.loadSignedTxFromJson = this.loadSignedTxFromJson.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            address: nextProps.address,\r\n            searchBoxId: nextProps.searchBoxId,\r\n            searchAddress: nextProps.searchAddress,\r\n        });\r\n    }\r\n\r\n    fetchUtxos() {\r\n        unspentBoxesFor(this.state.address)\r\n            .then(addressBoxList => {\r\n                if (addressBoxList.status !== 404) {\r\n                    const addressListFixed = parseUtxos(addressBoxList, true);\r\n                    this.setState({\r\n                        addressBoxList: addressListFixed\r\n                    })\r\n                }\r\n            }).catch((e) => {\r\n                console.log(e);\r\n                errorAlert(\"Error fetching from explorer\", e)\r\n            });\r\n    }\r\n\r\n    fetchByAddress() {\r\n        unspentBoxesFor(this.state.searchAddress)\r\n            .then(otherBoxList => {\r\n                if (otherBoxList.status !== 404) {\r\n                    const otherBoxListFixed = parseUtxos(otherBoxList, true);\r\n                    for (const box of otherBoxListFixed) {\r\n                        this.setState(prevState => ({\r\n                            otherBoxList: [...prevState.otherBoxList, box]\r\n                        }))\r\n                    }\r\n                }\r\n            }).catch((e) => {\r\n                console.log(e);\r\n                errorAlert(\"Error fetching from explorer\", e)\r\n            });\r\n    }\r\n\r\n    fetchByBoxId() {\r\n        boxById(this.state.searchBoxId)\r\n            .then(box => {\r\n                //if (box.status !== 404) {\r\n                const boxFixed = parseUtxo(box, true);\r\n                this.setState(prevState => ({\r\n                    otherBoxList: [...prevState.otherBoxList, boxFixed]\r\n                }))\r\n                //}\r\n            }).catch((e) => {\r\n                console.log(e);\r\n                errorAlert(\"Error fetching from explorer\", e)\r\n            });\r\n    }\r\n\r\n    setSearchAddress(address) {\r\n        this.setState({ address: address });\r\n    }\r\n\r\n    setSignedTransaction(signedTransaction) {\r\n        this.setState({ signedTransaction: signedTransaction });\r\n    }\r\n\r\n    setMnemonic(mnemonic) {\r\n        this.setState({ mnemonic: mnemonic });\r\n    }\r\n\r\n    fetchYoroi() {\r\n        var alert = waitingAlert(\"Connecting to wallet...\");\r\n        connectYoroi().then(access_granted => {\r\n            if (access_granted) {\r\n                alert.update({ title: \"Get wallet content...\" })\r\n                getAllUtxos().then(utxos => {\r\n                    console.log(\"utxos\", utxos)\r\n                    this.setState({\r\n                        addressBoxList: parseUtxos(utxos)\r\n                    })\r\n                }).then(\r\n                    getChangeAddress().then(yoroiAddress => {\r\n                        this.setSearchAddress(yoroiAddress);\r\n                        alert.close();\r\n                    })\r\n                )\r\n            } else {\r\n                console.log(\"Wallet access failed\");\r\n                errorAlert(\"Wallet access failed\");\r\n            }\r\n        })\r\n    }\r\n\r\n    selectInputBox(box) {\r\n        if (!Array.isArray(box)) {\r\n            var boxFound = false;\r\n            for (const i in this.state.selectedBoxList) {\r\n                if (this.state.selectedBoxList[i].boxId === box.boxId) {\r\n                    boxFound = true;\r\n                }\r\n            }\r\n            if (!boxFound) {\r\n                this.setState(prevState => ({\r\n                    selectedBoxList: [...prevState.selectedBoxList, box]\r\n                }))\r\n            }\r\n        }\r\n    }\r\n\r\n    selectDataInputBox(box) {\r\n        if (!Array.isArray(box)) {\r\n            var boxFound = false;\r\n            for (const i in this.state.selectedDataBoxList) {\r\n                if (this.state.selectedDataBoxList[i].boxId === box.boxId) {\r\n                    boxFound = true;\r\n                }\r\n            }\r\n            if (!boxFound) {\r\n                this.setState(prevState => ({\r\n                    selectedDataBoxList: [...prevState.selectedDataBoxList, box]\r\n                }))\r\n            }\r\n        }\r\n    }\r\n\r\n    unSelectInputBox(box) {\r\n        if (!Array.isArray(box)) {\r\n            this.setState(prevState => ({\r\n                selectedBoxList: prevState.selectedBoxList.filter(boxinlist => boxinlist.boxId !== box.boxId)\r\n            }));\r\n        }\r\n    }\r\n\r\n    unSelectDataInputBox(box) {\r\n        if (!Array.isArray(box)) {\r\n            this.setState(prevState => ({\r\n                selectedDataBoxList: prevState.selectedDataBoxList.filter(boxinlist => boxinlist.boxId !== box.boxId)\r\n            }));\r\n        }\r\n    }\r\n\r\n    unSelectOutoutBox(id) {\r\n        console.log(\"unSelectOutoutBox\", id, this.state.outputList);\r\n        let outputListNew = [...this.state.outputList];\r\n        outputListNew.splice(id, 1);\r\n        this.setState({ outputList: outputListNew });\r\n    }\r\n\r\n    addOutputBox() {\r\n        this.setState(prevState => ({\r\n            outputList: [...prevState.outputList, prevState.outputCreateJson]\r\n        }))\r\n        this.resetCreateBoxJson();\r\n    }\r\n\r\n    setCreateBoxJson = (key, json) => {\r\n        this.setState({ outputCreateJson: json });\r\n    }\r\n\r\n    setOutputItem = (key, json) => {\r\n        console.log(\"setOutputItem\", key, json);\r\n        let outputListNew = [...this.state.outputList];\r\n        outputListNew[key] = json;\r\n        this.setState({ outputList: outputListNew });\r\n    }\r\n\r\n    resetCreateBoxJson = () => {\r\n        this.setState({ outputCreateJson: initCreateBox });\r\n    }\r\n\r\n    setFeeBoxJson = () => {\r\n        this.setState({ outputCreateJson: feeBox });\r\n    }\r\n\r\n    setBalanceBoxBoxJson = () => {\r\n        buildBalanceBox(this.state.selectedBoxList, this.state.outputList, this.state.address).then(balanceBox => {\r\n            console.log(\"balanceBox\", balanceBox);\r\n            if (BigInt(balanceBox.value) < 10000) {\r\n                errorAlert(\"Not enough ERG in inputs\");\r\n            } else {\r\n                this.setState({ outputCreateJson: balanceBox });\r\n            }\r\n        })\r\n    }\r\n\r\n    moveOutputBoxUp(id) {\r\n        console.log(\"moveOutputBoxUp\", id);\r\n        if (id > 0) {\r\n            let outputListNew = [...this.state.outputList];\r\n            outputListNew[id] = this.state.outputList[id - 1]\r\n            outputListNew[id - 1] = this.state.outputList[id]\r\n            this.setState({ outputList: outputListNew });\r\n        }\r\n    }\r\n\r\n    moveOutputBoxDown(id) {\r\n        console.log(\"moveOutputBoxDown\", id);\r\n        if (id < this.state.outputList.length - 1) {\r\n            let outputListNew = [...this.state.outputList];\r\n            outputListNew[id] = this.state.outputList[id + 1]\r\n            outputListNew[id + 1] = this.state.outputList[id]\r\n            this.setState({ outputList: outputListNew });\r\n        }\r\n    }\r\n\r\n    moveInputBoxUp(id) {\r\n        console.log(\"moveInputBoxUp\", id);\r\n        if (id > 0) {\r\n            let selectedBoxListNew = [...this.state.selectedBoxList];\r\n            selectedBoxListNew[id] = this.state.selectedBoxList[id - 1]\r\n            selectedBoxListNew[id - 1] = this.state.selectedBoxList[id]\r\n            this.setState({ selectedBoxList: selectedBoxListNew });\r\n        }\r\n    }\r\n\r\n    moveInputBoxDown(id) {\r\n        console.log(\"moveInputBoxUp\", id);\r\n        if (id < this.state.selectedBoxList.length - 1) {\r\n            let selectedBoxListNew = [...this.state.selectedBoxList];\r\n            selectedBoxListNew[id] = this.state.selectedBoxList[id + 1]\r\n            selectedBoxListNew[id + 1] = this.state.selectedBoxList[id]\r\n            this.setState({ selectedBoxList: selectedBoxListNew });\r\n        }\r\n    }\r\n\r\n    async signAndSendTxYoroi() {\r\n        const yoroiConnected = await connectYoroi();\r\n        console.log(\"signAndSendTxYoroi\", yoroiConnected);\r\n        if (yoroiConnected) {\r\n            const txSent = yoroiSignTx(this.getYoroiTx());\r\n            console.log(\"signAndSendTxYoroi txSent\", txSent);\r\n        } else {\r\n            console.log(\"Not connected to wallet\");\r\n        }\r\n    }\r\n\r\n    async signTxYoroi() {\r\n        var alert = waitingAlert(\"Connecting wallet...\");\r\n        const yoroiConnected = await connectYoroi();\r\n        console.log(\"signTxYoroi\", yoroiConnected);\r\n        if (yoroiConnected) {\r\n            alert.update(\"Waiting transaction signing...\");\r\n            const txSigned = await signTx(this.getYoroiTx());\r\n            this.setSignedTransaction(txSigned);\r\n            console.log(\"signTxYoroi txSigned\", txSigned);\r\n            alert.close();\r\n        } else {\r\n            console.log(\"Not connected to wallet\");\r\n            errorAlert(\"Not connected to wallet\");\r\n        }\r\n    }\r\n\r\n    async sendTxYoroi() {\r\n        var alert = waitingAlert(\"Connecting wallet...\");\r\n        const yoroiConnected = await connectYoroi();\r\n        console.log(\"sendTxYoroi\", yoroiConnected);\r\n        if (yoroiConnected) {\r\n            alert.update(\"Sending transaction...\");\r\n            const txSubmitted = await submitTx(this.state.signedTransaction);\r\n            console.log(\"sendTxYoroi txSubmitted\", txSubmitted)\r\n            displayTransaction(txSubmitted);\r\n            alert.close();\r\n        } else {\r\n            console.log(\"Not connected to wallet\");\r\n            errorAlert(\"Not connected to wallet\");\r\n        }\r\n    }\r\n\r\n    getYoroiTx() {\r\n        return {\r\n            inputs: this.state.selectedBoxList,\r\n            outputs: this.state.outputList,\r\n            dataInputs: this.state.selectedDataBoxList,\r\n        };\r\n    }\r\n\r\n    setTxJsonRaw(textAreaInput) {\r\n        this.setState({ txJsonRaw: textAreaInput });\r\n    }\r\n\r\n    setTxYoroiJsonRaw() {\r\n        this.setTxJsonRaw(JSONBigInt.stringify(this.getYoroiTx()));\r\n    }\r\n    setTxSwaggerJsonRaw() {\r\n        this.setTxJsonRaw(JSONBigInt.stringify(generateSwaggerTx(this.getYoroiTx())));\r\n    }\r\n    setTxReduced() {\r\n        getTxReducedAndCSR(this.getYoroiTx(), this.state.selectedBoxList, this.state.selectedDataBoxList, this.state.address).then(res => {\r\n            this.setState({\r\n                txReduced: res[0],\r\n                CSR: res[1],\r\n            });\r\n        })\r\n    }\r\n    resetTxReduced() {\r\n        this.setState({\r\n            txReduced: [],\r\n            CSR: [],\r\n        });\r\n    }\r\n\r\n    async loadTxReduced() {\r\n        console.log(\"loadTxReduced\", this.state.txJsonRaw);\r\n        getTxJsonFromTxReduced(this.state.txJsonRaw)\r\n            .then(json => {\r\n                this.loadTxFromJson(json);\r\n            })\r\n            .catch(e => {\r\n                errorAlert(\"Error trying to load reduced transaction:\", e)\r\n            });\r\n    }\r\n\r\n    async signTxReduced() {\r\n        signTxReduced(this.state.txReduced, this.state.mnemonic, this.state.address).then(json => {\r\n            console.log(\"signTxReduced\", json)\r\n            this.setSignedTransaction(json);\r\n        })\r\n    }\r\n\r\n    async signTxJsonMnemonic() {\r\n        try {\r\n            const res = await signTxWithMnemonic(this.getYoroiTx(), this.state.selectedBoxList, this.state.selectedDataBoxList, this.state.mnemonic, this.state.address);\r\n            console.log(\"signTxJsonMnemonic\", res);\r\n            this.setSignedTransaction(generateSwaggerTx(res));\r\n        } catch(e) {\r\n            errorAlert(\"Failed to sign transaction\", e);\r\n        }\r\n    }\r\n\r\n    async signTx() {\r\n        const unsignedJson = this.getYoroiTx();\r\n        signTx(unsignedJson, this.state.selectedBoxList, this.state.selectedDataBoxList, this.state.mnemonic).then(json => {\r\n            this.setSignedTransaction(json);\r\n        })\r\n    }\r\n\r\n    async sendTxNode() {\r\n        const res = await sendTx(this.state.signedTransaction);\r\n        console.log(\"sendTxNode\", res);\r\n        if (res.hasOwnProperty(\"ok\")) {\r\n            if (res.ok) {\r\n                displayTransaction(this.state.signedTransaction.id);\r\n            } else {\r\n                errorAlert(\"Failed to send transaction to node\", JSON.stringify(res))\r\n            }\r\n        } else {\r\n            errorAlert(\"Failed to send transaction to node\", JSON.stringify(res))\r\n        }\r\n    }\r\n\r\n    async loadTxFromJsonRaw() {\r\n        const json = JSONBigInt.parse(this.state.txJsonRaw);\r\n        console.log(\"loadTxFromJsonRaw\", json);\r\n        await this.loadTxFromJson(json);\r\n    }\r\n\r\n    async loadTxFromJson(json) {\r\n        var inputs = [];\r\n        var dataInputs = [];\r\n        var outputs = [];\r\n        var jsonFixed = json;\r\n        try {\r\n            if (\"tx\" in json) { jsonFixed = json.tx; }\r\n            inputs = await enrichUtxos(jsonFixed.inputs);\r\n            dataInputs = await enrichUtxos(jsonFixed.dataInputs);\r\n            outputs = parseUtxos(jsonFixed.outputs, true, 'output');\r\n            this.setState({\r\n                selectedBoxList: inputs,\r\n                selectedDataBoxList: dataInputs,\r\n                outputList: outputs,\r\n            });\r\n        } catch (e) {\r\n            console.log(e);\r\n            errorAlert(\"Failed to parse transaction json\", e)\r\n        }\r\n    }\r\n\r\n    loadSignedTxFromJson() {\r\n        this.setSignedTransaction(JSONBigInt.parse(this.state.txJsonRaw));\r\n    }\r\n\r\n    render() {\r\n        const txJson = this.getYoroiTx();\r\n        var swaggertips = \"This transaction can be signed using your node wallet and swagger UI:<br />\";\r\n        swaggertips += \"- Unlock the wallet using: $SWAGGER/wallet/unlock/<br />\";\r\n        swaggertips += \"- Sign the transaction copying the Swagger json to $SWAGGER/wallet/transaction/sign<br />\";\r\n        swaggertips += \"- Send the transaction copying the signed json to $SWAGGER/transactions<br />\";\r\n        swaggertips += \"This should be used after having add the fee box.\";\r\n\r\n        var appTips = \"The application is intended to manipulate json of Ergo transaction to build smart contracts.<br />\";\r\n        appTips += \"Features:<br />\";\r\n        appTips += \" - Get unspent boxes from Explorer or browser extension wallet<br />\";\r\n        appTips += \" - Get boxes by address or boxId to execute smart contracts<br />\";\r\n        appTips += \" - Build output boxes with the editor<br />\";\r\n        appTips += \" - Sign the transaction with dApp connector or Mnemonic<br />\";\r\n        appTips += \" - Send transaction to dApp connector or local Ergo node\";\r\n\r\n        return (\r\n\r\n            <Fragment >\r\n                <div className=\"w-100 container\">\r\n                    <div className=\"d-flex flex-row justify-content-center\">\r\n                        <h4>Transaction builder</h4>&nbsp;\r\n                        <ImageButton id=\"help-tx-builder\" icon=\"help_outline\"\r\n                            tips={appTips} />\r\n                    </div>\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <InputAddress label=\"ERG address\"\r\n                                value={this.state.address}\r\n                                onChange={this.state.setAddress}\r\n                                onClick={this.fetchUtxos}\r\n                                fetchYoroi={this.fetchYoroi}\r\n                            />\r\n                            <div className=\"d-flex flex-wrap\">\r\n                                {this.state.addressBoxList.map(item => (\r\n                                    <div key={item.boxId} className=\"card m-2\" >\r\n                                        <UtxoItem\r\n                                            boxId={item.boxId}\r\n                                            json={item}\r\n                                            action={this.selectInputBox}\r\n                                            action2={this.selectDataInputBox}\r\n                                            icon=\"add_box\"\r\n                                            tips=\"Add to selected inputs\"\r\n                                            color=\"green\"\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"container-xxl w-100\">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <h6>Additional boxes</h6>\r\n                            <InputString label=\"Search by boxId\"\r\n                                value={this.state.searchBoxId}\r\n                                onChange={this.state.setSearchBoxId}\r\n                                onClick={this.fetchByBoxId}\r\n                            />\r\n                            <InputString label=\"Search by script address\"\r\n                                value={this.state.searchAddress}\r\n                                onChange={this.state.setSearchAddress}\r\n                                onClick={this.fetchByAddress}\r\n                            />\r\n                            <div className=\"d-flex flex-wrap\">\r\n                                {this.state.otherBoxList.map(item => (\r\n                                    <div key={item.boxId} className=\"card m-2\" >\r\n                                        <UtxoItem\r\n                                            boxId={item.boxId}\r\n                                            json={item}\r\n                                            action={this.selectInputBox}\r\n                                            action2={this.selectDataInputBox}\r\n                                            icon=\"add_box\"\r\n                                            tips=\"Add to selected inputs\"\r\n                                            color=\"green\"\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <h6>Selected data input boxes</h6>\r\n                            <div className=\"d-flex flex-wrap\">\r\n                                {this.state.selectedDataBoxList.map(item => (\r\n                                    <div key={item.boxId} className=\"card m-2 \" >\r\n                                        <UtxoItem\r\n                                            boxId={item.boxId}\r\n                                            json={item}\r\n                                            action={this.unSelectDataInputBox}\r\n                                            icon=\"clear\"\r\n                                            tips=\"Remove from selected data inputs\"\r\n                                            color=\"red\"\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <h6 keu=\"selected-input-title\">Selected input boxes</h6>\r\n                            <div className=\"d-flex flex-wrap\">\r\n                                {this.state.selectedBoxList.map((item, index) => (\r\n                                    <div key={index} className=\"card m-2 \" >\r\n                                        <UtxoItem\r\n                                            boxId={item.boxId}\r\n                                            json={item}\r\n                                            action={this.unSelectInputBox}\r\n                                            icon=\"clear\"\r\n                                            tips=\"Remove from selected inputs\"\r\n                                            id={index}\r\n                                            moveUp={this.moveInputBoxUp}\r\n                                            moveDown={this.moveInputBoxDown}\r\n                                            color=\"red\"\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <UtxosSummary list={this.state.selectedBoxList} name=\"inputs\" label=\"Selected inputs list\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <h6>Output boxes editor</h6>\r\n                            <OutputBoxCreator\r\n                                json={this.state.outputCreateJson}\r\n                                onChange={this.setCreateBoxJson}\r\n                                reset={this.resetCreateBoxJson}\r\n                                add={this.addOutputBox}\r\n                                fee={this.setFeeBoxJson}\r\n                                balance={this.setBalanceBoxBoxJson}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <h6>Selected output boxes</h6>\r\n                            <div className=\"d-flex flex-wrap\">\r\n                                {this.state.outputList.map((item, index, arr) => (\r\n                                    <OutputEditable\r\n                                        json={item}\r\n                                        onEdit={this.setOutputItem}\r\n                                        key={index}\r\n                                        id={index}\r\n                                        delete={this.unSelectOutoutBox}\r\n                                        moveUp={this.moveOutputBoxUp}\r\n                                        moveDown={this.moveOutputBoxDown}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                            <UtxosSummary list={this.state.outputList} name=\"outputs\" label=\"Outputs list\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <h6>Unsigned transaction</h6>\r\n                            <TransactionSummary json={txJson} />\r\n                            <div className=\"d-flex flex-row align-items-center justify-content-between\">\r\n                                <div className=\"d-flex flex-row align-items-center \">\r\n                                    <h6>Sign transaction </h6>&nbsp;\r\n                                    <ImageButton id=\"sign-and-send-yoroi\" color=\"blue\" icon=\"send\" tips=\"Sign and send transaction with dApp connector\"\r\n                                        onClick={() => { this.signAndSendTxYoroi(txJson); }} />\r\n                                    <ImageButton id=\"sign-yoroi\" color=\"blue\" icon=\"border_color\" tips=\"Sign transaction with dApp connector\"\r\n                                        onClick={() => { this.signTxYoroi(txJson); }} />\r\n                                    <ImageButton id=\"sign-mnemonic\" color=\"orange\" icon=\"border_color\" tips=\"Sign with mnemonic\"\r\n                                        onClick={this.signTxJsonMnemonic} />\r\n                                    <ImageButton id=\"help-swagger\" icon=\"help_outline\"\r\n                                        tips={swaggertips} />\r\n                                </div>\r\n                                <InputString label=\"Mnemonic\"\r\n                                    value={this.state.mnemonic}\r\n                                    onChange={this.setMnemonic}\r\n                                    type=\"password\"\r\n                                />\r\n                            </div>\r\n                            <ReactJson\r\n                                id=\"unsigned-tx-json\"\r\n                                src={generateSwaggerTx(txJson)}\r\n                                theme=\"monokai\"\r\n                                collapsed={true}\r\n                                name={false}\r\n                                collapseStringsAfterLength={60}\r\n                            />\r\n                            <div className=\"d-flex flex-column\">\r\n                                <div className=\"d-flex flex-row\">\r\n                                    <h6>Transaction reduced</h6> &nbsp;\r\n                                    <ImageButton id=\"get-reduced-tx\" color=\"red\" icon=\"restart_alt\" tips=\"Reset reduced transaction\"\r\n                                        onClick={this.resetTxReduced} />\r\n                                    <ImageButton id=\"set-reduced-tx\" color=\"blue\" icon=\"calculate\" tips=\"Get reduced transaction and <br/> ColdSignigRequest\"\r\n                                        onClick={this.setTxReduced} />\r\n                                    <ImageButton id=\"sign-reduced-mnemonic\" color=\"orange\" icon=\"border_color\" tips=\"Sign reduced transaction with mnemonic\"\r\n                                        onClick={this.signTxReduced} />\r\n                                </div>\r\n                                {\r\n                                    this.state.txReduced.join('') !== '' ?\r\n                                        <div className=\"d-flex flex-column\">\r\n                                            <textarea id='reducedTxTextArea' defaultValue={this.state.txReduced.join('')} readOnly={true} />\r\n                                            <QRCodes list={this.state.txReduced} />\r\n                                            <h6>Cold Signing Request (EIP-19)</h6>\r\n                                            <textarea id='ColdSignigRequest' defaultValue={this.state.CSR.join('')} readOnly={true} />\r\n                                            <QRCodes list={this.state.CSR} />\r\n\r\n                                        </div>\r\n                                        : null\r\n                                }\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n                            <div className=\"d-flex flex-row\">\r\n                                <h6>Signed transaction</h6>&nbsp;\r\n                                <ImageButton id=\"send-tx-yoroi\" color=\"blue\" icon=\"send\"\r\n                                    tips=\"Send to dApp connector\"\r\n                                    onClick={this.sendTxYoroi}\r\n                                />\r\n                                <ImageButton id=\"send-tx-node\" color=\"orange\" icon=\"send\"\r\n                                    tips=\"Send to node\"\r\n                                    onClick={this.sendTxNode}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <ReactJson\r\n                                    id=\"signed-tx-json\"\r\n                                    src={this.state.signedTransaction}\r\n                                    theme=\"monokai\"\r\n                                    collapsed={true}\r\n                                    name={false}\r\n                                    collapseStringsAfterLength={60}\r\n                                />\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-100 container-xxl \">\r\n                        <div className=\"card p-1 m-2 w-100\">\r\n\r\n                            <h6>Transaction import/export</h6>\r\n                            <div className=\"d-flex flex-row p-1\">\r\n                                <ImageButtonLabeled id=\"get-yoroi-tx\" color=\"blue\" icon=\"download\"\r\n                                    label=\"Get dApp connector format\" onClick={this.setTxYoroiJsonRaw}\r\n                                />\r\n                                <ImageButtonLabeled id=\"get-swagger-tx\" color=\"blue\" icon=\"download\"\r\n                                    label=\"Get Swagger format\" onClick={this.setTxSwaggerJsonRaw}\r\n                                />\r\n                                <ImageButtonLabeled id=\"load-tx-json\" color=\"blue\" icon=\"upload\"\r\n                                    label=\"Load transaction json\" onClick={this.loadTxFromJsonRaw}\r\n                                />\r\n                                <ImageButtonLabeled id=\"load-tx-reduced\" color=\"blue\" icon=\"upload\"\r\n                                    label=\"Load transaction reduced\" onClick={this.loadTxReduced}\r\n                                />\r\n                                {1 == 0 ?\r\n                                    <ImageButtonLabeled id=\"load-tx-reduced\" color=\"blue\" icon=\"upload\"\r\n                                        label=\"Load signed transaction\" onClick={this.loadSignedTxFromJson}\r\n                                    />\r\n                                    : null\r\n                                }\r\n\r\n                            </div>\r\n                            <textarea value={this.state.txJsonRaw}\r\n                                onChange={(evn) => this.setTxJsonRaw(evn.target.value)} />\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <br /><br /><br /><br />\r\n\r\n                </div>\r\n                <br />\r\n                <Footer />\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport './App.css';\r\nimport TxBuilder from \"./transaction-builder-page\";\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      address: localStorage.getItem('address'),\r\n      searchBoxId: '',\r\n      searchAddress: '',\r\n    };\r\n    this.setAddress = this.setAddress.bind(this);\r\n  }\r\n\r\n  setAddress = (address) => {\r\n    console.log(\"setAddress\", address);\r\n    this.setState({\r\n        address: address\r\n    });\r\n    localStorage.setItem('address', address);\r\n  };\r\n\r\n  setSearchBoxId = (searchBoxId) => {\r\n    console.log(\"setSearchBoxId\", searchBoxId);\r\n    this.setState({\r\n      searchBoxId: searchBoxId\r\n    });\r\n  };\r\n\r\n  setSearchAddress = (searchAddress) => {\r\n    console.log(\"setSearchAddress\", searchAddress);\r\n    this.setState({\r\n      searchAddress: searchAddress\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <TxBuilder address={this.state.address} \r\n                   setAddress={this.setAddress}\r\n                   searchBoxId={this.state.searchBoxId}\r\n                   setSearchBoxId={this.setSearchBoxId}\r\n                   searchAddress={this.state.searchAddress}\r\n                   setSearchAddress={this.setSearchAddress}\r\n                   />\r\n      </header>\r\n    </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { displayTransaction, errorAlert } from \"../utils/Alerts\";\r\n\r\n\r\nexport async function post(url, body = {}, apiKey = '') {\r\n    console.log(\"post\",url)\r\n    fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'mode': 'cors',\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n        },\r\n        body: JSON.stringify(body)\r\n    }).then(response => Promise.all([response.ok, response.json()]))\r\n    .then(([responseOk, body]) => {\r\n      if (responseOk) {\r\n          displayTransaction(body)\r\n        return JSON.parse(body);\r\n      } else {\r\n        console.log(\"fetch2\",body);\r\n        errorAlert(\"Failed to fetch\",JSON.stringify(body))\r\n      }\r\n    })\r\n    .catch(error => {\r\n        console.log(\"fetch3\",error);\r\n      // catches error case and if fetch itself rejects\r\n    });\r\n    \r\n}\r\nexport async function get(url, apiKey = '') {\r\n    return await fetch(url, {\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            api_key: apiKey,\r\n        },\r\n    }).then(res => res.json());\r\n}\r\n\r\nfunction test() {\r\n    fetch('url')\r\n  .then(response => Promise.all([response.ok, response.json()]))\r\n  .then(([responseOk, body]) => {\r\n    if (responseOk) {\r\n      // handle success case\r\n    } else {\r\n      throw new Error(body);\r\n    }\r\n  })\r\n  .catch(error => {\r\n    // catches error case and if fetch itself rejects\r\n  });\r\n}","import { get, post } from './rest';\r\n\r\n// in order to secure the node requests (port 9053) the following setting have been done on apache\r\n// prevent any connection to 9053 except from localhost\r\n\r\nexport const nodeApi = 'https://149.202.46.53';\r\n\r\nasync function getRequest(url) {\r\n    return await get(nodeApi + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nasync function postRequest(url, body = {}, apiKey = '') {\r\n    return await post(nodeApi + url, body).then(res => {\r\n        return { data: res };\r\n    }).catch(err => {\r\n        console.log(\"postRequest\", err);\r\n        return { data: err.toString() }\r\n    });\r\n}\r\n\r\nexport async function getLastHeaders() {\r\n    return await getRequest('/blocks/lastHeaders/10')\r\n        .then(res => res.data)\r\n}\r\n\r\nexport async function sendTx(json) {\r\n    const res = await postRequest('/transactions', json);\r\n    return res.data;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Spin-1.5s-94px.56d7f495.svg\";","import Swal from 'sweetalert2/src/sweetalert2.js';\r\nimport '@sweetalert2/theme-dark/dark.css';\r\nimport withReactContent from 'sweetalert2-react-content';\r\nimport Spinner from '../resources/Spin-1.5s-94px.svg';\r\n\r\nexport function waitingAlert(title) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: <p>{title}</p>,\r\n        imageUrl: Spinner,\r\n        allowOutsideClick: true,\r\n        showConfirmButton: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function closeAlert(alert) {\r\n    alert.close();\r\n}\r\n\r\nexport function errorAlert(title, msg) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: <p>{title}</p>,\r\n        icon: 'error',\r\n        text: msg,\r\n        allowOutsideClick: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function displayTransaction(txId) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: <p>Transaction sent succesfully</p>,\r\n        allowOutsideClick: false,\r\n        icon: 'success',\r\n        html: `<p>The transaction will be visible in your wallet and in the explorer in few seconds: <a href=\"https://explorer.ergoplatform.com/en/transactions/${txId}\" target=\"_blank\" > ${txId} </a></p>`,\r\n    });\r\n    return MySwal;\r\n}\r\n"],"sourceRoot":""}