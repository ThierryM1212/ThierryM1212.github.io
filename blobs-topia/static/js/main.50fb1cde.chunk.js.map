{"version":3,"sources":["components/BlobMouth.js","components/BlobEyes.js","ergo-related/explorer.js","ergo-related/wasm.js","ergo-related/serializer.js","components/BlobWaitAnim.js","utils/Alerts.js","ergo-related/wallet.js","my-blobs-page.js","components/BlobRequestItem.js","utils/svgUtils.js","utils/constants.js","ergo-related/blob.js","ergo-related/admin_game.js","components/ReserveItem.js","components/ConfigItem.js","components/OatmealReserveItem.js","admin-page.js","images/illustration_blob_reduced.png","home-page.js","components/InputAddress.js","components/NavigationBar.js","images/blobstopia.png","components/Footer.js","blobs-shop.js","components/EyesPickerItem.js","components/EyesPicker.js","components/MouthPickerItem.js","components/MouthPicker.js","components/InputName.js","components/BlobEditor.js","ergo-related/bot_wasm.js","components/Checkbox.js","components/BlobFightPicker.js","match-making.js","components/WinPercent.js","images/octogone.png","components/TransactionId.js","images/outline_open_in_new_black_24dp.png","components/FightItem.js","fights.js","App.js","reportWebVitals.ts","index.tsx","components/BlobState.js","components/BlobItem.js","images/outline_keyboard_double_arrow_left_black_24dp.png","images/outline_keyboard_double_arrow_right_black_24dp.png","images/outline_content_copy_black_24dp.png","components/ErgBlob.js","utils/utils.js","ergo-related/rest.js"],"names":["BlobMouth","mouth_type","this","props","pos_eyes_x","pos_eyes_y","eyes_dist","transform","mouth_path","describeArc","d","stroke","strokeWidth","strokeLinecap","fill","x1","y1","x2","y2","React","Component","BlobEyes","eyes_pos","delta_eyes_x","delta_eyes_y","cx","cy","rx","ry","r","explorerApi","explorerApiV1","getRequest","url","a","get","then","res","data","getRequestV1","post","body","console","log","JSONBigInt","stringify","fetch","method","headers","response","Promise","all","ok","json","responseOk","body2","result","id","Object","keys","includes","detail","reason","postTxMempool","tx","toString","sendTx","currentHeight","items","height","getUnspentBoxesByAddress","address","boxById","boxByTokenId","tokenId","getTransactionsByAddress","addr","getUnconfirmedTxsFor","getSpentAndUnspentBoxesFromMempool","unconfirmedTxs","spentBoxes","newBoxes","length","map","inputs","flat","outputs","filter","box","getMempoolUnspentBoxes","getStream","mempoolBoxesRaw","mempoolBoxes","parse","replaceAll","getMempoolUnspentBoxesByAddress","push","getUnspentBoxesForAddressUpdated","blobBoxesTmp","spentBlobs","newBlobs","spentBlobBoxIds","boxId","blobBoxes","concat","getExplorerBlockHeadersFull","ergolib","getBoxSelection","utxos","amountFloat","tokens","amountToSend","Math","round","NANOERG_TO_ERG","BoxValue","I64","from_str","amountToSendBoxValue","from_i64","SimpleBoxSelector","selector","boxSelection","ErgoBoxes","from_boxes_json","as_i64","TX_FEE","checked_add","select","msg","JSON","createTransaction","outputCandidates","dataInputs","changeAddress","creationHeight","len","TxBuilder","Address","from_base58","SAFE_USER_MIN","txBuilder","new","DataInputs","dataInputsWASM","boxIdWASM","BoxId","DataInput","dataInputWASM","add","set_data_inputs","parseUnsignedTx","build","to_json","unsignedTx","UnsignedTransaction","from_json","correctTx","fullBoxInfo","parseUtxo","find","utxo","extension","missingErgs","getMissingErg","getMissingTokens","encodeContract","contract","balanceBoxindex","findIndex","output","ergoTree","newOutputs","buildBalanceBox","newBalanceBox","splice","str","addExtention","mode","undefined","value","Array","isArray","assets","asset","amount","name","decimals","isDict","parseAdditionalRegisters","additionalRegisters","txId","transactionId","index","registterOut","entries","forEach","key","setBoxRegisterByteArray","register","str_value","value_Uint8Array","TextEncoder","encode","Constant","from_byte_array","set_register_value","addSimpleOutputBox","amountErgsFloat","payToAddress","amountNanoErgStr","amountBoxValue","ErgoBoxCandidateBuilder","Contract","pay_to_address","outputBoxBuilder","getNumberGameTokens","boxList","tokenAmount","token","GAME_TOKEN_ID","parseInt","getUtxosListValue","reduce","acc","BigInt","getTokenListFromUtxos","tokenList","i","j","amountIn","amountOut","tokensIn","tokensOut","buildTokenList","verifyTransactionIO","tokenAmountIn","tokenAmountOut","valueIn","valueOut","txOK","getTokenAmount","getRegisterValue","serializedValue","v","Date","DEFAULT_NODE_ADDRESS","getLastHeaders","getErgoStateContext","block_headers","BlockHeaders","pre_header","PreHeader","from_block_header","ErgoStateContext","getErgoStateContext2","contextId","explorerContext","slice","signTransactionMultiContext","wallet","unsignedTransaction","inputBoxes","dataInputsBoxes","ctx","signedTx","sign_transaction","signTransaction","encodeLongArray","longArray","from_i64_str_array","decodeLongArray","encodedArray","decode_from_base16","to_i64_str_array","cur","encodeLong","num","decodeLong","to_i64","to_str","encodeHexConst","reg","Buffer","from","toHexString","byteArray","byte","join","decodeString","encoded","Serializer","to_byte_array","stringFromHex","decodeHex","tmp","ergo_tree","to_base16_bytes","ergoTreeToAddress","ergoT","ErgoTree","from_base16_bytes","recreate_from_ergo_tree","to_base58","BlobWaitAnim","className","ErgBlob","color1","getRandomColor","color2","path","getRandomBlobShape","getRandomInt","rotate","waitingAlert","title","MySwal","withReactContent","Swal","fire","html","allowOutsideClick","showConfirmButton","closeAlert","alert","close","errorAlert","icon","text","displayTransaction","showCloseButton","copySuccess","position","timer","promptErgAmount","resolve","reject","confirmButtonText","focusConfirm","showCancelButton","preConfirm","ergAmount","getPopup","querySelector","parseFloat","showValidationMessage","promptFeedAmount","defAmount","attAmount","isWalletConnected","window","ergo_check_read_access","error","connectWallet","ergo_request_read_access","isValidWalletAddress","ergo","get_used_addresses","address_list","sleep","ms","setTimeout","walletSignTx","update","processTx","txFoundMempool","startWait","now","message","getUtxos","fullAmountToSend","get_utxos","filteredUtxos","ErgoBox","getTokenUtxos","amountTokenToSend","getAllUtxos","signTx","txToBeSigned","sign_tx","submitTx","txToBeSubmitted","submit_tx","txToBeProcessed","s","MyBlobsPage","state","localStorage","getItem","blobList","blobRequestList","handleChangeBlobList","bind","fetchBlobs","fetchBlobRequests","event","setState","target","nextProps","to_bytes","subarray","from_ecpoint_bytes","sigma_serialize_bytes","addressSigmaPropHex","BLOB_REQUEST_SCRIPT_ADDRESS","blobRequestBoxes","R5","blobRequestSigmaProp","e","BLOB_SCRIPT_ADDRESS","spentBoxIds","R6","blobSigmaProp","item","blobBoxJSON","updateList","full","BlobRequestItem","updateBlobRequest","refund","prevProps","prevState","R4","desc","descArray","split","refundBlobRequest","toFixed","onClick","random","substr","min","max","ceil","floor","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","PI","x","cos","y","sin","startAngle","endAngle","start","end","largeArcFlag","growth","edges","blobshape","size","seed","MIN_NANOERG_BOX_VALUE","DEFAULT_EXPLORER_ADDRESS","GAME_ADDRESS","CONFIG_TOKEN_ID","OATMEAL_TOKEN_ID","BLOB_PRICE","BLOB_ERG_MIN_VALUE","BLOB_MINT_FEE","BLOB_EXCHANGE_FEE","INI_BLOB_ATT_LEVEL","INI_BLOB_DEF_LEVEL","INI_BLOB_GAME","INI_BLOB_VICTORY","NUM_OATMEAL_TOKEN_LOSER","NUM_OATMEAL_TOKEN_WINNER","RESERVE_SCRIPT_ADDRESS","OATMEAL_RESERVE_SCRIPT_ADDRESS","CONFIG_SCRIPT_ADDRESS","BLOB_SCRIPT_HASH","GAME_SCRIPT_HASH","GAME_SCRIPT_ADDRESS","blobRequestBoxJSON","blobRequestIniValueNano","inputsWASM","ErgoBoxAssetsDataList","dataListWASM","BoxSelection","ErgoBoxCandidates","empty","currentConfigBox","addWidthDrawBlob","amountNano","dAppFeeNano","blobIniValueNano","blobOutValueNano","unshift","gameTokenId","TokenId","TokenAmount","blobTokenAmount","blobBoxOutWASM","blobboxOutValue","blobBoxBuilder","register_value","add_token","killBlob","dappReturnValue","dappReturnValueBox","returnBoxBuilder","userReturnValue","currentConfigBoxes","buyBlob","R8","renderedValue","blobBoxInWASM","newOwnerSigmaProp","preOwnerScript","encode_to_base16","preOwnerAddress","setBlobStatus","blobStatus","blobStatusValue","maxFightValueNano","createBlobRequest","svgPath","blobBoxValue","blobDesc","substring","ownerSigmaProp","feedBlob","amountDefense","amountAttack","utxos2","self","t","oatmealTokenId","oatmealTokenAmount","infoArray","oatMealReturnBox","burnGameTokenReserve","reservebox","reserveboxFixed","Tokens","reserveTokenAmount","Token","boxValue","burnOatmealReserve","updateConfigurationBox","configTokenId","configTokenAmount","configValue","configBoxBuilder","gameConf","mintGameTokenReserve","reserveName","reserveIniIdentifier","utxos1","reserveTokenAmountWASM","reserveValue","reserveBoxBuilder","blobIniConf","blobPrice","mintOatmealReserve","oatmealReserveTokenAmount","ReserveItem","identifier","blobMintFee","blobPriceAndFee","decodeName","decodeIdentifier","decodeBlobPriceAndFee","decodedName","catch","decodedidentifier","decodedArray","formatLongString","burn","ConfigItem","boxAddress","blobScriptHash","gameScriptHash","blobExchangeFee","txFee","numOatmealLoser","numOatmealWinner","out","getRegisterHex","R4Str","R5Str","getRegisterLongArray","R6array","currentBoxDisplay","OatmealReserveItem","Admin","reserveList","oatmealReserveList","configList","form","createRef","formConf","handleChangeReserveTokenAmount","handleChangeReserveName","handleChangeReserveList","handleChangeIniIdentifier","fetchReserves","handleSubmit","mintReserve","mintOReserve","current","reportValidity","preventDefault","ref","onSubmit","htmlFor","type","pattern","required","onChange","handleChangeOatmealReserveTokenAmount","updateConf","Home","src","MainImage","InputAddress","setAddress","NavigationBar","Navbar","expand","variant","Brand","href","Toggle","aria-controls","Collapse","Nav","Link","Footer","BlobsShopPage","R7","BlobItem","EyesPickerItem","checked","selected","width","viewBox","xmlns","xmlnsXlink","EyesPicker","MouthPicker","InputName","BlobEditor","onClick1","showPicker1","onClick2","showPicker2","onClose","onChange1","color","hex","onChange2","onChangeEyes","onChangeMouth","onChangeName","styles","reactCSS","borderRadius","background","popover","zIndex","cover","top","right","bottom","left","swatch","padding","cursor","display","boxShadow","style","mintBlob","trim","disabled","engageFight","blob1","blob2","currentReserveBox","Wallet","from_mnemonic","reserveIniWASM","reserveIniTokenAmount","as_num","newReserveTokenAmount","fightAmount","blob1BoxWASM","blob1AmountNano","blob1boxValue","blob1BoxBuilder","blob2BoxWASM","blob2AmountNano","blob2boxValue","blob2BoxBuilder","gameAmountNano","gameBoxValue","gameTokenAmount","gameBoxBuilder","newReserveTokenAmountWASM","processFightResult","gameBox","gameAmount","winningTx","p1InfoArray","p2InfoArray","R9","p1OatmealAmount","p2OatmealAmount","oatmealBoxValue","p1Script","p1Address","oatmeal1BoxBuilder","p2Script","p2Address","oatmeal2BoxBuilder","Checkbox","useState","setChecked","BlobFightPicker","selectedBlob","blobIndex","newSelectBlob","reserveOatmealBoxes","blobIndexes","numberOfSelectedBlobs","b","formatERGAmount","blob","disableActions","selectUnselectBlob","MatchMakingPage","blobReadyToFightMap","blobAmountDict","blobState","WinPercent","win_rate","TransactionId","open","focus","FightItem","p1WinTxId","p2WinTxId","p1WinChance","computeP1WinningChance","p2WinChance","processFight","FightsPage","currentFights","previousFights","gameBoxId","fetchCurrentFights","fetchOldFights","fightBoxes","blobFights","blob1Id","blob2Id","fightTransactions","fight","App","setItem","basename","process","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","BlobState","STATE_VALUE_LABEL_MAP","stateValue","info","power","defense","blobId","showActions","ownerAddress","rating","toggleActions","updateBlob","decodedInfo","averagePower","ownBlob","initialValue","readonly","navigator","clipboard","writeText","kill","addWidthDraw","setStatus","feed","buy","nextState","offset","amountStr","maxPowerDiff","numberOfRound","p1Info","p2Info","p1Power","p2Power","p1Def","p2Def","p1PowerAdj","p2PowerAdj","p1DefAdj","p2DefAdj","p1Win","p1Rand","p1Score","p2Rand","apiKey","Accept","api_key","responseTxt"],"mappings":"yNAGaA,EAAb,uKAIQ,IAAMC,EAAaC,KAAKC,MAAMF,WACxBG,EAAaF,KAAKC,MAAMC,WACxBC,EAAaH,KAAKC,MAAME,WACxBC,EAAYJ,KAAKC,MAAMG,UACvBC,EAAY,aAAeH,EAAa,KAAOC,EAAa,IAAM,IAEpEG,EAAaC,YAAYL,EAAaE,EAAY,EAAGD,EAAa,GAAI,GAAI,IAAK,KAInF,MAHmB,MAAfJ,IACAO,EAAaC,YAAYL,EAAaE,EAAY,EAAGD,EAAa,GAAI,GAAI,IAAK,KAEhE,MAAfJ,GACAO,EAAaC,YAAYL,EAAaE,EAAY,EAAGD,EAAa,GAAI,GAAI,IAAK,KAE3E,8BACI,sBAAMK,EAAGF,EAAYG,OAAO,UAAUC,YAAY,IAAIC,cAAc,QAAQC,KAAK,YACjF,sBAAMC,GAAIX,EAAa,EAAGY,GAAIX,EAAa,GAAIY,GAAIb,EAAaE,EAAY,EAAGY,GAAIb,EAAa,GAAIM,OAAO,UAAUC,YAAY,IAAIC,cAAc,cAI5I,MAAfZ,EAEI,sBAAMc,GAAIX,EAAa,EAAGY,GAAIX,EAAa,GAAIY,GAAIb,EAAaE,EAAY,EAAGY,GAAIb,EAAa,GAAIM,OAAO,UAAUC,YAAY,IAAIC,cAAc,UAGxI,MAAfZ,EAEI,oBAAGM,UAAWA,EAAd,UACI,sBAAMO,KAAK,UACPF,YAAY,OACZF,EAAE,8YAEN,sBACII,KAAK,UACLF,YAAY,OACZF,EAAE,4YAOd,sBAAMA,EAAGF,EAAYG,OAAO,UAAUC,YAAY,IAAIC,cAAc,QAAQC,KAAK,aA7C7F,GAA+BK,IAAMC,Y,mHCDxBC,EAAb,uKAGQ,IAAMC,EAAWpB,KAAKC,MAAMmB,SACtBlB,EAAaF,KAAKC,MAAMC,WACxBC,EAAaH,KAAKC,MAAME,WACxBC,EAAYJ,KAAKC,MAAMG,UAEzBiB,EAAe,EAAGC,EAAe,EAgBrC,MAdiB,MAAbF,GACAC,EAAe,EACfC,EAAe,GACK,MAAbF,GACPC,EAAe,EACfC,GAAgB,GACI,MAAbF,GACPC,GAAgB,EAChBC,EAAe,GACK,MAAbF,IACPC,GAAgB,EAChBC,GAAgB,GAIhB,8BACI,yBAASC,GAAIrB,EAAYsB,GAAIrB,EAAYsB,GAAG,IAAIC,GAAG,KAAKhB,YAAY,IAAID,OAAO,UAAUG,KAAK,YAC9F,yBAASW,GAAIrB,EAAaE,EAAWoB,GAAIrB,EAAYsB,GAAG,IAAIC,GAAG,KAAKhB,YAAY,IAAID,OAAO,UAAUG,KAAK,YAC1G,wBAAQW,GAAIrB,EAAamB,EAAcG,GAAIrB,EAAamB,EAAcK,EAAE,IAAIf,KAAK,YACjF,wBAAQW,GAAIrB,EAAaE,EAAYiB,EAAcG,GAAIrB,EAAamB,EAAcK,EAAE,IAAIf,KAAK,mBA7B7G,G,OAA8BK,EAAMC,Y,0dCGvBU,G,KAAc,uCACdC,EAAgB,sC,SAEdC,E,8EAAf,WAA0BC,GAA1B,SAAAC,EAAA,+EACWC,YAAIL,EAAcG,GAAKG,MAAK,SAAAC,GAC/B,MAAO,CAAEC,KAAMD,OAFvB,4C,+BAMeE,E,8EAAf,WAA4BN,GAA5B,SAAAC,EAAA,+EACWC,YAAIJ,EAAgBE,GAAKG,MAAK,SAAAC,GACjC,MAAO,CAAEC,KAAMD,OAFvB,4C,+BAMeG,E,8EAAf,WAAoBP,GAApB,qCAAAC,EAAA,6DAAyBO,EAAzB,+BAAgC,GAAhC,+BAA6C,GACzCC,QAAQC,IAAI,QAASC,IAAWC,UAAUJ,IAD9C,SAE2BK,MAAMb,EAAK,CAC9Bc,OAAQ,OACRC,QAAS,CACL,OAAU,mBACV,eAAgB,mBAChB,KAAQ,OACR,8BAA+B,IAC/B,+BAAgC,kDAEpCP,KAAMG,IAAWC,UAAUJ,KAXnC,cAEUQ,EAFV,gBAcsCC,QAAQC,IAAI,CAACF,EAASG,GAAIH,EAASI,SAdzE,sCAcWC,EAdX,KAcuBC,EAdvB,MAgBQD,EAhBR,oBAiB6B,kBAAVC,EAjBnB,0CAmBmB,CAAEC,QAAQ,EAAMlB,KAAMiB,EAAME,KAnB/C,iCAqBmB,CAAED,QAAQ,EAAMlB,KAAMiB,IArBzC,oCAwBYG,OAAOC,KAAKJ,GAAOK,SAAS,UAxBxC,0CAyBmB,CAAEJ,QAAQ,EAAOlB,KAAMiB,EAAMM,SAzBhD,iCA2BmB,CAAEL,QAAQ,EAAOlB,KAAMiB,EAAMO,SA3BhD,6C,sBAgCO,SAAeC,EAAtB,kC,4CAAO,WAA6BC,GAA7B,eAAA9B,EAAA,+EAEmBM,EAAKT,EAAgB,+BAAgCiC,GAFxE,cAEO3B,EAFP,yBAGQA,EAAIC,MAHZ,uCAKCI,QAAQC,IAAI,gBAAZ,MALD,kBAMQ,KAAIsB,YANZ,0D,sBAUA,SAAeC,EAAtB,kC,4CAAO,WAAsBb,GAAtB,eAAAnB,EAAA,sEACe6B,EAAcV,GAD7B,cACGhB,EADH,yBAGIA,GAHJ,4C,sBAMA,SAAe8B,IAAtB,+B,4CAAO,sBAAAjC,EAAA,+EACIF,EAAW,mBACbI,MAAK,SAAAC,GAAG,OAAIA,EAAIC,QAChBF,MAAK,SAAAC,GAAG,OAAIA,EAAI+B,MAAM,GAAGC,WAH3B,4C,sBAWA,SAAeC,EAAtB,kC,4CAAO,WAAwCC,GAAxC,eAAArC,EAAA,sEACeK,EAAa,4BAAD,OAA6BgC,IADxD,cACGlC,EADH,yBAEIA,EAAIC,KAAK8B,OAFb,4C,sBAKA,SAAeI,EAAtB,kC,4CAAO,WAAuBf,GAAvB,eAAAvB,EAAA,sEACeF,EAAW,uBAAD,OAAwByB,IADjD,cACGpB,EADH,yBAEIA,EAAIC,MAFR,4C,sBAUA,SAAemC,EAAtB,kC,4CAAO,WAA4BC,GAA5B,eAAAxC,EAAA,sEACeK,EAAa,4BAAD,OAA6BmC,IADxD,cACGrC,EADH,yBAEIA,EAAIC,KAAK8B,OAFb,4C,sBAkBA,SAAeO,EAAtB,kC,4CAAO,WAAwCC,GAAxC,eAAA1C,EAAA,sEACeK,EAAa,cAAD,OAAeqC,EAAf,kBAD3B,cACGvC,EADH,yBAEIA,EAAIC,KAAK8B,OAFb,4C,sBA2BA,SAAeS,EAAtB,kC,4CAAO,WAAoCD,GAApC,eAAA1C,EAAA,sEACeK,EAAa,mCAAD,OAAoCqC,IAD/D,cACGvC,EADH,OAEHK,QAAQC,IAAI,uBAAwBN,GAFjC,kBAGIA,EAAIC,KAAK8B,OAHb,4C,sBAMA,SAAeU,EAAtB,kC,4CAAO,WAAkDP,GAAlD,mBAAArC,EAAA,sEACwB2C,EAAqBN,GAD7C,cACCQ,EADD,OAEHrC,QAAQC,IAAI,qCAAsCoC,GAC9CC,EAAa,GACbC,EAAW,GACXF,GAAkBA,EAAeG,OAAS,IAC1CF,EAAaD,EAAeI,KAAI,SAAAnB,GAAE,OAAIA,EAAGoB,UAAQC,OACjDJ,EAAWF,EAAeI,KAAI,SAAAnB,GAAE,OAAIA,EAAGsB,WAASD,OAAOE,QAAO,SAAAC,GAAG,OAAIjB,IAAYiB,EAAIjB,YAEzF7B,QAAQC,IAAI,qCAAsCqC,EAAYC,GAT3D,kBAUI,CAACD,EAAYC,IAVjB,4C,sBAkCA,SAAeQ,IAAtB,+B,4CAAO,8BAAAvD,EAAA,sEACyBwD,YAAU3D,EAAgB,yBAA0B,IAD7E,cACC4D,EADD,OAEGC,EAAehD,IAAWiD,MAAM,IAAIF,EAAgBG,WAAW,sCAAuC,wCAA0C,KACtJpD,QAAQC,IAAI,kCAAmCiD,GAH5C,kBAIIA,GAJJ,4C,sBAMA,SAAeG,EAAtB,kC,4CAAO,WAA+CxB,GAA/C,uBAAArC,EAAA,sEACsBuD,IADtB,OACCG,EADD,OAECvD,EAAM,GAFP,cAGeuD,GAHf,IAGH,4BAAWJ,EAAqB,SACpBjB,UAAYA,GAChBlC,EAAI2D,KAAKR,GALd,uDAQInD,GARJ,4C,sBA0BA,SAAe4D,EAAtB,kC,4CAAO,WAAgD1B,GAAhD,2BAAArC,EAAA,sEACwBoC,EAAyBC,GADjD,cACG2B,EADH,gBAGkCpB,EAAmCP,GAHrE,0CAGI4B,EAHJ,KAGgBC,EAHhB,KAIGC,EAAkBF,EAAWhB,KAAI,SAAAK,GAAG,OAAIA,EAAIc,SAC5CC,EAAYH,EAASI,OAAON,GAAcX,QAAO,SAAAC,GAAG,OAAKa,EAAgBzC,SAAS4B,EAAIc,UALzF,kBAOIC,GAPJ,6C,sBAaA,SAAeE,IAAtB,+B,4CAAO,sBAAAvE,EAAA,sEACWK,EAAa,mBADxB,uCAC4CD,KAAK8B,OADjD,4C,ggBC1NHsC,EAAU,mDAIP,SAAeC,EAAtB,sC,4CAAO,WAA+BC,EAAOC,EAAaC,GAAnD,uBAAA5E,EAAA,6DACG6E,EAAeC,KAAKC,MAAOJ,EAAcK,KAAiBjD,WAD7D,SAEiCyC,EAFjC,0BAE0CS,SAF1C,SAEmET,EAFnE,0BAE4EU,IAAIC,SAASN,GAAtFO,EAFH,KAEmDC,SAFnD,0BAGyBb,EAHzB,2BAGkCc,kBAA/BC,EAHH,SAICC,EAAe,GAJhB,eAQgBD,EARhB,UASYf,EATZ,2BASqBiB,UAAUC,gBAAgBhB,GAT/C,UAUYF,EAVZ,2BAUqBS,SAVrB,KAUuCG,EAAqBO,SAV5D,UAUwFnB,EAVxF,oBAUiGU,IAAIC,SAASS,IAAO7D,YAVrH,UAUqE8D,YAVrE,0BAU8BR,SAV9B,sBAWKT,EAHJY,EARD,KAQyBM,OARzB,kFAaKC,EAAM,oBACNC,KAAKrF,UAAL,OAAkBe,SAAS,0BAdhC,wBAeKqE,GAAY,uDAfjB,kBAgBYA,GAhBZ,qDAoBIP,GApBJ,4D,sBAuBA,SAAeS,EAAtB,0C,4CAAO,WAAiCT,EAAcU,EAAkBC,EAAYC,EAAe1B,GAA5F,+CAAA1E,EAAA,6DACHQ,QAAQC,IAAI,0BAA2BiE,GADpC,SAE0BzC,cAF1B,cAEGoE,EAFH,OAGH7F,QAAQC,IAAI,qCAAsCyF,EAAiBI,OAHhE,SAIsB9B,EAJtB,0BAI+B+B,UAJ/B,KAKCf,EALD,KAMCU,EAND,KAOCG,EAPD,UAQQ7B,EARR,2BAQiBS,SARjB,UAQ0CT,EAR1C,2BAQmDU,IAAIC,SAASS,IAAO7D,YARvE,UAQ0BsD,SAR1B,0BASQb,EATR,2BASiBgC,QAAQC,YAAYL,GATrC,UAUQ5B,EAVR,2BAUiBS,SAASyB,gBANvBC,EAJH,KAIyCC,IAJzC,mDAW6BpC,EAX7B,oBAWsCqC,WAArCC,EAXD,uBAYeX,GAZf,kEAYQ7C,EAZR,kBAa0BkB,EAb1B,eAaOuC,EAbP,OAamCC,MAAM7B,SAAS7B,EAAIc,OAbtD,UAckCI,EAdlC,qBAc2CyC,UAd3C,MAcqDF,EAA9CG,EAdP,iBAeCJ,EAAeK,IAAID,GAfpB,0JAiBHP,EAAUS,gBAAgBN,GAC1BtG,QAAQC,IAAI,mBACNqB,EAAKuF,EAAgBV,EAAUW,QAAQC,WAC7C/G,QAAQC,IAAI,uBAAwBqB,GApBjC,UAsBuB0C,EAtBvB,WAsBGgD,EAtBH,OAsBgCC,oBAAoBC,UAAUhH,IAAWC,UAAUmB,KAClF6F,EAAYN,EAAgBG,EAAWD,YAGjCrE,OAASyE,EAAUzE,OAAOD,KAAI,SAAAK,GACpC,IAAMsE,EAAcC,EAAUnD,EAAMoD,MAAK,SAAAC,GAAI,OAAIA,EAAK3D,QAAUd,EAAIc,UACpE,OAAO,2BACAwD,GADP,IAEII,UAAW,QAInBL,EAAUxB,WAAawB,EAAUxB,WAAWlD,KAAI,SAAAK,GAC5C,IAAMsE,EAAcC,EAAU1B,EAAW2B,MAAK,SAAAC,GAAI,OAAIA,EAAK3D,QAAUd,EAAIc,UACzE,OAAO,2BACAwD,GADP,IAEII,UAAW,QAIbC,EAAcC,EAAcP,EAAUzE,OAAQyE,EAAUvE,SACxDwB,EAASuD,EAAiBR,EAAUzE,OAAQyE,EAAUvE,WACxD6E,EAAc,GAAKzG,OAAOC,KAAKmD,GAAU,GA5C1C,wBA6CCpE,QAAQC,IAAI,yBAA0BwH,EAAarD,GA7CpD,UA8CwBwD,YAAehC,GA9CvC,eA8COiC,EA9CP,OA+COC,EAAkBX,EAAUvE,QAAQmF,WAAW,SAAAC,GAAM,OAAIA,EAAOC,WAAaJ,KAC/EK,EAAaf,EAAUvE,QAAQC,QAAO,SAAAmF,GAAM,OAAIA,EAAOC,WAAaJ,KAhDzE,UAiD6BM,EAAgBhB,EAAUzE,OAAQwF,EAAYtC,GAjD3E,QAiDOwC,EAjDP,OAkDCF,EAAWG,OAAOP,EAAiB,EAAGM,GACtCjB,EAAUvE,QAAV,YAAwBsF,GAnDzB,iCAsDIf,GAtDJ,kE,sBAyDA,SAASN,EAAgByB,GAC5B,IAAI3H,EAAOT,IAAWiD,MAAMmF,GAC5B,MAAO,CACHvH,GAAIJ,EAAKI,GACT2B,OAAQ/B,EAAK+B,OACbiD,WAAYhF,EAAKgF,WACjB/C,QAASjC,EAAKiC,QAAQH,KAAI,SAAAuF,GAAM,OAAKX,EAAUW,OAIhD,SAASX,EAAU1G,GAA4C,IAAtC4H,IAAqC,yDAAhBC,EAAgB,uDAAT,QACxD,QAAaC,IAAT9H,EACA,MAAO,GAEX,IAAIhB,EAAM,GA2CV,MA1Ca,UAAT6I,IAEI7I,EAAG,MADH,OAAQgB,EACOA,EAAKI,GAELJ,EAAKiD,OAG5BjE,EAAG,MAAYgB,EAAK+H,MAAMnH,WAC1B5B,EAAG,SAAegB,EAAKsH,SACnBU,MAAMC,QAAQjI,EAAKkI,QACnBlJ,EAAG,OAAagB,EAAKkI,OAAOpG,KAAI,SAAAqG,GAAK,cAAK,CACtC9G,QAAS8G,EAAM9G,QACf+G,OAAQD,EAAMC,OAAOxH,WACrByH,KAAI,UAAEF,EAAME,YAAR,QAAgB,GACpBC,SAAQ,UAAEH,EAAMG,gBAAR,QAAoB,MAGhCtJ,EAAG,OAAa,GAEhBuJ,EAAOvI,EAAI,qBACXhB,EAAG,oBAA0BwJ,EAAyBxI,EAAKyI,qBAE3DzJ,EAAG,oBAA0B,GAGjCA,EAAG,eAAqBgB,EAAKkF,eAEzB,YAAalF,IACbhB,EAAG,QAAcgB,EAAKkB,SAGb,UAAT2G,IAEI7I,EAAG,cADH,SAAUgB,EACaA,EAAK0I,KAEL1I,EAAK2I,cAEhC3J,EAAG,MAAYgB,EAAK4I,OAEpBhB,IACA5I,EAAG,UAAgB,IAEhBA,EAWX,SAASwJ,EAAyBxI,GAC9B,IAAI6I,EAAe,GAWnB,OATAxI,OAAOyI,QAAQ9I,GAAM+I,SAAQ,YAAmB,IAAD,mBAAhBC,EAAgB,KAAXjB,EAAW,KAEvCQ,EAAOR,GACPc,EAAaG,GAAOjB,EAAK,gBAEzBc,EAAaG,GAAOjB,KAIrBc,EAGJ,SAAeI,EAAtB,sC,4CAAO,WAAuC9G,EAAK+G,EAAUC,GAAtD,eAAAtK,EAAA,6DACGuK,GAAmB,IAAIC,KAAcC,OAAOH,GAD/C,KAEHhH,EAFG,KAEoB+G,EAFpB,SAEqC7F,EAFrC,mBAE8CkG,SAASC,gBAAgBJ,GAFvE,KAECK,mBAFD,iE,sBAKA,SAAeC,EAAtB,wC,4CAAO,WAAkC3E,EAAkB4E,EAAiBC,EAAc1E,GAAnF,mBAAArG,EAAA,6DACGgL,EAAmBlG,KAAKC,MAAO+F,EAAkB9F,KAAiBjD,WADrE,SAE2ByC,EAF3B,0BAEoCS,SAFpC,SAE6DT,EAF7D,0BAEsEU,IAAIC,SAAS6F,GAAhFC,EAFH,KAE6C5F,SAF7C,0BAGiCb,EAHjC,2BAG0C0G,wBAH1C,KAICD,EAJD,UAKQzG,EALR,2BAKiB2G,SALjB,UAKgD3G,EALhD,oBAKyDgC,QAAQC,YAAYsE,GAL7E,UAK0BK,eAL1B,qBAMC/E,EAHEgF,EAHH,mCAQCnF,EAAiBiB,IAAIkE,EAAiB/D,SARvC,yDAUC9G,QAAQC,IAAR,wCAVD,iE,sBA2BA,SAAS6K,EAAoBC,GAChC,IADyC,EACrCC,EAAc,EADuB,cAEvBD,GAFuB,IAEzC,2BAA2B,CAAC,IAAjBjI,EAAgB,QACvB,GAAIA,EAAI+F,OAAQ,CAAC,IAAD,gBACQ/F,EAAI+F,QADZ,IACZ,2BAAgC,CAAC,IAAtBoC,EAAqB,QACxBA,EAAMjJ,SAAWkJ,MACjBF,GAAeG,SAASF,EAAMlC,UAH1B,iCAHqB,8BAWzC,OAAOiC,EAGJ,SAASI,EAAkBlH,GAC9B,OAAOA,EAAMmH,QAAO,SAACC,EAAK/D,GAAN,OAAe+D,EAAOC,OAAOhE,EAAKmB,SAAQ6C,OAAO,IAGlE,SAASC,EAAsBtH,GAClC,IAAIuH,EAAY,GAChB,IAAK,IAAMC,KAAKxH,EACZ,IAAK,IAAMyH,KAAKzH,EAAMwH,GAAG7C,OACjB3E,EAAMwH,GAAG7C,OAAO8C,GAAG3J,WAAWyJ,EAC9BA,EAAUvH,EAAMwH,GAAG7C,OAAO8C,GAAG3J,SAAWuJ,OAAOE,EAAUvH,EAAMwH,GAAG7C,OAAO8C,GAAG3J,UAAYuJ,OAAOrH,EAAMwH,GAAG7C,OAAO8C,GAAG5C,QAElH0C,EAAUvH,EAAMwH,GAAG7C,OAAO8C,GAAG3J,SAAWuJ,OAAOrH,EAAMwH,GAAG7C,OAAO8C,GAAG5C,QAI9E,OAAO0C,EAGJ,SAAS/D,EAAchF,EAAQE,GAClC,IAAMgJ,EAAWR,EAAkB1I,GAC7BmJ,EAAYT,EAAkBxI,GACpC,OAAIgJ,GAAYC,EACLD,EAAWC,EAEXN,OAAO,GAIf,SAAS5D,EAAiBjF,EAAQE,GACrC,IAAMkJ,EAAWN,EAAsB9I,GACjCqJ,EAAYP,EAAsB5I,GACpCjD,EAAM,GAEV,GADAK,QAAQC,IAAI,mBAAoB6L,EAAUC,GACtCD,IAAa,GACb,IAAK,IAAMb,KAASa,EACZC,IAAc,IAAMd,KAASc,EACzBD,EAASb,GAASc,EAAUd,GAAS,IACrCtL,EAAIsL,GAASa,EAASb,GAASc,EAAUd,IAG7CtL,EAAIsL,GAASa,EAASb,GAKlC,OADAjL,QAAQC,IAAI,mBAAoB6L,EAAUC,EAAWpM,GAC9CA,EAGJ,SAAewI,EAAtB,sC,4CAAO,WAA+BzF,EAAQE,EAASf,GAAhD,qBAAArC,EAAA,6DACGiI,EAAcC,EAAchF,EAAQE,GAASrB,WADhD,SAEoBqG,YAAe/F,GAFnC,cAEGgG,EAFH,OAGGzD,EAAS4H,EAAerE,EAAiBjF,EAAQE,IAHpD,SAIkBnB,cAJlB,cAIGE,EAJH,OAKH3B,QAAQC,IAAI,kBAAmBwH,EAAaI,EAAUzD,EAAQzC,GAL3D,kBAOI,CACH+G,MAAOjB,EACPQ,SAAUJ,EACVgB,OAAQzE,EACRgF,oBAAqB,GACrBvD,eAAgBlE,EAChB6F,UAAW,GACX+B,WAAOd,EACP7E,WAAO6E,IAfR,6C,sBAmBA,SAASuD,EAAe5H,GAC3B,IAAIzE,EAAM,GACV,GAAIyE,IAAW,GACX,IAAK,IAAMsH,KAAKtH,EACZzE,EAAI2D,KAAK,CAAE,QAAWoI,EAAG,OAAUtH,EAAOsH,GAAGnK,aAGrD,OAAO5B,EAGJ,SAASsM,EAAoB3K,GAChC,IAAM4K,EAAgBpB,EAAoBxJ,EAAGoB,QACvCyJ,EAAiBrB,EAAoBxJ,EAAGsB,SACxCwJ,EAAUhB,EAAkB9J,EAAGoB,QAC/B2J,EAAWjB,EAAkB9J,EAAGsB,SAChC0J,EAAQJ,GAAiBC,GAAkBC,GAAWC,EAK5D,OAJArM,QAAQC,IAAIqM,EAAM,UAAWF,EAAS,WAAYC,EAAU,gBAAiBH,EAAe,iBAAkBC,GACzGG,GACDtM,QAAQC,IAAIqB,GAETgL,EAGJ,SAASC,EAAezJ,EAAKd,GAChC,IADyC,EACrCgJ,EAAc,IADuB,cAErBlI,EAAI+F,QAFiB,IAEzC,2BAAgC,CAAC,IAAtBC,EAAqB,QACxBA,EAAM9G,SAAWA,IACjBgJ,EAAclC,EAAMC,SAJa,8BAOzC,OAAOiC,EAGJ,SAASwB,EAAiB1J,EAAK+G,GAClC,OAAIA,KAAY/G,EAAIsG,oBACZF,EAAOpG,EAAIsG,oBAAoBS,IAExB/G,EAAIsG,oBAAoBS,GAAU4C,gBAElC3J,EAAIsG,oBAAoBS,GAG5B,GASf,SAASX,EAAOwD,GACZ,MAAoB,kBAANA,GAAwB,OAANA,KAAgBA,aAAa/D,UAAY+D,aAAaC,M,SAG3ErN,E,8EAAf,WAA0BC,GAA1B,eAAAC,EAAA,sEACsBC,YAAImN,IAAuBrN,EAAK,IADtD,cACUI,EADV,yBAEWA,GAFX,4C,sBAIO,SAAekN,IAAtB,+B,4CAAO,sBAAArN,EAAA,sEACUF,EAAW,yBADrB,oF,sBAIA,SAAewN,IAAtB,+B,4CAAO,gCAAAtN,EAAA,sEACgBqN,IADhB,cACGlN,EADH,gBAE0BqE,EAF1B,cAEG+I,EAFH,OAEmCC,aAAa9F,UAAUvH,GAF1D,SAGuBqE,EAHvB,cAGGiJ,EAHH,OAGgCC,UAAUC,kBAAkBJ,EAActN,IAAI,IAH9E,UAIeuE,EAJf,2BAIwBoJ,iBAJxB,KAIyCH,EAJzC,KAIqDF,EAJrD,oF,sBAOA,SAAeM,EAAtB,kC,4CAAO,WAAoCC,GAApC,qBAAA9N,EAAA,sEACeuE,cADf,cACGpE,EADH,OAEHK,QAAQC,IAAI,uBAAwBN,GAC9B4N,EAAkB5N,EAAI6N,MAAMF,EAAW,GAAKA,GAH/C,SAI0BtJ,EAJ1B,cAIG+I,EAJH,OAImCC,aAAa9F,UAAUqG,GAJ1D,UAKuBvJ,EALvB,eAKGiJ,EALH,OAKgCC,UAAUC,kBAAkBJ,EAActN,IAAI,IAL9E,UAMeuE,EANf,2BAMwBoJ,iBANxB,KAMyCH,EANzC,KAMqDF,EANrD,oF,sBASA,SAAeU,EAAtB,wC,4CAAO,WAA2CzG,EAAYtE,EAAQiD,EAAY+H,GAA3E,yBAAAlO,EAAA,sEAEgCwE,EAFhC,cAEG2J,EAFH,OAEyC1G,oBAAoBC,UAAUhH,IAAWC,UAAU6G,IAF5F,SAGuBhD,EAHvB,cAGG4J,EAHH,OAGgC3I,UAAUC,gBAAgBxC,GAH1D,SAI4BsB,EAJ5B,OAIG6J,EAJH,OAIqC5I,UAAUC,gBAAgBS,GACzD+F,EAAI,EALV,aAKaA,EAAI,IALjB,kCAOK1L,QAAQC,IAAI,OAAOyL,EAAEnK,YAP1B,UAQuB8L,EAAqB3B,GAR5C,eAQWoC,EARX,OASWC,EAAWL,EAAOM,iBAAiBF,EAAKH,EAAqBC,EAAYC,GATpF,kBAWYE,EAAShH,WAXrB,0CAaK/G,QAAQC,IAAR,MAbL,gCAKqByL,IALrB,sDAiBIjD,GAjBJ,4D,sBAoBA,SAAewF,EAAtB,wC,4CAAO,WAA+BjH,EAAYtE,EAAQiD,EAAY+H,GAA/D,uBAAAlO,EAAA,sEAEgCwE,EAFhC,cAEG2J,EAFH,OAEyC1G,oBAAoBC,UAAUhH,IAAWC,UAAU6G,IAF5F,SAGuBhD,EAHvB,cAGG4J,EAHH,OAGgC3I,UAAUC,gBAAgBxC,GAH1D,SAI4BsB,EAJ5B,cAIG6J,EAJH,OAIqC5I,UAAUC,gBAAgBS,GAJ/D,UAKemH,IALf,eAKGgB,EALH,OAOGC,EAAWL,EAAOM,iBAAiBF,EAAKH,EAAqBC,EAAYC,GAP5E,kBAQIE,EAAShH,WARb,6C,6bC/XH/C,EAAU,mDAuBP,SAAekK,EAAtB,kC,4CAAO,WAA+BC,GAA/B,SAAA3O,EAAA,sEACWwE,EADX,uCACoBkG,SAASkE,mBAAmBD,IADhD,4C,sBAIA,SAAeE,EAAtB,kC,4CAAO,WAA+BC,GAA/B,SAAA9O,EAAA,sEACWwE,EADX,uCACoBkG,SAASqE,mBAAmBD,GAAcE,mBAAmB/L,KAAI,SAAAgM,GAAG,OAAItD,SAASsD,OADrG,4C,sBAeA,SAAeC,EAAtB,kC,4CAAO,WAA0BC,GAA1B,SAAAnP,EAAA,sEACWwE,EADX,0BACoBkG,SADpB,SAC6ClG,EAD7C,0BACsDU,IAAIC,SAASgK,GADnE,uBAC6B9J,SAD7B,6D,sBAGA,SAAe+J,EAAtB,kC,4CAAO,WAA0BD,GAA1B,SAAAnP,EAAA,sEACWwE,EADX,uCACoBkG,SAASqE,mBAAmBI,GAAKE,SAASC,UAD9D,4C,sBAQA,SAAeC,EAAtB,kC,4CAAO,WAA8BC,GAA9B,SAAAxP,EAAA,sEACWwE,EADX,uCACoBkG,SAASC,gBAAgB8E,EAAOC,KAAKF,EAAK,SAD9D,4C,sBAQA,SAASG,EAAYC,GACxB,OAAOzG,MAAMuG,KAAKE,GAAW,SAASC,GAClC,OAAQ,KAAc,IAAPA,GAAa9N,SAAS,KAAKiM,OAAO,MAClD8B,KAAK,IAGL,SAAeC,EAAtB,kC,4CAAO,WAA4BC,GAA5B,SAAAhQ,EAAA,kEACIiQ,aADJ,KAC6BN,EAD7B,SACgDnL,EADhD,0BACyDkG,SAASqE,mBAAmBiB,GAASE,gBAD9F,2CACeC,cADf,6D,sBAIA,SAAeC,EAAtB,kC,4CAAO,WAAyBJ,GAAzB,SAAAhQ,EAAA,kEACI2P,EADJ,SACuBnL,EADvB,0BACgCkG,SAASqE,mBAAmBiB,GAASE,gBADrE,8E,sBAaA,SAAe9H,EAAtB,kC,4CAAO,WAA8B/F,GAA9B,eAAArC,EAAA,sEACgBwE,EADhB,0BACyB2G,SADzB,SACwD3G,EADxD,0BACiEgC,QAAQC,YAAYpE,GAAlFgO,EADH,KACkCjF,eADlC,kCAEIiF,EAAIC,YAAYC,mBAFpB,4C,sBAKA,SAAeC,EAAtB,kC,4CAAO,WAAiC/H,GAAjC,iBAAAzI,EAAA,sEAEkBwE,EAFlB,cAEGiM,EAFH,OAE2BC,SAASC,kBAAkBlI,GAFtD,SAGoBjE,EAHpB,cAGGnC,EAHH,OAG6BmE,QAAQoK,wBAAwBH,GAH7D,kBAIIpO,EAAQwO,aAJZ,4C,qXCxFQ,SAASC,IACpB,OAEI,qBAAKC,UAAU,0BAAf,SACI,sBAAKA,UAAU,QAAf,UACI,uBACA,cAACC,EAAA,EAAD,CACIC,OAAQC,cACRC,OAAQD,cACRE,KAAMC,cACNjS,SAAUkS,YAAa,EAAG,GAAGvP,WAC7BhE,WAAYuT,YAAa,EAAG,GAAGvP,WAC/ByH,KAAK,GACL+H,QAAQ,IAEZ,4BCbT,SAASC,EAAaC,GACzB,IAAMC,EAASC,IAAiBC,KAOhC,OANAF,EAAOG,KAAK,CACRJ,MAAO,4BAAIA,IACXK,KAAM,cAAChB,EAAD,IACNiB,mBAAmB,EACnBC,mBAAmB,IAEhBN,EAGJ,SAASO,EAAWC,GACvBA,EAAMC,QAGH,SAASC,EAAWX,EAAO1L,GAC9B,IAAM2L,EAASC,IAAiBC,KAOhC,OANAF,EAAOG,KAAK,CACRJ,MAAO,4BAAIA,IACXY,KAAM,QACNC,KAAMvM,EACNgM,mBAAmB,IAEhBL,EAGJ,SAASa,EAAmB1I,GAC/B,IAAM6H,EAASC,IAAiBC,KAQhC,OAPAF,EAAOG,KAAK,CACRJ,MAAO,6DACPM,mBAAmB,EACnBM,KAAM,UACNG,iBAAiB,EACjBV,KAAK,oJAAD,OAAsJjI,EAAtJ,+BAAiLA,EAAjL,eAED6H,EAGJ,SAASe,IACZb,IAAKC,KAAK,CACNa,SAAU,UACVL,KAAM,UACNZ,MAAO,UACPO,mBAAmB,EACnBW,MAAO,MAIR,SAASC,EAAgB5J,GAC5B,OAAO,IAAIhI,SAAQ,SAAU6R,EAASC,GAClClB,IAAKC,KAAK,CACNJ,MAAO,iBAAmBzI,EAC1B8I,KAAK,6FACLiB,kBAAmB/J,EACnBgK,cAAc,EACdC,kBAAkB,EAClBC,WAAY,WACR,IAAMC,EAAYvB,IAAKwB,WAAWC,cAAc,cAAcnK,MAI9D,QAHKoK,WAAWH,IAAcG,WAAWH,GAAa,KAClDvB,IAAK2B,sBAAL,sDAEG,CAAEJ,UAAWG,WAAWH,OAEpCjT,MAAK,SAACoB,GACDA,EAAO4H,MACP2J,EAAQvR,EAAO4H,MAAMiK,WAErBL,UAMT,SAASU,IACZ,OAAO,IAAIxS,SAAQ,SAAU6R,EAASC,GAClClB,IAAKC,KAAK,CACNJ,MAAO,OACPK,KAAK,0MAELiB,kBAAmB,OACnBC,cAAc,EACdC,kBAAkB,EAClBC,WAAY,WACR,IAAMO,EAAY9H,SAASiG,IAAKwB,WAAWC,cAAc,cAAcnK,QAAU,EAC3EwK,EAAY/H,SAASiG,IAAKwB,WAAWC,cAAc,cAAcnK,QAAU,EAKjF,OAJiB,GAAbuK,GAA+B,GAAbC,GAClB9B,IAAK2B,sBAAL,oCAGG,CACHE,UAAWA,EACXC,UAAWA,MAGpBxT,MAAK,SAACoB,GACDA,EAAO4H,MACP2J,EAAQ,CAACvR,EAAO4H,MAAMuK,UAAWnS,EAAO4H,MAAMwK,YAE9CZ,Y,qRCpGZtO,EAAU,mDAIP,SAAemP,IAAtB,+B,4CAAO,sBAAA3T,EAAA,+EAEc4T,OAAOC,yBAFrB,+EAICrT,QAAQsT,MAAR,MACA1B,YAAW,2BAA4B,oDALxC,mBAMQ,GANR,0D,sBAYA,SAAe2B,IAAtB,+B,4CAAO,sBAAA/T,EAAA,sEAC4B2T,IAD5B,iDAGcC,OAAOI,2BAHrB,yEAKQ,GALR,6C,sBAUA,SAAeC,EAAtB,kC,4CAAO,WAAoC5R,GAApC,eAAArC,EAAA,sEAC0B+T,IAD1B,mDAG4BG,KAAKC,qBAHjC,cAGOC,EAHP,yBAIQA,EAAa1S,SAASW,IAJ9B,kCAMQ,GANR,6C,sBA+BP,SAASgS,EAAMC,GACX,OAAO,IAAItT,SAAQ,SAAA6R,GAAO,OAAI0B,WAAW1B,EAASyB,MAG/C,SAAeE,EAAtB,sC,4CAAO,WAA4BtC,EAAOpQ,EAAIO,GAAvC,mBAAArC,EAAA,6DACHkS,EAAMuC,OAAO,CAAEhD,MAAO,2BADnB,SAE8BsC,IAF9B,uCAIKE,EAAqB5R,GAJ1B,yCAAArC,EAAA,oCAAAA,EAAA,6DAKKkS,EAAMuC,OAAO,CAAEhD,MAAO,uCAL3B,SAMwBiD,EAAU5S,GANlC,YAMW+H,EANX,yBAQSrJ,QAAQC,IAAI,SAAUoJ,GACtBqI,EAAMuC,OACN,CACIhD,MAAO,6EACPM,mBAAmB,EACnBD,KAAK,gIAAD,OAAkIjI,EAAlI,+BAA6JA,EAA7J,eAGJ8K,GAAiB,EACfC,EAAYzH,KAAK0H,MAjBhC,UAkBiBF,KAAkBxH,KAAK0H,MAAQD,EAAY,KAlB5D,kCAmBmBP,EAAM,KAnBzB,mCAmC4C1R,YAAqBN,GAnCjE,QAmCqBQ,EAnCrB,OAqCuCA,EAAeQ,QAAO,SAAAvB,GAAE,OAAIA,EAAGP,KAAOsI,KAC1C7G,OAAS,IACvB2R,GAAiB,GAvCtC,mDA0CiBnU,QAAQC,IAAR,MA1CjB,+BA6CSwR,YAAWC,GACXK,YAAmB1I,GA9C5B,wBAgDuB,yBACE,sDAChBuI,YAFc,yBACE,uDAjDzB,kGAsDKH,YAAWC,GACG,gBACR4C,EAAU,eAAiBzS,EAAU,6FAC3C+P,YAFc,gBAEI0C,GAzDvB,gCA6DC7C,YAAWC,GACX1R,QAAQC,IAAI,uBA9Db,6C,sBAmEA,SAAesU,EAAtB,kC,4CAAO,WAAwBlQ,GAAxB,yBAAA7E,EAAA,6DACGgV,EAAmBjJ,OAAOlH,GAD7B,SAEiBqP,KAAKe,UAAUD,EAAiBjT,YAFjD,OAEG2C,EAFH,OAGGwQ,EAAgB,GAHnB,cAIgBxQ,GAJhB,gEAIQqD,EAJR,4BAMYvD,EANZ,eAMqB2Q,QAAQzN,UAAUhH,IAAWC,UAAUoH,IACvDmN,EAAcpR,KAAKiE,GAPxB,mDASKvH,QAAQsT,MAAM,kCAAmC/L,EAAjD,MATL,wKAYImN,GAZJ,yE,sBAeA,SAAeE,EAAtB,oC,4CAAO,WAA6BC,EAAmB7S,GAAhD,yBAAAxC,EAAA,6DACGgV,EAAmBjJ,OAAOsJ,GAD7B,SAEiBnB,KAAKe,UAAUD,EAAiBjT,WAAYS,GAF7D,UAEGkC,EAFH,OAGHlE,QAAQC,IAAI,gBAAgBiE,GACtBwQ,EAAgB,IAClBxQ,EALD,+BAMoBA,GANpB,iEAMYqD,EANZ,4BAQgBvD,EARhB,eAQyB2Q,QAAQzN,UAAUhH,IAAWC,UAAUoH,IACvDmN,EAAcpR,KAAKiE,GAT5B,mDAWSvH,QAAQsT,MAAM,kCAAmC/L,EAAjD,MAXT,wKAeCvH,QAAQC,IAAI,2BAA2B+B,EAAQ,YAAY6S,GAf5D,iCAkBIH,GAlBJ,yE,sBAqBA,SAAeI,IAAtB,+B,4CAAO,oCAAAtV,EAAA,6DACGkV,EAAgB,GADnB,SAEiBhB,KAAKe,YAFtB,OAEGvQ,EAFH,qBAGgBA,GAHhB,gEAGQqD,EAHR,2BAKYvD,EALZ,eAKqB2Q,QAAQzN,UAAUhH,IAAWC,UAAUoH,IACvDmN,EAAcpR,KAAKiE,GANxB,2EAQY,MARZ,wKAWImN,GAXJ,wE,+BAcQK,E,8EAAf,WAAsBC,GAAtB,SAAAxV,EAAA,sEAEQQ,QAAQC,IAAI,SAAU+U,GAF9B,SAGqBtB,KAAKuB,QAAQD,GAHlC,+EAKQhV,QAAQC,IAAR,MALR,kBAMe,MANf,0D,+BAUeiV,E,8EAAf,WAAwBC,GAAxB,SAAA3V,EAAA,sEAEQQ,QAAQC,IAAI,YAFpB,SAGqByT,KAAK0B,UAAUD,GAHpC,+EAKQnV,QAAQC,IAAR,MALR,kBAMe,MANf,0D,sBAUO,SAAeiU,EAAtB,kC,4CAAO,WAAyBmB,GAAzB,mBAAA7V,EAAA,6DACG+F,EAAM,SAAA+P,GACRtV,QAAQC,IAAI,cAAeqV,IAF5B,SAIoBP,EAAOM,GAJ3B,UAIGtH,EAJH,8BAMC/N,QAAQsT,MAAR,+BAND,kBAOQ,MAPR,cASH/N,EAAI,4CATD,UAUgB2P,EAASnH,GAVzB,WAUG1E,EAVH,+BAaCrJ,QAAQC,IAAR,sBAbD,kBAcQ,MAdR,eAgBHsF,EAAI,0BAhBD,kBAiBI8D,GAjBJ,6C,wPCnMHrF,EAAU,mDAEOuR,E,kDACjB,WAAY9X,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT3T,QAAS4T,aAAaC,QAAQ,WAC9BC,SAAU,GACVC,gBAAiB,IAErB,EAAKC,qBAAuB,EAAKA,qBAAqBC,KAA1B,gBAC5B,EAAKC,WAAa,EAAKA,WAAWD,KAAhB,gBAClB,EAAKE,kBAAoB,EAAKA,kBAAkBF,KAAvB,gBATV,E,iEAYEG,GACjBzY,KAAK0Y,SAAS,CAAEP,SAAUM,EAAME,OAAOpV,O,gDAGjBqV,GACtB5Y,KAAK0Y,SAAS,CACVrU,QAASuU,EAAUvU,Y,oKAKjBrE,KAAKuY,a,uBACLvY,KAAKwY,oB,wRAIiB7G,I,SAAmBnL,E,0BAASkG,S,SAC7ClG,E,0BAASgC,QAAQC,YAAYzI,KAAKgY,MAAM3T,SAASwU,SAAS,GAAMC,SAAS,EAAG,I,UADtBC,mB,gBAE/DC,wBAFIC,G,wBAGyBlT,YAAiCmT,K,QAA1DC,E,OACFf,EAAkB,G,cACJe,G,IAAlB,2BAAoC,CAAzB7T,EAAyB,QAChC,IACQA,EAAIsG,oBAAoBwN,KAClBC,EAAuB5H,EAAOC,KAAKpM,EAAIsG,oBAAoBwN,GAAGnK,gBAAiB,OACjF0C,YAAY0H,KAA0BJ,GACtCb,EAAgBtS,KAAKR,IAG/B,MAAOgU,GACL9W,QAAQC,IAAI,aAAc6W,K,8BAGlCtZ,KAAK0Y,SAAS,CACVN,gBAAiBA,I,gSAKMrS,YAAiCwT,K,cAAtDvT,E,gBAE+BpB,YAAmC5E,KAAKgY,MAAM3T,S,0CAA5ES,E,UACD0U,EAAc1U,EAAWG,KAAI,SAAAK,GAAG,OAAIA,EAAIc,SAC1CC,EAAYL,EAAaX,QAAO,SAAAC,GAAG,OAAKkU,EAAY9V,SAAS4B,EAAIc,U,KAEzCuL,I,UAAmBnL,E,2BAASkG,S,UAC7ClG,E,oBAASgC,QAAQC,YAAYzI,KAAKgY,MAAM3T,SAASwU,SAAS,GAAMC,SAAS,EAAG,I,UADtBC,mB,gBAE/DC,wBAFIC,G,cAGFd,EAAW,G,cACG9R,G,IAAlB,2BAA6B,CAAlBf,EAAkB,QACzB,IACQA,EAAIsG,oBAAoB6N,KAClBC,EAAgBjI,EAAOC,KAAKpM,EAAIsG,oBAAoB6N,GAAGxK,gBAAiB,OAC1E0C,YAAY+H,KAAmBT,GAC/Bd,EAASrS,KAAKR,IAGxB,MAAOgU,GACL9W,QAAQC,IAAI,aAAc6W,K,8BAGlCtZ,KAAK0Y,SAAS,CACVP,SAAUA,I,sIAIR,IAAD,OAEL,OACI,eAAC,WAAD,WACI,uBACA,+CAGA,qBAAKpF,UAAU,wBAAf,SACK/S,KAAKgY,MAAMG,SAASlT,KAAI,SAAA0U,GAAI,OACzB,cAAC,IAAD,CAEIC,YAAaD,EACbE,WAAY,EAAKtB,YAFZoB,EAAKvT,YAMtB,uBAEIpG,KAAKgY,MAAMI,gBAAgBpT,OAAS,EAChC,eAAC,WAAD,WACI,uDAGA,qBAAK+N,UAAU,wBAAf,SACK/S,KAAKgY,MAAMI,gBAAgBnT,KAAI,SAAA0U,GAAI,OAChC,cAAC,IAAD,CAEIG,KAAMH,EACNE,WAAY,EAAKrB,mBAFZmB,EAAKvT,eAOxB,Y,GAjHenF,IAAMC,a,mNCF1B6Y,E,kDACjB,WAAY9Z,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT8B,KAAM7Z,EAAM6Z,KACZ1G,KAAM,GACNH,OAAQ,GACRE,OAAQ,GACR/R,SAAU,EACVrB,WAAY,EACZyL,KAAM,GACNqO,WAAY5Z,EAAM4Z,YAEtB,EAAKG,kBAAoB,EAAKA,kBAAkB1B,KAAvB,gBACzB,EAAK2B,OAAS,EAAKA,OAAO3B,KAAZ,gBAbC,E,wGAgBM4B,EAAWC,G,oEAC5BD,EAAUJ,KAAK1T,QAAUpG,KAAKC,MAAM6Z,KAAK1T,M,gCAAepG,KAAKga,kBAAkBha,KAAKC,MAAM6Z,M,0LAG1ExU,G,yFACDyM,YAAazM,EAAIsG,oBAAoBwO,GAAGnL,iB,OAArDoL,E,OACAC,EAAYD,EAAKtW,WAAWwW,MAAM,KACxCva,KAAK0Y,SAAS,CACVtS,MAAOd,EAAIc,MACXgN,KAAMkH,EAAU,GAChBrH,OAAQ,IAAMqH,EAAU,GACxBnH,OAAQ,IAAMmH,EAAU,GACxBlZ,SAAUkZ,EAAU,GACpBva,WAAYua,EAAU,GACtB9O,KAAM8O,EAAU,K,2QAKdta,KAAKga,kBAAkBha,KAAKgY,MAAM8B,M,4KAG/B1T,G,wEACT5D,QAAQC,IAAI,oBAAqB2D,G,SAC3BoU,YAAkBxa,KAAKgY,MAAM8B,M,uBAC7B9Z,KAAKgY,MAAM6B,a,sIAGX,IAAD,OACL,OACI,sBAAK9G,UAAU,yDAAf,UACI,sBAAKA,UAAU,+BAAf,UACI,cAAC,IAAD,CACIE,OAAQjT,KAAKgY,MAAM/E,OACnBE,OAAQnT,KAAKgY,MAAM7E,OACnBC,KAAMpT,KAAKgY,MAAM5E,KACjBhS,SAAUpB,KAAKgY,MAAM5W,SACrBrB,WAAYC,KAAKgY,MAAMjY,WACvByL,KAAMxL,KAAKgY,MAAMxM,MANP,UAAYxL,KAAKgY,MAAM5R,OADzC,qBASuBuH,SAAS3N,KAAKgY,MAAM8B,KAAK5O,OAASlE,KAAgByT,QAAQ,GATjF,UAWA,qBAAK1H,UAAU,sBAAf,SACI,wBAAQA,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKT,OAAO,EAAKjC,MAAM5R,QAAnF,6B,GA5DyBnF,IAAMC,Y,oHCNnD,8JAEO,SAASgS,IACZ,MAAO,IAAMpM,KAAK6T,SAAS5W,SAAS,IAAI6W,QAAQ,GAG7C,SAAStH,EAAauH,EAAKC,GAG9B,OAFAD,EAAM/T,KAAKiU,KAAKF,GAChBC,EAAMhU,KAAKkU,MAAMF,GACVhU,KAAKkU,MAAMlU,KAAK6T,UAAYG,EAAMD,EAAM,IAAMA,EAGzD,SAASI,EAAiBC,EAASC,EAASC,EAAQC,GAChD,IAAIC,GAAkBD,EAAe,IAAMvU,KAAKyU,GAAK,IACrD,MAAO,CACLC,EAAGN,EAAWE,EAAStU,KAAK2U,IAAIH,GAChCI,EAAGP,EAAWC,EAAStU,KAAK6U,IAAIL,IAI/B,SAAS/a,EAAYib,EAAGE,EAAGN,EAAQQ,EAAYC,GAClD,IAAIC,EAAQb,EAAiBO,EAAGE,EAAGN,EAAQS,GACvCE,EAAMd,EAAiBO,EAAGE,EAAGN,EAAQQ,GACrCI,EAAeH,EAAWD,GAAc,IAAM,IAAM,IAKxD,MAJQ,CACJ,IAAKE,EAAMN,EAAGM,EAAMJ,EACpB,IAAKN,EAAQA,EAAQ,EAAGY,EAAc,EAAGD,EAAIP,EAAGO,EAAIL,GACtD5J,KAAK,KAaF,SAASuB,IACd,IAAI4I,EAAS3I,EAAa,EAAG,GACzB4I,EAAQ5I,EAAa,EAAG,IAExB4I,EAAQD,EAAS,KACjBC,GAAgB,EAChBD,GAAkB,GAGtB,IAAI7I,EAAO+I,IAAU,CACjBC,KAAM,IACNH,OAAQA,EACRC,MAAOA,EACPG,KAAM,OACPjJ,KAEH,OADA5Q,QAAQC,IAAI2Q,GACLA,I,+BCxDX,s5BAAO,IAAMpM,EAAiB,IACjBsV,EAAwB,KAAQtV,EAChCY,EAAS,IAGT2U,EAA2B,qCAC3BnN,EAAuB,+BAEvBoN,EAAe,sDACf9O,EAAgB,mEAChB+O,EAAkB,mEAClBC,EAAmB,mEACnBC,EAAa,IACbC,EAAqB,EAAIN,EAAwB1U,EACjDiV,EAAgBP,EAChBQ,EAAoB,GAEpBC,EAAqB,EACrBC,EAAqB,EACrBC,EAAgB,EAChBC,EAAmB,EACnBC,EAA0B,EAC1BC,EAA2B,EAK3BC,EAAuB,g5BAIvBC,EAA+B,seAI/BC,EAAsB,+EAItBrE,EAA4B,wZAG5BsE,EAAiB,mEACjBjE,EAAoB,s+FAGpBkE,EAAiB,mEACjBC,EAAoB,4nD,ibCxC7BlX,EAAU,mDAGP,SAAegU,EAAtB,kC,4CAAO,WAAiCmD,GAAjC,mCAAA3b,EAAA,sEAC0BiC,cAD1B,cACGoE,EADH,OAEGhE,EAAU4T,aAAaC,QAAQ,WACjChE,EAAQV,YAAa,gCACnBoK,EAA0BD,EAAmBzS,MAJhD,SAKmB+K,YAAqB5R,GALxC,0CAOOqC,EAAQ,CAACiX,GAPhB,UAQ2BnX,EAR3B,eAQOqX,EARP,OAQoCpW,UAAUC,gBAAgBhB,GAR9D,UASiCF,EATjC,2BAS0CsX,sBAAnCC,EATP,mBAUiCvX,EAVjC,2BAU0CwX,aAV1C,KAUuDH,EAVvD,KAUmEE,EAA5DvW,EAVP,8BAWiChB,EAXjC,eAWO0B,EAXP,OAW0C+V,kBAAkBC,QAC3DrR,YAAmB3E,GAAmB0V,EAA0BhW,KAAUZ,IAAgB3C,EAASgE,GAZpG,UAagC9D,YAAakY,KAb7C,eAaO0B,EAbP,iBAcuBlW,YAAkBT,EAAcU,EAAkBiW,EAAkB9Z,EAASqC,GAdpG,WAcKiD,EAdL,OAeCnH,QAAQC,IAAI,YAAakH,IACrB8E,YAAoB9E,GAhBzB,kCAiBW6M,YAAatC,EAAOvK,EAAWtF,GAjB1C,gCAoBC6P,EAAQE,YAAW,mBApBpB,6C,sBAwBA,SAAegK,EAAtB,oC,4CAAO,WAAgCpT,EAAM4O,GAAtC,qDAAA5X,EAAA,sEAE0BiC,cAF1B,cAEGoE,EAFH,gBAGuBuM,YAAgB5J,GAHvC,UAGGrE,EAHH,OAIG0X,EAAavX,KAAKC,MAAMJ,EAAcK,KAEtC3C,EAAU4T,aAAaC,QAAQ,WACjChE,EAAQV,YAAa,gCACrB8K,EAAcxX,KAAKgU,IAAIhU,KAAKC,MAAMsX,EAAavB,IAAoB,KAAOR,KACxEiC,EAAmB3E,EAAY1O,MACjCsT,EAAmBD,KAEnBC,EADS,QAATxT,EACmBuT,EAAmBF,EAEnBE,EAAmBF,GAElB,EAAI/B,IAAwB1U,KAhBjD,wBAiBCsM,EAAQE,YAAW,0DAA4D,EAAIkI,IAAwB1U,KAAU,YAjBtH,4CAsBmBqO,YAAqB5R,GAtBxC,wCAwBKqC,EAAQ,GACC,QAATsE,EAzBL,kCA0BmB+L,YAASsH,EAAaC,EAAchC,KA1BvD,QA0BK5V,EA1BL,gDA4BmBqQ,YAASuF,IAAwB1U,IAAS0W,GA5B7D,QA4BK5X,EA5BL,sBA+BCA,EAAM+X,QAAQ7E,GA/Bf,UAiC4BpT,EAjC5B,eAiCOkY,EAjCP,OAiCqCC,QAAQxX,SAASuG,KAjCtD,UAkCgClH,EAlChC,2BAkCyCoY,YAlCzC,UAkCqEpY,EAlCrE,2BAkC8EU,IAAIC,SAAS,KAApF0X,EAlCP,KAkCqDxX,SAlCrD,0BAmC2Bb,EAnC3B,eAmCOqX,EAnCP,OAmCoCpW,UAAUC,gBAAgBhB,GAnC9D,UAoCiCF,EApCjC,2BAoC0CsX,sBAAnCC,EApCP,mBAqCiCvX,EArCjC,2BAqC0CwX,aArC1C,KAqCuDH,EArCvD,KAqCmEE,EAA5DvW,EArCP,8BAuCiChB,EAvCjC,eAuCO0B,EAvCP,OAuC0C+V,kBAAkBC,QAvC5D,UA0C+B1X,EA1C/B,eA0COsY,EA1CP,OA0CwC3H,QAAQzN,UAAUhH,IAAWC,UAAUiX,IA1C/E,UA2CgCpT,EA3ChC,2BA2CyCS,SA3CzC,UA2CkET,EA3ClE,2BA2C2EU,IAAIC,SAASqX,EAAiBza,YAAlGgb,EA3CP,KA2CkD1X,SA3ClD,0BA4CmCb,EA5CnC,2BA4C4C0G,wBA5C5C,KA6CK6R,EA7CL,UA8CYvY,EA9CZ,4BA8CqB2G,SA9CrB,UA8CoD3G,EA9CpD,qBA8C6DgC,QAAQC,YAAY8Q,KA9CjF,YA8C8BnM,eA9C9B,wBA+CK/E,GAHE2W,EA5CP,4BAgDgBpS,mBAAmB,EAAGkS,EAAeG,eAAe,IACnED,EAAepS,mBAAmB,EAAGkS,EAAeG,eAAe,IACnED,EAAepS,mBAAmB,EAAGkS,EAAeG,eAAe,IACnED,EAAepS,mBAAmB,EAAGkS,EAAeG,eAAe,IACnED,EAAepS,mBAAmB,EAAGkS,EAAeG,eAAe,IACnED,EAAepS,mBAAmB,EAAGkS,EAAeG,eAAe,IACnED,EAAeE,UAAUR,EAAaG,GAtDvC,UAwDK3W,EAAiBiB,IAAI6V,EAAe1V,SAxDzC,0DA0DK9G,QAAQC,IAAR,kCA1DL,qBA+DCoK,YAAmB3E,EAAkBoW,EAActX,IAAgBwV,IAAcnU,GAEpE,cAAT2C,GACA6B,YAAmB3E,EAAkBmW,EAAarX,IAAgB3C,EAASgE,GAlEhF,UAqEgC9D,YAAakY,KArE7C,eAqEO0B,EArEP,kBAsEuBlW,YAAkBT,EAAcU,EAAkBiW,EAAkB9Z,EAASqC,GAtEpG,YAsEKiD,EAtEL,OAwECnH,QAAQC,IAAI,YAAakH,IACrB8E,YAAoB9E,GAzEzB,oCA0EW6M,YAAatC,EAAOvK,EAAWtF,GA1E1C,SA6EH6P,EAAMC,QA7EH,6D,sBAiFA,SAAegL,EAAtB,kC,4CAAO,WAAwBvF,GAAxB,6CAAA5X,EAAA,6DACHQ,QAAQC,IAAI,QAASmX,EAAYxT,OAC3B/B,EAAU4T,aAAaC,QAAQ,WAE/BhE,EAAQV,YAAa,gCAJxB,SAKOyC,YAAqB5R,GAL5B,0CAUOqC,EAAQ,CAACkT,GAVhB,SAW8B3V,cAX9B,cAWOoE,EAXP,iBAY4B7B,EAZ5B,eAYOkY,EAZP,OAYqCC,QAAQxX,SAASuG,KAZtD,UAagClH,EAbhC,2BAayCoY,YAbzC,UAaqEpY,EAbrE,2BAa8EU,IAAIC,SAAS,KAApF0X,EAbP,KAaqDxX,SAbrD,0BAc2Bb,EAd3B,eAcOqX,EAdP,OAcoCpW,UAAUC,gBAAgBhB,GAd9D,UAeiCF,EAfjC,2BAe0CsX,sBAAnCC,EAfP,mBAgBiCvX,EAhBjC,2BAgB0CwX,aAhB1C,KAgBuDH,EAhBvD,KAgBmEE,EAA5DvW,EAhBP,8BAiBiChB,EAjBjC,eAiBO0B,EAjBP,OAiB0C+V,kBAAkBC,SAGvDkB,EAAkBtY,KAAKC,MAAM6S,EAAY1O,MAAQ4R,IAAoB,MACnDR,MAClB8C,EAAkB9C,KAtBvB,UAyBmC9V,EAzBnC,2BAyB4CS,SAzB5C,UAyBqET,EAzBrE,2BAyB8EU,IAAIC,SAASiY,EAAgBrb,YAApGsb,EAzBP,KAyBqDhY,SAzBrD,0BA0BqCb,EA1BrC,2BA0B8C0G,wBA1B9C,KA2BKmS,EA3BL,UA4BY7Y,EA5BZ,4BA4BqB2G,SA5BrB,UA4BoD3G,EA5BpD,4BA4B6DgC,QAAQC,YAAY+T,KA5BjF,YA4B8BpP,eA5B9B,wBA6BK/E,GAHEiX,EA1BP,4BA8BkBJ,UAAUR,EAAaG,GA9BzC,UA+BOzS,YAAwBkT,EAAkB,EAAG1F,EAAYxT,OA/BhE,kBAiCK8B,EAAiBiB,IAAImW,EAAiBhW,SAjC3C,0DAmCK9G,QAAQC,IAAR,kCAnCL,qBAwCO8c,EAAkB3F,EAAY1O,MAAQkU,EAAkBxX,IAC9DiF,YAAmB3E,EAAkBoN,WAAWiK,EAAkBvY,KAAiB3C,EAASgE,GAzC7F,UA0CkC9D,YAAakY,KA1C/C,eA0CO+C,EA1CP,iBA2CuBvX,YAAkBT,EAAcU,EAAkBsX,EAAoBhD,IAAc9V,GA3C3G,WA2CKiD,EA3CL,OA4CCnH,QAAQC,IAAI,kBAAmBkH,IAC3B8E,YAAoB9E,GA7CzB,kCA8CW6M,YAAatC,EAAOvK,EAAWtF,GA9C1C,gCAiDC+P,YAAW,oBAAqB,6EAjDjC,iCAmDI,MAnDJ,4D,sBAsDA,SAAeqL,EAAtB,kC,4CAAO,WAAuB7F,GAAvB,uDAAA5X,EAAA,6DACHQ,QAAQC,IAAI,WADT,SAE0BwB,cAF1B,cAEGoE,EAFH,OAGGgW,EAAa1Q,SAASiM,EAAYhO,oBAAoB8T,GAAGC,eACzDrB,EAAcxX,KAAKgU,IAAIhU,KAAKC,MAAMsX,EAAavB,IAAoB,KAAOR,KAE1EjY,EAAU4T,aAAaC,QAAQ,WACjChE,EAAQV,YAAa,gCACnB+K,EAAmB3E,EAAY1O,MARlC,UAUmB+K,YAAqB5R,GAVxC,sDAYmB0S,YAASsH,EAAazW,IAAS0W,GAZlD,eAYK5X,EAZL,QAaO+X,QAAQ5U,YAAU+P,IAbzB,UAc4BpT,EAd5B,eAcOkY,EAdP,OAcqCC,QAAQxX,SAASuG,KAdtD,UAegClH,EAfhC,2BAeyCoY,YAfzC,UAeqEpY,EAfrE,2BAe8EU,IAAIC,SAAS,KAApF0X,EAfP,KAeqDxX,SAfrD,0BAgB2Bb,EAhB3B,eAgBOqX,EAhBP,OAgBoCpW,UAAUC,gBAAgBhB,GAhB9D,UAiBiCF,EAjBjC,2BAiB0CsX,sBAAnCC,EAjBP,mBAkBiCvX,EAlBjC,2BAkB0CwX,aAlB1C,KAkBuDH,EAlBvD,KAkBmEE,EAA5DvW,EAlBP,8BAmBiChB,EAnBjC,eAmBO0B,EAnBP,OAmB0C+V,kBAAkBC,QAnB5D,UAsB8B1X,EAtB9B,eAsBOoZ,EAtBP,OAsBuCzI,QAAQzN,UAAUhH,IAAWC,UAAUiX,IAtB9E,UAuBgCpT,EAvBhC,2BAuByCS,SAvBzC,UAuBkET,EAvBlE,2BAuB2EU,IAAIC,SAASoX,EAAiBxa,YAAlGgb,EAvBP,KAuBkD1X,SAvBlD,0BAwBmCb,EAxBnC,2BAwB4C0G,wBAxB5C,KAyBK6R,EAzBL,UA0BYvY,EA1BZ,4BA0BqB2G,SA1BrB,UA0BoD3G,EA1BpD,4BA0B6DgC,QAAQC,YAAY8Q,KA1BjF,YA0B8BnM,eA1B9B,wBA2BK/E,GAHE2W,EAxBP,4BA4BgBpS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IA7BnE,UA8BkCzY,EA9BlC,4BA8B2CkG,SA9B3C,UA+BYlG,EA/BZ,4BA+BqBgC,QAAQC,YAAYpE,GAASwU,SAAS,GAAMC,SAAS,EAAG,IADtE+G,EA9BP,MA8BoD9G,mBA9BpD,wBAiCCvW,QAjCD,UAiCoBgE,EAjCpB,4BAiC6BgC,QAAQC,YAAYpE,GAASwU,SAAS,GAjCnE,MAiCSpW,IAjCT,kBAkCCuc,EAAepS,mBAAmB,EAAGiT,GAlCtC,MAmCCb,EAnCD,UAmC6C9N,YAAW,KAnCxD,kCAmCgBtE,mBAnChB,WAmCmC,EAnCnC,aAoCCoS,EApCD,UAoC6C9N,YAAW,KApCxD,2BAoCgBtE,mBApChB,WAoCmC,EApCnC,OAqCCoS,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAeE,UAAUR,EAAaG,GAtCvC,UAwCK3W,EAAiBiB,IAAI6V,EAAe1V,SAxCzC,2DA0CK9G,QAAQC,IAAR,kCA1CL,sBA+CCoK,YAAmB3E,EAAkBoW,EAActX,IAAgBwV,IAAcnU,GAG3EyX,EAAiBF,EAAcX,eAAe,GAAGc,mBAlDxD,WAmDgCvZ,EAnDhC,6BAmDyCgC,QAnDzC,WAmDgFhC,EAnDhF,6BAmDyFkM,SAASC,kBAAkB,KAAOmN,GAApHE,EAnDP,MAmDiDpN,wBAnDjD,kBAmD4IC,YAC3IhG,YAAmB3E,EAAkBoN,WAAW+I,EAAarX,KAAiBgZ,EAAiB3X,GApDhG,WAsDgC9D,YAAakY,KAtD7C,gBAsDO0B,EAtDP,kBAuDuBlW,YAAkBT,EAAcU,EAAkBiW,EAAkB9Z,EAASqC,GAvDpG,YAuDKiD,EAvDL,OAyDCnH,QAAQC,IAAI,YAAakH,IACrB8E,YAAoB9E,GA1DzB,oCA2DW6M,YAAatC,EAAOvK,EAAWtF,GA3D1C,SA8DH6P,EAAMC,QA9DH,6D,sBAiEA,SAAe8L,EAAtB,oC,4CAAO,WAA6BjV,EAAM4O,GAAnC,uDAAA5X,EAAA,6DACHQ,QAAQC,IAAI,qBAAsBuI,GAD/B,SAE0B/G,cAF1B,UAEGoE,EAFH,OAGCgW,EAAa,EACJ,UAATrT,EAJD,iCAK2B4J,YAAgB5J,GAL3C,OAKOrE,EALP,OAMC0X,EAAavX,KAAKC,MAAMJ,EAAcK,KANvC,eAQGuX,EAAmB3E,EAAY1O,MAC/B7G,EAAU4T,aAAaC,QAAQ,WACjChE,EAAQV,YAAa,gCAVtB,UAYmByC,YAAqB5R,GAZxC,sDAcmB0S,YAASuF,IAAwB1U,KAdpD,eAcKlB,EAdL,QAeOZ,KAAK+D,YAAU+P,IAftB,UAgB4BpT,EAhB5B,eAgBOkY,EAhBP,OAgBqCC,QAAQxX,SAASuG,KAhBtD,UAiBgClH,EAjBhC,2BAiByCoY,YAjBzC,UAiBqEpY,EAjBrE,2BAiB8EU,IAAIC,SAAS,KAApF0X,EAjBP,KAiBqDxX,SAjBrD,0BAkB2Bb,EAlB3B,eAkBOqX,EAlBP,OAkBoCpW,UAAUC,gBAAgBhB,GAlB9D,UAmBiCF,EAnBjC,2BAmB0CsX,sBAAnCC,EAnBP,mBAoBiCvX,EApBjC,2BAoB0CwX,aApB1C,KAoBuDH,EApBvD,KAoBmEE,EAA5DvW,EApBP,8BAqBiChB,EArBjC,WAqBO0B,EArBP,OAqB0C+V,kBAAkBC,QAGvDgC,EAAa,IAAKC,EAAkB,IAC3B,UAATnV,EAzBL,oBA0BKkV,EAAa,IACbC,EAAkB9B,EAAWta,WACvBqc,EAAoBzS,SAAS4Q,GAAoB3B,IACvDpa,QAAQC,IAAI,oBAAqB2d,EAAmB/B,KAChDA,EAAa+B,GA9BtB,wBA+BShM,YAAW,8DAAgEgM,EAAoBpZ,KAAgByT,QAAQ,GAAK,QA/BrI,mDAkCqB,SAATzP,GACPkV,EAAa,IACbC,EAAkB9B,EAAWta,YACb,UAATiH,IACPkV,EAAa,IACbC,EAAkB,KAvCvB,yBAyC8B3Z,EAzC9B,eAyCOoZ,EAzCP,OAyCuCzI,QAAQzN,UAAUhH,IAAWC,UAAUiX,IAzC9E,UA0CgCpT,EA1ChC,2BA0CyCS,SA1CzC,UA0CkET,EA1ClE,2BA0C2EU,IAAIC,SAASoX,EAAiBxa,YAAlGgb,EA1CP,KA0CkD1X,SA1ClD,0BA2CmCb,EA3CnC,2BA2C4C0G,wBA3C5C,KA4CK6R,EA5CL,UA6CYvY,EA7CZ,4BA6CqB2G,SA7CrB,UA6CoD3G,EA7CpD,4BA6C6DgC,QAAQC,YAAY8Q,KA7CjF,YA6C8BnM,eA7C9B,wBA8CK/E,GAHE2W,EA3CP,4BA+CgBpS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAjDnE,MAkDCD,EAlDD,UAkD6C9N,YAAWgP,GAlDxD,kCAkDgBtT,mBAlDhB,WAkDmC,EAlDnC,aAmDCoS,EAnDD,UAmD6C9N,YAAWiP,GAnDxD,2BAmDgBvT,mBAnDhB,WAmDmC,EAnDnC,OAoDCoS,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAeE,UAAUR,EAAaG,GArDvC,UAuDK3W,EAAiBiB,IAAI6V,EAAe1V,SAvDzC,6DAyDK9G,QAAQC,IAAR,kCAzDL,iCA6DgC8B,YAAakY,KA7D7C,gBA6DO0B,EA7DP,kBA8DuBlW,YAAkBT,EAAcU,EAAkBiW,EAAkB9Z,EAASqC,GA9DpG,YA8DKiD,EA9DL,OAgECnH,QAAQC,IAAI,YAAakH,IACrB8E,YAAoB9E,GAjEzB,oCAkEW6M,YAAatC,EAAOvK,EAAWtF,GAlE1C,8D,sBAuEA,SAAegc,EAAtB,4C,4CAAO,WAAiC7U,EAAMyH,EAAQE,EAAQ/R,EAAUrB,EAAYugB,GAA7E,uCAAAte,EAAA,6DACHQ,QAAQC,IAAI,qBACN4B,EAAU4T,aAAaC,QAAQ,WAC/BhE,EAAQV,YAAa,gCAHxB,SAImByC,YAAqB5R,GAJxC,mDAMmB0S,YAAS4F,IAAa/U,KANzC,cAMKlB,EANL,iBAO2BF,EAP3B,eAOOqX,EAPP,OAOoCpW,UAAUC,gBAAgBhB,GAP9D,UAQiCF,EARjC,2BAQ0CsX,sBAAnCC,EARP,mBASiCvX,EATjC,2BAS0CwX,aAT1C,KASuDH,EATvD,KASmEE,EAA5DvW,EATP,8BAU8BvD,cAV9B,eAUOoE,EAVP,iBAWiC7B,EAXjC,eAWO0B,EAXP,OAW0C+V,kBAAkBC,QAX5D,UAc6B1X,EAd7B,2BAcsCS,SAdtC,UAc+DT,EAd/D,2BAcwEU,IAAIC,SAAUwV,IAAY5Y,YAA3Fwc,EAdP,KAc+ClZ,SAd/C,0BAemCb,EAfnC,2BAe4C0G,wBAf5C,KAgBKqT,EAhBL,UAiBY/Z,EAjBZ,2BAiBqB2G,SAjBrB,UAiBoD3G,EAjBpD,2BAiB6DgC,QAAQC,YAAYyQ,KAjBjF,WAiB8B9L,eAjB9B,sBAkBK/E,EAHE2W,EAfP,2BAmBOwB,EAAWhV,EAAO,IAAMyH,EAAOwN,UAAU,GAAK,IAAMtN,EAAOsN,UAAU,GAAK,IAAMrf,EAAW,IAAMrB,EAAa,IAAMugB,EAnB3H,UAoBOlU,YAAwB4S,EAAgB,EAAGwB,GApBlD,yBAqB+Bha,EArB/B,4BAqBwCkG,SArBxC,UAsBYlG,EAtBZ,qBAsBqBgC,QAAQC,YAAYpE,GAASwU,SAAS,GAAMC,SAAS,EAAG,IADtE4H,EArBP,MAqBiD3H,mBArBjD,kBAwBCiG,EAAepS,mBAAmB,EAAG8T,GAxBtC,UA0BKxY,EAAiBiB,IAAI6V,EAAe1V,SA1BzC,0DA4BK9G,QAAQC,IAAR,kCA5BL,+BA+BuBwF,YAAkBT,EAAcU,EAAkB,GAAI7D,EAASqC,GA/BtF,WA+BKiD,EA/BL,OAgCCnH,QAAQC,IAAI,oBAAqBkH,IAC7B8E,YAAoB9E,GAjCzB,kCAkCW6M,YAAatC,EAAOvK,EAAWtF,GAlC1C,gCAqCC+P,YAAW,oBAAqB,6EArCjC,iCAuCI,MAvCJ,4D,sBA0CA,SAAeuM,EAAtB,sC,4CAAO,WAAwB/G,EAAagH,EAAeC,GAApD,mDAAA7e,EAAA,sEAE0BiC,cAF1B,cAEGoE,EAFH,OAGGhE,EAAU4T,aAAaC,QAAQ,WACjChE,EAAQV,YAAa,gCAJtB,SAKmByC,YAAqB5R,GALxC,2CAOKqC,EAAQ,GACRoa,EAAS,GARd,oBAUmB1J,YAAcyJ,EAAeD,EAAelE,KAV/D,eAUKhW,EAVL,iBAWoBqQ,YAASnP,KAX7B,QAWKkZ,EAXL,iEAaKte,QAAQC,IAAR,MACA2R,YAAW,KAAErQ,YAdlB,kCAiBC2C,EAAQA,EAAMJ,OAAOwa,GAAQzb,QAAO,SAAC6F,EAAOa,EAAOgV,GAAf,OAChChV,IAAUgV,EAAKxW,WAAU,SAACyW,GAAD,OACrBA,EAAE5a,QAAU8E,EAAM9E,aAEpBqY,QAAQ5U,YAAU+P,IArBzB,UAuB2BpT,EAvB3B,eAuBOqX,EAvBP,OAuBoCpW,UAAUC,gBAAgBhB,GAvB9D,UAwBiCF,EAxBjC,2BAwB0CsX,sBAAnCC,EAxBP,mBAyBiCvX,EAzBjC,2BAyB0CwX,aAzB1C,KAyBuDH,EAzBvD,KAyBmEE,EAA5DvW,EAzBP,8BA0BiChB,EA1BjC,eA0BO0B,EA1BP,OA0B0C+V,kBAAkBC,QA1B5D,UA4B4B1X,EA5B5B,eA4BOkY,EA5BP,OA4BqCC,QAAQxX,SAASuG,KA5BtD,UA6BgClH,EA7BhC,2BA6ByCoY,YA7BzC,UA6BqEpY,EA7BrE,2BA6B8EU,IAAIC,SAAS,KAApF0X,EA7BP,KA6BqDxX,SA7BrD,0BA+B+Bb,EA/B/B,eA+BOya,EA/BP,OA+BwCtC,QAAQxX,SAASuV,KA/BzD,UAgCmClW,EAhCnC,2BAgC4CoY,YAhC5C,UAgCwEpY,EAhCxE,2BAgCiFU,IAAIC,UAAU0Z,EAAeD,GAAe7c,YAAtHmd,EAhCP,KAgCwD7Z,SAhCxD,0BAmC8Bb,EAnC9B,eAmCOoZ,EAnCP,OAmCuCzI,QAAQzN,UAAUhH,IAAWC,UAAUiX,IAnC9E,UAoCmCpT,EApCnC,2BAoC4C0G,wBApC5C,MAqCK0S,EAAc1U,QArCnB,UAsCY1E,EAtCZ,4BAsCqB2G,SAtCrB,UAsCoD3G,EAtCpD,4BAsC6DgC,QAAQC,YAAY8Q,KAtCjF,YAsC8BnM,eAtC9B,wBAuCK/E,GAHE2W,EApCP,6BAwCgBpS,mBAAmB,EAAGgT,EAAcX,eAAe,KAC9DkC,EAAYnZ,KAAKrC,MAAMiU,EAAYhO,oBAAoBwN,GAAGuG,gBACpD,GAAKwB,EAAU,GAAKN,EAC9BM,EAAU,GAAKA,EAAU,GAAKP,EA3C/B,MA4CC5B,EA5CD,UA4C4CtO,YAAgByQ,GA5C5D,2BA4CgBvU,mBA5ChB,WA4CmC,EA5CnC,OA6CCoS,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAepS,mBAAmB,EAAGgT,EAAcX,eAAe,IAClED,EAAeE,UAAUR,EAAaG,GAjDvC,UAmDK3W,EAAiBiB,IAAI6V,EAAe1V,SAnDzC,2DAqDK9G,QAAQC,IAAR,kCArDL,iCA0DqC+D,EA1DrC,6BA0D8C0G,wBA1D9C,WA2DY1G,EA3DZ,6BA2DqBS,SA3DrB,WA2D8CT,EA3D9C,6BA2DuDU,IAAIC,SAAUmV,IAAuBvY,YA3D5F,YA2D8BsD,SA3D9B,6BA4DYb,EA5DZ,6BA4DqB2G,SA5DrB,WA4DoD3G,EA5DpD,sBA4D6DgC,QAAQC,YAAY+T,KA5DjF,YA4D8BpP,eA5D9B,wBA6DK/E,GAHE+Y,EA1DP,8BA8DkBlC,UAAU+B,EAAgBC,GA9D5C,WAgEKhZ,EAAiBiB,IAAIiY,EAAiB9X,SAhE3C,8DAkEK9G,QAAQC,IAAR,kCAlEL,iCAsEgC8B,YAAakY,KAtE7C,gBAsEO0B,EAtEP,kBAuEuBlW,YAAkBT,EAAcU,EAAkBiW,EAAkB9Z,EAASqC,GAvEpG,YAuEKiD,EAvEL,OAwECnH,QAAQC,IAAI,oBAAqBkH,IAC7B8E,YAAoB9E,GAzEzB,oCA0EW6M,YAAatC,EAAOvK,EAAWtF,GA1E1C,mCA+EC+P,YAAW,oBAAqB,6EA/EjC,kCAiFI,MAjFJ,+E,mPCrVH5N,EAAU,mDAEP,SAAe6a,EAAtB,kC,4CAAO,WAAoCjb,GAApC,2CAAApE,EAAA,6DACGqC,EAAU4T,aAAaC,QAAQ,WAC/BhE,EAAQV,YAAa,gCAFxB,SAGOyC,YAAqB5R,GAH5B,mDAImB0S,YAASnP,KAJ5B,cAIKlB,EAJL,iBAK0BpC,YAAQ8B,GALlC,eAKOkb,EALP,OAMOC,EAAkB1X,YAAUyX,GAClC5a,EAAMZ,KAAKyb,GAPZ,UAQyB/a,EARzB,2BAQkCgb,OAA7B5a,EARL,mBAS4BJ,EAT5B,eASOkY,EATP,OASqCC,QAAQxX,SAASuG,KATtD,UAUmClH,EAVnC,2BAU4CoY,YAV5C,UAUwEpY,EAVxE,2BAUiFU,IAAIC,SAASoa,EAAgBlW,OAAO,GAAGE,QAAjHkW,EAVP,KAUwDpa,SAVxD,qBAWCT,EAXD,UAWuBJ,EAXvB,2BAWgCkb,MAXhC,KAYKhD,EAZL,KAaK+C,EAbL,8BAWQtY,IAXR,0BAgB4B1C,YAAgBC,EAAO4V,IAAwBtV,IAAgBJ,GAhB3F,eAgBOY,EAhBP,iBAiB8BvD,cAjB9B,eAiBOoE,EAjBP,iBAkBiC7B,EAlBjC,eAkBO0B,EAlBP,OAkB0C+V,kBAAkBC,QAlB5D,UAmByB1X,EAnBzB,2BAmBkCS,SAnBlC,UAmB2DT,EAnB3D,2BAmBoEU,IAAIC,SAASmV,IAAsBvY,YAAhG4d,EAnBP,KAmB2Cta,SAnB3C,0BAoBqCb,EApBrC,4BAoB8C0G,wBApB9C,MAqBKyU,EArBL,UAsBYnb,EAtBZ,4BAsBqB2G,SAtBrB,UAsBoD3G,EAtBpD,qBAsB6DgC,QAAQC,YAAY+T,KAtBjF,YAsB8BpP,eAtB9B,wBAuBK/E,GAHEiX,EApBP,8BAwBkBJ,UAAUR,EAAa+C,GAxBzC,UA0BKvZ,EAAiBiB,IAAImW,EAAiBhW,SA1B3C,0DA4BK9G,QAAQC,IAAR,kCA5BL,+BA+BgC8B,YAAakY,KA/B7C,eA+BO0B,EA/BP,iBAgCuBlW,YAAkBT,EAAcU,EAAkBiW,EAAkB3B,IAAc9V,GAhCzG,WAgCKiD,EAhCL,OAkCCnH,QAAQC,IAAI,YAAakH,IACrB8E,YAAoB9E,GAnCzB,kCAoCW6M,YAAatC,EAAOvK,EAAWtF,GApC1C,gCAuCC+P,YAAW,oBAAqB,6EAvCjC,iCA0CI,MA1CJ,4D,sBA8CA,SAAewN,EAAtB,kC,4CAAO,WAAkCxb,GAAlC,2CAAApE,EAAA,6DACGqC,EAAU4T,aAAaC,QAAQ,WAC/BhE,EAAQV,YAAa,gCAFxB,SAGOyC,YAAqB5R,GAH5B,mDAImB0S,YAASnP,KAJ5B,cAIKlB,EAJL,iBAK0BpC,YAAQ8B,GALlC,eAKOkb,EALP,OAMOC,EAAkB1X,YAAUyX,GAClC5a,EAAMZ,KAAKyb,GAPZ,UAQyB/a,EARzB,2BAQkCgb,OAA7B5a,EARL,mBAS+BJ,EAT/B,eASOya,EATP,OASwCtC,QAAQxX,SAASuV,KATzD,UAUmClW,EAVnC,2BAU4CoY,YAV5C,UAUwEpY,EAVxE,2BAUiFU,IAAIC,SAASoa,EAAgBlW,OAAO,GAAGE,QAAjHkW,EAVP,KAUwDpa,SAVxD,qBAWCT,EAXD,UAWuBJ,EAXvB,2BAWgCkb,MAXhC,KAYKT,EAZL,KAaKQ,EAbL,8BAWQtY,IAXR,0BAgB4B1C,YAAgBC,EAAO4V,IAAwBtV,IAAgBJ,GAhB3F,eAgBOY,EAhBP,iBAiB8BvD,cAjB9B,eAiBOoE,EAjBP,iBAkBiC7B,EAlBjC,eAkBO0B,EAlBP,OAkB0C+V,kBAAkBC,QAlB5D,UAmByB1X,EAnBzB,2BAmBkCS,SAnBlC,UAmB2DT,EAnB3D,2BAmBoEU,IAAIC,SAASmV,IAAsBvY,YAAhG4d,EAnBP,KAmB2Cta,SAnB3C,0BAoBqCb,EApBrC,4BAoB8C0G,wBApB9C,MAqBKyU,EArBL,UAsBYnb,EAtBZ,4BAsBqB2G,SAtBrB,UAsBoD3G,EAtBpD,qBAsB6DgC,QAAQC,YAAY+T,KAtBjF,YAsB8BpP,eAtB9B,wBAuBK/E,GAHEiX,EApBP,8BAwBkBJ,UAAU+B,EAAgBQ,GAxB5C,UA0BKvZ,EAAiBiB,IAAImW,EAAiBhW,SA1B3C,0DA4BK9G,QAAQC,IAAR,kCA5BL,+BA+BgC8B,YAAakY,KA/B7C,eA+BO0B,EA/BP,iBAgCuBlW,YAAkBT,EAAcU,EAAkBiW,EAAkB3B,IAAc9V,GAhCzG,WAgCKiD,EAhCL,OAkCCnH,QAAQC,IAAI,YAAakH,IACrB8E,YAAoB9E,GAnCzB,kCAoCW6M,YAAatC,EAAOvK,EAAWtF,GApC1C,gCAuCC+P,YAAW,oBAAqB,6EAvCjC,iCA0CI,MA1CJ,4D,sBA6CA,SAAeyN,IAAtB,+B,4CAAO,wDAAA7f,EAAA,6DACHQ,QAAQC,IAAI,cACN4B,EAAU4T,aAAaC,QAAQ,WAC/BhE,EAAQV,YAAa,gCAHxB,SAIOyC,YAAqB5R,GAJ5B,oDAK8BJ,cAL9B,cAKOoE,EALP,iBAOmBiP,cAPnB,eAOK5Q,EAPL,OAQClE,QAAQC,IAAI,QAASiE,GARtB,UASgCnC,YAAakY,KAT7C,eASO0B,EATP,OAUC3b,QAAQC,IAAI,gDAAiD0b,GACzDA,EAAiBnZ,OAAS,GAC1B0B,EAAMZ,KAAKqY,EAAiB,IAEhC3b,QAAQC,IAAI,SAAUiE,GAdvB,UAgByBF,EAhBzB,2BAgBkCgb,OAA7B5a,EAhBL,mBAiB8BJ,EAjB9B,eAiBOsb,EAjBP,OAiBuCnD,QAAQxX,SAASsV,KAjBxD,UAkBkCjW,EAlBlC,2BAkB2CoY,YAlB3C,UAkBuEpY,EAlBvE,2BAkBgFU,IAAIC,SAAS,KAAtF4a,EAlBP,KAkBuD1a,SAlBvD,qBAmBCT,EAnBD,UAmBuBJ,EAnBvB,2BAmBgCkb,MAnBhC,KAoBKI,EApBL,KAqBKC,EArBL,8BAmBQ5Y,IAnBR,0BAuB4B1C,YAAgBC,EAAO4V,IAAwBtV,IAAgBJ,GAvB3F,eAuBOY,EAvBP,OAwBChF,QAAQC,IAAI,eAAgB+E,GAxB7B,UA0BiChB,EA1BjC,eA0BO0B,EA1BP,OA0B0C+V,kBAAkBC,QAErD8D,EAAc1F,IAAsBvY,WA5B3C,UA6ByByC,EA7BzB,2BA6BkCS,SA7BlC,UA6B2DT,EA7B3D,2BA6BoEU,IAAIC,SAAS6a,GAA1EL,EA7BP,KA6B2Cta,SA7B3C,0BA8BqCb,EA9BrC,4BA8B8C0G,wBA9B9C,MA+BKyU,EA/BL,UAgCYnb,EAhCZ,4BAgCqB2G,SAhCrB,UAgCoD3G,EAhCpD,4BAgC6DgC,QAAQC,YAAY8U,KAhCjF,YAgC8BnQ,eAhC9B,wBAiCK/E,EAHE4Z,EA9BP,mCAkCCA,EAlCD,UAkC8C1Q,YAAeiM,KAlC7D,kCAkCkB5Q,mBAlClB,WAkCqC,EAlCrC,aAmCCqV,EAnCD,UAmC8C1Q,YAAekM,KAnC7D,kCAmCkB7Q,mBAnClB,WAmCqC,EAnCrC,OAoCOsV,EAAW,CAACpF,IAAmBlV,IAAQuV,IAAyBC,KApCvE,MAqCC6E,EArCD,UAqC8CvR,YAAgBwR,GArC9D,2BAqCkBtV,mBArClB,WAqCqC,EArCrC,OAuCCqV,EAAiB/C,UAAU4C,EAAeC,GAvC3C,UAyCK7Z,EAAiBiB,IAAI8Y,EAAiB3Y,SAzC3C,0DA2CK9G,QAAQC,IAAR,kCA3CL,+BA8CyBwF,YAAkBT,EAAcU,EAAkB,GAAIsU,IAAc9V,GA9C7F,WA8COiD,EA9CP,QAgDK8E,YAAoB9E,GAhDzB,oCAiDW6M,YAAatC,EAAOvK,EAAWtF,GAjD1C,6D,sBAsDA,SAAe8d,EAAtB,sC,4CAAO,WAAoCC,EAAaX,EAAoBY,GAArE,6CAAArgB,EAAA,6DACGqC,EAAU4T,aAAaC,QAAQ,WAC/BhE,EAAQV,YAAa,gCAFxB,SAGOyC,YAAqB5R,GAH5B,2CAIC7B,QAAQC,IAAI,gCAAiCgf,GAJ9C,SAKmBrK,YAAcqK,EAAoB/T,KALrD,cAKKhH,EALL,iBAMoBqQ,YAASnP,IAAS0U,KANtC,eAMKgG,EANL,OAQC5b,EAAQA,EAAMJ,OAAOgc,GAAQjd,QAAO,SAAC6F,EAAOa,EAAOgV,GAAf,OAChChV,IAAUgV,EAAKxW,WAAU,SAACyW,GAAD,OACrBA,EAAE5a,QAAU8E,EAAM9E,YAG1B5D,QAAQC,IAAIiE,GAbb,UAcyBF,EAdzB,2BAckCgb,OAA7B5a,EAdL,mBAgB4BJ,EAhB5B,eAgBOkY,EAhBP,OAgBqCC,QAAQxX,SAASuG,KAhBtD,UAiBuClH,EAjBvC,2BAiBgDoY,YAjBhD,UAiB4EpY,EAjB5E,2BAiBqFU,IAAIC,SAASsa,GAA3Fc,EAjBP,KAiB4Dlb,SAjB5D,qBAkBCT,EAlBD,UAkBuBJ,EAlBvB,2BAkBgCkb,MAlBhC,KAmBKhD,EAnBL,KAoBK6D,EApBL,8BAkBQpZ,IAlBR,0BAsB4B1C,YAAgBC,EAAO4V,IAAwBtV,IAAgBJ,GAtB3F,eAsBOY,EAtBP,iBAyB8BvD,cAzB9B,eAyBOoE,EAzBP,iBA0BiC7B,EA1BjC,eA0BO0B,EA1BP,OA0B0C+V,kBAAkBC,QACrDsE,EAAelG,IAAsBvY,WA3B5C,UA4ByByC,EA5BzB,2BA4BkCS,SA5BlC,UA4B2DT,EA5B3D,2BA4BoEU,IAAIC,SAASqb,GAA1Eb,EA5BP,KA4B2Cta,SA5B3C,0BA6BsCb,EA7BtC,4BA6B+C0G,wBA7B/C,MA8BKyU,EA9BL,UA+BYnb,EA/BZ,4BA+BqB2G,SA/BrB,UA+BoD3G,EA/BpD,4BA+B6DgC,QAAQC,YAAY4U,KA/BjF,YA+B8BjQ,eA/B9B,wBAgCK/E,EAHEoa,EA7BP,uCAiCOrW,YAAwBqW,EAAmB,EAAGL,GAjCrD,eAkCOM,EAAc,CAAC3F,IAAoBC,IAAoBC,IAAeC,KAlC7E,MAmCCuF,EAnCD,UAmC+C/R,YAAgBgS,GAnC/D,kCAmCmB9V,mBAnCnB,WAmCsC,EAnCtC,OAoCO+V,EAAY,CAAChG,IAAYE,KApChC,MAqCC4F,EArCD,UAqC+C/R,YAAgBiS,GArC/D,kCAqCmB/V,mBArCnB,WAqCsC,EArCtC,OAsCC6V,EAAkBvD,UAAUR,EAAa6D,GAtC1C,MAuCCE,EAvCD,UAuCgDvR,YAAWmR,GAvC3D,2BAuCmBzV,mBAvCnB,WAuCsC,EAvCtC,iBAyCK1E,EAAiBiB,IAAIsZ,EAAkBnZ,SAzC5C,0DA2CK9G,QAAQC,IAAR,kCA3CL,+BA+CyBwF,YAAkBT,EAAcU,EAAkB,GAAIsU,IAAc9V,GA/C7F,WA+COiD,EA/CP,OAiDCnH,QAAQC,IAAI,oBAAqBkH,IAE7B8E,YAAoB9E,GAnDzB,oCAoDW6M,YAAatC,EAAOvK,EAAWtF,GApD1C,mCAuDC+P,YAAW,oBAAqB,6EAvDjC,kCAyDI,MAzDJ,6D,sBA4DA,SAAewO,EAAtB,kC,4CAAO,WAAkCC,GAAlC,uCAAA7gB,EAAA,6DACGqC,EAAU4T,aAAaC,QAAQ,WAC/BhE,EAAQV,YAAa,gCAFxB,SAGOyC,YAAqB5R,GAH5B,mDAImBiT,cAJnB,cAIK5Q,EAJL,OAKClE,QAAQC,IAAIiE,GALb,UAMyBF,EANzB,2BAMkCgb,OAA7B5a,EANL,SAOCpE,QAAQC,IAAI,uCAAwCogB,GAPrD,UAQ+Brc,EAR/B,eAQOya,EARP,OAQwCtC,QAAQxX,SAASuV,KARzD,UASmClW,EATnC,2BAS4CoY,YAT5C,UASwEpY,EATxE,2BASiFU,IAAIC,SAAS0b,GAAvFpB,EATP,KASwDpa,SATxD,qBAUCT,EAVD,UAUuBJ,EAVvB,2BAUgCkb,MAVhC,KAWKT,EAXL,KAYKQ,EAZL,8BAUQtY,IAVR,0BAc4B1C,YAAgBC,EAAO4V,IAAwBtV,IAAgBJ,GAd3F,eAcOY,EAdP,iBAiB8BvD,cAjB9B,eAiBOoE,EAjBP,iBAkBiC7B,EAlBjC,eAkBO0B,EAlBP,OAkB0C+V,kBAAkBC,QACrDsE,EAAelG,IAAsBvY,WAnB5C,UAoByByC,EApBzB,2BAoBkCS,SApBlC,UAoB2DT,EApB3D,2BAoBoEU,IAAIC,SAASqb,GAA1Eb,EApBP,KAoB2Cta,SApB3C,0BAqBsCb,EArBtC,4BAqB+C0G,wBArB/C,MAsBKyU,EAtBL,UAuBYnb,EAvBZ,4BAuBqB2G,SAvBrB,UAuBoD3G,EAvBpD,qBAuB6DgC,QAAQC,YAAY6U,KAvBjF,YAuB8BlQ,eAvB9B,wBAwBK/E,GAHEoa,EArBP,8BAyBmBvD,UAAU+B,EAAgBQ,GAzB7C,UA2BKvZ,EAAiBiB,IAAIsZ,EAAkBnZ,SA3B5C,0DA6BK9G,QAAQC,IAAR,kCA7BL,+BAiCyBwF,YAAkBT,EAAcU,EAAkB,GAAIsU,IAAc9V,GAjC7F,WAiCOiD,EAjCP,OAmCCnH,QAAQC,IAAI,oBAAqBkH,IAE7B8E,YAAoB9E,GArCzB,kCAsCW6M,YAAatC,EAAOvK,EAAWtF,GAtC1C,gCAyCC+P,YAAW,oBAAqB,6EAzCjC,iCA2CI,MA3CJ,4D,0BC7Mc0O,E,kDACjB,WAAY7iB,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACTxM,KAAMvL,EAAMuL,KACZpF,MAAOnG,EAAMmG,MACboH,YAAavN,EAAMuN,YACnBtC,MAAOjL,EAAMiL,MACb6X,WAAY9iB,EAAM8iB,WAClBJ,UAAW,IACXK,YAAa,IACbC,gBAAiBhjB,EAAMgjB,iBAE3B,EAAKC,WAAa,EAAKA,WAAW5K,KAAhB,gBAClB,EAAK6K,iBAAmB,EAAKA,iBAAiB7K,KAAtB,gBACxB,EAAK8K,sBAAwB,EAAKA,sBAAsB9K,KAA3B,gBAdd,E,yDAiBL,IAAD,OACTvG,YAAa/R,KAAKgY,MAAMxM,MACnBtJ,MAAK,SAAAmhB,GACF,EAAK3K,SAAS,CACVlN,KAAM6X,OAGbC,OAAM,SAACxN,GAAD,OAAWtT,QAAQC,IAAIqT,Q,yCAGlB,IAAD,OACftT,QAAQC,IAAI,wBAAwBzC,KAAKgY,MAAM+K,YAC/C3R,YAAWpR,KAAKgY,MAAM+K,YACjB7gB,MAAK,SAAAqhB,GACF/gB,QAAQC,IAAI,oBAAoB8gB,GAChC,EAAK7K,SAAS,CACVqK,WAAYQ,OAGnBD,OAAM,SAACxN,GAAD,OAAWtT,QAAQC,IAAIqT,Q,8CAGb,IAAD,OACpBjF,YAAgB7Q,KAAKgY,MAAMiL,iBACtB/gB,MAAK,SAAAshB,GACF,EAAK9K,SAAS,CACViK,UAAWa,EAAa,GACxBR,YAAaQ,EAAa,QAGjCF,OAAM,SAACxN,GAAD,OAAWtT,QAAQC,IAAIqT,Q,0CAIlC9V,KAAKkjB,aACLljB,KAAKmjB,mBACLnjB,KAAKojB,0B,oEAGEhd,G,iFACMib,EAAqBjb,G,iLAGrB0E,GACb,OAAIA,EAAI9F,OAAS,GACN8F,EAAI2V,UAAU,EAAG,IAAM,MAAQ3V,EAAI2V,UAAU3V,EAAI9F,OAAS,GAAI8F,EAAI9F,QAElE8F,I,+BAIL,IAAD,OAEL,OAEI,uBAAOiI,UAAU,MAAjB,SACI,kCACI,+BACI,+CAGA,6BACK/S,KAAKgY,MAAMxM,UAGpB,+BACI,yCAGA,6BACKxL,KAAKyjB,iBAAiBzjB,KAAKgY,MAAM5R,YAG1C,+BACI,+CAGA,6BACKpG,KAAKgY,MAAMxK,iBAGpB,+BACI,gDAGA,+BACK8H,WAAW3H,SAAS3N,KAAKgY,MAAM9M,OAASlE,KAAgByT,QAAQ,GADrE,aAIJ,+BACI,+CAGA,6BACKza,KAAKgY,MAAM+K,gBAGpB,+BACI,6CAGA,+BACKzN,WAAW3H,SAAS3N,KAAKgY,MAAM2K,WAAa3b,KAAgByT,QAAQ,GADzE,aAIJ,+BACI,gDAGA,+BACKnF,WAAW3H,SAAS3N,KAAKgY,MAAMgL,aAAehc,KAAgByT,QAAQ,GAD3E,aAIJ,+BACI,uBACA,oBAAI1H,UAAU,UAAd,SACI,wBAAQA,UAAU,uBAAuB2H,QAAS,kBAAM,EAAKgJ,KAAK,EAAK1L,MAAM5R,QAA7E,wC,GAtIanF,IAAMC,WCA1ByiB,E,kDACjB,WAAY1jB,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT5R,MAAO,GACPwd,WAAY,GACZC,eAAgB,GAChBC,eAAgB,GAChBC,gBAAiB,EACjBC,MAAO,EACPC,gBAAiB,EACjBC,iBAAkB,GAVP,E,0GAcQ5e,EAAK+G,G,8EACxBsE,EAAY,G,kBAEME,YAAgB7B,YAAiB1J,EAAK+G,I,OAAxDsE,E,uDAEAnO,QAAQC,IAAI,uBAAZ,M,iCAEGkO,G,gMAGUrL,EAAK+G,G,8EAClB8X,EAAM,G,kBAEM/R,YAAUpD,YAAiB1J,EAAK+G,I,OAA5C8X,E,uDAEA3hB,QAAQC,IAAI,oBAAZ,M,iCAEG0hB,G,8SAIwB5f,YAAakY,K,aAAtC0B,E,QAEenZ,OAAS,G,iCACNhF,KAAKokB,eAAejG,EAAiB,GAAI,M,cAAvDkG,E,gBACcrkB,KAAKokB,eAAejG,EAAiB,GAAI,M,cAAvDmG,E,iBACgBtkB,KAAKukB,qBAAqBpG,EAAiB,GAAI,M,QAA/DqG,E,OAENxkB,KAAK0Y,SAAS,CACVtS,MAAK,UAAE+X,EAAiB,GAAG/X,aAAtB,QAA+B,GACpCwd,WAAU,UAAEzF,EAAiB,GAAG9Z,eAAtB,QAAiC,GAC3Cwf,eAAc,OAAEQ,QAAF,IAAEA,IAAS,GACzBP,eAAc,OAAEQ,QAAF,IAAEA,IAAS,GACzBP,gBAAe,UAAES,EAAQ,UAAV,QAAgB,EAC/BR,MAAK,UAAEQ,EAAQ,UAAV,QAAgB,EACrBP,gBAAe,UAAEO,EAAQ,UAAV,QAAgB,EAC/BN,iBAAgB,UAAEM,EAAQ,UAAV,QAAgB,I,sIAMxC,IAAMC,EAAoB,CACtB,SAAUzkB,KAAKgY,MAAM5R,MACrB,cAAepG,KAAKgY,MAAM4L,WAC1B,mBAAoB5jB,KAAKgY,MAAM6L,eAC/B,mBAAoB7jB,KAAKgY,MAAM8L,eAC/B,oBAAqB9jB,KAAKgY,MAAM+L,gBAChC,kBAAmB/jB,KAAKgY,MAAMgM,MAC9B,oBAAqBhkB,KAAKgY,MAAMiM,gBAChC,qBAAsBjkB,KAAKgY,MAAMkM,kBAGrC,OACI,cAAC,WAAD,UACI,uBAAOnR,UAAU,MAAjB,SACI,gCAEQvP,OAAOC,KAAKghB,GAAmBxf,KAAK,SAAAkH,GAAG,OACnC,+BACI,+BACKA,EADL,OAGA,6BACKsY,EAAkBtY,OALlBA,gB,GA1EDlL,IAAMC,WCFzBwjB,E,kDACjB,WAAYzkB,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT5R,MAAOnG,EAAMmG,MACboH,YAAavN,EAAMuN,aAJR,E,0FAQRpH,G,iFACMwb,EAAmBxb,G,iLAGnB0E,GACb,OAAIA,EAAI9F,OAAS,GACN8F,EAAI2V,UAAU,EAAG,IAAM,MAAQ3V,EAAI2V,UAAU3V,EAAI9F,OAAS,GAAI8F,EAAI9F,QAElE8F,I,+BAIL,IAAD,OACL,OACI,uBAAOiI,UAAU,MAAjB,SACI,kCACI,+BACI,yCAGA,6BACK/S,KAAKyjB,iBAAiBzjB,KAAKgY,MAAM5R,YAG1C,+BACI,+CAGA,6BACKpG,KAAKgY,MAAMxK,iBAGpB,+BACI,uBACA,oBAAIuF,UAAU,UAAd,SACI,wBAAQA,UAAU,uBAAuB2H,QAAS,kBAAM,EAAKgJ,KAAK,EAAK1L,MAAM5R,QAA7E,wC,GA5CoBnF,IAAMC,WCKjCyjB,E,kDACjB,WAAY1kB,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT3T,QAAS4T,aAAaC,QAAQ,WAC9BkK,YAAa,GACbX,mBAAoB,MACpBY,qBAAsB,IACtBQ,0BAA2B,OAC3B+B,YAAa,GACbC,mBAAoB,GACpBC,WAAY,IAEhB,EAAKC,KAAO9jB,IAAM+jB,YAClB,EAAKC,SAAWhkB,IAAM+jB,YACtB,EAAKE,+BAAiC,EAAKA,+BAA+B5M,KAApC,gBACtC,EAAK6M,wBAA0B,EAAKA,wBAAwB7M,KAA7B,gBAC/B,EAAK8M,wBAA0B,EAAKA,wBAAwB9M,KAA7B,gBAC/B,EAAK+M,0BAA4B,EAAKA,0BAA0B/M,KAA/B,gBACjC,EAAKgN,cAAgB,EAAKA,cAAchN,KAAnB,gBACrB,EAAKiN,aAAe,EAAKA,aAAajN,KAAlB,gBACpB,EAAKkN,YAAc,EAAKA,YAAYlN,KAAjB,gBACnB,EAAKsK,mBAAqB,EAAK6C,aAAanN,KAAlB,gBArBX,E,2EAwBYG,GAC3BzY,KAAK0Y,SAAS,CAAE+I,mBAAoBhJ,EAAME,OAAOzN,U,gDAG3BuN,GACtBzY,KAAK0Y,SAAS,CAAE2J,qBAAsB5J,EAAME,OAAOzN,U,8CAG/BuN,GACpBzY,KAAK0Y,SAAS,CAAEkM,YAAanM,EAAME,OAAOpV,O,8CAGtBkV,GACpBzY,KAAK0Y,SAAS,CAAE0J,YAAa3J,EAAME,OAAOzN,U,mCAGjCuN,GACLzY,KAAK+kB,KAAKW,QAAQC,mBAClBlN,EAAMmN,iBACN5lB,KAAKwlB,YAAYxlB,KAAKgY,MAAMoK,YAAapiB,KAAKgY,MAAMyJ,mBAAoBzhB,KAAKgY,MAAMqK,yB,gDAIjEzJ,GACtB5Y,KAAK0Y,SAAS,CACVrU,QAASuU,EAAUvU,Y,0CAKvBrE,KAAKslB,kB,wKAIqBlhB,YAAyBiZ,K,cAA7CuH,E,gBAC2BxgB,YAAyBkZ,K,OAApDuH,E,OACNriB,QAAQC,IAAI,cAAemiB,EAAaC,GACxC7kB,KAAK0Y,SAAS,CACVkM,YAAaA,EACbC,mBAAoBA,I,mQAMXhD,I,oNAGCO,EAAaX,EAAoBY,G,iFAClCF,EAAqBC,EAAaX,EAAoBY,G,0NAGpDQ,G,iFACFD,EAAmBC,G,yKAG1B,IAAD,OAEL,OACI,eAAC,WAAD,WAEQ7iB,KAAKgY,MAAM3T,UAAYmY,IAAe,KAClC,8DAAiCA,OAEzC,sBAAKzJ,UAAU,iEAAf,UAEI,sBAAKA,UAAU,mDAAf,UACI,0DACA,sBAAM8S,IAAK7lB,KAAK+kB,KAAMe,SAAU9lB,KAAKulB,aAArC,SACI,gCACI,kCACI,+BACI,6BACI,uBAAOQ,QAAQ,cAAf,4BAEJ,6BACI,uBAAOhT,UAAU,eACbiT,KAAK,OACLziB,GAAG,cACH0iB,QAAQ,sBACRC,UAAQ,EACRhb,MAAOlL,KAAKgY,MAAMoK,YAClB+D,SAAUnmB,KAAKmlB,+BAI3B,+BACI,6BACI,uBAAOY,QAAQ,qBAAf,4BAEJ,6BACI,uBAAOhT,UAAU,eACbiT,KAAK,OACLziB,GAAG,qBACH0iB,QAAQ,SACRC,UAAQ,EACRhb,MAAOlL,KAAKgY,MAAMyJ,mBAClB0E,SAAUnmB,KAAKklB,sCAI3B,+BACI,6BACI,uBAAOa,QAAQ,oBAAf,+BAEJ,6BACI,uBAAOhT,UAAU,eACbiT,KAAK,OACLziB,GAAG,oBACH0iB,QAAQ,SACRC,UAAQ,EACRhb,MAAOlL,KAAKgY,MAAMqK,qBAClB8D,SAAUnmB,KAAKqlB,iCAI3B,6BACI,oBAAItS,UAAU,UAAd,SACI,uBAAOA,UAAU,uBAAuBiT,KAAK,SAAS9a,MAAM,+BAOpF,uBAEA,sBAAK6H,UAAU,QAAf,UACI,0DACA,6BACK/S,KAAKgY,MAAM4M,YAAY3f,KAAI,SAAA0U,GAAI,OAC5B,oBAAqB5G,UAAU,oBAA/B,SACI,cAAC,EAAD,CACI3M,MAAOuT,EAAKvT,MACZoF,KAAMwD,YAAiB2K,EAAM,MAC7BnM,YAAauB,YAAe4K,EAAMjM,KAClCxC,MAAOyO,EAAKzO,MACZ6X,WAAY/T,YAAiB2K,EAAM,MACnCsJ,gBAAiBjU,YAAiB2K,EAAM,SAPvCA,EAAKvT,eAc1B,sBAAK2M,UAAU,gBAAf,UACI,4DAEA,gCACI,kCACI,+BACI,6BACI,uBAAOgT,QAAQ,qBAAf,4BAEJ,6BACI,uBAAOhT,UAAU,eACbiT,KAAK,OACLziB,GAAG,qBACH0iB,QAAQ,SACRC,UAAQ,EACRhb,MAAOlL,KAAKgY,MAAM6K,0BAClBsD,SAAUnmB,KAAKomB,6CAI3B,+BACI,uBAEA,oBAAIrT,UAAU,UAAd,SACI,wBAAQA,UAAU,uBAAuB2H,QAAS,kBAAM,EAAK+K,aAAa,EAAKzN,MAAM6K,4BAArF,+CAQpB,sBAAK9P,UAAU,QAAf,UACI,4DACA,6BACK/S,KAAKgY,MAAM6M,mBAAmB5f,KAAI,SAAA0U,GAAI,OACnC,oBAAqB5G,UAAU,oBAA/B,SACI,cAAC,EAAD,CACI3M,MAAOuT,EAAKvT,MACZoH,YAAauB,YAAe4K,EAAM+C,QAHjC/C,EAAKvT,eAU1B,sBAAK2M,UAAU,8CAAf,UACI,4DACA,cAAC,EAAD,OAGJ,sBAAKA,UAAU,uDAAf,UACI,sDACA,gCACI,gCACI,6BACI,oBAAIA,UAAU,UAAd,SACI,uBAAOA,UAAU,uBAAuBiT,KAAK,SAAS9a,MAAM,uBAAuBwP,QAAS1a,KAAKqmB,kC,GAnOtGplB,IAAMC,WCX1B,MAA0B,sDCGpBolB,E,uKAEd,OACI,eAAC,WAAD,WACI,sEACA,qBAAKC,IAAKC,W,GALSvlB,IAAMC,W,kBCCzB,SAASulB,EAAaxmB,GAEjC,OACI,gCACQ,uBAAO8lB,QAAQ,MAAf,yBAEA,uBAAOhT,UAAU,eAAexP,GAAG,MAAM0iB,QAAQ,eAAeE,SAAU,SAAA7M,GAAC,OAAIrZ,EAAMymB,WAAWpN,EAAEX,OAAOzN,QAAQA,MAAOjL,EAAMoE,aCkB/HsiB,MAxBf,SAAuB1mB,GACnB,OACI,eAAC2mB,EAAA,EAAD,CAAQC,OAAO,KAAKC,QAAQ,OAAO/T,UAAU,6BAA7C,UACI,cAAC6T,EAAA,EAAOG,MAAR,CAAcC,KAAK,IAAnB,SACA,qBAAKT,ICRF,q/RDWH,cAACK,EAAA,EAAOK,OAAR,CAAeC,gBAAc,qBAC7B,cAACN,EAAA,EAAOO,SAAR,CAAiB5jB,GAAG,mBAApB,SACI,eAAC6jB,EAAA,EAAD,CAAKrU,UAAU,UAAf,UACI,cAACqU,EAAA,EAAIC,KAAL,CAAUL,KAAK,IAAf,kBACA,cAACI,EAAA,EAAIC,KAAL,CAAUL,KAAK,UAAf,sBACA,cAACI,EAAA,EAAIC,KAAL,CAAUL,KAAK,WAAf,sBACA,cAACI,EAAA,EAAIC,KAAL,CAAUL,KAAK,aAAf,wBACA,cAACI,EAAA,EAAIC,KAAL,CAAUL,KAAK,eAAf,0BACA,cAACI,EAAA,EAAIC,KAAL,CAAUL,KAAK,UAAf,oBACA,cAACI,EAAA,EAAIC,KAAL,CAAUL,KAAK,SAAf,wBAIR,cAACP,EAAD,CAAcpiB,QAASpE,EAAMoE,QAASqiB,WAAYzmB,EAAMymB,iB,iBEvBrD,SAASY,IACpB,OAEI,qBAAKvU,UAAU,eAAf,oB,4BCIawU,E,kDACjB,WAAYtnB,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT3T,QAAS4T,aAAaC,QAAQ,WAC9BC,SAAU,IAEd,EAAKE,qBAAuB,EAAKA,qBAAqBC,KAA1B,gBAC5B,EAAKC,WAAa,EAAKA,WAAWD,KAAhB,gBAPH,E,iEAUEG,GACjBzY,KAAK0Y,SAAS,CAAEP,SAAUM,EAAME,OAAOpV,O,gDAGjBqV,GACtB5Y,KAAK0Y,SAAS,CACVrU,QAASuU,EAAUvU,Y,oKAKjBrE,KAAKuY,a,iRAIaxS,YAAiCwT,K,OAAnDlT,E,OACN7D,QAAQC,IAAI,uBAAuB4D,GAC/B8R,EAAW,G,cACG9R,G,IAAlB,2BAA6B,CAAlBf,EAAkB,QACzB,IACI9C,QAAQC,IAAI,6BAA8B6C,EAAIsG,oBAAoB4b,IAEhD,MADAliB,EAAIsG,oBAAoB4b,GAAG7H,eAEzCxH,EAASrS,KAAKR,GAEpB,MAAOgU,GACL9W,QAAQC,IAAI,aAAc6W,K,8BAIlC9W,QAAQC,IAAI,WAAW0V,GACvBnY,KAAK0Y,SAAS,CACVP,SAAUA,I,qIAIR,IAAD,OAEL,OACI,eAAC,WAAD,WACI,uBAEInY,KAAKgY,MAAMG,SAASnT,OAAS,EACjD,gDAIgB,kDAKA,qBAAK+N,UAAU,wBAAf,SACS/S,KAAKgY,MAAMG,SAASlT,KAAI,SAAA0U,GAAI,OACrB,cAAC8N,EAAA,EAAD,CAEI7N,YAAaD,EACbE,WAAY,EAAKtB,YAFZoB,EAAKvT,YAO9B,8B,GAzE2BnF,IAAMC,W,4CCNlC,SAASwmB,GAAeznB,GAKnC,OAEI,uBAAO8S,UAAU,mBAAjB,SACI,sBAAKA,UAAU,WAAf,UACI,uBAAOiT,KAAK,QAAQxa,KAAK,YAAYN,MAAOjL,EAAMiL,MAAOyc,QAAS1nB,EAAM2nB,SAAUzB,SAAUlmB,EAAMkmB,WAClG,qBAAKpT,UAAU,QAAf,SACI,qBAAK8U,MAAM,OAAO1jB,OAAO,OAAO2jB,QAAQ,YAAYC,MAAM,6BAA6BC,WAAW,+BAAlG,SACI,cAAC7mB,GAAA,EAAD,CAAUC,SAAUnB,EAAMiL,MACtBhL,WAZL,GAaKC,WAZL,GAaKC,UAZN,cCHP,SAAS6nB,GAAWhoB,GAC/B,OACI,+BACI,6BACI,uBAAO8lB,QAAQ,MAAf,oBAEJ,+BACI,cAAC2B,GAAD,CAAgBxc,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACpE,cAACF,GAAD,CAAgBxc,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACpE,cAACF,GAAD,CAAgBxc,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACpE,cAACF,GAAD,CAAgBxc,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACpE,cAACF,GAAD,CAAgBxc,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,iB,cCVrE,SAASF,GAAeznB,GAKnC,OAEI,uBAAO8S,UAAU,mBAAjB,SACI,sBAAKA,UAAU,WAAf,UACI,uBAAOiT,KAAK,QAAQxa,KAAK,aAAaN,MAAOjL,EAAMiL,MAAOyc,QAAS1nB,EAAM2nB,SAAUzB,SAAUlmB,EAAMkmB,WACnG,qBAAKpT,UAAU,QAAf,SACI,qBAAK8U,MAAM,OAAO1jB,OAAO,OAAO2jB,QAAQ,YAAYC,MAAM,6BAA6BC,WAAW,+BAAlG,SACA,cAACloB,GAAA,EAAD,CACQC,WAAYE,EAAMiL,MAClBhL,WAbL,GAcKC,WAbL,EAcKC,UAbN,cCJP,SAAS8nB,GAAYjoB,GAChC,OACI,+BACI,6BACI,uBAAO8lB,QAAQ,MAAf,qBAEJ,+BACI,cAAC,GAAD,CAAiB7a,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACrE,cAAC,GAAD,CAAiB1c,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACrE,cAAC,GAAD,CAAiB1c,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACrE,cAAC,GAAD,CAAiB1c,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,WACrE,cAAC,GAAD,CAAiB1c,MAAM,IAAIib,SAAUlmB,EAAMkmB,SAAUyB,SAA6B,MAAnB3nB,EAAM2nB,iBCTtE,SAASO,GAAUloB,GAC9B,OACI,+BACI,6BACI,uBAAO8lB,QAAQ,MAAf,oBAEJ,6BACI,uBAAOhT,UAAU,eAAexP,GAAG,MAAM0iB,QAAQ,cAAcE,SAAUlmB,EAAMkmB,SAAUjb,MAAOjL,EAAMuL,Y,aCoPvG4c,G,kDAnPX,WAAYnoB,GAAQ,IAAD,8BACf,cAAMA,IAkBVooB,SAAW,WACP,EAAK3P,SAAS,CACV4P,aAAc,EAAKtQ,MAAMsQ,eArBd,EAyBnBC,SAAW,WACP,EAAK7P,SAAS,CACV8P,aAAc,EAAKxQ,MAAMwQ,eA3Bd,EA+BnBC,QAAU,WACN,EAAK/P,SAAS,CACV4P,aAAa,EACbE,aAAa,KAlCF,EAsCnBE,UAAY,SAACC,GACT,EAAKjQ,SAAS,CACVzF,OAAQ0V,EAAMC,MAElBpmB,QAAQC,IAAI,cA1CG,EA6CnBomB,UAAY,SAACF,GACT,EAAKjQ,SAAS,CACVvF,OAAQwV,EAAMC,MAElBpmB,QAAQC,IAAI,cAjDG,EAoDnBqmB,aAAe,SAACxP,GACZ,EAAKZ,SAAS,CACVtX,SAAUkY,EAAEX,OAAOzN,SAtDR,EA0DnB6d,cAAgB,SAACzP,GACb,EAAKZ,SAAS,CACV3Y,WAAYuZ,EAAEX,OAAOzN,QAEzB1I,QAAQC,IAAI,gBAAiB6W,IA9Dd,EAiEnB0P,aAAe,SAAC1P,GACZ,EAAKZ,SAAS,CACVlN,KAAM8N,EAAEX,OAAOzN,QAEnB1I,QAAQC,IAAI,eAAgB6W,IAnE5B,EAAKtB,MAAQ,CACTsQ,aAAa,EACbE,aAAa,EACbpV,KAAMC,eACNJ,OAAQC,eACRC,OAAQD,eACR9R,SAAUkS,aAAa,EAAG,GAAGvP,WAC7BhE,WAAYuT,aAAa,EAAG,GAAGvP,WAC/ByH,KAAM,oBAEV,EAAKkd,UAAY,EAAKA,UAAUpQ,KAAf,gBACjB,EAAKuQ,UAAY,EAAKA,UAAUvQ,KAAf,gBACjB,EAAKwQ,aAAe,EAAKA,aAAaxQ,KAAlB,gBACpB,EAAK0Q,aAAe,EAAKA,aAAa1Q,KAAlB,gBACpB,EAAKyQ,cAAgB,EAAKA,cAAczQ,KAAnB,gBAhBN,E,sEAwEOM,GACtB5Y,KAAK0Y,SAAS,CACVrU,QAASuU,EAAUvU,Y,wEAIZmH,EAAMyH,EAAQE,EAAQ/R,EAAUrB,EAAYugB,G,iFAC1CD,YAAkB7U,EAAMyH,EAAQE,EAAQ/R,EAAUrB,EAAYugB,G,mLAGrE,IAAD,OACC2I,EAASC,KAAS,CACpB,QAAW,CACPjW,OAAQ,CACJ4U,MAAO,OACP1jB,OAAQ,OACRglB,aAAc,MACdC,WAAW,GAAD,OAAKppB,KAAKgY,MAAM/E,SAE9BE,OAAQ,CACJ0U,MAAO,OACP1jB,OAAQ,OACRglB,aAAc,MACdC,WAAW,GAAD,OAAKppB,KAAKgY,MAAM7E,SAE9BkW,QAAS,CACL3U,SAAU,WACV4U,OAAQ,KAEZC,MAAO,CACH7U,SAAU,QACV8U,IAAK,MACLC,MAAO,MACPC,OAAQ,MACRC,KAAM,OAEVC,OAAQ,CACJC,QAAS,MACTT,WAAY,UACZD,aAAc,MACdW,OAAQ,UACRC,QAAS,eACTC,UAAW,+BAKvB,OACI,sBAAKjX,UAAU,qBAAf,UACI,uBAEA,qBAAKA,UAAU,mCAAf,SACI,qBAAKA,UAAU,4BAAf,SACI,cAACC,EAAA,EAAD,CACIC,OAAQjT,KAAKgY,MAAM/E,OACnBE,OAAQnT,KAAKgY,MAAM7E,OACnBC,KAAMpT,KAAKgY,MAAM5E,KACjBhS,SAAUpB,KAAKgY,MAAM5W,SACrBrB,WAAYC,KAAKgY,MAAMjY,WACvByL,KAAMxL,KAAKgY,MAAMxM,WAK7B,qBAAKuH,UAAU,0BAAf,SACI,gCACI,kCACI,cAACoV,GAAD,CACIhC,SAAUnmB,KAAKgpB,aACf9d,MAAOlL,KAAKgY,MAAMxM,OACtB,+BACI,6BACI,uBAAOua,QAAQ,SAAf,yBAEJ,+BACI,qBAAKkE,MAAOhB,EAAOW,OAAQlP,QAAS1a,KAAKqoB,SAAzC,SACI,qBAAK4B,MAAOhB,EAAOhW,WAEtBjT,KAAKgY,MAAMsQ,YAAc,sBAAK2B,MAAOhB,EAAOI,QAAnB,UACtB,qBAAKY,MAAOhB,EAAOM,MAAO7O,QAAS1a,KAAKyoB,UACxC,cAAC,IAAD,CAAcllB,GAAG,SAASolB,MAAO3oB,KAAKgY,MAAM/E,OAAQkT,SAAUnmB,KAAK0oB,eAC9D,WAIjB,+BACI,6BACI,uBAAO3C,QAAQ,SAAf,4BAEJ,+BACI,qBAAKkE,MAAOhB,EAAOW,OAAQlP,QAAS1a,KAAKuoB,SAAzC,SACI,qBAAK0B,MAAOhB,EAAO9V,WAEtBnT,KAAKgY,MAAMwQ,YAAc,sBAAKyB,MAAOhB,EAAOI,QAAnB,UACtB,qBAAKY,MAAOhB,EAAOM,MAAO7O,QAAS1a,KAAKyoB,UACxC,cAAC,IAAD,CAAcllB,GAAG,SAASolB,MAAO3oB,KAAKgY,MAAM7E,OAAQgT,SAAUnmB,KAAK6oB,eAC9D,WAIjB,cAACZ,GAAD,CAAYL,SAAU5nB,KAAKgY,MAAM5W,SAAU+kB,SAAUnmB,KAAK8oB,eAE1D,cAACZ,GAAD,CAAaN,SAAU5nB,KAAKgY,MAAMjY,WAAYomB,SAAUnmB,KAAK+oB,gBAE7D,+BACI,sCAGA,+BACI,wBAAQhW,UAAU,qBACd2H,QAAS,SAACpB,GACN,EAAKZ,SAAS,CACVtF,KAAMC,eACNJ,OAAQC,eACRC,OAAQD,eACR9R,SAAUkS,aAAa,EAAG,GAAGvP,WAC7BhE,WAAYuT,aAAa,EAAG,GAAGvP,WAC/ByH,KAAM,EAAKwM,MAAMxM,QAR7B,yBADJ,OAeI,wBAAQuH,UAAU,qBACd2H,QAAS,SAACpB,GACN,EAAKZ,SAAS,CACVtF,KAAMC,kBAHlB,gCAUR,+BACI,sCAGA,6BACI,yBAAQN,UAAU,uBACd2H,QAAS,kBAAM,EAAKwP,SAChB,EAAKlS,MAAMxM,KAAK2e,OAChB,EAAKnS,MAAM/E,OACX,EAAK+E,MAAM7E,OACX,EAAK6E,MAAM5W,SACX,EAAK4W,MAAMjY,WACX,EAAKiY,MAAM5E,OAEfgX,SAA8B,qBAApBpqB,KAAKgY,MAAMxM,MAA+BxL,KAAKgY,MAAMxM,KAAK2e,OAAOnlB,OAAS,EATxF,8BAWsB2X,IAAW3V,KAAgByT,QAAQ,GAXzD,iBAeR,+BACI,sCAGA,+BACI,mDAAsBoC,IAAc7V,KAAgByT,QAAQ,GAA5D,UACA,qDAA4B7S,IAAOZ,KAAgByT,QAAQ,GAA3D,UACA,+DAAsCkC,IAAaE,IAAgBjV,KAAQZ,KAAgByT,QAAQ,GAAnG,8B,GAzOXxZ,IAAMC,W,6BCN3BsF,GAAU,mDAuFP,SAAe6jB,GAAtB,yC,8CAAO,WAA2BC,EAAOC,EAAOC,EAAmBrM,GAA5D,+EAAAnc,EAAA,sEACmBwE,GADnB,cACG0J,EADH,OAC4Bua,OAAOC,cAAc,GAAI,IADrD,SAE0BzmB,cAF1B,cAEGoE,EAFH,gBAG2B7B,GAH3B,cAGGmkB,EAHH,OAGoCxT,QAAQzN,UAAUhH,KAAWC,UAAU6nB,IACxEI,EAAwBD,EAAe/jB,SAAS3E,IAAI,GAAGsJ,SAAS5D,SAASkjB,SACzEC,EAAwBF,EAAwBzN,IAA0BC,IAE1E2N,EAAcpd,SAAS2c,EAAM1e,oBAAoB8T,GAAGC,eAPvD,UAQwBnZ,GARxB,eAQGkY,EARH,OAQiCC,QAAQxX,SAASuG,KARlD,UAS4BlH,GAT5B,2BASqCoY,YATrC,UASiEpY,GATjE,2BAS0EU,IAAIC,SAAS,KAApF0X,EATH,KASiDxX,SATjD,0BAW6Bb,GAX7B,eAWG0B,EAXH,OAWsC+V,kBAAkBC,QAXxD,UAayB1X,GAbzB,eAaGwkB,EAbH,OAakC7T,QAAQzN,UAAUhH,KAAWC,UAAU2nB,IAEtEW,EAAkBX,EAAMpf,MAAQ6f,EAfnC,UAgB0BvkB,GAhB1B,2BAgBmCS,SAhBnC,UAgB4DT,GAhB5D,2BAgBqEU,IAAIC,SAAS8jB,EAAgBlnB,YAA/FmnB,EAhBH,KAgB4C7jB,SAhB5C,0BAiBgCb,GAjBhC,2BAiByC0G,wBAjBzC,KAkBCge,EAlBD,UAmBQ1kB,GAnBR,2BAmBiB2G,SAnBjB,UAmBgD3G,GAnBhD,2BAmByDgC,QAAQC,YAAY8Q,KAnB7E,UAmB0BnM,eAnB1B,qBAoBC/E,GAHE8iB,EAjBH,0BAqBave,mBAAmB,EAAGoe,EAAa/L,eAAe,IAClEkM,EAAgBve,mBAAmB,EAAGoe,EAAa/L,eAAe,IAClEkM,EAAgBve,mBAAmB,EAAGoe,EAAa/L,eAAe,IAvB/D,MAwBHkM,EAxBG,UAwB0Cja,YAAW,KAxBrD,2BAwBatE,mBAxBb,WAwBgC,EAxBhC,OAyBHue,EAAgBve,mBAAmB,EAAGoe,EAAa/L,eAAe,IAClEkM,EAAgBve,mBAAmB,EAAGoe,EAAa/L,eAAe,IAClEkM,EAAgBjM,UAAUR,EAAaG,GA3BpC,UA6BC3W,EAAiBiB,IAAIgiB,EAAgB7hB,SA7BtC,0DA+BC9G,QAAQC,IAAR,kCA/BD,+BAoCyB+D,GApCzB,eAoCG4kB,EApCH,OAoCkCjU,QAAQzN,UAAUhH,KAAWC,UAAU4nB,IACtEc,EAAkBd,EAAMrf,MAAQ6f,EArCnC,UAsC0BvkB,GAtC1B,4BAsCmCS,SAtCnC,UAsC4DT,GAtC5D,4BAsCqEU,IAAIC,SAASkkB,EAAgBtnB,YAA/FunB,EAtCH,MAsC4CjkB,SAtC5C,4BAuCgCb,GAvChC,4BAuCyC0G,wBAvCzC,MAwCCoe,EAxCD,UAyCQ9kB,GAzCR,4BAyCiB2G,SAzCjB,UAyCgD3G,GAzChD,4BAyCyDgC,QAAQC,YAAY8Q,KAzC7E,YAyC0BnM,eAzC1B,wBA0CC/E,GAHEkjB,EAvCH,8BA2Ca3e,mBAAmB,EAAGwe,EAAanM,eAAe,IAClEsM,EAAgB3e,mBAAmB,EAAGwe,EAAanM,eAAe,IAClEsM,EAAgB3e,mBAAmB,EAAGwe,EAAanM,eAAe,IA7C/D,MA8CHsM,EA9CG,UA8C0Cra,YAAW,KA9CrD,2BA8CatE,mBA9Cb,WA8CgC,EA9ChC,OA+CH2e,EAAgB3e,mBAAmB,EAAGwe,EAAanM,eAAe,IAClEsM,EAAgB3e,mBAAmB,EAAGwe,EAAanM,eAAe,IAClEsM,EAAgBrM,UAAUR,EAAaG,GAjDpC,WAmDC3W,EAAiBiB,IAAIoiB,EAAgBjiB,SAnDtC,8DAqDC9G,QAAQC,IAAR,kCArDD,sBA0DG+oB,EAAiB,EAAIT,EAAcnjB,IA1DtC,WA2DyBpB,GA3DzB,6BA2DkCS,SA3DlC,WA2D2DT,GA3D3D,6BA2DoEU,IAAIC,SAASqkB,EAAeznB,YAA7F0nB,EA3DH,MA2D2CpkB,SA3D3C,6BA4D4Bb,GA5D5B,6BA4DqCoY,YA5DrC,WA4DiEpY,GA5DjE,6BA4D0EU,IAAIC,SAAS,KAApFukB,EA5DH,MA4DiDrkB,SA5DjD,6BA6D+Bb,GA7D/B,6BA6DwC0G,wBA7DxC,MA8DCue,EA9DD,WA+DQjlB,GA/DR,6BA+DiB2G,SA/DjB,WA+DgD3G,GA/DhD,6BA+DyDgC,QAAQC,YAAYiV,KA/D7E,YA+D0BtQ,eA/D1B,wBAgEC/E,GAHEsjB,EA7DH,8BAiEY/e,mBAAmB,EAAGoe,EAAa/L,eAAe,IACjE0M,EAAe/e,mBAAmB,EAAGoe,EAAa/L,eAAe,IACjE0M,EAAe/e,mBAAmB,EAAGoe,EAAa/L,eAAe,IACjE0M,EAAe/e,mBAAmB,EAAGwe,EAAanM,eAAe,IACjE0M,EAAe/e,mBAAmB,EAAGwe,EAAanM,eAAe,IACjE0M,EAAe/e,mBAAmB,EAAGwe,EAAanM,eAAe,IACjE0M,EAAezM,UAAUR,EAAagN,GAvEnC,WAwE2BllB,GAxE3B,gBAwEGya,EAxEH,OAwEoCtC,QAAQxX,SAASuV,KAxErD,WAyE+BlW,GAzE/B,6BAyEwCoY,YAzExC,WAyEoEpY,GAzEpE,sBAyE6EU,IAAIC,UAAUgW,IAA0BC,KAA0BrZ,YAA5Imd,EAzEH,MAyEoD7Z,SAzEpD,kBA0EHskB,EAAezM,UAAU+B,EAAgBC,GA1EtC,WA4EChZ,EAAiBiB,IAAIwiB,EAAeriB,SA5ErC,8DA8EC9G,QAAQC,IAAR,kCA9ED,iCAmFsC+D,GAnFtC,6BAmF+CoY,YAnF/C,WAmF2EpY,GAnF3E,6BAmFoFU,IAAIC,SAAS2jB,EAAsB/mB,YAApH6nB,EAnFH,MAmF2DvkB,SAnF3D,6BAoFyBb,GApFzB,6BAoFkCS,SApFlC,WAoF2DT,GApF3D,6BAoFoEU,IAAIC,SAASmV,IAAsBvY,YAApGye,EApFH,MAoF2Cnb,SApF3C,6BAqFkCb,GArFlC,6BAqF2C0G,wBArF3C,MAsFCsV,EAtFD,WAuFQhc,GAvFR,6BAuFiB2G,SAvFjB,WAuFgD3G,GAvFhD,sBAuFyDgC,QAAQC,YAAY6U,KAvF7E,YAuF0BlQ,eAvF1B,wBAwFC/E,GAHEoa,EArFH,8BAyFevD,UAAU+B,EAAgB2K,GAzFzC,WA2FC1jB,EAAiBiB,IAAIsZ,EAAkBnZ,SA3FxC,8DA6FC9G,QAAQC,IAAR,sDA7FD,sBAkGCyC,EAAS,CAAColB,EAAOC,EAAOC,GAlGzB,WAmGuBhkB,GAnGvB,gBAmGGqX,EAnGH,OAmGgCpW,UAAUC,gBAAgBxC,GAnG1D,WAoG6BsB,GApG7B,6BAoGsCsX,sBAAnCC,EApGH,qBAqG6BvX,GArG7B,6BAqGsCwX,aArGtC,MAqGmDH,EArGnD,MAqG+DE,EAA5DvW,EArGH,kCAuGcS,YAAkBT,EAAcU,EAAkB,CAACiW,GAAmB3B,IAActX,GAvGlG,gBAuGGpB,EAvGH,aAyGcpB,KAzGd,WAyGqC+N,YAAgB3M,EAAIoB,EAAQ,CAACiZ,GAAmBjO,GAzGrF,6BAyGGK,EAzGH,MAyGyB5K,MAzGzB,6BA2GgB3B,YAAOuM,GA3GvB,gBA2GG1E,EA3GH,OA4GHrJ,QAAQC,IAAI,OAAQoJ,GA5GjB,kBA6GI0E,GA7GJ,2F,sBAgHA,SAAesb,GAAtB,yC,8CAAO,WAAkCvB,EAAOC,EAAOuB,EAAS3N,GAAzD,mFAAAnc,EAAA,6DACHQ,QAAQC,IAAI,kBAAoB6nB,EAAMlkB,MAAQ,OAASmkB,EAAMnkB,OACvD2lB,EAAape,SAAS2c,EAAM1e,oBAAoB8T,GAAGC,eACzDnd,QAAQC,IAAI,eAAgBqpB,EAASC,GAHlC,SAImBvlB,GAJnB,cAIG0J,EAJH,OAI4Bua,OAAOC,cAAc,GAAI,IAJrD,SAK0BzmB,cAL1B,cAKGoE,EALH,iBAMwB7B,GANxB,eAMGkY,EANH,OAMiCC,QAAQxX,SAASuG,KANlD,UAO4BlH,GAP5B,2BAOqCoY,YAPrC,UAOiEpY,GAPjE,oBAO0EU,IAAIC,SAAS,KAApF0X,EAPH,KAOiDxX,SAPjD,gBAQC2kB,EAAY,GACP9d,EAAI,EATV,aASaA,EAAI,GATjB,+BAWS+c,EAAkBX,EAAMpf,MACxBmgB,EAAkBd,EAAMrf,MACxB+gB,EAAcjkB,KAAKrC,MAAMmmB,EAAQlgB,oBAAoB6N,GAAGkG,eACxDuM,EAAclkB,KAAKrC,MAAMmmB,EAAQlgB,oBAAoBugB,GAAGxM,eACxDyM,OAAkBnhB,EAClBohB,OAAkBphB,EAGZ,IAANiD,EAnBT,wBAoBS1L,QAAQC,IAAI,UACZwoB,EAAkBX,EAAMpf,MAAQ,EAAI6gB,EAAa,EAAInkB,IAAS,EAAI0U,IAClE2P,EAAY,GAAKA,EAAY,GAAK,EAtB3C,UAuBkCzlB,GAvBlC,2BAuB2CoY,YAvB3C,UAuBuEpY,GAvBvE,2BAuBgFU,IAAIC,SAAUiW,IAA0BrZ,YAA/GqoB,EAvBT,KAuBuD/kB,SAvBvD,0BAwBkCb,GAxBlC,2BAwB2CoY,YAxB3C,UAwBuEpY,GAxBvE,oBAwBgFU,IAAIC,SAAUgW,IAAyBpZ,YAA9GsoB,EAxBT,KAwBuDhlB,SAxBvD,2CAyBsB,IAAN6G,EAzBhB,wBA0BS1L,QAAQC,IAAI,UACZ4oB,EAAkBd,EAAMrf,MAAQ,EAAI6gB,EAAa,EAAInkB,IAAS,EAAI0U,IAClE4P,EAAY,GAAKA,EAAY,GAAK,EA5B3C,UA6BkC1lB,GA7BlC,2BA6B2CoY,YA7B3C,UA6BuEpY,GA7BvE,2BA6BgFU,IAAIC,SAAUgW,IAAyBpZ,YAA9GqoB,EA7BT,KA6BuD/kB,SA7BvD,0BA8BkCb,GA9BlC,2BA8B2CoY,YA9B3C,UA8BuEpY,GA9BvE,oBA8BgFU,IAAIC,SAAUiW,IAA0BrZ,YAA/GsoB,EA9BT,KA8BuDhlB,SA9BvD,+BAgCK4kB,EAAY,GAAKA,EAAY,GAAK,EAClCC,EAAY,GAAKA,EAAY,GAAK,EAjCvC,UAmCqC1lB,GAnCrC,eAmCW0B,EAnCX,OAmC8C+V,kBAAkBC,QAnChE,UAqCiC1X,GArCjC,eAqCWwkB,EArCX,OAqC0C7T,QAAQzN,UAAUhH,KAAWC,UAAU2nB,IArCjF,UAwCkC9jB,GAxClC,4BAwC2CS,SAxC3C,UAwCoET,GAxCpE,4BAwC6EU,IAAIC,SAAS8jB,EAAgBlnB,YAA/FmnB,EAxCX,MAwCoD7jB,SAxCpD,4BAyCwCb,GAzCxC,4BAyCiD0G,wBAzCjD,MA0CSge,EA1CT,UA2CgB1kB,GA3ChB,4BA2CyB2G,SA3CzB,UA2CwD3G,GA3CxD,4BA2CiEgC,QAAQC,YAAY8Q,KA3CrF,YA2CkCnM,eA3ClC,wBA4CS/E,GAHE8iB,EAzCX,8BA6CqBve,mBAAmB,EAAGoe,EAAa/L,eAAe,IA7CvE,MA8CKkM,EA9CL,UA8CiDza,YAAgBub,GA9CjE,kCA8CqBrf,mBA9CrB,WA8CwC,EA9CxC,OA+CKue,EAAgBve,mBAAmB,EAAGoe,EAAa/L,eAAe,IA/CvE,MAgDKkM,EAhDL,WAgDkDja,YAAW,KAhD7D,mCAgDqBtE,mBAhDrB,WAgDwC,EAhDxC,aAiDKue,EAjDL,WAiDkDja,YAAW,KAjD7D,4BAiDqBtE,mBAjDrB,WAiDwC,EAjDxC,OAkDKue,EAAgBve,mBAAmB,EAAGoe,EAAa/L,eAAe,IAClEkM,EAAgBjM,UAAUR,EAAaG,GAnD5C,WAqDS3W,EAAiBiB,IAAIgiB,EAAgB7hB,SArD9C,8DAuDS9G,QAAQC,IAAR,kCAvDT,iCA4DiC+D,GA5DjC,gBA4DW4kB,EA5DX,OA4D0CjU,QAAQzN,UAAUhH,KAAWC,UAAU4nB,IA5DjF,WA6DkC/jB,GA7DlC,6BA6D2CS,SA7D3C,WA6DoET,GA7DpE,6BA6D6EU,IAAIC,SAASkkB,EAAgBtnB,YAA/FunB,EA7DX,MA6DoDjkB,SA7DpD,6BA8DwCb,GA9DxC,6BA8DiD0G,wBA9DjD,MA+DSoe,EA/DT,WAgEgB9kB,GAhEhB,6BAgEyB2G,SAhEzB,WAgEwD3G,GAhExD,6BAgEiEgC,QAAQC,YAAY8Q,KAhErF,YAgEkCnM,eAhElC,wBAiES/E,GAHEkjB,EA9DX,8BAkEqB3e,mBAAmB,EAAGwe,EAAanM,eAAe,IAlEvE,MAmEKsM,EAnEL,WAmEiD7a,YAAgBwb,GAnEjE,mCAmEqBtf,mBAnErB,WAmEwC,EAnExC,OAoEK2e,EAAgB3e,mBAAmB,EAAGwe,EAAanM,eAAe,IApEvE,MAqEKsM,EArEL,WAqEkDra,YAAW,KArE7D,mCAqEqBtE,mBArErB,WAqEwC,EArExC,aAsEK2e,EAtEL,WAsEkDra,YAAW,KAtE7D,4BAsEqBtE,mBAtErB,WAsEwC,EAtExC,OAuEK2e,EAAgB3e,mBAAmB,EAAGwe,EAAanM,eAAe,IAClEsM,EAAgBrM,UAAUR,EAAaG,GAxE5C,WA0ES3W,EAAiBiB,IAAIoiB,EAAgBjiB,SA1E9C,8DA4ES9G,QAAQC,IAAR,kCA5ET,iCAgFmC+D,GAhFnC,gBAgFWya,EAhFX,OAgF4CtC,QAAQxX,SAASuV,KAhF7D,WAiFoClW,GAjFpC,6BAiF6CS,SAjF7C,WAiFsET,GAjFtE,6BAiF+EU,IAAIC,SAASmV,IAAsBvY,YAAvGuoB,EAjFX,MAiFsDjlB,SAjFtD,kBAmFWklB,EAAWvB,EAAa/L,eAAe,GAAGc,mBAnFrD,WAoF8BvZ,GApF9B,6BAoFuCgC,QApFvC,WAoF8EhC,GApF9E,6BAoFuFkM,SAASC,kBAAkB,KAAO4Z,GAA9GC,EApFX,MAoF+C5Z,wBApF/C,6BAqF2CpM,GArF3C,6BAqFoD0G,wBArFpD,MAsFSof,EAtFT,WAuFgB9lB,GAvFhB,sBAuFyB2G,SAASC,eAAeof,GAvFjD,MAwFSnkB,GAHEokB,EArFX,8BAyFwBvN,UAAU+B,EAAgBmL,GAzFlD,WA2FSlkB,EAAiBiB,IAAIsjB,EAAmBnjB,SA3FjD,8DA6FS9G,QAAQC,IAAR,kCA7FT,sBAkGWiqB,EAAWtB,EAAanM,eAAe,GAAGc,mBAlGrD,WAmG8BvZ,GAnG9B,6BAmGuCgC,QAnGvC,WAmG8EhC,GAnG9E,6BAmGuFkM,SAASC,kBAAkB,KAAO+Z,GAA9GC,EAnGX,MAmG+C/Z,wBAnG/C,6BAoG2CpM,GApG3C,6BAoGoD0G,wBApGpD,MAqGSof,EArGT,WAsGgB9lB,GAtGhB,sBAsGyB2G,SAASC,eAAeuf,GAtGjD,MAuGStkB,GAHEukB,EApGX,8BAwGwB1N,UAAU+B,EAAgBoL,GAxGlD,WA0GSnkB,EAAiBiB,IAAIyjB,EAAmBtjB,SA1GjD,8DA4GS9G,QAAQC,IAAR,kCA5GT,sBAiHSyC,EAAS,CAAColB,EAAOC,EAAOuB,GAjHjC,WAkH+BtlB,GAlH/B,gBAkHWqX,EAlHX,OAkHwCpW,UAAUC,gBAAgBxC,GAlHlE,WAmHqCsB,GAnHrC,6BAmH8CsX,sBAAnCC,EAnHX,qBAoHqCvX,GApHrC,6BAoH8CwX,aApH9C,MAoH2DH,EApH3D,MAoHuEE,EAA5DvW,EApHX,uBAqHKhF,QAAQC,IAAI,sBArHjB,WAsHsBwF,YAAkBT,EAAcU,EAAkB,CAACiW,GAAmB3B,IAActX,GAtH1G,gBAsHWpB,EAtHX,aAwHsBpB,KAxHtB,WAwH6CuN,YAA4BnM,EAAIoB,EAAQ,CAACiZ,GAAmBjO,GAxHzG,6BAwHWK,EAxHX,MAwHiC5K,MAxHjC,kBAyHKnD,QAAQC,IAAI,WAAY8N,GAzH7B,WA0HwBvM,YAAOuM,GA1H/B,UA0HW1E,EA1HX,SA4HSmgB,EAAUlmB,KAAK+F,GAOnBrJ,QAAQC,IAAI,eAAgBoJ,GAnIjC,uDAsIKrJ,QAAQC,IAAR,OAtIL,SASoByL,IATpB,4BAyIH1L,QAAQC,IAAI,YAAYupB,GACC,IAArBA,EAAUhnB,OA1IX,2CA2IQgnB,GA3IR,kCA6IQ,CAAC,GAAG,KA7IZ,sG,4CC1MMa,GAAW,WAAO,IAAD,EACEC,oBAAS,GADX,oBACrBnF,EADqB,KACZoF,EADY,KAE5B,OACE,mCACE,uBACAha,UAAU,eACRiT,KAAK,WACL2B,QAASA,EACTpkB,GAAG,WACH4iB,SAAU,kBAAM4G,GAAYpF,SCFfqF,G,kDACjB,WAAY/sB,GAAQ,IAAD,kCACf,cAAMA,IACD+X,MAAQ,CACT+S,YAAW,UAAE9qB,EAAM8qB,mBAAR,QAAuB,EAClC5S,SAAQ,UAAElY,EAAMkY,gBAAR,QAAoB,GAC5B8U,aAAc,IAAI9hB,MAAMlL,EAAMkY,SAASnT,QAAQpE,KAAK,IALzC,E,+DAUAwF,GACf5D,QAAQC,IAAI,qBAAsB2D,GAClC,IAAM8mB,EAAYltB,KAAKgY,MAAMG,SAAS5N,WAAU,SAAAjF,GAAG,OAAIA,EAAIc,QAAUA,KACjE+mB,EAAgBntB,KAAKgY,MAAMiV,aACY,IAAvCjtB,KAAKgY,MAAMiV,aAAaC,IACxBC,EAAcD,GAAa,EAC3BltB,KAAK0Y,SAAS,CACVuU,aAAa,aAAKE,OAGtBA,EAAcD,GAAa,EAC3BltB,KAAK0Y,SAAS,CACVuU,aAAa,aAAKE,Q,qKAMd3Z,YAAa,0B,SACMjP,YAAakY,K,cAAtC0B,E,gBAC0B/Z,YAAyBkZ,K,UACtB,KAD/B8P,E,QACoBpoB,O,wBACpBxC,QAAQC,IAAI,sC,2BAMhB,IAHM+nB,EAAoB4C,EAAoB,GAExCC,EAAc,GACXthB,EAAQ,EAAGA,EAAQ/L,KAAKgY,MAAMiV,aAAajoB,OAAQ+G,IACjB,IAAnC/L,KAAKgY,MAAMiV,aAAalhB,IACxBshB,EAAYvnB,KAAKiG,G,GAGzBvJ,QAAQC,IAAI,cAAe4qB,GACA,IAAvBA,EAAYroB,O,kCACWqlB,GAAYrqB,KAAKgY,MAAMG,SAASkV,EAAY,IAAKrtB,KAAKgY,MAAMG,SAASkV,EAAY,IAAK7C,EAAmBrM,EAAiB,I,QAA3I5N,E,OACEgE,YAAmBhE,EAAShN,I,wBAEpC6Q,YAAW,wB,sIAMT,IAAD,OACCkZ,EAAwBttB,KAAKgY,MAAMiV,aAAapf,QAAO,SAAC7L,EAAGurB,GAAJ,OAAUvrB,EAAIurB,IAAG,GAC9E,OACI,eAAC,WAAD,WACI,sBAAKxa,UAAU,+DAAf,UACI,sBAAKA,UAAU,gDAAf,UACI,6CAAgBya,aAAgBxtB,KAAKgY,MAAM+S,aAA3C,cAE8B,IAA1BuC,EACI,wBAAQva,UAAU,uBAAuB2H,QAAS,kBAAM,EAAK2P,eAA7D,0BACE,KAGV,iCAAOiD,EAAP,uBAEJ,qBAAKva,UAAU,mBAAf,SAEQ/S,KAAKgY,MAAMG,SAASlT,KAAI,SAACwoB,EAAM1hB,GAAP,OACpB,sBAAKgH,UAAU,wCAAf,UACI,cAAC0U,EAAA,EAAD,CAAU7N,YAAa6T,EAAM5T,WAAY,EAAKtB,WAAYmV,gBAAgB,IAC1E,qBAAKhT,QAAS,kBAAM,EAAKiT,mBAAmBF,EAAKrnB,QAAjD,SAAyD,cAAC,GAAD,CAAUuhB,QAA4C,IAAnC,EAAK3P,MAAMiV,aAAalhB,SAF5C0hB,EAAKrnB,eAfrF,W,GA1DiCnF,IAAMC,WCH9B0sB,G,kDACjB,WAAY3tB,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT6V,oBAAqB,IAHV,E,0LAQT7tB,KAAKuY,a,qRAIaxS,YAAiCwT,K,OAAnDlT,E,OACFynB,EAAiB,G,cACHznB,G,IAAlB,2BAA6B,CAAlBf,EAAkB,QACzB,IACUyoB,EAAYzoB,EAAIsG,oBAAoB4b,GAAG7H,cACvCoL,EAAczlB,EAAIsG,oBAAoB8T,GAAGC,cAC7B,MAAdoO,IAEID,EAAe/C,GACf+C,EAAe/C,GAAf,uBAAkC+C,EAAe/C,IAAjD,CAA+DzlB,IAE/DwoB,EAAe/C,GAAe,CAACzlB,IAGzC,MAAOgU,GACL9W,QAAQC,IAAI,aAAc6W,K,8BAKlCtZ,KAAK0Y,SAAS,CACVmV,oBAAqBC,I,qIAInB,IAAD,OACL,OACI,cAAC,WAAD,UACI,sBAAK/a,UAAU,8BAAf,UACI,8FACA,uDAEIvP,OAAOC,KAAKzD,KAAKgY,MAAM6V,qBAAqB5oB,KAAI,SAAAkH,GAAG,OAC/C,cAAC,GAAD,CAAiB4e,YAAa5e,EAAKgM,SAAU,EAAKH,MAAM6V,oBAAoB1hB,IAAWA,e,GA9CtElL,IAAMC,W,SCFtC8sB,GAAb,uKAGQ,IAAMC,EAAWjuB,KAAKC,MAAMguB,SAE5B,OACI,qBAAKlb,UAAU,qCAAf,SACI,sBAAKA,UAAU,gDAAf,UACI,qBAAKwT,ICZV,muFDaK,sBAAKxT,UAAU,WAAf,UAA0B,yCACtB,+BAAkB,IAAXkb,GAAgBxT,QAAQ,iBAVvD,GAAgCxZ,IAAMC,WECzBgtB,GAAb,uKAGQ,IAAMriB,EAAO7L,KAAKC,MAAM4L,KAExB,OACI,cAAC,WAAD,UAEiB,KAATA,EACI,gCACK4X,aAAiB5X,EAAM,GACxB,qBAAKkH,UAAU,oBAAoBwT,IChBhD,6PDiBiB7L,QAAS,WACL,IAAM3Y,EAAMwa,IAA2B,mBAAqB1Q,EAC5D+J,OAAOuY,KAAKpsB,EAAK,UAAUqsB,cAGrC,WAjB1B,GAAmCntB,IAAMC,WEKpBmtB,G,kDACjB,WAAYpuB,GAAQ,IAAD,gCACf,cAAMA,IACD+X,MAAQ,CACTsS,MAAOrqB,EAAMqqB,MACbC,MAAOtqB,EAAMsqB,MACbuB,QAAS7rB,EAAM6rB,QACfjS,WAAY5Z,EAAM4Z,WAClByU,UAAW,GACXC,UAAW,GACXvC,UAAS,UAAE/rB,EAAM+rB,iBAAR,aAAqB/gB,GATnB,E,gEAcXjL,KAAKgY,MAAMgU,YACPhsB,KAAKgY,MAAMgU,UAAU9mB,OAAO,GAAGgG,QAAUlL,KAAKgY,MAAMgU,UAAU5mB,QAAQ,GAAG8F,MACzElL,KAAK0Y,SAAS,CACV6V,UAAWvuB,KAAKgY,MAAMgU,UAAUzoB,KAGpCvD,KAAK0Y,SAAS,CACV4V,UAAWtuB,KAAKgY,MAAMgU,UAAUzoB,Q,sKAOxC2Q,EAAQV,YAAa,kC,SACMjP,YAAakY,K,cAAtC0B,E,OACN3b,QAAQC,IAAI,eAAgBzC,KAAKgY,MAAOmG,G,SACH0N,GAAmB7rB,KAAKgY,MAAMsS,MAAOtqB,KAAKgY,MAAMuS,MAAOvqB,KAAKgY,MAAM8T,QAAS3N,EAAiB,I,oCAA1HmQ,E,KAAWC,E,KAClB/rB,QAAQC,IAAI,eAAgB6rB,EAAWC,GACvCvuB,KAAK0Y,SAAS,CACV4V,UAAWA,EACXC,UAAWA,IAEfra,EAAMC,Q,sIAGA,IAAD,OACCqa,EAAcC,aAAuBzuB,KAAKgY,MAAMsS,MAAOtqB,KAAKgY,MAAMuS,OAClEmE,EAAc,EAAIF,EAExB,OADAhsB,QAAQC,IAAI,mBAAoBzC,KAAKgY,OAEjC,sBAAKjF,UAAU,qFAAf,UACI,cAAC0U,EAAA,EAAD,CAEI7N,YAAa5Z,KAAKgY,MAAMsS,MACxBzQ,WAAY7Z,KAAKgY,MAAM6B,YAFlB7Z,KAAKgY,MAAMsS,MAAMlkB,OAI1B,gCACI,cAAC,GAAD,CAAY6nB,SAAUO,IAElBxuB,KAAKgY,MAAMgU,UACP,KAEA,cAAC,GAAD,CAAengB,KAAM7L,KAAKgY,MAAMsW,eAI5C,qBAAKvb,UAAU,+BAAf,SAEQ/S,KAAKgY,MAAMgU,UACkB,KAAzBhsB,KAAKgY,MAAMsW,UACP,gCAAK,0CAAiB,cAAC,GAAD,CAAeziB,KAAM7L,KAAKgY,MAAMsW,eAEtD,gCAAK,0CAAiB,cAAC,GAAD,CAAeziB,KAAM7L,KAAKgY,MAAMsW,eAE1D,wBAAQvb,UAAU,uBACd2H,QAAS,kBAAM,EAAKiU,gBADxB,qCAKZ,gCACI,cAAC,GAAD,CAAYV,SAAUS,IAElB1uB,KAAKgY,MAAMgU,UACP,KAEA,cAAC,GAAD,CAAengB,KAAM7L,KAAKgY,MAAMuW,eAG5C,cAAC9G,EAAA,EAAD,CAEI7N,YAAa5Z,KAAKgY,MAAMuS,MACxB1Q,WAAY7Z,KAAKgY,MAAM6B,YAFlB7Z,KAAKgY,MAAMuS,MAAMnkB,c,GArFHnF,IAAMC,WCJxB0tB,G,kDACjB,WAAY3uB,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT6W,cAAe,GACfC,eAAgB,GAChBC,UAAW,IALA,E,0LAUT/uB,KAAKgvB,qB,OACXhvB,KAAKivB,iB,ySAIoBlpB,YAAiC2X,K,OAApDwR,E,OACFC,EAAa,G,cACCD,G,gEAAP5pB,E,iBAEG8pB,EAAU9pB,EAAIsG,oBAAoBwN,GAAGuG,cACrC0P,EAAU/pB,EAAIsG,oBAAoB8T,GAAGC,c,UACnB5Z,YAAiCwT,K,QAAnDlT,E,OACFikB,OAAQrf,EAAWsf,OAAQtf,E,cACZ5E,G,IAAnB,4BAAWonB,EAAmB,SACjB7hB,oBAAoBugB,GAAGxM,gBAAkByP,IAC9C9E,EAAQmD,GAERA,EAAK7hB,oBAAoBugB,GAAGxM,gBAAkB0P,IAC9C9E,EAAQkD,G,8BAGhBjrB,QAAQC,IAAI,UAAW6C,GACnBglB,GAASC,GAASjlB,GAClB6pB,EAAWrpB,KAAK,CACZwkB,MAAOA,EACPC,MAAOA,EACPuB,QAASxmB,EACTypB,UAAWzpB,EAAIc,Q,kDAIvB5D,QAAQC,IAAI,aAAZ,M,+IAIRD,QAAQC,IAAI,cAAe0sB,GAC3BnvB,KAAK0Y,SAAS,CACVmW,cAAeM,I,kTAKa1qB,YAAyBiZ,K,OAAnD4R,E,OACFH,EAAa,G,cACAG,G,IAAjB,2BAAoC,CAAzBxrB,EAAyB,QAChC,IACQwmB,EAAQxmB,EAAGoB,OAAO,GAClBqlB,EAAQzmB,EAAGoB,OAAO,GAClB4mB,EAAUhoB,EAAGoB,OAAO,GAC2B,MAA/ColB,EAAM1e,oBAAoB4b,GAAG7H,gBAC7Bnd,QAAQC,IAAI,UAAWqpB,GACnBxB,GAASC,GAASuB,GAClBqD,EAAWrpB,KAAK,CACZwkB,MAAOA,EACPC,MAAOA,EACPuB,QAASA,EACTiD,UAAWjD,EAAQ1lB,MACnB4lB,UAAU,gBAAMloB,MAI9B,MAAOwV,GACL9W,QAAQC,IAAI,aAAc6W,K,8BAIlC9W,QAAQC,IAAI,cAAe0sB,GAC3BnvB,KAAK0Y,SAAS,CACVoW,eAAgBK,I,qIAMd,IAAD,OAEL,OADA3sB,QAAQC,IAAI,aAAczC,KAAKgY,MAAM8W,gBAEjC,cAAC,WAAD,UACI,sBAAK/b,UAAU,sDAAf,UACI,gDAEC/S,KAAKgY,MAAM6W,cAAc7pB,OAAS,EAC/B,qBAAK+N,UAAU,+CAAf,SAEQ/S,KAAKgY,MAAM6W,cAAc5pB,KAAI,SAAAsqB,GAAK,OAC9B,cAAC,GAAD,CAAWjF,MAAOiF,EAAMjF,MAAOC,MAAOgF,EAAMhF,MAAOuB,QAASyD,EAAMzD,QAASjS,WAAY,EAAKmV,oBAAyB,EAAKhX,MAAM+W,gBAI1I,2DAGN,iDACA,qBAAKhc,UAAU,wBAAf,SAEQ/S,KAAKgY,MAAM8W,eAAe7pB,KAAI,SAAAsqB,GAAK,OAC/B,cAAC,GAAD,CACIjF,MAAOiF,EAAMjF,MACbC,MAAOgF,EAAMhF,MACbuB,QAASyD,EAAMzD,QACfjS,WAAY,EAAKmV,mBAEjBhD,UAAWuD,EAAMvD,WADZ,EAAKhU,MAAM+W,yB,GAhHZ9tB,IAAMC,WCSzBsuB,G,kDACnB,WAAYvvB,GAAQ,IAAD,8BACjB,cAAMA,IAQRymB,WAAa,SAACriB,GACZ,EAAKqU,SAAS,CACVrU,QAASA,IAEb4T,aAAawX,QAAQ,UAAWprB,IAXhC,EAAK2T,MAAQ,CACX3T,QAAS4T,aAAaC,QAAQ,YAEhC,EAAKwO,WAAa,EAAKA,WAAWpO,KAAhB,gBAClB9V,QAAQC,IAAI,kBAAmBwV,aAAaC,QAAQ,YANnC,E,qDAkBjB,OACE,qBAAKnF,UAAU,MAAf,SACE,eAAC,IAAD,CAAe2c,SAAUC,GAAzB,UACE,cAAC,EAAD,CAAetrB,QAAS4T,aAAaC,QAAQ,WAAYwO,WAAY1mB,KAAK0mB,aAC1E,eAAC,IAAD,WACE,cAAC,IAAD,CAAOtT,KAAK,IAAIwc,QAAS,cAAC,EAAD,MACzB,cAAC,IAAD,CAAOxc,KAAK,UAAUwc,QAAS,cAAC,GAAD,MAC/B,cAAC,IAAD,CAAOxc,KAAK,WAAWwc,QAAS,cAAC,IAAD,MAChC,cAAC,IAAD,CAAOxc,KAAK,aAAawc,QAAS,cAAC,EAAD,MAClC,cAAC,IAAD,CAAOxc,KAAK,eAAewc,QAAS,cAAC,GAAD,MACpC,cAAC,IAAD,CAAOxc,KAAK,UAAUwc,QAAS,cAAC,GAAD,MAC/B,cAAC,IAAD,CAAOxc,KAAK,SAASwc,QAAS,cAAC,EAAD,SAEhC,cAACtI,EAAD,a,GAhCuBrmB,IAAMC,WCDxB2uB,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqB7tB,MAAK,YAAkD,IAA/C8tB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,M,kNCbaa,EAAb,uKAEQ,IAOMC,EAAwB,CAC1B,OAAK1lB,EACL,EAAK,MACL,EAAK,QACL,EAAK,OAUH+M,EAAQhY,KAAKC,MAAM+X,MACnB4Y,EAAa5wB,KAAKC,MAAM2wB,WAG9B,OACI,cAAC,WAAD,UACI,sBAAK7d,UAAW,qBAbA,CACpB,EAAK,QACL,EAAK,SACL,EAAK,OACL,EAAK,OASsDiF,GAAvD,UACI,8BA5BY,CACpB,EAAK,QACL,EAAK,oBACL,EAAK,UACL,EAAK,YAwByBA,KACrB2Y,EAAsB3Y,GACnB,8BACK2Y,EAAsB3Y,GAAS,KAAOrK,SAASijB,GAAc5pB,KAAgByT,QAAQ,GAAK,SAE7F,0DAnC1B,GAA+BxZ,IAAMC,W,QCWhBumB,E,kDACjB,WAAYxnB,GAAQ,IAAD,kCACf,cAAMA,IACD+X,MAAQ,CACT4B,YAAa3Z,EAAM2Z,YACnBxG,KAAM,GACNH,OAAQ,GACRE,OAAQ,GACR/R,SAAU,EACVrB,WAAY,EACZyL,KAAM,GACNqlB,KAAM,GACNC,MAAO,EACPC,QAAS,EACT/Y,MAAO,CAAC,EAAG,GACX6B,WAAY5Z,EAAM4Z,WAClBmX,OAAQ,IACRC,YAAW,UAAEhxB,EAAMgxB,mBAAR,SACXC,aAAc,GACdC,OAAQ,EACRzD,eAAc,UAAEztB,EAAMytB,sBAAR,UAElB,EAAK0D,cAAgB,EAAKA,cAAc9Y,KAAnB,gBArBN,E,wGAyBM4B,EAAWC,G,oEAE5BD,EAAUN,YAAYxT,QAAUpG,KAAKC,MAAM2Z,YAAYxT,M,gCAAepG,KAAKqxB,WAAWrxB,KAAKC,MAAM2Z,a,mLAGxFtU,G,2GAGMyM,YAAazM,EAAIsG,oBAAoBwO,GAAGnL,iB,cAArDoL,E,OACAC,EAAYD,EAAKtW,WAAWwW,MAAM,K,SACd1J,YAAgBvL,EAAIsG,oBAAoBwN,GAAGnK,iB,cAA/DqiB,E,OACAR,EAAQ,GAAKQ,EAAY,GAAK,EAAIA,EAAY,GAAK,EAAIA,EAAY,GAAK,EAAIA,EAAY,GACxFP,EAAU,GAAKO,EAAY,GAAK,GAAKA,EAAY,G,UAC5B9e,YAAkB,KAAOlN,EAAIsG,oBAAoB6N,GAAGxK,iB,QAAzEiiB,E,OACAK,GAAgBT,EAAQC,GAAW,EAGrCI,EAAS,E,MADO,CAAC,IAAK,IAAM,IAAM,IAAM,K,6CAEjCjjB,E,OACHqjB,GAAgBrjB,G,iBAChBijB,I,wFAKR3uB,QAAQC,IAAI,SAAU0uB,GACtB3uB,QAAQC,IAAI,eAAgByuB,GAE5BlxB,KAAK0Y,SAAS,CACVtS,MAAOd,EAAIc,MACXgN,KAAMkH,EAAU,GAChBrH,OAAQ,IAAMqH,EAAU,GACxBnH,OAAQ,IAAMmH,EAAU,GACxBlZ,SAAUkZ,EAAU,GACpBva,WAAYua,EAAU,GACtB9O,KAAM8O,EAAU,GAChBuW,KAAMS,EACNR,MAAOA,EACPC,QAASA,EACTC,OAAQ1rB,EAAIsG,oBAAoBugB,GAAGxM,cACnC3H,MAAO,CAAC1S,EAAIsG,oBAAoB4b,GAAG7H,cAAera,EAAIsG,oBAAoB8T,GAAGC,eAC7EuR,aAAcA,EACdC,OAAQA,EACRF,YAAajxB,KAAKgY,MAAMiZ,c,4QAKtBjxB,KAAKqxB,WAAWrxB,KAAKgY,MAAM4B,a,0KAG1BA,G,iFACDuF,YAASvF,G,uBACT5Z,KAAKgY,MAAM6B,a,mLAGF7O,EAAM4O,G,iFACfwE,YAAiBpT,EAAM4O,G,uBACvB5Z,KAAKgY,MAAM6B,a,4KAGXD,G,iFACA6F,YAAQ7F,G,uBACR5Z,KAAKgY,MAAM6B,a,gLAGL7O,EAAM4O,G,iFACZqG,YAAcjV,EAAM4O,G,uBACpB5Z,KAAKgY,MAAM6B,a,6KAGVD,G,6FAC8BpE,c,0CAA9BC,E,KAAWC,E,cACZiL,YAAS/G,EAAanE,EAAWC,G,wBACjC1V,KAAKgY,MAAM6B,a,8IAIjB7Z,KAAK0Y,SAAS,CACVuY,aAAcjxB,KAAKgY,MAAMiZ,gB,+BAIvB,IAAD,OACCO,EAAWxxB,KAAKgY,MAAMkZ,eAAiBjZ,aAAaC,QAAQ,WAClE,OACI,sBAAKnF,UAAU,sDAAf,UACI,sBAAKA,UAAU,+BAAf,UACI,sBAAKA,UAAU,gDAAf,UACI,cAAC,SAAD,CAAQ0e,aAAczxB,KAAKgY,MAAMmZ,OAAQO,UAAU,EAAMtV,KAAM,KAE3Dpc,KAAKgY,MAAM0V,eAAiB,KACxB1tB,KAAKgY,MAAMiZ,YACP,qBAAKle,UAAU,oBAAoBwT,ICrIxD,yMDqI0E7L,QAAS1a,KAAKoxB,gBAEnE,qBAAKre,UAAU,oBAAoBwT,IEvIxD,yMFuIyE7L,QAAS1a,KAAKoxB,mBAIlF,cAACpe,EAAA,EAAD,CACIC,OAAQjT,KAAKgY,MAAM/E,OACnBE,OAAQnT,KAAKgY,MAAM7E,OACnBC,KAAMpT,KAAKgY,MAAM5E,KACjBhS,SAAUpB,KAAKgY,MAAM5W,SACrBrB,WAAYC,KAAKgY,MAAMjY,WACvByL,KAAMxL,KAAKgY,MAAMxM,MANP,UAAYxL,KAAKgY,MAAM5R,OAQrC,sBAAK2M,UAAU,yDAAf,UACI,sBAAKA,UAAU,gDAAf,UACI,8BAAK,6CACL,8BAAK,mCAASpF,SAAS3N,KAAKgY,MAAM4B,YAAY1O,OAASlE,IAAlD,eAET,sBAAK+L,UAAU,gDAAf,UACI,8BAAK,oDACL,8BAAK,iCAAS/S,KAAKgY,MAAM8Y,aAE7B,sBAAK/d,UAAU,gDAAf,UACI,8BAAK,qDACL,8BAAK,iCAAS/S,KAAKgY,MAAM+Y,eAE7B,sBAAKhe,UAAU,gDAAf,UACI,yCACA,8BAAM/S,KAAKgY,MAAM6Y,KAAK,QAE1B,sBAAK9d,UAAU,gDAAf,UACI,0CACA,8BAAM/S,KAAKgY,MAAM6Y,KAAK,QAE1B,sBAAK9d,UAAU,gDAAf,UACI,yCACA,8BAAM/S,KAAKgY,MAAM6Y,KAAK,QAE1B,sBAAK9d,UAAU,gDAAf,UACI,4CACA,8BAAM/S,KAAKgY,MAAM6Y,KAAK,QAE1B,sBAAK9d,UAAU,gDAAf,UACI,qCACA,8BAAM/S,KAAKgY,MAAMgZ,YAErB,cAAC,EAAD,CAAWhZ,MAAOhY,KAAKgY,MAAMA,MAAM,GAAI4Y,WAAY5wB,KAAKgY,MAAMA,MAAM,KAExC,MAAxBhY,KAAKgY,MAAMA,MAAM,GACb,sBAAKjF,UAAU,oDAAf,UAEI,8BAAO0Q,YAAiBzjB,KAAKgY,MAAMkZ,aAAc,KACjD,qBAAKne,UAAU,oBAAoBwT,IG1LxD,iMH0LuE7L,QAAS,WACvDiX,UAAUC,UAAUC,UAAU,EAAK7Z,MAAMkZ,cACzCzc,oBAGN,WAMdzU,KAAKgY,MAAMiZ,YACP,qBAAKle,UAAU,sBAAf,SAEQye,EACI,eAAC,WAAD,WACI,wBAAQze,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKoX,KAAK,EAAK9Z,MAAM4B,cAC7EwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,uBAEA,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKqX,aAAa,MAAO,EAAK/Z,MAAM4B,cAC5FwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,qBAEA,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKqX,aAAa,YAAa,EAAK/Z,MAAM4B,cAClGwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,uBAEA,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKsX,UAAU,OAAQ,EAAKha,MAAM4B,cAC1FwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,kBAEA,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKsX,UAAU,QAAS,EAAKha,MAAM4B,cAC3FwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,yBAEA,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKsX,UAAU,QAAS,EAAKha,MAAM4B,cAC3FwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,mBAEA,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKsX,UAAU,QAAS,EAAKha,MAAM4B,cAC3FwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,0BAEA,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKuX,KAAK,EAAKja,MAAM4B,cAC7EwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,qBAIJ,cAAC,WAAD,UACI,wBAAQjF,UAAU,2BAA2B2H,QAAS,kBAAM,EAAKwX,IAAI,EAAKla,MAAM4B,cAC5EwQ,SAAkC,MAAxBpqB,KAAKgY,MAAMA,MAAM,GAD/B,qBAKd,Y,GApNY/W,IAAMC,Y,2GIR/B8R,EAAb,kDAEI,WAAY/S,GAAQ,IAAD,8BACf,cAAMA,IACD+X,MAAQ,CACT5E,KAAM,EAAKnT,MAAMmT,KACjBH,OAAQ,EAAKhT,MAAMgT,OACnBE,OAAQ,EAAKlT,MAAMkT,OACnB/R,SAAU,EAAKnB,MAAMmB,SACrBrB,WAAY,EAAKE,MAAMF,WACvByL,KAAM,EAAKvL,MAAMuL,KACjB+H,OAAQ,EAAKtT,MAAMsT,QATR,EAFvB,sEAe8BqF,EAAWuZ,GACjCnyB,KAAK0Y,SAAS,CACVtF,KAAMwF,EAAUxF,KAChBH,OAAQ2F,EAAU3F,OAClBE,OAAQyF,EAAUzF,OAClB/R,SAAUwX,EAAUxX,SACpBrB,WAAY6Y,EAAU7Y,WACtByL,KAAMoN,EAAUpN,SAtB5B,+BA4BQ,OAEI,sBAAKuH,UAAU,gBAAf,UACI,iCACK/S,KAAKgY,MAAMxM,OAEhB,qBAAKuH,UAAU,mBAAf,SACI,qBAAKA,UAAS,gBAAW/S,KAAKC,MAAMsT,OAAS,SAAW,IAAxD,SACI,sBAAKuU,QAAQ,cAAcC,MAAM,6BAA6BC,WAAW,+BAAzE,UACI,+BACI,iCAAgBzkB,GAAE,mBAAcvD,KAAKC,MAAMgT,OAASjT,KAAKC,MAAMkT,QAAUtS,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,OAApG,UACI,sBAAMoxB,OAAO,KAAKnI,MAAO,CAAE,UAAajqB,KAAKgY,MAAM/E,UACnD,sBAAMmf,OAAO,OAAOnI,MAAO,CAAE,UAAajqB,KAAKgY,MAAM7E,eAG7D,sBAAM3S,EAAGR,KAAKgY,MAAM5E,KAChBxS,KAAI,wBAAmBZ,KAAKC,MAAMgT,OAASjT,KAAKC,MAAMkT,OAAlD,KAA6DzS,YAAY,MAAMD,OAAO,YAC9F,cAAC,IAAD,CAAUW,SAAUpB,KAAKgY,MAAM5W,SACrBlB,WAnBb,IAoBaC,WApBK,IAqBLC,UArBsB,KAuBhC,cAAC,IAAD,CACIL,WAAYC,KAAKgY,MAAMjY,WACvBG,WAzBP,IA0BOC,WA1BW,IA2BXC,UA3B4B,mBA3B5D,GAA6Ba,IAAMC,WAiEpB8R,O,gCCvEf,kIAGO,SAASyQ,EAAiB3Y,EAAKqG,GAClC,MAAmB,kBAARrG,EAAyBA,EAChCA,EAAI9F,OAAS,EAAImM,EACVrG,EAAI2V,UAAU,EAAGtP,GAAO,MAAQrG,EAAI2V,UAAU3V,EAAI9F,OAASmM,EAAKrG,EAAI9F,QAEpE8F,EAGR,SAAS0iB,EAAgB6E,GAC5B,OAAO/c,WAAW3H,SAAS0kB,GAAarrB,KAAgByT,QAAQ,GAGpE,SAASnH,EAAawH,GAClB,OAAOhU,KAAKkU,MAAMlU,KAAK6T,SAAUG,GAG9B,SAAS2T,EAAuBnE,EAAOC,GAe1C,IAdA,IAAM+H,EAAe,IACfC,EAAgB,IAChBC,EAAS9vB,IAAWiD,MAAM2kB,EAAM1e,oBAAoBwN,GAAGuG,eACvD8S,EAAS/vB,IAAWiD,MAAM4kB,EAAM3e,oBAAoBwN,GAAGuG,eACvD+S,EAAU,GAAGF,EAAO,GAAG,EAAEA,EAAO,GAAG,EAAEA,EAAO,GAAG,EAAEA,EAAO,GACxDG,EAAU,GAAGF,EAAO,GAAG,EAAEA,EAAO,GAAG,EAAEA,EAAO,GAAG,EAAEA,EAAO,GACxDG,EAAQ,GAAGJ,EAAO,GAAK,GAAGA,EAAO,GACjCK,EAAQ,GAAGJ,EAAO,GAAK,GAAGA,EAAO,GACjCK,EAAahsB,KAAK+T,IAAI8X,EAAUL,EAAcI,GAC9CK,EAAajsB,KAAK+T,IAAI6X,EAAUJ,EAAcK,GAC9CK,EAAWlsB,KAAK+T,IAAIgY,EAAQP,EAAcM,GAC1CK,EAAWnsB,KAAK+T,IAAI+X,EAAQN,EAAcO,GAC5CK,EAAQ,EAEHhlB,EAAI,EAAGA,EAAIqkB,EAAerkB,IAAK,CACpC,IAAMilB,EAAS7f,EAAa,OACtB8f,EAAUtsB,KAAKgU,IAAIqY,EAAQH,GAAYF,EACvCO,EAAS/f,EAAa,OAExB8f,EADYtsB,KAAKgU,IAAIuY,EAAQJ,GAAYF,IAEzCG,GAAgB,GAGxB,OAAOA,EAAQX,I,qIC9BZ,SAAetwB,EAAtB,kC,4CAAO,WAAmBF,GAAnB,2BAAAC,EAAA,6DAAwBsxB,EAAxB,+BAAiC,GAAjC,kBAEc1wB,MAAMb,EAAK,CACpBe,QAAS,CACLywB,OAAQ,mBACR,eAAgB,mBAChBC,QAASF,KAEdpxB,MAAK,SAAAC,GAAG,OAAIA,EAAIgB,UARpB,+EAUCX,QAAQsT,MAAR,MAVD,kBAWQ,IAXR,0D,sBAeA,SAAetQ,EAAtB,kC,4CAAO,WAAyBzD,GAAzB,6BAAAC,EAAA,4FAAuC,GAAvC,kBAEwBY,MAAMb,GAF9B,cAEOgB,EAFP,gBAG2BA,EAASuR,OAHpC,cAGOmf,EAHP,yBAIQA,GAJR,yCAMCjxB,QAAQsT,MAAR,MAND,kBAOQ,IAPR,2D","file":"static/js/main.50fb1cde.chunk.js","sourcesContent":["import React from 'react';\r\nimport { describeArc } from '../utils/svgUtils'\r\n\r\nexport class BlobMouth extends React.Component {\r\n\r\n\r\n    render() {\r\n        const mouth_type = this.props.mouth_type;\r\n        const pos_eyes_x = this.props.pos_eyes_x;\r\n        const pos_eyes_y = this.props.pos_eyes_y;\r\n        const eyes_dist = this.props.eyes_dist;\r\n        const transform = \"translate(\" + pos_eyes_x + \",\" + (pos_eyes_y + 15) + \")\"\r\n\r\n        var mouth_path = describeArc(pos_eyes_x + eyes_dist / 2, pos_eyes_y - 10, 30, 160, 200);\r\n        if (mouth_type === \"2\") {\r\n            mouth_path = describeArc(pos_eyes_x + eyes_dist / 2, pos_eyes_y + 50, 30, 340, 20);\r\n        }\r\n        if (mouth_type === \"4\") {\r\n            mouth_path = describeArc(pos_eyes_x + eyes_dist / 2, pos_eyes_y + 10, 15, 130, 230);\r\n            return (\r\n                <g>\r\n                    <path d={mouth_path} stroke=\"#000000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"#ffffff\" />\r\n                    <line x1={pos_eyes_x + 3} y1={pos_eyes_y + 19} x2={pos_eyes_x + eyes_dist - 3} y2={pos_eyes_y + 19} stroke=\"#000000\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n                </g>\r\n            );\r\n        }\r\n        if (mouth_type === \"3\") {\r\n            return (\r\n                <line x1={pos_eyes_x + 5} y1={pos_eyes_y + 20} x2={pos_eyes_x + eyes_dist - 5} y2={pos_eyes_y + 20} stroke=\"#000000\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n            )\r\n        }\r\n        if (mouth_type === \"5\") {\r\n            return (\r\n                <g transform={transform}>\r\n                    <path fill=\"#be3c3c\"\r\n                        strokeWidth=\"0.07\"\r\n                        d=\"M 26.32,6.16 C 25.25131,6.16 24.23029,6.0375 23.25351,5.85935 21.53046,6.49901 18.88537,7.28 16.24,7.28 13.59463,7.28 10.94954,6.49901 9.22649,5.85935 8.24971,6.0375 7.22869,6.16 6.16,6.16 5.41331,6.16 2.52,6.16 0,5.6 c 0,0 3.54669,3.36 8.4,6.16 2.30153,1.32783 5.37551,1.68 7.84,1.68 2.46449,0 5.53847,-0.35217 7.84,-1.68 4.85331,-2.8 8.4,-6.16 8.4,-6.16 -2.52,0.56 -5.41331,0.56 -6.16,0.56 z\"\r\n                    />\r\n                    <path\r\n                        fill=\"#d2504b\"\r\n                        strokeWidth=\"0.07\"\r\n                        d=\"M 9.22649,5.85935 C 11.87515,5.37614 14.19579,4.48 16.24,4.48 c 2.04421,0 4.36485,0.89614 7.01351,1.37935 C 24.23029,6.0375 25.25131,6.16 26.32,6.16 c 0.74669,0 3.64,0 6.16,-0.56 C 27.90669,3.78 21.84,0 19.04,0 17.36,0 17.31331,0.78393 16.24,0.78393 15.16669,0.78393 15.12,0 13.44,0 10.64,0 4.57331,3.78 0,5.6 2.52,6.16 5.41331,6.16 6.16,6.16 7.22869,6.16 8.24971,6.0375 9.22649,5.85935 Z\"\r\n                    />\r\n                </g>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <path d={mouth_path} stroke=\"#000000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\" />\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nexport class BlobEyes extends React.Component {\r\n\r\n    render() {\r\n        const eyes_pos = this.props.eyes_pos;\r\n        const pos_eyes_x = this.props.pos_eyes_x;\r\n        const pos_eyes_y = this.props.pos_eyes_y;\r\n        const eyes_dist = this.props.eyes_dist;\r\n\r\n        var delta_eyes_x = 0, delta_eyes_y = 0;\r\n\r\n        if (eyes_pos === \"2\") {\r\n            delta_eyes_x = 2;\r\n            delta_eyes_y = 2;\r\n        } else if (eyes_pos === \"3\") {\r\n            delta_eyes_x = 2;\r\n            delta_eyes_y = -2;\r\n        } else if (eyes_pos === \"4\") {\r\n            delta_eyes_x = -2;\r\n            delta_eyes_y = 2;\r\n        } else if (eyes_pos === \"5\") {\r\n            delta_eyes_x = -2;\r\n            delta_eyes_y = -2;\r\n        }\r\n\r\n        return (\r\n            <g>\r\n                <ellipse cx={pos_eyes_x} cy={pos_eyes_y} rx=\"9\" ry=\"14\" strokeWidth=\"1\" stroke=\"#000000\" fill=\"#FFFFFF\" />\r\n                <ellipse cx={pos_eyes_x + eyes_dist} cy={pos_eyes_y} rx=\"9\" ry=\"14\" strokeWidth=\"1\" stroke=\"#000000\" fill=\"#FFFFFF\" />\r\n                <circle cx={pos_eyes_x + delta_eyes_x} cy={pos_eyes_y + delta_eyes_y} r=\"4\" fill=\"#000000\" />\r\n                <circle cx={pos_eyes_x + eyes_dist + delta_eyes_x} cy={pos_eyes_y + delta_eyes_y} r=\"4\" fill=\"#000000\" />\r\n            </g>\r\n        )\r\n\r\n    }\r\n}\r\n","import { get, getStream } from './rest';\r\nimport JSONBigInt from 'json-bigint';\r\nimport { DEFAULT_NODE_ADDRESS } from '../utils/constants';\r\n\r\nexport const trueAddress = '4MQyML64GnzMxZgm'; // dummy address to get unsigned tx from node, we only care about the boxes though in this case\r\nexport const explorerApi = 'https://api.ergoplatform.com/api/v0';\r\nexport const explorerApiV1 = 'https://api.ergoplatform.com/api/v1';\r\n\r\nasync function getRequest(url) {\r\n    return get(explorerApi + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nasync function getRequestV1(url) {\r\n    return get(explorerApiV1 + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nasync function post(url, body = {}, apiKey = '') {\r\n    console.log(\"post0\", JSONBigInt.stringify(body));\r\n    const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'mode': 'cors',\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n        },\r\n        body: JSONBigInt.stringify(body)\r\n    });\r\n\r\n    const [responseOk, body2] = await Promise.all([response.ok, response.json()]);\r\n    //console.log(\"post1\", body2, responseOk)\r\n    if (responseOk) {\r\n        if (typeof body2 === 'object') {\r\n            //console.log(\"post2\", body2.id)\r\n            return { result: true, data: body2.id };\r\n        } else {\r\n            return { result: true, data: body2 };\r\n        }\r\n    } else {\r\n        if (Object.keys(body2).includes(\"detail\")) {\r\n            return { result: false, data: body2.detail };\r\n        } else {\r\n            return { result: false, data: body2.reason };\r\n        }\r\n    }\r\n\r\n}\r\nexport async function postTxMempool(tx) {\r\n    try {\r\n        const res = await post(explorerApiV1 + '/mempool/transactions/submit', tx);\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(\"postTxMempool\", err);\r\n        return err.toString()\r\n    }\r\n}\r\n\r\nexport async function sendTx(json) {\r\n    const res = await postTxMempool(json);\r\n    //const res = await postRequest('transactions', json)\r\n    return res;\r\n}\r\n\r\nexport async function currentHeight() {\r\n    return getRequest('/blocks?limit=1')\r\n        .then(res => res.data)\r\n        .then(res => res.items[0].height);\r\n}\r\n\r\nexport async function unspentBoxesFor(address) {\r\n    const res = await getRequest(`/transactions/boxes/byAddress/unspent/${address}`);\r\n    return res.data;\r\n}\r\n\r\nexport async function getUnspentBoxesByAddress(address) {\r\n    const res = await getRequestV1(`/boxes/unspent/byAddress/${address}`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function boxById(id) {\r\n    const res = await getRequest(`/transactions/boxes/${id}`);\r\n    return res.data;\r\n}\r\n\r\nexport async function boxByBoxId(id) {\r\n    const res = await getRequestV1(`/boxes/${id}`);\r\n    return res.data;\r\n}\r\n\r\nexport async function boxByTokenId(tokenId) {\r\n    const res = await getRequestV1(`/boxes/unspent/byTokenId/${tokenId}`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function txById(id) {\r\n    const res = await getRequest(`/transactions/${id}`);\r\n    return res.data;\r\n}\r\n\r\nexport async function getSpendingTx(boxId) {\r\n    const data = getRequest(`/transactions/boxes/${boxId}`);\r\n    return data\r\n        .then((res) => res.data)\r\n        .then((res) => res.spentTransactionId)\r\n        .catch((_) => null);\r\n}\r\n\r\nexport async function getTransactionsByAddress(addr) {\r\n    const res = await getRequestV1(`/addresses/${addr}/transactions`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getTokenBox(addr) {\r\n    const res = await getRequest(\r\n        `/assets/${addr}/issuingBox`\r\n    );\r\n    return res.data[0];\r\n}\r\n\r\nexport async function getBalanceFor(addr, token = null) {\r\n    const res = await getRequest(\r\n        `/addresses/${addr}`\r\n    );\r\n    const res_1 = res.data;\r\n    const res_2 = res_1.transactions;\r\n    if (!token)\r\n        return res_2.confirmedBalance;\r\n    let tok = res_2.confirmedTokensBalance.filter(tok_1 => tok_1.tokenId === token);\r\n    if (tok.length === 0)\r\n        return 0;\r\n    else\r\n        return tok[0].amount;\r\n}\r\n\r\nexport async function getUnconfirmedTxsFor(addr) {\r\n    const res = await getRequestV1(`/mempool/transactions/byAddress/${addr}`);\r\n    console.log(\"getUnconfirmedTxsFor\", res);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getSpentAndUnspentBoxesFromMempool(address) {\r\n    var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n    console.log(\"getSpentAndUnspentBoxesFromMempool\", unconfirmedTxs);\r\n    var spentBoxes = [];\r\n    var newBoxes = [];\r\n    if (unconfirmedTxs && unconfirmedTxs.length > 0) {\r\n        spentBoxes = unconfirmedTxs.map(tx => tx.inputs).flat();\r\n        newBoxes = unconfirmedTxs.map(tx => tx.outputs).flat().filter(box => address === box.address);\r\n    }\r\n    console.log(\"getSpentAndUnspentBoxesFromMempool\", spentBoxes, newBoxes)\r\n    return [spentBoxes, newBoxes];\r\n}\r\n\r\nexport async function getSpentAndUnspentBoxesFromMempool2(addresses) {\r\n    var spentBoxes = [];\r\n    var newBoxes = [];\r\n\r\n    for (const addr of addresses) {\r\n        var spentBoxesAddr = [];\r\n        var newBoxesAddr = [];\r\n        var unconfirmedTxs = await getUnconfirmedTxsFor(addr);\r\n        console.log(\"getSpentAndUnspentBoxesFromMempool\", addr, unconfirmedTxs);\r\n\r\n        if (unconfirmedTxs && unconfirmedTxs.length > 0) {\r\n            spentBoxesAddr = unconfirmedTxs.map(tx => tx.inputs).flat();\r\n            newBoxesAddr = unconfirmedTxs.map(tx => tx.outputs).flat().filter(box => addr === box.address);\r\n        }\r\n        spentBoxes = spentBoxes.concat(spentBoxesAddr);\r\n        newBoxes = newBoxes.concat(newBoxesAddr);\r\n    }\r\n    console.log(\"getSpentAndUnspentBoxesFromMempool\", spentBoxes, newBoxes)\r\n    return [spentBoxes, newBoxes];\r\n}\r\n\r\nexport async function getMempoolUnspentBoxes() {\r\n    var mempoolBoxesRaw = await getStream(explorerApiV1 + '/mempool/boxes/unspent', '')\r\n    const mempoolBoxes = JSONBigInt.parse(\"[\"+mempoolBoxesRaw.replaceAll('\"spentTransactionId\":null}{\"boxId\":', '\"spentTransactionId\":null},{\"boxId\":') + \"]\");\r\n    console.log(\"getMempoolUnspentBoxesByAddress\", mempoolBoxes)\r\n    return mempoolBoxes;\r\n}\r\nexport async function getMempoolUnspentBoxesByAddress(address) {\r\n    var mempoolBoxes = await getMempoolUnspentBoxes();\r\n    var res = [];\r\n    for (const box of mempoolBoxes) {\r\n        if (box.address === address) {\r\n            res.push(box);\r\n        }\r\n    }\r\n    return res;\r\n}\r\nexport async function getMempoolUnspentBoxesByAddresses(addresses) {\r\n    var mempoolBoxes = await getMempoolUnspentBoxes();\r\n    var res = {}\r\n    for (const address of addresses) {\r\n        res[address] = [];\r\n    }\r\n    for (const box of mempoolBoxes) {\r\n        for (const address of addresses) {\r\n            if (box.address === address) {\r\n                res[address].push(box);\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nexport async function getUnspentBoxesForAddressUpdated(address) {\r\n    const blobBoxesTmp = await getUnspentBoxesByAddress(address);\r\n    //console.log(\"fetchBlobs blobBoxes\",blobBoxesTmp)\r\n    const [spentBlobs, newBlobs] = await getSpentAndUnspentBoxesFromMempool(address);\r\n    const spentBlobBoxIds = spentBlobs.map(box => box.boxId);\r\n    const blobBoxes = newBlobs.concat(blobBoxesTmp).filter(box => !spentBlobBoxIds.includes(box.boxId));\r\n\r\n    return blobBoxes;\r\n}\r\n\r\nexport async function getExplorerBlockHeaders() {\r\n    return (await getRequestV1(`/blocks/headers`)).data.items.slice(0, 10);\r\n}\r\nexport async function getExplorerBlockHeadersFull() {\r\n    return (await getRequestV1(`/blocks/headers`)).data.items;\r\n}","import JSONBigInt from 'json-bigint';\r\nimport { currentHeight, getExplorerBlockHeadersFull } from './explorer';\r\nimport { NANOERG_TO_ERG, TX_FEE, GAME_TOKEN_ID, DEFAULT_NODE_ADDRESS } from '../utils/constants';\r\nimport { TextEncoder } from 'text-decoding';\r\nimport { encodeContract } from './serializer';\r\nimport { get } from './rest';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global BigInt */\r\n\r\nexport async function getBoxSelection(utxos, amountFloat, tokens) {\r\n    const amountToSend = Math.round((amountFloat * NANOERG_TO_ERG)).toString();\r\n    const amountToSendBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(amountToSend));\r\n    const selector = new (await ergolib).SimpleBoxSelector();\r\n    let boxSelection = {};\r\n    //console.log(\"ErgoBoxes\", (await ergolib).ErgoBoxes.from_boxes_json(utxos).get(0).to_json());\r\n\r\n    try {\r\n        boxSelection = selector.select(\r\n            (await ergolib).ErgoBoxes.from_boxes_json(utxos),\r\n            (await ergolib).BoxValue.from_i64(amountToSendBoxValue.as_i64().checked_add((await ergolib).I64.from_str(TX_FEE.toString()))),\r\n            tokens);\r\n    } catch (e) {\r\n        let msg = \"[Wallet] Error: \"\r\n        if (JSON.stringify(e).includes(\"BoxValue out of bounds\")) {\r\n            msg = msg + \"Increase the Erg amount to process the transaction. \"\r\n            return msg;\r\n        }\r\n        throw (e);\r\n    }\r\n    return boxSelection;\r\n}\r\n\r\nexport async function createTransaction(boxSelection, outputCandidates, dataInputs, changeAddress, utxos) {\r\n    console.log(\"createTransaction utxos\", utxos);\r\n    const creationHeight = await currentHeight();\r\n    console.log(\"createTransaction outputCandidates\", outputCandidates.len());\r\n    const txBuilder = (await ergolib).TxBuilder.new(\r\n        boxSelection,\r\n        outputCandidates,\r\n        creationHeight,\r\n        (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(TX_FEE.toString())),\r\n        (await ergolib).Address.from_base58(changeAddress),\r\n        (await ergolib).BoxValue.SAFE_USER_MIN());\r\n    var dataInputsWASM = new (await ergolib).DataInputs();\r\n    for (const box of dataInputs) {\r\n        const boxIdWASM = (await ergolib).BoxId.from_str(box.boxId);\r\n        const dataInputWASM = new (await ergolib).DataInput(boxIdWASM);\r\n        dataInputsWASM.add(dataInputWASM);\r\n    }\r\n    txBuilder.set_data_inputs(dataInputsWASM);\r\n    console.log(\"parseUnsignedTx\")\r\n    const tx = parseUnsignedTx(txBuilder.build().to_json());\r\n    console.log(\"createTransaction tx\", tx);\r\n\r\n    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(tx))\r\n    var correctTx = parseUnsignedTx(unsignedTx.to_json());\r\n\r\n    // Put back complete selected inputs in the same order\r\n    correctTx.inputs = correctTx.inputs.map(box => {\r\n        const fullBoxInfo = parseUtxo(utxos.find(utxo => utxo.boxId === box.boxId));\r\n        return {\r\n            ...fullBoxInfo,\r\n            extension: {}\r\n        };\r\n    });\r\n    // Put back complete selected datainputs in the same order\r\n    correctTx.dataInputs = correctTx.dataInputs.map(box => {\r\n        const fullBoxInfo = parseUtxo(dataInputs.find(utxo => utxo.boxId === box.boxId));\r\n        return {\r\n            ...fullBoxInfo,\r\n            extension: {}\r\n        };\r\n    });\r\n    // Ensure tx balance\r\n    const missingErgs = getMissingErg(correctTx.inputs, correctTx.outputs);\r\n    const tokens = getMissingTokens(correctTx.inputs, correctTx.outputs);\r\n    if (missingErgs > 0 || Object.keys(tokens) > 0) {\r\n        console.log(\"incorrect tx balance, \", missingErgs, tokens);\r\n        const contract = await encodeContract(changeAddress);\r\n        const balanceBoxindex = correctTx.outputs.findIndex((output => output.ergoTree === contract));\r\n        var newOutputs = correctTx.outputs.filter(output => output.ergoTree !== contract);\r\n        const newBalanceBox = await buildBalanceBox(correctTx.inputs, newOutputs, changeAddress);\r\n        newOutputs.splice(balanceBoxindex, 0, newBalanceBox);\r\n        correctTx.outputs = [...newOutputs];\r\n    }\r\n\r\n    return correctTx;\r\n}\r\n\r\nexport function parseUnsignedTx(str) {\r\n    let json = JSONBigInt.parse(str);\r\n    return {\r\n        id: json.id,\r\n        inputs: json.inputs,\r\n        dataInputs: json.dataInputs,\r\n        outputs: json.outputs.map(output => (parseUtxo(output))),\r\n    };\r\n}\r\n\r\nexport function parseUtxo(json, addExtention = true, mode = 'input') {\r\n    if (json === undefined) {\r\n        return {};\r\n    }\r\n    var res = {};\r\n    if (mode === 'input') {\r\n        if (\"id\" in json) {\r\n            res[\"boxId\"] = json.id;\r\n        } else {\r\n            res[\"boxId\"] = json.boxId;\r\n        }\r\n    }\r\n    res[\"value\"] = json.value.toString();\r\n    res[\"ergoTree\"] = json.ergoTree;\r\n    if (Array.isArray(json.assets)) {\r\n        res[\"assets\"] = json.assets.map(asset => ({\r\n            tokenId: asset.tokenId,\r\n            amount: asset.amount.toString(),\r\n            name: asset.name ?? '',\r\n            decimals: asset.decimals ?? 0,\r\n        }));\r\n    } else {\r\n        res[\"assets\"] = [];\r\n    }\r\n    if (isDict(json[\"additionalRegisters\"])) {\r\n        res[\"additionalRegisters\"] = parseAdditionalRegisters(json.additionalRegisters);\r\n    } else {\r\n        res[\"additionalRegisters\"] = {};\r\n    }\r\n\r\n    res[\"creationHeight\"] = json.creationHeight;\r\n\r\n    if (\"address\" in json) {\r\n        res[\"address\"] = json.address;\r\n    }\r\n\r\n    if (mode === 'input') {\r\n        if (\"txId\" in json) {\r\n            res[\"transactionId\"] = json.txId;\r\n        } else {\r\n            res[\"transactionId\"] = json.transactionId;\r\n        }\r\n        res[\"index\"] = json.index;\r\n    }\r\n    if (addExtention) {\r\n        res[\"extension\"] = {};\r\n    }\r\n    return res;\r\n}\r\n\r\nexport function parseUtxos(utxos, addExtention, mode = 'input') {\r\n    var utxosFixed = [];\r\n    for (const i in utxos) {\r\n        utxosFixed.push(parseUtxo(utxos[i], addExtention, mode))\r\n    }\r\n    return utxosFixed;\r\n}\r\n\r\nfunction parseAdditionalRegisters(json) {\r\n    var registterOut = {};\r\n    //console.log(\"json\", json);\r\n    Object.entries(json).forEach(([key, value]) => {\r\n        //console.log(\"key\", key, \"value\", value);\r\n        if (isDict(value)) {\r\n            registterOut[key] = value[\"serializedValue\"];\r\n        } else {\r\n            registterOut[key] = value;\r\n        }\r\n    });\r\n    //console.log(\"registterOut\", registterOut);\r\n    return registterOut;\r\n}\r\n\r\nexport async function setBoxRegisterByteArray(box, register, str_value) {\r\n    const value_Uint8Array = new TextEncoder().encode(str_value);\r\n    box.set_register_value(register, (await ergolib).Constant.from_byte_array(value_Uint8Array));\r\n}\r\n\r\nexport async function addSimpleOutputBox(outputCandidates, amountErgsFloat, payToAddress, creationHeight) {\r\n    const amountNanoErgStr = Math.round((amountErgsFloat * NANOERG_TO_ERG)).toString();\r\n    const amountBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(amountNanoErgStr));\r\n    const outputBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        amountBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(payToAddress)),\r\n        creationHeight);\r\n    try {\r\n        outputCandidates.add(outputBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building output error: ${e}`);\r\n        throw e;\r\n    }\r\n}\r\n\r\n\r\nexport async function getTokens(tokenId, tokenAmount) {\r\n    var tokens = new (await ergolib).Tokens();\r\n    const _tokenId = (await ergolib).TokenId.from_str(tokenId);\r\n    const _tokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(tokenAmount.toString()));\r\n    tokens.add(new (await ergolib).Token(\r\n        _tokenId,\r\n        _tokenAmount)\r\n    );\r\n    return tokens;\r\n}\r\n\r\nexport function getNumberGameTokens(boxList) {\r\n    var tokenAmount = 0;\r\n    for (const box of boxList) {\r\n        if (box.assets) {\r\n            for (const token of box.assets) {\r\n                if (token.tokenId == GAME_TOKEN_ID) {\r\n                    tokenAmount += parseInt(token.amount);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return tokenAmount;\r\n}\r\n\r\nexport function getUtxosListValue(utxos) {\r\n    return utxos.reduce((acc, utxo) => acc += BigInt(utxo.value), BigInt(0));\r\n}\r\n\r\nexport function getTokenListFromUtxos(utxos) {\r\n    var tokenList = {};\r\n    for (const i in utxos) {\r\n        for (const j in utxos[i].assets) {\r\n            if (utxos[i].assets[j].tokenId in tokenList) {\r\n                tokenList[utxos[i].assets[j].tokenId] = BigInt(tokenList[utxos[i].assets[j].tokenId]) + BigInt(utxos[i].assets[j].amount);\r\n            } else {\r\n                tokenList[utxos[i].assets[j].tokenId] = BigInt(utxos[i].assets[j].amount);\r\n            }\r\n        }\r\n    }\r\n    return tokenList;\r\n}\r\n\r\nexport function getMissingErg(inputs, outputs) {\r\n    const amountIn = getUtxosListValue(inputs);\r\n    const amountOut = getUtxosListValue(outputs);\r\n    if (amountIn >= amountOut) {\r\n        return amountIn - amountOut;\r\n    } else {\r\n        return BigInt(0);\r\n    }\r\n}\r\n\r\nexport function getMissingTokens(inputs, outputs) {\r\n    const tokensIn = getTokenListFromUtxos(inputs);\r\n    const tokensOut = getTokenListFromUtxos(outputs);\r\n    var res = {};\r\n    console.log(\"getMissingTokens\", tokensIn, tokensOut);\r\n    if (tokensIn !== {}) {\r\n        for (const token in tokensIn) {\r\n            if (tokensOut !== {} && token in tokensOut) {\r\n                if (tokensIn[token] - tokensOut[token] > 0) {\r\n                    res[token] = tokensIn[token] - tokensOut[token];\r\n                }\r\n            } else {\r\n                res[token] = tokensIn[token];\r\n            }\r\n        }\r\n    }\r\n    console.log(\"getMissingTokens\", tokensIn, tokensOut, res);\r\n    return res;\r\n}\r\n\r\nexport async function buildBalanceBox(inputs, outputs, address) {\r\n    const missingErgs = getMissingErg(inputs, outputs).toString();\r\n    const contract = await encodeContract(address);\r\n    const tokens = buildTokenList(getMissingTokens(inputs, outputs));\r\n    const height = await currentHeight();\r\n    console.log(\"buildBalanceBox\", missingErgs, contract, tokens, height)\r\n\r\n    return {\r\n        value: missingErgs,\r\n        ergoTree: contract,\r\n        assets: tokens,\r\n        additionalRegisters: {},\r\n        creationHeight: height,\r\n        extension: {},\r\n        index: undefined,\r\n        boxId: undefined,\r\n    };\r\n}\r\n\r\nexport function buildTokenList(tokens) {\r\n    var res = [];\r\n    if (tokens !== {}) {\r\n        for (const i in tokens) {\r\n            res.push({ \"tokenId\": i, \"amount\": tokens[i].toString() });\r\n        }\r\n    };\r\n    return res;\r\n}\r\n\r\nexport function verifyTransactionIO(tx) {\r\n    const tokenAmountIn = getNumberGameTokens(tx.inputs);\r\n    const tokenAmountOut = getNumberGameTokens(tx.outputs);\r\n    const valueIn = getUtxosListValue(tx.inputs);\r\n    const valueOut = getUtxosListValue(tx.outputs);\r\n    const txOK = (tokenAmountIn == tokenAmountOut && valueIn == valueOut);\r\n    console.log(txOK, \"valueIn\", valueIn, \"valueOut\", valueOut, \"tokenAmountIn\", tokenAmountIn, \"tokenAmountOut\", tokenAmountOut);\r\n    if (!txOK) {\r\n        console.log(tx);\r\n    }\r\n    return txOK;\r\n}\r\n\r\nexport function getTokenAmount(box, tokenId) {\r\n    var tokenAmount = \"0\";\r\n    for (const asset of box.assets) {\r\n        if (asset.tokenId == tokenId) {\r\n            tokenAmount = asset.amount;\r\n        }\r\n    }\r\n    return tokenAmount;\r\n}\r\n\r\nexport function getRegisterValue(box, register) {\r\n    if (register in box.additionalRegisters) {\r\n        if (isDict(box.additionalRegisters[register])) {\r\n            //console.log(\"getRegisterValue\", box.additionalRegisters[register].serializedValue);\r\n            return box.additionalRegisters[register].serializedValue;\r\n        } else {\r\n            return box.additionalRegisters[register];\r\n        }\r\n    } else {\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport function getRegisterValue2(box, register) {\r\n\r\n    return box.additionalRegisters[register];\r\n}\r\n\r\nfunction isDict(v) {\r\n    return typeof v === 'object' && v !== null && !(v instanceof Array) && !(v instanceof Date);\r\n}\r\n\r\nasync function getRequest(url) {\r\n    const res = await get(DEFAULT_NODE_ADDRESS + url, '')\r\n    return res;\r\n}\r\nexport async function getLastHeaders() {\r\n    return await getRequest('blocks/lastHeaders/10');\r\n}\r\n\r\nexport async function getErgoStateContext() {\r\n    const res =  await getLastHeaders();\r\n    const block_headers = (await ergolib).BlockHeaders.from_json(res);\r\n    const pre_header = (await ergolib).PreHeader.from_block_header(block_headers.get(0));\r\n    return new (await ergolib).ErgoStateContext(pre_header, block_headers);\r\n}\r\n\r\nexport async function getErgoStateContext2(contextId) {\r\n    const res = await getExplorerBlockHeadersFull();\r\n    console.log(\"getErgoStateContext2\", res);\r\n    const explorerContext = res.slice(contextId, 10 + contextId);\r\n    const block_headers = (await ergolib).BlockHeaders.from_json(explorerContext);\r\n    const pre_header = (await ergolib).PreHeader.from_block_header(block_headers.get(0));\r\n    return new (await ergolib).ErgoStateContext(pre_header, block_headers);\r\n}\r\n\r\nexport async function signTransactionMultiContext(unsignedTx, inputs, dataInputs, wallet) {\r\n    //console.log(\"signTransaction1\", unsignedTx, inputs, dataInputs);\r\n    const unsignedTransaction = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(unsignedTx));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const dataInputsBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    for (let i = 0; i < 10; i++) {\r\n        try {\r\n            console.log(\"try \"+i.toString())\r\n            const ctx = await getErgoStateContext2(i);\r\n            const signedTx = wallet.sign_transaction(ctx, unsignedTransaction, inputBoxes, dataInputsBoxes);\r\n            \r\n            return signedTx.to_json();\r\n        } catch(e) {\r\n            console.log(e);\r\n            continue;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport async function signTransaction(unsignedTx, inputs, dataInputs, wallet) {\r\n    //console.log(\"signTransaction1\", unsignedTx, inputs, dataInputs);\r\n    const unsignedTransaction = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(unsignedTx));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const dataInputsBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    const ctx = await getErgoStateContext();\r\n    //console.log(\"signTransaction2\", unsignedTx, inputs, dataInputs);\r\n    const signedTx = wallet.sign_transaction(ctx, unsignedTransaction, inputBoxes, dataInputsBoxes);\r\n    return signedTx.to_json();\r\n}","import {Serializer} from \"@coinbarn/ergo-ts\";\r\n\r\nlet ergolib = import('ergo-lib-wasm-browser')\r\n\r\nexport async function encodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.from_i32(n).encode_to_base16()\r\n    else return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(n)).encode_to_base16()\r\n}\r\n\r\nexport async function decodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.decode_from_base16(n).to_i32()\r\n    else return (await ergolib).Constant.decode_from_base16(n).to_i64().to_str()\r\n\r\n}\r\n\r\nexport async function encodeAddress(address) {\r\n    const byteArray = (await ergolib).Address.from_mainnet_str(address).to_bytes();\r\n    return (await ergolib).Constant.from_byte_array(byteArray);\r\n}\r\n\r\nexport async function decodeAddress(addr) {\r\n    const address = (await ergolib).Address.from_bytes(addr);\r\n    return address.to_base58();\r\n}\r\n\r\nexport async function encodeLongArray(longArray) {\r\n    return (await ergolib).Constant.from_i64_str_array(longArray);\r\n}\r\n\r\nexport async function decodeLongArray(encodedArray) {\r\n    return (await ergolib).Constant.decode_from_base16(encodedArray).to_i64_str_array().map(cur => parseInt(cur))\r\n}\r\n\r\nexport async function encodeInt(num) {\r\n    return (await ergolib).Constant.from_i32(num);\r\n}\r\nexport async function decodeInt(num) {\r\n    return num.to_i32();\r\n}\r\n\r\nexport async function getErgoBox(json) {\r\n    return (await ergolib).ErgoBox.from_json(json);\r\n}\r\n\r\nexport async function encodeLong(num) {\r\n    return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(num));\r\n}\r\nexport async function decodeLong(num) {\r\n    return (await ergolib).Constant.decode_from_base16(num).to_i64().to_str();\r\n}\r\n\r\nexport async function encodeHex(reg) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(reg, 'hex')).encode_to_base16();\r\n}\r\n\r\nexport async function encodeHexConst(reg) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(reg, 'hex'));\r\n}\r\n\r\nexport async function encodeStr(str) {\r\n    return encodeHex(Serializer.stringToHex(str))\r\n}\r\n\r\nexport function toHexString(byteArray) {\r\n    return Array.from(byteArray, function(byte) {\r\n        return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r\n    }).join('')\r\n}\r\n\r\nexport async function decodeString(encoded) {\r\n    return Serializer.stringFromHex(toHexString((await ergolib).Constant.decode_from_base16(encoded).to_byte_array()))\r\n}\r\n\r\nexport async function decodeHex(encoded) {\r\n    return toHexString((await ergolib).Constant.decode_from_base16(encoded).to_byte_array())\r\n}\r\n\r\nexport function ergToNano(erg) {\r\n    if (erg === undefined) return 0\r\n    if (erg.startsWith('.')) return parseInt(erg.slice(1) + '0'.repeat(9 - erg.length + 1))\r\n    let parts = erg.split('.')\r\n    if (parts.length === 1) parts.push('')\r\n    if (parts[1].length > 9) return 0\r\n    return parseInt(parts[0] + parts[1] + '0'.repeat(9 - parts[1].length))\r\n}\r\n\r\nexport async function encodeContract(address) {\r\n    const tmp = (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address));\r\n    return tmp.ergo_tree().to_base16_bytes();\r\n}\r\n\r\nexport async function ergoTreeToAddress(ergoTree) {\r\n    //console.log(\"ergoTreeToAddress\",ergoTree);\r\n    const ergoT = (await ergolib).ErgoTree.from_base16_bytes(ergoTree);\r\n    const address = (await ergolib).Address.recreate_from_ergo_tree(ergoT);\r\n    return address.to_base58();\r\n}\r\n","import { getRandomColor, getRandomBlobShape, getRandomInt } from '../utils/svgUtils';\r\nimport ErgBlob from './ErgBlob';\r\n\r\nexport default function BlobWaitAnim() {\r\n    return (\r\n\r\n        <div className=\"w-100 p-3 divBlobrotate\">\r\n            <div className=\"w-50 \">\r\n                <br />\r\n                <ErgBlob\r\n                    color1={getRandomColor()}\r\n                    color2={getRandomColor()}\r\n                    path={getRandomBlobShape()}\r\n                    eyes_pos={getRandomInt(1, 5).toString()}\r\n                    mouth_type={getRandomInt(1, 5).toString()}\r\n                    name=\"\"\r\n                    rotate={true}\r\n                />\r\n                <br />\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}","import Swal from 'sweetalert2/src/sweetalert2.js';\r\nimport withReactContent from 'sweetalert2-react-content';\r\n\r\nimport BlobWaitAnim from '../components/BlobWaitAnim';\r\n\r\nexport function waitingAlert(title) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: <p>{title}</p>,\r\n        html: <BlobWaitAnim />,\r\n        allowOutsideClick: false,\r\n        showConfirmButton: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function closeAlert(alert) {\r\n    alert.close();\r\n}\r\n\r\nexport function errorAlert(title, msg) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: <p>{title}</p>,\r\n        icon: 'error',\r\n        text: msg,\r\n        allowOutsideClick: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function displayTransaction(txId) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: <p>Transaction sent succesfully</p>,\r\n        allowOutsideClick: true,\r\n        icon: 'success',\r\n        showCloseButton: true,\r\n        html: `<p>The transaction will be visible in your wallet and in the explorer in few seconds: <a href=\"https://explorer.ergoplatform.com/en/transactions/${txId}\" target=\"_blank\" > ${txId} </a></p>`,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function copySuccess() {\r\n    Swal.fire({\r\n        position: 'top-end',\r\n        icon: 'success',\r\n        title: 'Copy OK',\r\n        showConfirmButton: false,\r\n        timer: 1000\r\n    })\r\n}\r\n\r\nexport function promptErgAmount(mode) {\r\n    return new Promise(function (resolve, reject) {\r\n        Swal.fire({\r\n            title: \"ERG amount to \" + mode,\r\n            html: `<div><input type=\"text\" id=\"ergAmount\" class=\"swal2-input\" placeholder=\"ERG amount\"></div>`,\r\n            confirmButtonText: mode,\r\n            focusConfirm: false,\r\n            showCancelButton: true,\r\n            preConfirm: () => {\r\n                const ergAmount = Swal.getPopup().querySelector('#ergAmount').value;\r\n                if (!parseFloat(ergAmount) || parseFloat(ergAmount) < 0.1) {\r\n                    Swal.showValidationMessage(`The ERG amount is invalid (needs to be >= 0.1 ERG)`);\r\n                }\r\n                return { ergAmount: parseFloat(ergAmount) };\r\n            }\r\n        }).then((result) => {\r\n            if (result.value) {\r\n                resolve(result.value.ergAmount);\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport function promptFeedAmount() {\r\n    return new Promise(function (resolve, reject) {\r\n        Swal.fire({\r\n            title: \"Feed\",\r\n            html: `<div><input type=\"text\" id=\"defAmount\" class=\"swal2-input\" placeholder=\"Defense point\"></div>\r\n            <div><input type=\"text\" id=\"attAmount\" class=\"swal2-input\" placeholder=\"Attack point\"></div>`,\r\n            confirmButtonText: \"Feed\",\r\n            focusConfirm: false,\r\n            showCancelButton: true,\r\n            preConfirm: () => {\r\n                const defAmount = parseInt(Swal.getPopup().querySelector('#defAmount').value) || 0;\r\n                const attAmount = parseInt(Swal.getPopup().querySelector('#attAmount').value) || 0;\r\n                if (defAmount == 0 && attAmount == 0) {\r\n                    Swal.showValidationMessage(`Invalid amount of Oatmeal tokens`);\r\n                }\r\n                //console.log(\"promptFeedAmount\", defAmount, attAmount)\r\n                return {\r\n                    defAmount: defAmount,\r\n                    attAmount: attAmount,\r\n                };\r\n            }\r\n        }).then((result) => {\r\n            if (result.value) {\r\n                resolve([result.value.defAmount, result.value.attAmount]);\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    });\r\n}","import JSONBigInt from 'json-bigint';\r\nimport { closeAlert, displayTransaction, errorAlert } from '../utils/Alerts';\r\nimport { getUnconfirmedTxsFor } from './explorer';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global ergo BigInt */\r\n\r\nexport async function isWalletConnected() {\r\n    try {\r\n        return await window.ergo_check_read_access();\r\n    } catch (e) {\r\n        console.error(e);\r\n        errorAlert(\"dApp connector not found\", \"Install Nautilus or SAFEW wallet in your browser\");\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\n// Connect to browser extension wallet, return True is success\r\nexport async function connectWallet() {\r\n    const alreadyConnected = await isWalletConnected();\r\n    if (!alreadyConnected) {\r\n        return await window.ergo_request_read_access();\r\n    } else { \r\n        return true;\r\n    }\r\n}\r\n\r\n// Check the address is in the connected wallet\r\nexport async function isValidWalletAddress(address) {\r\n    const yoroiConnected = await connectWallet();\r\n    if (yoroiConnected) {\r\n        const address_list = await ergo.get_used_addresses();\r\n        return address_list.includes(address);\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n// Get the list of addresses from connected wallet\r\nexport async function getAddressList() {\r\n    const yoroiConnected = await connectWallet();\r\n    if (yoroiConnected) {\r\n        const address_list = await ergo.get_used_addresses();\r\n        return address_list;\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function getChangeAddress() {\r\n    const yoroiConnected = await connectWallet();\r\n    if (yoroiConnected) {\r\n        const address = await ergo.get_change_address();\r\n        return address;\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function walletSignTx(alert, tx, address) {\r\n    alert.update({ title: \"Connecting to Yoroi...\" });\r\n    const yoroiAccessGranted = await connectWallet();\r\n    if (yoroiAccessGranted) {\r\n        if (isValidWalletAddress(address)) {\r\n            alert.update({ title: \"Waiting for transaction signing...\" });\r\n            const txId = await processTx(tx);\r\n            if (txId) {\r\n                console.log('[txId]', txId);\r\n                alert.update(\r\n                {\r\n                    title: <p>Waiting for transaction to reach the mempool</p>,\r\n                    allowOutsideClick: false,\r\n                    html: `<p>The transaction will be visible in the mempool in few seconds: <a href=\"https://explorer.ergoplatform.com/en/transactions/${txId}\" target=\"_blank\" > ${txId} </a></p>`,\r\n                  }\r\n                );\r\n                var txFoundMempool = false;\r\n                const startWait = Date.now();\r\n                while (!txFoundMempool && Date.now() - startWait < 60000) {\r\n                    await sleep(3000);\r\n                    //try {\r\n                    //    const mempoolBoxes = await getMempoolUnspentBoxes();\r\n                    //    console.log(\"yoroiSignTx mempoolBoxes\", mempoolBoxes)\r\n                    //    const txIds = mempoolBoxes.map(box => box.transactionId);\r\n                    //    if (txIds.includes(txId)) {\r\n                    //        txFoundMempool = true;\r\n                    //        //console.log(\"unconfirmedTxIds\", unconfirmedTxs)\r\n                    //    }\r\n//\r\n                    //    //\r\n                    //    \r\n                    //} catch (e) {\r\n                    //    console.log(e);\r\n                    //}\r\n                    try {\r\n                        var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n                        //console.log(\"unconfirmedTxs\", unconfirmedTxs)\r\n                        const unconfirmedTx = unconfirmedTxs.filter(tx => tx.id === txId);\r\n                        if (unconfirmedTx.length > 0) {\r\n                            txFoundMempool = true;\r\n                        }\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                    }\r\n                }\r\n                closeAlert(alert);\r\n                displayTransaction(txId);\r\n            } else {\r\n                const title = \"Transaction not signed\";\r\n                const message = \"Something went wrong, the transaction was not sent.\";\r\n                errorAlert(title, message);\r\n            }\r\n\r\n        } else {\r\n            closeAlert(alert);\r\n            const title = \"Wrong address\";\r\n            const message = \"The address \" + address + \" is not found in the connected Yoroi wallet. Please double check the ERG address provided.\";\r\n            errorAlert(title, message);\r\n        }\r\n    }\r\n    else {\r\n        closeAlert(alert);\r\n        console.log('Yoroi access denied');\r\n    }\r\n}\r\n\r\n// Get the utxos for the amout of nanoERG in parameter\r\nexport async function getUtxos(amountToSend) {\r\n    const fullAmountToSend = BigInt(amountToSend);\r\n    const utxos = await ergo.get_utxos(fullAmountToSend.toString());\r\n    const filteredUtxos = [];\r\n    for (const utxo of utxos) {\r\n        try {\r\n            (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n            filteredUtxos.push(utxo);\r\n        } catch (e) {\r\n            console.error('[getUtxos] UTxO failed parsing:', utxo, e);\r\n        }\r\n    }\r\n    return filteredUtxos;\r\n}\r\n\r\nexport async function getTokenUtxos(amountTokenToSend, tokenId) {\r\n    const fullAmountToSend = BigInt(amountTokenToSend);\r\n    const utxos = await ergo.get_utxos(fullAmountToSend.toString(), tokenId);\r\n    console.log(\"getTokenUtxos\",utxos)\r\n    const filteredUtxos = [];\r\n    if (utxos) {\r\n        for (const utxo of utxos) {\r\n            try {\r\n                (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n                filteredUtxos.push(utxo);\r\n            } catch (e) {\r\n                console.error('[getUtxos] UTxO failed parsing:', utxo, e);\r\n            }\r\n        }\r\n    } else {\r\n        console.log(\"Not enough token found: \"+tokenId+\" amount: \"+amountTokenToSend)\r\n    }\r\n    \r\n    return filteredUtxos;\r\n}\r\n\r\nexport async function getAllUtxos() {\r\n    const filteredUtxos = [];\r\n    const utxos = await ergo.get_utxos();\r\n    for (const utxo of utxos) {\r\n        try {\r\n            (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n            filteredUtxos.push(utxo);\r\n        } catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n    return filteredUtxos;\r\n}\r\n\r\nasync function signTx(txToBeSigned) {\r\n    try {\r\n        console.log(\"signTx\", txToBeSigned);\r\n        return await ergo.sign_tx(txToBeSigned);\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nasync function submitTx(txToBeSubmitted) {\r\n    try {\r\n        console.log(\"submitTx\");\r\n        return await ergo.submit_tx(txToBeSubmitted);\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function processTx(txToBeProcessed) {\r\n    const msg = s => {\r\n        console.log('[processTx]', s);\r\n    };\r\n    const signedTx = await signTx(txToBeProcessed);\r\n    if (!signedTx) {\r\n        console.error(`No signed transaction found`);\r\n        return null;\r\n    }\r\n    msg(\"Transaction signed - awaiting submission\");\r\n    const txId = await submitTx(signedTx);\r\n    //const txId = await postTxMempool(signedTx);\r\n    if (!txId) {\r\n        console.log(`No submitted tx ID`);\r\n        return null;\r\n    }\r\n    msg(\"Transaction submitted \");\r\n    return txId;\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport { BLOB_REQUEST_SCRIPT_ADDRESS, BLOB_SCRIPT_ADDRESS } from './utils/constants';\r\nimport { getSpentAndUnspentBoxesFromMempool, getUnspentBoxesForAddressUpdated } from './ergo-related/explorer';\r\nimport BlobItem from './components/BlobItem';\r\nimport { toHexString } from './ergo-related/serializer';\r\nimport BlobRequestItem from './components/BlobRequestItem';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\nexport default class MyBlobsPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            address: localStorage.getItem('address'),\r\n            blobList: [],\r\n            blobRequestList: [],\r\n        };\r\n        this.handleChangeBlobList = this.handleChangeBlobList.bind(this);\r\n        this.fetchBlobs = this.fetchBlobs.bind(this);\r\n        this.fetchBlobRequests = this.fetchBlobRequests.bind(this);\r\n    }\r\n\r\n    handleChangeBlobList(event) {\r\n        this.setState({ blobList: event.target.id });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            address: nextProps.address\r\n        });\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.fetchBlobs();\r\n        await this.fetchBlobRequests();\r\n    }\r\n\r\n    async fetchBlobRequests() {\r\n        const addressSigmaPropHex = toHexString((await ergolib).Constant.from_ecpoint_bytes(\r\n            (await ergolib).Address.from_base58(this.state.address).to_bytes(0x00).subarray(1, 34)\r\n        ).sigma_serialize_bytes());\r\n        const blobRequestBoxes = await getUnspentBoxesForAddressUpdated(BLOB_REQUEST_SCRIPT_ADDRESS);\r\n        var blobRequestList = [];\r\n        for (const box of blobRequestBoxes) {\r\n            try {\r\n                if (box.additionalRegisters.R5) {\r\n                    const blobRequestSigmaProp = Buffer.from(box.additionalRegisters.R5.serializedValue, 'hex')\r\n                    if (toHexString(blobRequestSigmaProp) === addressSigmaPropHex) {\r\n                        blobRequestList.push(box);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchBlobs\", e)\r\n            }\r\n        }\r\n        this.setState({\r\n            blobRequestList: blobRequestList\r\n        })\r\n    }\r\n\r\n    async fetchBlobs() {\r\n        const blobBoxesTmp = await getUnspentBoxesForAddressUpdated(BLOB_SCRIPT_ADDRESS);\r\n\r\n        const [spentBoxes, newBoxes] = await getSpentAndUnspentBoxesFromMempool(this.state.address);\r\n        const spentBoxIds = spentBoxes.map(box => box.boxId);\r\n        var blobBoxes = blobBoxesTmp.filter(box => !spentBoxIds.includes(box.boxId));\r\n\r\n        const addressSigmaPropHex = toHexString((await ergolib).Constant.from_ecpoint_bytes(\r\n            (await ergolib).Address.from_base58(this.state.address).to_bytes(0x00).subarray(1, 34)\r\n        ).sigma_serialize_bytes());\r\n        var blobList = [];\r\n        for (const box of blobBoxes) {\r\n            try {\r\n                if (box.additionalRegisters.R6) {\r\n                    const blobSigmaProp = Buffer.from(box.additionalRegisters.R6.serializedValue, 'hex')\r\n                    if (toHexString(blobSigmaProp) === addressSigmaPropHex) {\r\n                        blobList.push(box);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchBlobs\", e)\r\n            }\r\n        }\r\n        this.setState({\r\n            blobList: blobList\r\n        })\r\n    }\r\n\r\n    render() {\r\n        //console.log(\"render blob list\", this.state.blobList);\r\n        return (\r\n            <Fragment >\r\n                <br />\r\n                <h5>\r\n                    Blob fighters\r\n                </h5>\r\n                <div className=\"w-75 d-flex flex-wrap\">\r\n                    {this.state.blobList.map(item => (\r\n                        <BlobItem\r\n                            key={item.boxId}\r\n                            blobBoxJSON={item}\r\n                            updateList={this.fetchBlobs}\r\n                        />\r\n                    ))}\r\n                </div>\r\n                <br />\r\n                {\r\n                    this.state.blobRequestList.length > 0 ?\r\n                        <Fragment >\r\n                            <h5>\r\n                                Blob requests pending\r\n                            </h5>\r\n                            <div className=\"w-75 d-flex flex-wrap\">\r\n                                {this.state.blobRequestList.map(item =>\r\n                                    <BlobRequestItem\r\n                                        key={item.boxId}\r\n                                        full={item}\r\n                                        updateList={this.fetchBlobRequests}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        </Fragment>\r\n                        : null\r\n                }\r\n            </Fragment>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { refundBlobRequest } from '../ergo-related/blob.js';\r\nimport { decodeString } from \"../ergo-related/serializer.js\";\r\nimport { NANOERG_TO_ERG } from \"../utils/constants.js\";\r\nimport ErgBlob from \"./ErgBlob.js\";\r\n\r\nexport default class BlobRequestItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            full: props.full,\r\n            path: '',\r\n            color1: '',\r\n            color2: '',\r\n            eyes_pos: 0,\r\n            mouth_type: 0,\r\n            name: '',\r\n            updateList: props.updateList,\r\n        };\r\n        this.updateBlobRequest = this.updateBlobRequest.bind(this);\r\n        this.refund = this.refund.bind(this);\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.full.boxId !== this.props.full.boxId) { await this.updateBlobRequest(this.props.full); }\r\n    }\r\n\r\n    async updateBlobRequest(box) {\r\n        const desc = await decodeString(box.additionalRegisters.R4.serializedValue);\r\n        const descArray = desc.toString().split(\":\");\r\n        this.setState({\r\n            boxId: box.boxId,\r\n            path: descArray[5],\r\n            color1: '#' + descArray[1],\r\n            color2: '#' + descArray[2],\r\n            eyes_pos: descArray[3],\r\n            mouth_type: descArray[4],\r\n            name: descArray[0],\r\n        })\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.updateBlobRequest(this.state.full);\r\n    }\r\n\r\n    async refund(boxId) {\r\n        console.log(\"refundBlobRequest\", boxId);\r\n        await refundBlobRequest(this.state.full);\r\n        await this.state.updateList();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"zonecard d-flex flex-column m-1 p-1 align-items-center\" >\r\n                <div className=\"d-flex flex-column zoneblob \" >\r\n                    <ErgBlob key={\"ergblob\" + this.state.boxId}\r\n                        color1={this.state.color1}\r\n                        color2={this.state.color2}\r\n                        path={this.state.path}\r\n                        eyes_pos={this.state.eyes_pos}\r\n                        mouth_type={this.state.mouth_type}\r\n                        name={this.state.name}\r\n                    />\r\n                    Blob mint price: {(parseInt(this.state.full.value) / NANOERG_TO_ERG).toFixed(4)} ERG\r\n                </div>\r\n                <div className=\"d-flex flex-column \" >\r\n                    <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.refund(this.state.boxId)}>Refund</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import blobshape from \"blobshape\";\r\n\r\nexport function getRandomColor() {\r\n    return \"#\" + Math.random().toString(16).substr(-6);\r\n  }\r\n  \r\nexport function getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction polarToCartesian(centerX, centerY, radius, angleInDegrees) {\r\n    var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;\r\n    return {\r\n      x: centerX + (radius * Math.cos(angleInRadians)),\r\n      y: centerY + (radius * Math.sin(angleInRadians))\r\n    };\r\n  }\r\n  \r\nexport function describeArc(x, y, radius, startAngle, endAngle){\r\n    var start = polarToCartesian(x, y, radius, endAngle);\r\n    var end = polarToCartesian(x, y, radius, startAngle);\r\n    var largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\r\n    var d = [\r\n        \"M\", start.x, start.y, \r\n        \"A\", radius, radius, 0, largeArcFlag, 0, end.x, end.y\r\n    ].join(\" \");\r\n    return d;       \r\n}\r\n\r\nexport function generateShapeProps() {\r\n    return {\r\n      size: 250,\r\n      growth: getRandomInt(2, 9),\r\n      edges: getRandomInt(3, 15),\r\n      eyes_pos: getRandomInt(1, 5)\r\n    };\r\n  }\r\n\r\n  export function getRandomBlobShape() {\r\n    var growth = getRandomInt(2, 9);\r\n    var edges = getRandomInt(3, 15);\r\n\r\n    if (edges + growth > 19) {\r\n        edges = edges - 2;\r\n        growth = growth - 2;\r\n    }\r\n\r\n    let path = blobshape({\r\n        size: 250,\r\n        growth: growth,\r\n        edges: edges,\r\n        seed: null\r\n    }).path\r\n    console.log(path);\r\n    return path;\r\n}\r\n\r\n","export const NANOERG_TO_ERG = 1000000000;\r\nexport const MIN_NANOERG_BOX_VALUE = 0.001 * NANOERG_TO_ERG;\r\nexport const TX_FEE = 2000000;\r\n\r\nexport const DEFAULT_EXPLORER_API_ADDRESS = \"https://api.ergoplatform.com/\";\r\nexport const DEFAULT_EXPLORER_ADDRESS = \"https://explorer.ergoplatform.com/\";\r\nexport const DEFAULT_NODE_ADDRESS = \"http://213.239.193.208:9053/\";\r\n\r\nexport const GAME_ADDRESS = \"9h8ujgHBKcCgJRbBrCY9rgfqLtjZyvsSEh2E4u1pQXuX8zNRo3y\";\r\nexport const GAME_TOKEN_ID = \"3aa40d9ff6ed965b0a7ed89f2dc75a5d040cc479636c98531e9505e6f568b57a\";\r\nexport const CONFIG_TOKEN_ID = \"09ef6c93c6fe2534d6b840c8524a173fea2b7cb1bb0c1c1f0f739dc310e6d10b\";\r\nexport const OATMEAL_TOKEN_ID = \"25ea05523dc54837ea5e255a82359da4f1969bda95cabaed5b064f14752d1901\";\r\nexport const BLOB_PRICE = 10000000; // 0.01\r\nexport const BLOB_ERG_MIN_VALUE = 2 * MIN_NANOERG_BOX_VALUE + TX_FEE;\r\nexport const BLOB_MINT_FEE = MIN_NANOERG_BOX_VALUE;\r\nexport const BLOB_EXCHANGE_FEE = 10; // 1%\r\nexport const MIN_GAME_PRICE = MIN_NANOERG_BOX_VALUE; // 0.1\r\nexport const INI_BLOB_ATT_LEVEL = 1;\r\nexport const INI_BLOB_DEF_LEVEL = 1;\r\nexport const INI_BLOB_GAME = 0;\r\nexport const INI_BLOB_VICTORY = 0;\r\nexport const NUM_OATMEAL_TOKEN_LOSER = 1;\r\nexport const NUM_OATMEAL_TOKEN_WINNER = 3;\r\n\r\n\r\nexport const RESERVE_SCRIPT=\"102908cd0358ca7a890f5c237eca72e0d7f8290e808b089690504a0c47805cf489767ea53e040004000e203aa40d9ff6ed965b0a7ed89f2dc75a5d040cc479636c98531e9505e6f568b57a04000402040204000e2009ef6c93c6fe2534d6b840c8524a173fea2b7cb1bb0c1c1f0f739dc310e6d10b04000504040004020404050004060500050005000402010004020402040204000400040005040400040204000400040205020100010001000404040404000100d80cd6017300d602b2db6501fe730100d603b2a5730200d6047303d605e4c6a70511d606b27205730400d607b27205730500d608e4c6a70705d609c1a7d60ae4c6a70611d60bb2720a730600d60cb1a5eb027201d1ededed938cb2db630872027307000173089593cbc27203e4c67202040ed801d60db2db63087203730900edededededededededed938c720d017204938c720d02730a93b2e4c672030511730b00720693b2e4c672030511730c00720793b2e4c672030511730d00730e93b2e4c672030511730f007310e6c67203060893e4c672030705731193e4c672030805731293e4c672030905720892c1720399997209720bb2e4c67202061173130073149591720c7315d802d60db2a5731600d60ec6720d040e95e6720ed801d60fdb6308720d9593b1720f7317ededededededededed93cbc2720dcbc2a793e4720ee4c6a7040e938cb2720f731800017204938cb2720f73190002998cb2db6308a7731a0002731b93c1720d720993b2e4c6720d0511731c00720693b2e4c6720d0511731d00720793b2e4c6720d0611731e00b2720a731f0093b2e4c6720d0611732000720b93e4c6720d07059a720873217322732373249591720c7325d801d60db2a5732600eded92c1720d720b93c2720dd0720193b1db6308720d73277328\";\r\nexport const RESERVE_SCRIPT_HASH=\"2c876134489b62df08016240ec990d1afe60ca5fe18021ced3018235367ea647\";\r\nexport const RESERVE_SCRIPT_ADDRESS=\"6vzguV61H1PvevViEBRMmS3dKaUbcAyv5GJgD5bZt5YFeskwci5hfaEyLeCvYP3uVoKBHKgpCK9RmJnMH141e895Lxk5AtDEZ7vAukAUXn6yakukJfV5dgLPGhuytTBQa4XrgPK7wKwwBfJJS8uThDMM7A7BVnJBQV7CnqfTCgbj6Tk3vo2LknnoJVCc3Li6bFyB2j3GAW6tE9bu8Mb7PU8MU5m2FfwrWsajXRLJ49fHbGb5pDBLGDBZvHEzrdkFkq5w43bkmYvMLixKCUD5htm8ipJTJenbMCxV7BnZ5mh81yHseY6JLFDhHR4YrukskTn7j3pnaeEvQHJutVR3k7tjbPKBPWyisP3tqi199ksnuLe3sbLdpe3LmBSh8cY2yLhzbVCsRvfFNKhN4Hh1Ht7EgTqUeUhfmAemi8GrnWPpq7Q3EiENyT8cckD6A3j2qMbHDMP7mXdofs194PQ6FgkSfpcH3xRgBvhR5QNRKZUdsghNNvhwrDBf8UkRG5CxiUVLMDFrSbupyKfDBhXSkfc4m62SwXUgqanPVtcSHFEF4aCUyhNV8vKWWQf4wdAp4LuiamngMcjSTFTXBWCXCPPUoT8eengsNntUienYLKAxFhcDsG7ZMikHuybPRWSkVxL6C8vNgoijMiuMQkqeVQX4P4KBtEJN2EZVwK7W8SoqAgZGvJoPukf1ARmPsoTDei9KHpd3sUxPHw9kn9oekwrP7TfJMakGiqXUWNkfPwrdtXjkDRWtzD3AaomHt4hpeRf4ZCzqgCSBzH5L2BSM3qagZx5R7ZK19S1bRGzT7BnxtnMzwWXYHG3ZDN95NLTPe3fxvcfESSXju5sN9EqVNSHvjV8c896NFrgeVwadFqyDPnyWm9Gt2GCGVesXCzPguUug6aeBEHGrL\";\r\n\r\nexport const OATMEAL_RESERVE_SCRIPT=\"1013040004060e2025ea05523dc54837ea5e255a82359da4f1969bda95cabaed5b064f14752d19010404040608cd0358ca7a890f5c237eca72e0d7f8290e808b089690504a0c47805cf489767ea53e04000e2009ef6c93c6fe2534d6b840c8524a173fea2b7cb1bb0c1c1f0f739dc310e6d10b04060402040004000400010004040404040204020100d805d601b2db6501fe730000d60291b1a57301d6037302d604e4c672010611d6059ab27204730300b27204730400eb027305d1eded938cb2db63087201730600017307957202d801d606b2a5730800edededed93cbc27206cbc2a793c17206c1a793b1db630872067309938cb2db63087206730a00017203938cb2db63087206730b0002998cb2db6308a7730c00027205730d957202d801d606b2a5730e00ededed93cbc27206e4c67201050e93b1db63087206730f938cb2db63087206731000017203938cb2db630872067311000272057312\";\r\nexport const OATMEAL_RESERVE_SCRIPT_HASH=\"cf787aa15758ace9c012c2e7d1dafeca8f65968bd2c3796e8f5b76cfd02081c2\";\r\nexport const OATMEAL_RESERVE_SCRIPT_ADDRESS=\"5CCVFXRuLiHHQ2yYmWtGzL2igZCvPocAXhJBKkE29cYjQXvyDYKD42oMcmxw3JzkEHYeBR22WDnmpmfDnqsKcZs2gh4dT3NSgDScU8gmExh4KWCKuhXgjtN6T39bxXBzagN7Xa4qTdFnfHPNZQrSZeozxVjH2NqtJFrYmGBVaSngAad6FgYs7YX8EXMccyGNZuV6VVfGmPFby1QU4QYfubfjR1mxTehgGsQ2KPD3PMGPMopPCotM1zY1SAPcPNS5qqMPsSk6wMLmm2KDzfUc2NMSPXUdtyRDS6BiMnfgFS5eGMPfGYqEweeav8tRo3Cdr6absNYz7rJh1nJ6AzDGh8QoQnvMhba8qmoCGKd24YKX7RbBQURY36FQ9dH6ZGCy36fk9GQkRDGPv4f6UvDNhwpCMxpomE9JxVkvhc4kwK5M88DDDweiZxxA52kBqQ547fLqbP5FgzxApMfVuKkF51xXAJQMiUxMPDH\";\r\n\r\nexport const CONFIG_SCRIPT=\"100308cd0358ca7a890f5c237eca72e0d7f8290e808b089690504a0c47805cf489767ea53e04020400eb027300d19373017302\";\r\nexport const CONFIG_SCRIPT_HASH=\"96fdb25957513989c2b532996e33e05c29d89300f6214966e5da3894a453d37b\";\r\nexport const CONFIG_SCRIPT_ADDRESS=\"5p1BsJCFXC4ZzEJPeAkj4z1evEpr6zks4WSYXdEjU2svhFRTWfDcZHTHW38Cr1fDScsirutqoNCe\";\r\n\r\nexport const BLOB_REQUEST_SCRIPT=\"100f0400040004000e2009ef6c93c6fe2534d6b840c8524a173fea2b7cb1bb0c1c1f0f739dc310e6d10b040204000e203aa40d9ff6ed965b0a7ed89f2dc75a5d040cc479636c98531e9505e6f568b57a05040100010001000500010005000100d808d601e4c6a70508d602b2db6501fe730000d603b2a5730100d604db63087203d605c67203040ed606c672030608d607c672030705d608c672030805eb027201d1edededededededed938cb2db6308720273020001730393cbc27203e4c67202040e9593b172047304d801d609b27204730500ed938c7209017306938c7209027307730895e6720593e47205e4c6a7040e7309e6c67203051195e6720693e472067201730a95e6720793e47207730b730c95e6720893e47208730d730ee6c672030905\";\r\nexport const BLOB_REQUEST_SCRIPT_HASH=\"fc2c26acde297edbe8dc675cfffd3f8bb34458993080a1d9d60b16581b88d716\";\r\nexport const BLOB_REQUEST_SCRIPT_ADDRESS=\"8wxHrKna7wd3DN72Z1Ty4ZNNiwZYP7SY3e6q6ZK14p3tw7B9PyBXoPvAM2gzhFE1uCixHvriC1qBjw2swEpJ5GyaFWK6EqXWqvo7vq3wAfFYzXKycMVRM32UgHmmUGcTi5bUTnb3MivN1M2adVH4UPBeqs9gAXejFJvRdcJbsA7oTHsVtwyRvyrELkr96a7b51WGARKyP3h9pA5wiinbhAAngTNgHZctV6hNCXBV6cE1sEhXEt1dk6oGDzodFC8WpjJNarURcrQ5kGekG7KquU6YJrjW9m1XwWh3kGpfJQBnjNk4Yf7VimGCAkYTJ9ZkKsCJLB6mgVmGf5u8FxzmMF7kuB8c41yCL7HWR1u5GctnAquZVmbxsDNsADZJwVEbQJmCjrf622z7DT7pHwY1X\";\r\n\r\nexport const BLOB_SCRIPT=\"108f0104000e203aa40d9ff6ed965b0a7ed89f2dc75a5d040cc479636c98531e9505e6f568b57a0402058092f40104020400050201000100040008cd0358ca7a890f5c237eca72e0d7f8290e808b089690504a0c47805cf489767ea53e040004000400040204040406040004020404040605060400050404000500050001000402040204000e2009ef6c93c6fe2534d6b840c8524a173fea2b7cb1bb0c1c1f0f739dc310e6d10b0404040005d00f0580897a04020400040005040402040201000100050005000404040205d00f0580897a04000504040004020404040604000500050005000100010001000500050004000504040005040502010005000404040404060500050004000504040204000e2025ea05523dc54837ea5e255a82359da4f1969bda95cabaed5b064f14752d1901040005d00f040205d00f0400040004020100010001000504040605d00f0580897a04000404040404040400040005040400050005000100010001000502040804040400050604000502050404000402040404060402050604000502050404000402040404060100010001000506050005000400050405000500040005040100d81fd601b2db6501fe730000d602e4c6a70608d6037301d604e4c672010611d605b27204730200d6069a73037205d607d9010704d801d609b2a57207009593cbc27209e4c67201040ed801d60adb630872099592b1720a7304d801d60bb2720a730500edededededededed938c720b017203928c720b027306e6c67209040ee6c672090511e6c672090608e6c672090705e6c672090805e6c67209090592c17209720673077308d608da7207017309d609d0730ad60ac1a7d60bb27204730b00d60ce4c6a70705d60de4c6a70805d60eb2a5730c00d60fdb6308720ed610e4c6a7040ed611e4c6a70511d612b27211730d00d613b27211730e00d614b27211730f00d615b27211731000d616e4c6a70905d617c1720ed618d9011804d801d61ae4c6b2a57218000511ededed93b2721a731100721293b2721a731200721393b2721a731300721493b2721a7314007215d619937217720ad61a95ed720894720c7315ededededededed7219938cb2720f73160002731793e4c6720e040e7210da721801731893e4c6720e0608720293e4c6720e0705731993e4c6720e0805731a93e4c6720e09057216731bd61bda720701731cd61c93e4c6720e040e7210d61db2a5731d00d61e93c2721d7209d61fb1a5ea02d1938cb2db63087201731e0001731feb02ea027202d1ecececec95edef720891b1a57320d802d620b2a5732100d621a29d9c720a720b732273239593c272207209d801d622db63087220ededededed93b172227324938cb27222732500017203938cb2722273260002732792c17220722193c2b2a5732800d0720292c1b2a57329009999720a72217205732a732b95eded720893720c732c93720d732d9591b1a5732ed803d620b2a5732f00d621c1720ed62299720a72219593c272207209ededededededededed92c17220a29d9ca272227222720b733073319272217206938cb2720f73320002733393e4c6720e040e7210dad9012304d801d625e4c6b2a57223000511ededed93b27225733400721293b27225733500721393b27225733600721493b27225733700721501733893e4c6720e0608720293e4c6720e0705733993e4c6720e0805733a93e4c6720e0905721693720d733b733c733d733e95eded720893720c733f93720d7340ededededededed937217720a938cb2720f73410002734293e4c6720e040e7210da721801734393e4c6720e0608720292e4c6720e0805720693e4c6720e09057216d801d620e4c6720e0705ec9372207344ed937220734590e4c6720e080599720a72067346721a95eded7208ef721b93720c73479591721f734895721eededededededededededededed7219721c93b2e4c6720e0511734900721493b2e4c6720e0511734a00721593e4c6720e0608720293e4c6720e0705734b93e4c6720e0805734c93e4c6720e09057216938cb2720f734d0002734e93b1db6308721d734f938cb2db6308721d73500001735190b2e4c6720e0511735200735390b2e4c6720e05117354007355d801d620e4c6720e0511928cb2db6308721d73560002999ab27220735700b272207358009a721272137359735a735bd1ecec95eded720893720c735cef721a9591721f735d95721eededededededededededed92c1721da29d9c720d720b735e735f93b1db6308721d736093c2b2a5736100d0720292c1b2a5736200720d93b1db6308b2a573630073647219938cb2720f736500027366721cda721801736793e4c6720e0705736893e4c6720e0805736993e4c6720e09057216736a736b736c95eded7208721b93720c736d9592721f736ed801d620b2a5736f009593cbc27220e4c67201050eecededededededededededededed721cda721801737093e4c6720e0608720293e4c6720e0705737193e4c6720e0805720d93e4c6720e09057216938cb2720f73720002737392c17220999c7374720d720593e4c672200408720293e4c672200505721693b2e4c672200611737500721293b2e4c672200611737600721393b2e4c672200611737700721493b2e4c6722006117378007215ededededededededededededed93e4c6721d040e7210da721801737993e4c6721d0608720293e4c6721d0705737a93e4c6721d0805720d93e4c6721d09057216938cb2db6308721d737b0002737c92c17220999c737d720d720593e4c672200708720293e4c672200805721693b2e4c672200911737e00721293b2e4c672200911737f00721393b2e4c67220091173800100721493b2e4c67220091173810100721573820173830173840195eded7208721b93720c738501ecededededed721c93e4c6720e0608720293e4c6720e070573860193e4c6720e080573870193e4c6720e09057216938cb2720f7388010002738901ededededed93e4c6721d040e721093e4c6721d0608720293e4c6721d0705738a0193e4c6721d0805738b0193e4c6721d09057216938cb2db6308721d738c010002738d01738e01\";\r\nexport const BLOB_SCRIPT_HASH=\"8488d54d02836242f66756dda889b1a0d493db169671b0aee49a601bc4b71983\";\r\nexport const BLOB_SCRIPT_ADDRESS=\"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\";\r\n\r\nexport const GAME_SCRIPT=\"10570400040004020400040204040514051404a8460402040405140514040004060514050a05080510040004060514050a05080510040204060406040a040205040400040204060e2025ea05523dc54837ea5e255a82359da4f1969bda95cabaed5b064f14752d19010406040404000e2009ef6c93c6fe2534d6b840c8524a173fea2b7cb1bb0c1c1f0f739dc310e6d10b05000500010005000500010005040504058092f40105040504058092f401040404020400040004000100040604020400040004000100040004020404050204060502040004020404050204060100040004020404050204060502040004020404050204060100d825d601b2db6501fe730000d602b2a5730100d603e4c67201040ed604e4c6a70408d605b2a5730200d606e4c6a70708d607db6801b2db6502fe730300d608e4c6a70911d609b27208730400d60ab27208730500d60b9a9c730672099c7307720ad60c7308d60de4c6a70611d60eb2720d730900d60fb2720d730a00d6109a9c730b720e9c730c720fd611b27208730d00d612b27208730e00d6139a9a9a9c730f72119c731072099c7311720a9c73127212d614b2720d731300d615b2720d731400d6169a9a9a9c731572149c7316720e9c7317720f9c73187215d6179aa27bb472077319731a7ea19a720b7e720c057210067ea19a72137e720c05721606d6189aa27bb47207731b731c7ea19a72107e720c05720b067ea19a72167e720c05721306d6199172177218d61ae4c672010611d61bb2721a731d00d61c9d9ac1a7721b731ed61dc1b2a4731f00d61ec1b2a4732000d61f9072177218d62091b1a57321d6217322d622b2721a732300d623b2721a732400d624c672020511d625c672050511d196830801938cb2db630872017325000173269593cbc272027203ededed93e4c672020608720493e4c672020705732793e4c672020805732893e4c672020905e4c6a7050573299593cbc272057203ededed93e4c672050608720693e4c672050705732a93e4c672050805732b93e4c672050905e4c6a70805732c97830201eded721993c1720299999a721d9c732d721c9c732e721b732f93c17205721eeded721f93c17202721d93c1720599999a721e9c7330721c9c7331721b7332957220d801d626b2a5733300ededed93c27226d0720493b1db630872267334938cb2db63087226733500017221eced7219938cb2db63087226733600027222ed721f938cb2db630872267337000272237338957220d801d626b2a5733900ededed93c27226d0720693b1db63087226733a938cb2db63087226733b00017221eced7219938cb2db63087226733c00027223ed721f938cb2db63087226733d00027222733e95e67224d801d626e4722497830201edededed721993b27226733f00721493b27226734000720e93b272267341009a720f734293b272267343009a72157344edededed721f93b27226734500721493b27226734600720e93b272267347009a720f734893b272267349007215734a95e67225d801d626e4722597830201edededed721f93b27226734b00721193b27226734c00720993b27226734d009a720a734e93b27226734f009a72127350edededed721993b27226735100721193b27226735200720993b272267353009a720a735493b2722673550072127356\";\r\nexport const GAME_SCRIPT_HASH=\"5272bbc8d075266bec108ff9c524b9d2d85c417e7322e34448a4ed9cb2ee238a\";\r\nexport const GAME_SCRIPT_ADDRESS=\"7JmK5LNtZQ9sy7pYGusxn3kcD7eojTKCNce8PbxyuziYdSvkFfn5DM6VDfkbuEYsYfuESHZy5mFnLVkK6BkKkRoCoRiM77imeoJy3ZbaNqRgnvmW1tb9EzSzv2xcTGLNgnKGqyVQxju4i9EhzfrWXKmy2JHjC7QhbKHrH4D3WPmD97wDAWQXwb3Hxa5uyBwiQUYGJr5JvmV3TG3r6s6KJkwCtPHDdLAnJ8KLMHShJfRPFwEUbMbj8yVYAqjDrU9peCk38UpTRmuZ6HexHM3hJSiStVV4EtvTKrtCDrDmGXVvvyHaWL1VBt5pRYum37WzRk9cCkpXeHnAuJWxd9HhCoSrFArEg77gqdpBJ55KRYppi5rQN23mvKq3uRS156n3sw94jvhJDB954CqxDoafwTWtbeprPqV7XKgNe6pMYF3JNq7b2M6vdiBRYroat4U9CfabHR1wyA6qtdRJm2Smp9g6V7aKHyajTT4jCHM78UinCY7smnNjBmzjCcSCQ3W7QDvKTCgvmyJ5dcb4VSR9cRRuMcvRPqVushZjg6AP9oZcjh83rBD9CdHDyqJbbxrpiaKwvG8jg57Gn5Xvbnq8sTyBHfeeRNxdHYX1WdXRhShdThKrdy7EgjZj4MorkC8jsYFjVUJfPLdVYBejMMhF727RRaLxdnbSniY1euepz4n3rRZekDVD5kje8ELEJb7AEzjQPutYvuCppiuKCWd3vuApmGyhH8zs746RRYZzT6KN94YBitEgL4XHBR7xw2keG4BaUGAy1CcJAKEfuZNwXMXxyYc6BBbib8MkFiJGrrUeggyBULiZYnkTqhj2tGZxN1kqnBF2bG8wjzWNuqRkKCMx2UuH46JDikRLxFVhnkpMtCoE6w3q4fgRWY6QCeA24ZUvxXBYZzENJAvn8oRJ1kkWFQsruM1uDdBc2cPFrsB4fBR8SVHkGDWx2hVnzsaToaMf8PC6RNuzzzEsMkwGBHxmE5GSNZUJKLH3bFUGcj9ZTVBVD6ND971nLC4td5VFX2R1wBLpnhCwGw6xnxjefa4W6e5yKU6enhs5AM5XSg3qJaRoLaCPbXu4tEb2nGEp5iewRQtFkNtzFMpXteJrC3wRXT9PTybdsdyAuoW5yshX16SGDGzhR2d8EkPm69FT14GEdLnNfJEHJq76chQf8vWhcegZT6fA2ahoSWNNbTQWHuHxBZt75Wf4tKUsjhhAJ5v7pFXhMqs6VoAjAQgHNRCXfTrbjRiHZmafJmC7ZMVSHr6J2PmSJJZbNKQGGArM66CKAPhNFVq5MsQPG2C1ST61KFvm9MMzK2KJqRuhGGkvM5RpscJFFnPTXwzUzV948sd1tPgM9yHUiWiiEPwacWmbLyifPoZ7URs6tGXnjcs1zkxQ2A8w6i6KAHXa3CLmsnpjqMsvb8Bhp9bGWpqoKifDNxThapX26Mw3KHrpHmamAvtHfJGY5s4ipyZJSzg3jfCBhTPffm7X7gsSyQJzVqmLoYzUuxqLLZJUNsi3rBJjeLZFhfMvyxeFWgx89GDuvmKz5ZjNCBrWSVvdFw3imxtkoVPqEw85dnQ3prnaYsuEe6VH7ZWFwn7SB6hNzZZr3MGoHgVvvMr8gPMWbxAFQxuYxhsUgzaZyVbyiSgtS15pokEoABNHaLdz\";\r\n\r\n\r\n","import JSONBigInt from 'json-bigint';\r\nimport { errorAlert, promptErgAmount, waitingAlert } from \"../utils/Alerts\";\r\nimport { BLOB_ERG_MIN_VALUE, BLOB_EXCHANGE_FEE, BLOB_PRICE, BLOB_REQUEST_SCRIPT_ADDRESS, BLOB_SCRIPT_ADDRESS, CONFIG_TOKEN_ID, GAME_ADDRESS, GAME_TOKEN_ID, MIN_NANOERG_BOX_VALUE, NANOERG_TO_ERG, OATMEAL_TOKEN_ID, TX_FEE } from \"../utils/constants\";\r\nimport { boxByTokenId, currentHeight, getMempoolUnspentBoxesByAddress, getSpentAndUnspentBoxesFromMempool, getUnspentBoxesByAddress, unspentBoxesForV1 } from \"./explorer\";\r\nimport { encodeLong, encodeLongArray } from './serializer';\r\nimport { addSimpleOutputBox, createTransaction, parseUtxo, setBoxRegisterByteArray, verifyTransactionIO } from \"./wasm\";\r\nimport { getTokenUtxos, getUtxos, isValidWalletAddress, walletSignTx } from \"./wallet.js\";\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n\r\nexport async function refundBlobRequest(blobRequestBoxJSON) {\r\n    const creationHeight = await currentHeight();\r\n    const address = localStorage.getItem('address');\r\n    var alert = waitingAlert(\"Preparing the transaction...\");\r\n    const blobRequestIniValueNano = blobRequestBoxJSON.value;\r\n    const yoroiOK = await isValidWalletAddress(address);\r\n    if (yoroiOK) {\r\n        const utxos = [blobRequestBoxJSON];\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n        addSimpleOutputBox(outputCandidates, (blobRequestIniValueNano - TX_FEE) / NANOERG_TO_ERG, address, creationHeight);\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBox, address, utxos);\r\n        console.log(\"correctTx\", correctTx)\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    } else {\r\n        alert = errorAlert(\"No wallet found\")\r\n    }\r\n}\r\n\r\nexport async function addWidthDrawBlob(mode, blobBoxJSON) {\r\n    //console.log(\"addWidthDraw mode\", mode);\r\n    const creationHeight = await currentHeight();\r\n    const amountFloat = await promptErgAmount(mode);\r\n    const amountNano = Math.round(amountFloat * NANOERG_TO_ERG);\r\n    //console.log(\"addWidthDraw amountFloat\", amountFloat);\r\n    const address = localStorage.getItem('address');\r\n    var alert = waitingAlert(\"Preparing the transaction...\");\r\n    var dAppFeeNano = Math.max(Math.round(amountNano * BLOB_EXCHANGE_FEE / 1000), MIN_NANOERG_BOX_VALUE);\r\n    const blobIniValueNano = blobBoxJSON.value;\r\n    var blobOutValueNano = blobIniValueNano;\r\n    if (mode === \"add\") {\r\n        blobOutValueNano = blobIniValueNano + amountNano;\r\n    } else {\r\n        blobOutValueNano = blobIniValueNano - amountNano;\r\n    }\r\n    if (blobOutValueNano < (2 * MIN_NANOERG_BOX_VALUE + TX_FEE)) {\r\n        alert = errorAlert(\"Not enough ERG in the Blob after operation, min value \" + (2 * MIN_NANOERG_BOX_VALUE + TX_FEE) + \" nanoERG\");\r\n        return;\r\n    }\r\n    //console.log(\"addWidthDraw blobOutValueNano\", blobOutValueNano, blobIniValueNano);\r\n\r\n    const yoroiOK = await isValidWalletAddress(address);\r\n    if (yoroiOK) {\r\n        var utxos = [];\r\n        if (mode === \"add\") {\r\n            utxos = await getUtxos(amountNano + dAppFeeNano + MIN_NANOERG_BOX_VALUE);\r\n        } else {\r\n            utxos = await getUtxos(MIN_NANOERG_BOX_VALUE + TX_FEE + dAppFeeNano);\r\n        }\r\n\r\n        utxos.unshift(blobBoxJSON);\r\n        //console.log(\"utxos value: \" + getUtxosListValue(utxos))\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n\r\n        // Blob Box\r\n        const blobBoxOutWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blobBoxJSON));\r\n        const blobboxOutValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blobOutValueNano.toString()));\r\n        const blobBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            blobboxOutValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        blobBoxBuilder.set_register_value(4, blobBoxOutWASM.register_value(4));\r\n        blobBoxBuilder.set_register_value(5, blobBoxOutWASM.register_value(5));\r\n        blobBoxBuilder.set_register_value(6, blobBoxOutWASM.register_value(6));\r\n        blobBoxBuilder.set_register_value(7, blobBoxOutWASM.register_value(7));\r\n        blobBoxBuilder.set_register_value(8, blobBoxOutWASM.register_value(8));\r\n        blobBoxBuilder.set_register_value(9, blobBoxOutWASM.register_value(9));\r\n        blobBoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n        try {\r\n            outputCandidates.add(blobBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        // dApp fee box\r\n        addSimpleOutputBox(outputCandidates, dAppFeeNano / NANOERG_TO_ERG, GAME_ADDRESS, creationHeight);\r\n\r\n        if (mode === \"widthdraw\") {\r\n            addSimpleOutputBox(outputCandidates, amountNano / NANOERG_TO_ERG, address, creationHeight);\r\n        }\r\n\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBox, address, utxos);\r\n\r\n        console.log(\"correctTx\", correctTx)\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    }\r\n    alert.close()\r\n\r\n}\r\n\r\nexport async function killBlob(blobBoxJSON) {\r\n    console.log(\"boxId\", blobBoxJSON.boxId);\r\n    const address = localStorage.getItem('address');\r\n\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    if (await isValidWalletAddress(address)) {\r\n        //var utxos = await getAllUtxos();\r\n        //const blobBox = await boxByBoxId(this.state.boxId);\r\n        //const blobBoxFixed = parseUtxo(blobBoxJSON);\r\n        //console.log(\"blobBoxFixed\", blobBoxFixed);\r\n        const utxos = [blobBoxJSON];\r\n        const creationHeight = await currentHeight();\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n\r\n        // dApp return box\r\n        var dappReturnValue = Math.round(blobBoxJSON.value * BLOB_EXCHANGE_FEE / 1000);\r\n        if (dappReturnValue < MIN_NANOERG_BOX_VALUE) {\r\n            dappReturnValue = MIN_NANOERG_BOX_VALUE;\r\n        }\r\n        //console.log(\"dappReturnValue\", dappReturnValue);\r\n        const dappReturnValueBox = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(dappReturnValue.toString()));;\r\n        const returnBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            dappReturnValueBox,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(GAME_ADDRESS)),\r\n            creationHeight);\r\n        returnBoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n        await setBoxRegisterByteArray(returnBoxBuilder, 4, blobBoxJSON.boxId);\r\n        try {\r\n            outputCandidates.add(returnBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        // user return box\r\n        const userReturnValue = blobBoxJSON.value - dappReturnValue - TX_FEE;\r\n        addSimpleOutputBox(outputCandidates, parseFloat(userReturnValue / NANOERG_TO_ERG), address, creationHeight);\r\n        const currentConfigBoxes = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBoxes, GAME_ADDRESS, utxos);\r\n        console.log(\"correctTx fixed\", correctTx)\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    } else {\r\n        errorAlert(\"Incorrect address\", \"The address provided does not match the address connected to Yoroi wallet\")\r\n    }\r\n    return null;\r\n}\r\n\r\nexport async function buyBlob(blobBoxJSON) {\r\n    console.log(\"buyBlob\");\r\n    const creationHeight = await currentHeight();\r\n    const amountNano = parseInt(blobBoxJSON.additionalRegisters.R8.renderedValue);\r\n    const dAppFeeNano = Math.max(Math.round(amountNano * BLOB_EXCHANGE_FEE / 1000), MIN_NANOERG_BOX_VALUE);\r\n\r\n    const address = localStorage.getItem('address');\r\n    var alert = waitingAlert(\"Preparing the transaction...\");\r\n    const blobIniValueNano = blobBoxJSON.value;\r\n\r\n    const yoroiOK = await isValidWalletAddress(address);\r\n    if (yoroiOK) {\r\n        var utxos = await getUtxos(amountNano + TX_FEE + dAppFeeNano);\r\n        utxos.unshift(parseUtxo(blobBoxJSON));\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n\r\n        // BLOB BOX\r\n        const blobBoxInWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blobBoxJSON));\r\n        const blobboxOutValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blobIniValueNano.toString()));\r\n        const blobBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            blobboxOutValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        blobBoxBuilder.set_register_value(4, blobBoxInWASM.register_value(4));\r\n        blobBoxBuilder.set_register_value(5, blobBoxInWASM.register_value(5));\r\n        const newOwnerSigmaProp = (await ergolib).Constant.from_ecpoint_bytes(\r\n            (await ergolib).Address.from_base58(address).to_bytes(0x00).subarray(1, 34)\r\n        );\r\n        console.log((await ergolib).Address.from_base58(address).to_bytes(0x00));\r\n        blobBoxBuilder.set_register_value(6, newOwnerSigmaProp);\r\n        blobBoxBuilder.set_register_value(7, (await encodeLong(\"0\")));\r\n        blobBoxBuilder.set_register_value(8, (await encodeLong(\"0\")));\r\n        blobBoxBuilder.set_register_value(9, blobBoxInWASM.register_value(9));\r\n        blobBoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n        try {\r\n            outputCandidates.add(blobBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        // dApp fee box\r\n        addSimpleOutputBox(outputCandidates, dAppFeeNano / NANOERG_TO_ERG, GAME_ADDRESS, creationHeight);\r\n\r\n        // payment to old owner box\r\n        const preOwnerScript = blobBoxInWASM.register_value(6).encode_to_base16();\r\n        const preOwnerAddress = (await ergolib).Address.recreate_from_ergo_tree((await ergolib).ErgoTree.from_base16_bytes(\"00\" + preOwnerScript)).to_base58();\r\n        addSimpleOutputBox(outputCandidates, parseFloat(amountNano / NANOERG_TO_ERG), preOwnerAddress, creationHeight);\r\n\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBox, address, utxos);\r\n\r\n        console.log(\"correctTx\", correctTx)\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    }\r\n    alert.close()\r\n}\r\n\r\nexport async function setBlobStatus(mode, blobBoxJSON) {\r\n    console.log(\"setBlobStatus mode\", mode);\r\n    const creationHeight = await currentHeight();\r\n    var amountNano = 0;\r\n    if (mode !== 'reset') {\r\n        const amountFloat = await promptErgAmount(mode);\r\n        amountNano = Math.round(amountFloat * NANOERG_TO_ERG);\r\n    }\r\n    const blobIniValueNano = blobBoxJSON.value;\r\n    const address = localStorage.getItem('address');\r\n    var alert = waitingAlert(\"Preparing the transaction...\");\r\n\r\n    const yoroiOK = await isValidWalletAddress(address);\r\n    if (yoroiOK) {\r\n        var utxos = await getUtxos(MIN_NANOERG_BOX_VALUE + TX_FEE);\r\n        utxos.push(parseUtxo(blobBoxJSON));\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n\r\n        // Blob Box\r\n        var blobStatus = '0', blobStatusValue = '0';\r\n        if (mode === 'fight') {\r\n            blobStatus = '1';\r\n            blobStatusValue = amountNano.toString();\r\n            const maxFightValueNano = parseInt(blobIniValueNano) - BLOB_ERG_MIN_VALUE;\r\n            console.log(\"maxFightValueNano\", maxFightValueNano, amountNano);\r\n            if (amountNano > maxFightValueNano) {\r\n                errorAlert(\"Not enough ERG in the blob to figth, maximum figth value: \" + (maxFightValueNano / NANOERG_TO_ERG).toFixed(4) + \" ERG\");\r\n                return;\r\n            }\r\n        } else if (mode === 'sell') {\r\n            blobStatus = '2';\r\n            blobStatusValue = amountNano.toString();\r\n        } else if (mode === 'reset') {\r\n            blobStatus = '0';\r\n            blobStatusValue = '0';\r\n        }\r\n        const blobBoxInWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blobBoxJSON));\r\n        const blobboxOutValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blobIniValueNano.toString()));\r\n        const blobBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            blobboxOutValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        blobBoxBuilder.set_register_value(4, blobBoxInWASM.register_value(4));\r\n        blobBoxBuilder.set_register_value(5, blobBoxInWASM.register_value(5));\r\n        blobBoxBuilder.set_register_value(6, blobBoxInWASM.register_value(6));\r\n        blobBoxBuilder.set_register_value(7, (await encodeLong(blobStatus)));\r\n        blobBoxBuilder.set_register_value(8, (await encodeLong(blobStatusValue)));\r\n        blobBoxBuilder.set_register_value(9, blobBoxInWASM.register_value(9));\r\n        blobBoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n        try {\r\n            outputCandidates.add(blobBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBox, address, utxos);\r\n\r\n        console.log(\"correctTx\", correctTx)\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    }\r\n}\r\n\r\nexport async function createBlobRequest(name, color1, color2, eyes_pos, mouth_type, svgPath) {\r\n    console.log(\"createBlobRequest\")\r\n    const address = localStorage.getItem('address');\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    const yoroiOK = await isValidWalletAddress(address);\r\n    if (yoroiOK) {\r\n        var utxos = await getUtxos(BLOB_PRICE + TX_FEE);\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n        const creationHeight = await currentHeight();\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n\r\n        // Blob Box\r\n        const blobBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str((BLOB_PRICE).toString()));\r\n        const blobBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            blobBoxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_REQUEST_SCRIPT_ADDRESS)), // will be changed\r\n            creationHeight);\r\n        const blobDesc = name + \":\" + color1.substring(1) + \":\" + color2.substring(1) + \":\" + eyes_pos + \":\" + mouth_type + \":\" + svgPath;\r\n        await setBoxRegisterByteArray(blobBoxBuilder, 4, blobDesc);\r\n        const ownerSigmaProp = (await ergolib).Constant.from_ecpoint_bytes(\r\n            (await ergolib).Address.from_base58(address).to_bytes(0x00).subarray(1, 34)\r\n        );\r\n        blobBoxBuilder.set_register_value(5, ownerSigmaProp);\r\n        try {\r\n            outputCandidates.add(blobBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, [], address, utxos);\r\n        console.log(\"final transaction\", correctTx)\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    } else {\r\n        errorAlert(\"Incorrect address\", \"The address provided does not match the address connected to Yoroi wallet\")\r\n    }\r\n    return null;\r\n}\r\n\r\nexport async function feedBlob(blobBoxJSON, amountDefense, amountAttack) {\r\n\r\n    const creationHeight = await currentHeight();\r\n    const address = localStorage.getItem('address');\r\n    var alert = waitingAlert(\"Preparing the transaction...\");\r\n    const yoroiOK = await isValidWalletAddress(address);\r\n    if (yoroiOK) {\r\n        var utxos = [];\r\n        var utxos2 = [];\r\n        try {\r\n            utxos = await getTokenUtxos(amountAttack + amountDefense, OATMEAL_TOKEN_ID);\r\n            utxos2 = await getUtxos(TX_FEE);\r\n        } catch (e) {\r\n            console.log(e);\r\n            errorAlert(e.toString());\r\n            return;\r\n        }\r\n        utxos = utxos.concat(utxos2).filter((value, index, self) =>\r\n            index === self.findIndex((t) => (\r\n                t.boxId === value.boxId\r\n            )));\r\n        utxos.unshift(parseUtxo(blobBoxJSON));\r\n\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n\r\n        const oatmealTokenId = (await ergolib).TokenId.from_str(OATMEAL_TOKEN_ID);\r\n        const oatmealTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str((amountAttack + amountDefense).toString()));\r\n\r\n        // BLOB with stat increased\r\n        const blobBoxInWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blobBoxJSON));\r\n        const blobBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            blobBoxInWASM.value(),\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        blobBoxBuilder.set_register_value(4, blobBoxInWASM.register_value(4));\r\n        var infoArray = JSON.parse(blobBoxJSON.additionalRegisters.R5.renderedValue);\r\n        infoArray[0] = infoArray[0] + amountAttack;\r\n        infoArray[1] = infoArray[1] + amountDefense;\r\n        blobBoxBuilder.set_register_value(5, await encodeLongArray(infoArray));\r\n        blobBoxBuilder.set_register_value(6, blobBoxInWASM.register_value(6));\r\n        blobBoxBuilder.set_register_value(7, blobBoxInWASM.register_value(7));\r\n        blobBoxBuilder.set_register_value(8, blobBoxInWASM.register_value(8));\r\n        blobBoxBuilder.set_register_value(9, blobBoxInWASM.register_value(9));\r\n        blobBoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n        try {\r\n            outputCandidates.add(blobBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        // Oatmeal return box\r\n        const oatMealReturnBox = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str((MIN_NANOERG_BOX_VALUE).toString())),\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(GAME_ADDRESS)),\r\n            creationHeight);\r\n        oatMealReturnBox.add_token(oatmealTokenId, oatmealTokenAmount);\r\n        try {\r\n            outputCandidates.add(oatMealReturnBox.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBox, address, utxos);\r\n        console.log(\"final transaction\", correctTx)\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n\r\n\r\n    } else {\r\n        errorAlert(\"Incorrect address\", \"The address provided does not match the address connected to Yoroi wallet\")\r\n    }\r\n    return null;\r\n\r\n}\r\n\r\nexport async function getUnspentBlobs() {\r\n    const blobBoxesTmp = await getUnspentBoxesByAddress(BLOB_SCRIPT_ADDRESS);\r\n    //console.log(\"fetchBlobs blobBoxes\",blobBoxesTmp)\r\n    const [spentBlobs, newBlobs] = await getSpentAndUnspentBoxesFromMempool(BLOB_SCRIPT_ADDRESS);\r\n    const spentBlobBoxIds = spentBlobs.map(box => box.boxId);\r\n    const blobBoxes = newBlobs.concat(blobBoxesTmp).filter(box => !spentBlobBoxIds.includes(box.boxId));\r\n\r\n    return blobBoxes;\r\n}\r\n\r\nexport async function getUnspentBlobs2() {\r\n    const blobUnspentBoxes = await getUnspentBoxesByAddress(BLOB_SCRIPT_ADDRESS);\r\n    //console.log(\"getUnspentBlobs\", blobUnspentBoxes);\r\n    const mempoolUnspentBoxes = await getMempoolUnspentBoxesByAddress(BLOB_SCRIPT_ADDRESS);\r\n    const mempoolBlobs = mempoolUnspentBoxes.filter(box => box.address === BLOB_SCRIPT_ADDRESS);\r\n\r\n    var blobDict = {};\r\n    for (const blob of blobUnspentBoxes) {\r\n        blobDict[blob.additionalRegisters.R9.renderedValue] = blob;\r\n    }\r\n    for (const blob of mempoolBlobs) {\r\n        blobDict[blob.additionalRegisters.R9.renderedValue] = blob;\r\n    }\r\n\r\n    return Object.values(blobDict);\r\n}","import { errorAlert, waitingAlert } from '../utils/Alerts';\r\nimport { BLOB_EXCHANGE_FEE, BLOB_MINT_FEE, BLOB_PRICE, BLOB_SCRIPT_HASH, CONFIG_SCRIPT_ADDRESS, CONFIG_TOKEN_ID, GAME_ADDRESS, GAME_SCRIPT_HASH, GAME_TOKEN_ID, INI_BLOB_ATT_LEVEL, INI_BLOB_DEF_LEVEL, INI_BLOB_GAME, INI_BLOB_VICTORY, MIN_NANOERG_BOX_VALUE, NANOERG_TO_ERG, NUM_OATMEAL_TOKEN_LOSER, NUM_OATMEAL_TOKEN_WINNER, OATMEAL_RESERVE_SCRIPT_ADDRESS, OATMEAL_TOKEN_ID, RESERVE_SCRIPT_ADDRESS, TX_FEE } from '../utils/constants';\r\nimport { boxById, boxByTokenId, currentHeight } from './explorer';\r\nimport { encodeHexConst, encodeLong, encodeLongArray } from './serializer';\r\nimport { createTransaction, getBoxSelection, parseUtxo, setBoxRegisterByteArray, verifyTransactionIO } from './wasm';\r\nimport { getAllUtxos, getTokenUtxos, getUtxos, isValidWalletAddress, walletSignTx } from './wallet.js';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\nexport async function burnGameTokenReserve(boxId) {\r\n    const address = localStorage.getItem('address');\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    if (await isValidWalletAddress(address)) {\r\n        var utxos = await getUtxos(TX_FEE);\r\n        const reservebox = await boxById(boxId);\r\n        const reserveboxFixed = parseUtxo(reservebox);\r\n        utxos.push(reserveboxFixed);\r\n        var tokens = new (await ergolib).Tokens();\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const reserveTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(reserveboxFixed.assets[0].amount));\r\n        tokens.add(new (await ergolib).Token(\r\n            gameTokenId,\r\n            reserveTokenAmount)\r\n        );\r\n\r\n        const boxSelection = await getBoxSelection(utxos, MIN_NANOERG_BOX_VALUE / NANOERG_TO_ERG, tokens);\r\n        const creationHeight = await currentHeight();\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n        const boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(MIN_NANOERG_BOX_VALUE.toString()));\r\n        const returnBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            boxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(GAME_ADDRESS)),\r\n            creationHeight);\r\n        returnBoxBuilder.add_token(gameTokenId, reserveTokenAmount);\r\n        try {\r\n            outputCandidates.add(returnBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBox, GAME_ADDRESS, utxos);\r\n\r\n        console.log(\"correctTx\", correctTx);\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    } else {\r\n        errorAlert(\"Incorrect address\", \"The address provided does not match the address connected to Yoroi wallet\")\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n\r\nexport async function burnOatmealReserve(boxId) {\r\n    const address = localStorage.getItem('address');\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    if (await isValidWalletAddress(address)) {\r\n        var utxos = await getUtxos(TX_FEE);\r\n        const reservebox = await boxById(boxId);\r\n        const reserveboxFixed = parseUtxo(reservebox);\r\n        utxos.push(reserveboxFixed);\r\n        var tokens = new (await ergolib).Tokens();\r\n        const oatmealTokenId = (await ergolib).TokenId.from_str(OATMEAL_TOKEN_ID);\r\n        const reserveTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(reserveboxFixed.assets[0].amount));\r\n        tokens.add(new (await ergolib).Token(\r\n            oatmealTokenId,\r\n            reserveTokenAmount)\r\n        );\r\n\r\n        const boxSelection = await getBoxSelection(utxos, MIN_NANOERG_BOX_VALUE / NANOERG_TO_ERG, tokens);\r\n        const creationHeight = await currentHeight();\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n        const boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(MIN_NANOERG_BOX_VALUE.toString()));\r\n        const returnBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            boxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(GAME_ADDRESS)),\r\n            creationHeight);\r\n        returnBoxBuilder.add_token(oatmealTokenId, reserveTokenAmount);\r\n        try {\r\n            outputCandidates.add(returnBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var correctTx = await createTransaction(boxSelection, outputCandidates, currentConfigBox, GAME_ADDRESS, utxos);\r\n\r\n        console.log(\"correctTx\", correctTx);\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    } else {\r\n        errorAlert(\"Incorrect address\", \"The address provided does not match the address connected to Yoroi wallet\")\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nexport async function updateConfigurationBox() {\r\n    console.log(\"updateConf\");\r\n    const address = localStorage.getItem('address');\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    if (await isValidWalletAddress(address)) {\r\n        const creationHeight = await currentHeight();\r\n        // select the inputs\r\n        var utxos = await getAllUtxos();\r\n        console.log(\"utxos\", utxos);\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        console.log(\"ConfigItem componentDidMount currentConfigBox\", currentConfigBox);\r\n        if (currentConfigBox.length > 0) {\r\n            utxos.push(currentConfigBox[0]);\r\n        }\r\n        console.log(\"utxos2\", utxos);\r\n\r\n        var tokens = new (await ergolib).Tokens();\r\n        const configTokenId = (await ergolib).TokenId.from_str(CONFIG_TOKEN_ID);\r\n        const configTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"1\"));\r\n        tokens.add(new (await ergolib).Token(\r\n            configTokenId,\r\n            configTokenAmount)\r\n        );\r\n        const boxSelection = await getBoxSelection(utxos, MIN_NANOERG_BOX_VALUE / NANOERG_TO_ERG, tokens);\r\n        console.log(\"boxSelection\", boxSelection);\r\n\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n        // prepare the new config box\r\n        const configValue = MIN_NANOERG_BOX_VALUE.toString();\r\n        const boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(configValue));\r\n        const configBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            boxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(CONFIG_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        configBoxBuilder.set_register_value(4, await encodeHexConst(BLOB_SCRIPT_HASH));\r\n        configBoxBuilder.set_register_value(5, await encodeHexConst(GAME_SCRIPT_HASH));\r\n        const gameConf = [BLOB_EXCHANGE_FEE, TX_FEE, NUM_OATMEAL_TOKEN_LOSER, NUM_OATMEAL_TOKEN_WINNER];\r\n        configBoxBuilder.set_register_value(6, await encodeLongArray(gameConf));\r\n\r\n        configBoxBuilder.add_token(configTokenId, configTokenAmount);\r\n        try {\r\n            outputCandidates.add(configBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n        const correctTx = await createTransaction(boxSelection, outputCandidates, [], GAME_ADDRESS, utxos);\r\n\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    }\r\n}\r\n\r\nexport async function mintGameTokenReserve(reserveName, reserveTokenAmount, reserveIniIdentifier) {\r\n    const address = localStorage.getItem('address');\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    if (await isValidWalletAddress(address)) {\r\n        console.log(\"this.state.reserveTokenAmount\", reserveTokenAmount)\r\n        var utxos = await getTokenUtxos(reserveTokenAmount, GAME_TOKEN_ID);\r\n        var utxos1 = await getUtxos(TX_FEE + MIN_NANOERG_BOX_VALUE);\r\n\r\n        utxos = utxos.concat(utxos1).filter((value, index, self) =>\r\n            index === self.findIndex((t) => (\r\n                t.boxId === value.boxId\r\n            )));\r\n\r\n        console.log(utxos);\r\n        var tokens = new (await ergolib).Tokens();\r\n\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const reserveTokenAmountWASM = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(reserveTokenAmount));\r\n        tokens.add(new (await ergolib).Token(\r\n            gameTokenId,\r\n            reserveTokenAmountWASM)\r\n        );\r\n        const boxSelection = await getBoxSelection(utxos, MIN_NANOERG_BOX_VALUE / NANOERG_TO_ERG, tokens);\r\n\r\n        // prepare the reserve output box\r\n        const creationHeight = await currentHeight();\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n        const reserveValue = MIN_NANOERG_BOX_VALUE.toString();\r\n        const boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(reserveValue));\r\n        const reserveBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            boxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(RESERVE_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        await setBoxRegisterByteArray(reserveBoxBuilder, 4, reserveName);\r\n        const blobIniConf = [INI_BLOB_ATT_LEVEL, INI_BLOB_DEF_LEVEL, INI_BLOB_GAME, INI_BLOB_VICTORY];\r\n        reserveBoxBuilder.set_register_value(5, await encodeLongArray(blobIniConf));\r\n        const blobPrice = [BLOB_PRICE, BLOB_MINT_FEE];\r\n        reserveBoxBuilder.set_register_value(6, await encodeLongArray(blobPrice));\r\n        reserveBoxBuilder.add_token(gameTokenId, reserveTokenAmountWASM);\r\n        reserveBoxBuilder.set_register_value(7, (await encodeLong(reserveIniIdentifier)))\r\n        try {\r\n            outputCandidates.add(reserveBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n        // Create the transaction\r\n        const correctTx = await createTransaction(boxSelection, outputCandidates, [], GAME_ADDRESS, utxos);\r\n\r\n        console.log(\"final transaction\", correctTx)\r\n\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    } else {\r\n        errorAlert(\"Incorrect address\", \"The address provided does not match the address connected to Yoroi wallet\")\r\n    }\r\n    return null;\r\n}\r\n\r\nexport async function mintOatmealReserve(oatmealReserveTokenAmount) {\r\n    const address = localStorage.getItem('address');\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    if (await isValidWalletAddress(address)) {\r\n        var utxos = await getAllUtxos();\r\n        console.log(utxos);\r\n        var tokens = new (await ergolib).Tokens();\r\n        console.log(\"this.state.oatmealReserveTokenAmount\", oatmealReserveTokenAmount)\r\n        const oatmealTokenId = (await ergolib).TokenId.from_str(OATMEAL_TOKEN_ID);\r\n        const reserveTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(oatmealReserveTokenAmount));\r\n        tokens.add(new (await ergolib).Token(\r\n            oatmealTokenId,\r\n            reserveTokenAmount)\r\n        );\r\n        const boxSelection = await getBoxSelection(utxos, MIN_NANOERG_BOX_VALUE / NANOERG_TO_ERG, tokens);\r\n\r\n        // prepare the reserve output box\r\n        const creationHeight = await currentHeight();\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n        const reserveValue = MIN_NANOERG_BOX_VALUE.toString();\r\n        const boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(reserveValue));\r\n        const reserveBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            boxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(OATMEAL_RESERVE_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        reserveBoxBuilder.add_token(oatmealTokenId, reserveTokenAmount);\r\n        try {\r\n            outputCandidates.add(reserveBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n        // Create the transaction\r\n        const correctTx = await createTransaction(boxSelection, outputCandidates, [], GAME_ADDRESS, utxos);\r\n\r\n        console.log(\"final transaction\", correctTx)\r\n\r\n        if (verifyTransactionIO(correctTx)) {\r\n            await walletSignTx(alert, correctTx, address);\r\n        }\r\n    } else {\r\n        errorAlert(\"Incorrect address\", \"The address provided does not match the address connected to Yoroi wallet\")\r\n    }\r\n    return null;\r\n}","import React from 'react';\r\nimport { decodeLong, decodeLongArray, decodeString } from '../ergo-related/serializer';\r\nimport { NANOERG_TO_ERG } from '../utils/constants';\r\nimport { burnGameTokenReserve } from '../ergo-related/admin_game';\r\n\r\n/* global BigInt */\r\n\r\n\r\nexport default class ReserveItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: props.name,\r\n            boxId: props.boxId,\r\n            tokenAmount: props.tokenAmount,\r\n            value: props.value,\r\n            identifier: props.identifier,\r\n            blobPrice: '0',\r\n            blobMintFee: '0',\r\n            blobPriceAndFee: props.blobPriceAndFee,\r\n        };\r\n        this.decodeName = this.decodeName.bind(this);\r\n        this.decodeIdentifier = this.decodeIdentifier.bind(this);\r\n        this.decodeBlobPriceAndFee = this.decodeBlobPriceAndFee.bind(this);\r\n    }\r\n\r\n    decodeName() {\r\n        decodeString(this.state.name)\r\n            .then(decodedName => {\r\n                this.setState({\r\n                    name: decodedName\r\n                })\r\n            })\r\n            .catch((error) => console.log(error));\r\n    }\r\n\r\n    decodeIdentifier() {\r\n        console.log(\"this.state.identifier\",this.state.identifier);\r\n        decodeLong(this.state.identifier)\r\n            .then(decodedidentifier => {\r\n                console.log(\"decodedidentifier\",decodedidentifier);\r\n                this.setState({\r\n                    identifier: decodedidentifier\r\n                })\r\n            })\r\n            .catch((error) => console.log(error));\r\n    }\r\n\r\n    decodeBlobPriceAndFee() {\r\n        decodeLongArray(this.state.blobPriceAndFee)\r\n            .then(decodedArray => {\r\n                this.setState({\r\n                    blobPrice: decodedArray[0],\r\n                    blobMintFee: decodedArray[1],\r\n                })\r\n            })\r\n            .catch((error) => console.log(error));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.decodeName();\r\n        this.decodeIdentifier();\r\n        this.decodeBlobPriceAndFee();\r\n    }\r\n\r\n    async burn(boxId) {\r\n        return await burnGameTokenReserve(boxId);\r\n    }\r\n\r\n    formatLongString(str) {\r\n        if (str.length > 30) {\r\n            return str.substring(0, 10) + \"...\" + str.substring(str.length - 10, str.length);\r\n        } else {\r\n            return str;\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n\r\n            <table className=\"m-1\" >\r\n                <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            Reserve name:\r\n                        </td>\r\n                        <td>\r\n                            {this.state.name}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            Box id:\r\n                        </td>\r\n                        <td>\r\n                            {this.formatLongString(this.state.boxId)}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            Token amount:\r\n                        </td>\r\n                        <td>\r\n                            {this.state.tokenAmount}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            Reserve value:\r\n                        </td>\r\n                        <td>\r\n                            {parseFloat(parseInt(this.state.value) / NANOERG_TO_ERG).toFixed(4)} ERG\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            Next blob id:\r\n                        </td>\r\n                        <td>\r\n                            {this.state.identifier}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            Blob price:\r\n                        </td>\r\n                        <td>\r\n                            {parseFloat(parseInt(this.state.blobPrice) / NANOERG_TO_ERG).toFixed(4)} ERG\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            Blob mint Fee:\r\n                        </td>\r\n                        <td>\r\n                            {parseFloat(parseInt(this.state.blobMintFee) / NANOERG_TO_ERG).toFixed(4)} ERG\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td></td>\r\n                        <td className=\"tdright\">\r\n                            <button className=\"btn btn-ultra-voilet\" onClick={() => this.burn(this.state.boxId)}>Burn reserve</button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n        )\r\n    }\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport { decodeHex, decodeLongArray } from '../ergo-related/serializer';\r\nimport { CONFIG_TOKEN_ID } from '../utils/constants';\r\nimport { boxByTokenId } from '../ergo-related/explorer'\r\nimport { getRegisterValue } from '../ergo-related/wasm';\r\n\r\n/* global BigInt */\r\n\r\nexport default class ConfigItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            boxId: '',\r\n            boxAddress: '',\r\n            blobScriptHash: '',\r\n            gameScriptHash: '',\r\n            blobExchangeFee: 0,\r\n            txFee: 0,\r\n            numOatmealLoser: 0,\r\n            numOatmealWinner: 0,\r\n        };\r\n    }\r\n\r\n    async getRegisterLongArray(box, register) {\r\n        var longArray = [];\r\n        try {\r\n            longArray = await decodeLongArray(getRegisterValue(box, register))\r\n        } catch (e) {\r\n            console.log(\"getRegisterLongArray\", e);\r\n        }\r\n        return longArray;\r\n    }\r\n\r\n    async getRegisterHex(box, register) {\r\n        var out = '';\r\n        try {\r\n            out = await decodeHex(getRegisterValue(box, register))\r\n        } catch (e) {\r\n            console.log(\"getRegisterString\", e);\r\n        }\r\n        return out;\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        //console.log(\"ConfigItem componentDidMount currentConfigBox\", currentConfigBox);\r\n        if (currentConfigBox.length > 0) {\r\n            const R4Str = await this.getRegisterHex(currentConfigBox[0], \"R4\");\r\n            const R5Str = await this.getRegisterHex(currentConfigBox[0], \"R5\");\r\n            const R6array = await this.getRegisterLongArray(currentConfigBox[0], \"R6\");\r\n\r\n            this.setState({\r\n                boxId: currentConfigBox[0].boxId ?? '',\r\n                boxAddress: currentConfigBox[0].address ?? '',\r\n                blobScriptHash: R4Str ?? '',\r\n                gameScriptHash: R5Str ?? '',\r\n                blobExchangeFee: R6array[0] ?? 0,\r\n                txFee: R6array[1] ?? 0,\r\n                numOatmealLoser: R6array[2] ?? 0,\r\n                numOatmealWinner: R6array[3] ?? 0,\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const currentBoxDisplay = {\r\n            \"Box id\": this.state.boxId,\r\n            \"Box address\": this.state.boxAddress,\r\n            \"Blob script hash\": this.state.blobScriptHash,\r\n            \"Game script hash\": this.state.gameScriptHash,\r\n            \"Blob exchange fee\": this.state.blobExchangeFee,\r\n            \"Transaction fee\": this.state.txFee,\r\n            \"Oatmeal for loser\": this.state.numOatmealLoser,\r\n            \"Oatmeal for winner\": this.state.numOatmealWinner,\r\n        };\r\n\r\n        return (\r\n            <Fragment>\r\n                <table className=\"m-1\" >\r\n                    <tbody>\r\n                        {\r\n                            Object.keys(currentBoxDisplay).map( key =>\r\n                                <tr key={key}>\r\n                                    <td>\r\n                                        {key}:\r\n                                    </td>\r\n                                    <td>\r\n                                        {currentBoxDisplay[key]}\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </Fragment>\r\n\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { burnOatmealReserve } from '../ergo-related/admin_game';\r\n\r\n/* global BigInt */\r\n\r\n\r\nexport default class OatmealReserveItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            boxId: props.boxId,\r\n            tokenAmount: props.tokenAmount,\r\n        };\r\n    }\r\n\r\n    async burn(boxId) {\r\n        return await burnOatmealReserve(boxId);\r\n    }\r\n\r\n    formatLongString(str) {\r\n        if (str.length > 30) {\r\n            return str.substring(0, 10) + \"...\" + str.substring(str.length - 10, str.length);\r\n        } else {\r\n            return str;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <table className=\"m-1\" >\r\n                <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            Box id:\r\n                        </td>\r\n                        <td>\r\n                            {this.formatLongString(this.state.boxId)}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            Token amount:\r\n                        </td>\r\n                        <td>\r\n                            {this.state.tokenAmount}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td></td>\r\n                        <td className=\"tdright\">\r\n                            <button className=\"btn btn-ultra-voilet\" onClick={() => this.burn(this.state.boxId)}>Burn reserve</button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n        )\r\n    }\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport { RESERVE_SCRIPT_ADDRESS, GAME_ADDRESS, GAME_TOKEN_ID, OATMEAL_RESERVE_SCRIPT_ADDRESS, OATMEAL_TOKEN_ID} from './utils/constants';\r\nimport {  getUnspentBoxesByAddress } from './ergo-related/explorer';\r\nimport ReserveItem from './components/ReserveItem';\r\nimport ConfigItem from './components/ConfigItem';\r\nimport OatmealReserveItem from './components/OatmealReserveItem';\r\nimport { mintGameTokenReserve, mintOatmealReserve, updateConfigurationBox } from './ergo-related/admin_game';\r\nimport { getRegisterValue, getTokenAmount } from './ergo-related/wasm';\r\n\r\n/* global ergo BigInt */\r\n\r\nexport default class Admin extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            address: localStorage.getItem('address'),\r\n            reserveName: '',\r\n            reserveTokenAmount: '100',\r\n            reserveIniIdentifier: '1',\r\n            oatmealReserveTokenAmount: '1000',\r\n            reserveList: [],\r\n            oatmealReserveList: [],\r\n            configList: [],\r\n        };\r\n        this.form = React.createRef();\r\n        this.formConf = React.createRef();\r\n        this.handleChangeReserveTokenAmount = this.handleChangeReserveTokenAmount.bind(this);\r\n        this.handleChangeReserveName = this.handleChangeReserveName.bind(this);\r\n        this.handleChangeReserveList = this.handleChangeReserveList.bind(this);\r\n        this.handleChangeIniIdentifier = this.handleChangeIniIdentifier.bind(this);\r\n        this.fetchReserves = this.fetchReserves.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.mintReserve = this.mintReserve.bind(this);\r\n        this.mintOatmealReserve = this.mintOReserve.bind(this);\r\n    }\r\n\r\n    handleChangeReserveTokenAmount(event) {\r\n        this.setState({ reserveTokenAmount: event.target.value });\r\n    }\r\n\r\n    handleChangeIniIdentifier(event) {\r\n        this.setState({ reserveIniIdentifier: event.target.value });\r\n    }\r\n\r\n    handleChangeReserveList(event) {\r\n        this.setState({ reserveList: event.target.id });\r\n    }\r\n\r\n    handleChangeReserveName(event) {\r\n        this.setState({ reserveName: event.target.value });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        if (this.form.current.reportValidity()) {\r\n            event.preventDefault();\r\n            this.mintReserve(this.state.reserveName, this.state.reserveTokenAmount, this.state.reserveIniIdentifier);\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            address: nextProps.address\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchReserves();\r\n    }\r\n\r\n    async fetchReserves() {\r\n        const reserveList = await getUnspentBoxesByAddress(RESERVE_SCRIPT_ADDRESS);\r\n        const oatmealReserveList = await getUnspentBoxesByAddress(OATMEAL_RESERVE_SCRIPT_ADDRESS);\r\n        console.log(\"reserveList\", reserveList, oatmealReserveList);\r\n        this.setState({\r\n            reserveList: reserveList,\r\n            oatmealReserveList: oatmealReserveList,\r\n        })\r\n\r\n    }\r\n\r\n    async updateConf() {\r\n        return await updateConfigurationBox();\r\n    }\r\n\r\n    async mintReserve(reserveName, reserveTokenAmount, reserveIniIdentifier) {\r\n        return await mintGameTokenReserve(reserveName, reserveTokenAmount, reserveIniIdentifier);\r\n    }\r\n\r\n    async mintOReserve(oatmealReserveTokenAmount) {\r\n        return await mintOatmealReserve(oatmealReserveTokenAmount);\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Fragment >\r\n                {\r\n                    this.state.address === GAME_ADDRESS ? null :\r\n                        <h4>This page is usable only by {GAME_ADDRESS}</h4>\r\n                }\r\n                <div className=\"w-100 content d-flex align-items-center flex-md-column p-2 m-2\">\r\n\r\n                    <div className=\"card zonecard w-50 p-2 d-flex align-items-center\">\r\n                        <h4>Create new token reserve</h4>\r\n                        <form ref={this.form} onSubmit={this.handleSubmit}  >\r\n                            <table>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td>\r\n                                            <label htmlFor=\"reservename\">Reserve name</label>\r\n                                        </td>\r\n                                        <td>\r\n                                            <input className=\"form-control\"\r\n                                                type=\"text\"\r\n                                                id=\"reservename\"\r\n                                                pattern=\"[a-zA-Z0-9 _]{1,15}\"\r\n                                                required\r\n                                                value={this.state.reserveName}\r\n                                                onChange={this.handleChangeReserveName}\r\n                                            />\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>\r\n                                            <label htmlFor=\"reservetokenamount\">Token amount</label>\r\n                                        </td>\r\n                                        <td>\r\n                                            <input className=\"form-control\"\r\n                                                type=\"text\"\r\n                                                id=\"reservetokenamount\"\r\n                                                pattern=\"[0-9]+\"\r\n                                                required\r\n                                                value={this.state.reserveTokenAmount}\r\n                                                onChange={this.handleChangeReserveTokenAmount}\r\n                                            />\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>\r\n                                            <label htmlFor=\"reserveidentifier\">Initial blob id</label>\r\n                                        </td>\r\n                                        <td>\r\n                                            <input className=\"form-control\"\r\n                                                type=\"text\"\r\n                                                id=\"reserveidentifier\"\r\n                                                pattern=\"[0-9]+\"\r\n                                                required\r\n                                                value={this.state.reserveIniIdentifier}\r\n                                                onChange={this.handleChangeIniIdentifier}\r\n                                            />\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td className=\"tdright\">\r\n                                            <input className=\"btn btn-ultra-voilet\" type=\"submit\" value=\"Mint reserve\" />\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </form>\r\n                    </div>\r\n                    <br />\r\n\r\n                    <div className=\"w-50 \">\r\n                        <h4>Available token reserves</h4>\r\n                        <ul >\r\n                            {this.state.reserveList.map(item => (\r\n                                <li key={item.boxId} className=\"card zonecard m-2\">\r\n                                    <ReserveItem\r\n                                        boxId={item.boxId}\r\n                                        name={getRegisterValue(item, \"R4\")}\r\n                                        tokenAmount={getTokenAmount(item, GAME_TOKEN_ID)}\r\n                                        value={item.value}\r\n                                        identifier={getRegisterValue(item, \"R7\")}\r\n                                        blobPriceAndFee={getRegisterValue(item, \"R6\")}\r\n                                    />\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div className=\"zonecard w-50\">\r\n                        <h4>Create new oatmeal reserve</h4>\r\n\r\n                        <table>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td>\r\n                                        <label htmlFor=\"reservetokenamount\">Token amount</label>\r\n                                    </td>\r\n                                    <td>\r\n                                        <input className=\"form-control\"\r\n                                            type=\"text\"\r\n                                            id=\"reservetokenamount\"\r\n                                            pattern=\"[0-9]+\"\r\n                                            required\r\n                                            value={this.state.oatmealReserveTokenAmount}\r\n                                            onChange={this.handleChangeOatmealReserveTokenAmount}\r\n                                        />\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                    </td>\r\n                                    <td className=\"tdright\">\r\n                                        <button className=\"btn btn-ultra-voilet\" onClick={() => this.mintOReserve(this.state.oatmealReserveTokenAmount)} >Mint oatmeal reserve</button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n                    </div>\r\n\r\n                    <div className=\"w-50 \">\r\n                        <h4>Available oatmeal reserves</h4>\r\n                        <ul >\r\n                            {this.state.oatmealReserveList.map(item => (\r\n                                <li key={item.boxId} className=\"card zonecard m-2\">\r\n                                    <OatmealReserveItem\r\n                                        boxId={item.boxId}\r\n                                        tokenAmount={getTokenAmount(item, OATMEAL_TOKEN_ID)}\r\n                                    />\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div className=\"card zonecard p-2 d-flex align-items-center\">\r\n                        <h4>Current game configuration</h4>\r\n                        <ConfigItem />\r\n                    </div>\r\n\r\n                    <div className=\"card zonecard w-50 p-2 m-2 d-flex align-items-center\">\r\n                        <h4>Update configuration</h4>\r\n                        <table>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td className=\"tdright\">\r\n                                        <input className=\"btn btn-ultra-voilet\" type=\"submit\" value=\"Update configuration\" onClick={this.updateConf} />\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n","export default __webpack_public_path__ + \"static/media/illustration_blob_reduced.7b1130ee.png\";","import React, { Fragment } from 'react';\r\nimport MainImage from \"./images/illustration_blob_reduced.png\";\r\n\r\nexport default class Home extends React.Component {\r\n    render() {\r\n       return (\r\n           <Fragment>\r\n               <h5>Blob fighters on the Ergo blockchain</h5>\r\n               <img src={MainImage} />\r\n           </Fragment>\r\n               )\r\n               }\r\n}\r\n\r\n","\r\n\r\n\r\n\r\nexport default function InputAddress(props) {\r\n\r\n    return (\r\n        <div>\r\n                <label htmlFor=\"ref\" >ERG address</label>\r\n                \r\n                <input className=\"form-control\" id=\"ref\" pattern=\"[a-zA-Z0-9]*\" onChange={e => props.setAddress(e.target.value)} value={props.address}/>\r\n\r\n            \r\n        </div>\r\n    )\r\n}","import { Navbar, Nav } from 'react-bootstrap';\r\nimport Logo from \"../images/blobstopia.png\";\r\nimport InputAddress from './InputAddress';\r\n\r\nfunction NavigationBar(props) {\r\n    return (\r\n        <Navbar expand=\"lg\" variant=\"dark\" className=\"sticky-top w-100 color-nav\">\r\n            <Navbar.Brand href=\"/\">\r\n            <img src={Logo} />\r\n            </Navbar.Brand>\r\n\r\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n            <Navbar.Collapse id=\"basic-navbar-nav\">\r\n                <Nav className=\"mr-auto\">\r\n                    <Nav.Link href=\"/\">Home</Nav.Link>\r\n                    <Nav.Link href=\"/create\">New Blob</Nav.Link>\r\n                    <Nav.Link href=\"/myblobs\">My Blobs</Nav.Link>\r\n                    <Nav.Link href=\"/blobsshop\">Blobs shop</Nav.Link>\r\n                    <Nav.Link href=\"/matchmaking\">Match making</Nav.Link>\r\n                    <Nav.Link href=\"/fights\">Figths</Nav.Link>\r\n                    <Nav.Link href=\"/admin\">Admin</Nav.Link>\r\n                </Nav>\r\n\r\n            </Navbar.Collapse>\r\n            <InputAddress address={props.address} setAddress={props.setAddress}/>\r\n        </Navbar>\r\n    );\r\n}\r\nexport default NavigationBar;","export default \"data:image/png;base64,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\"","\r\nexport default function Footer() {\r\n    return (\r\n\r\n        <div className=\"footer w-100\">Footer</div>\r\n\r\n    )\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport { BLOB_SCRIPT_ADDRESS } from './utils/constants';\r\nimport { getSpentAndUnspentBoxesFromMempool, getUnspentBoxesForAddressUpdated, getUnspentBoxesByAddress } from './ergo-related/explorer';\r\nimport BlobItem from './components/BlobItem';\r\nimport { toHexString } from './ergo-related/serializer';\r\nimport { getUnspentBlobs } from './ergo-related/blob';\r\n\r\n\r\nexport default class BlobsShopPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            address: localStorage.getItem('address'),\r\n            blobList: [],\r\n        };\r\n        this.handleChangeBlobList = this.handleChangeBlobList.bind(this);\r\n        this.fetchBlobs = this.fetchBlobs.bind(this);\r\n    }\r\n\r\n    handleChangeBlobList(event) {\r\n        this.setState({ blobList: event.target.id });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            address: nextProps.address\r\n        });\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.fetchBlobs();\r\n    }\r\n\r\n    async fetchBlobs() {\r\n        const blobBoxes = await getUnspentBoxesForAddressUpdated(BLOB_SCRIPT_ADDRESS);\r\n        console.log(\"fetchBlobs blobBoxes\",blobBoxes)\r\n        var blobList = [];\r\n        for (const box of blobBoxes) {\r\n            try {\r\n                console.log(\"box.additionalRegisters.R6\", box.additionalRegisters.R7)\r\n                const blobState = box.additionalRegisters.R7.renderedValue;\r\n                if (blobState === '2') {\r\n                    blobList.push(box);\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchBlobs\", e)\r\n            }\r\n\r\n        }\r\n        console.log(\"blobList\",blobList);\r\n        this.setState({\r\n            blobList: blobList\r\n        })\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n            <Fragment >\r\n                <br />\r\n                {\r\n                    this.state.blobList.length > 0 ? \r\n<h5>\r\n                    Blobs for sale\r\n                </h5>\r\n                :\r\n                <h5>\r\n                    No blob for sale\r\n                </h5>\r\n                }\r\n                \r\n                <div className=\"w-75 d-flex flex-wrap\">\r\n                        {this.state.blobList.map(item => (\r\n                                <BlobItem\r\n                                    key={item.boxId}\r\n                                    blobBoxJSON={item}\r\n                                    updateList={this.fetchBlobs}\r\n                                />\r\n                        ))}\r\n\r\n                </div>\r\n                <br />\r\n            </Fragment>\r\n        )\r\n    }\r\n}","import { BlobEyes } from './BlobEyes'\r\n\r\nexport default function EyesPickerItem(props) {\r\n    const pos_eyes_x = 20;\r\n    const pos_eyes_y = 25;\r\n    const eyes_dist = 30;\r\n\r\n    return (\r\n\r\n        <label className=\"radio-inline m-0\" >\r\n            <div className=\"card m-1\" >\r\n                <input type=\"radio\" name=\"eyes-item\" value={props.value} checked={props.selected} onChange={props.onChange} />\r\n                <div className=\"shape\">\r\n                    <svg width=\"70px\" height=\"50px\" viewBox=\"0 0 70 50\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\r\n                        <BlobEyes eyes_pos={props.value}\r\n                            pos_eyes_x={pos_eyes_x}\r\n                            pos_eyes_y={pos_eyes_y}\r\n                            eyes_dist={eyes_dist}\r\n                        />\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </label>\r\n\r\n    )\r\n}\r\n","import EyesPickerItem from './EyesPickerItem'\r\n\r\nexport default function EyesPicker(props) {\r\n    return (\r\n        <tr>\r\n            <td>\r\n                <label htmlFor=\"ref\">Eyes</label>\r\n            </td>\r\n            <td>\r\n                <EyesPickerItem value=\"1\" onChange={props.onChange} selected={props.selected === \"1\"} />\r\n                <EyesPickerItem value=\"2\" onChange={props.onChange} selected={props.selected === \"2\"} />\r\n                <EyesPickerItem value=\"3\" onChange={props.onChange} selected={props.selected === \"3\"} />\r\n                <EyesPickerItem value=\"4\" onChange={props.onChange} selected={props.selected === \"4\"} />\r\n                <EyesPickerItem value=\"5\" onChange={props.onChange} selected={props.selected === \"5\"} />\r\n            </td>\r\n        </tr>\r\n    )\r\n}\r\n","\r\nimport { BlobMouth } from \"./BlobMouth\";\r\n\r\nexport default function EyesPickerItem(props) {\r\n    const pos_eyes_x = 20;\r\n    const pos_eyes_y = 7;\r\n    const eyes_dist = 30;\r\n\r\n    return (\r\n\r\n        <label className=\"radio-inline m-0\" >\r\n            <div className=\"card m-1\" >\r\n                <input type=\"radio\" name=\"mouth-item\" value={props.value} checked={props.selected} onChange={props.onChange} />\r\n                <div className=\"shape\">\r\n                    <svg width=\"70px\" height=\"50px\" viewBox=\"0 0 70 50\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\r\n                    <BlobMouth\r\n                            mouth_type={props.value}\r\n                            pos_eyes_x={pos_eyes_x}\r\n                            pos_eyes_y={pos_eyes_y}\r\n                            eyes_dist={eyes_dist}\r\n                            />\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </label>\r\n    )\r\n}\r\n","import MouthPickerItem from './MouthPickerItem'\r\n\r\nexport default function MouthPicker(props) {\r\n    return (\r\n        <tr>\r\n            <td>\r\n                <label htmlFor=\"ref\">Mouth</label>\r\n            </td>\r\n            <td>\r\n                <MouthPickerItem value=\"1\" onChange={props.onChange} selected={props.selected === \"1\"} />\r\n                <MouthPickerItem value=\"2\" onChange={props.onChange} selected={props.selected === \"2\"} />\r\n                <MouthPickerItem value=\"3\" onChange={props.onChange} selected={props.selected === \"3\"} />\r\n                <MouthPickerItem value=\"4\" onChange={props.onChange} selected={props.selected === \"4\"} />\r\n                <MouthPickerItem value=\"5\" onChange={props.onChange} selected={props.selected === \"5\"} />\r\n            </td>\r\n        </tr>\r\n    )\r\n}\r\n","\r\n\r\n\r\n\r\nexport default function InputName(props) {\r\n    return (\r\n        <tr>\r\n            <td>\r\n                <label htmlFor=\"ref\" >Name</label>\r\n            </td>\r\n            <td>\r\n                <input className=\"form-control\" id=\"ref\" pattern=\"[ -~]{0,15}\" onChange={props.onChange} value={props.name} />\r\n            </td>\r\n        </tr>\r\n    )\r\n}","import React from 'react';\r\nimport ErgBlob from './ErgBlob';\r\nimport { SketchPicker } from 'react-color'\r\nimport reactCSS from 'reactcss'\r\nimport EyesPicker from './EyesPicker';\r\nimport MouthPicker from './MouthPicker';\r\nimport InputName from './InputName';\r\nimport { getRandomColor, getRandomInt, getRandomBlobShape } from '../utils/svgUtils';\r\nimport { NANOERG_TO_ERG, BLOB_PRICE, BLOB_MINT_FEE, TX_FEE } from '../utils/constants';\r\nimport { createBlobRequest } from '../ergo-related/blob';\r\n\r\nclass BlobEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showPicker1: false,\r\n            showPicker2: false,\r\n            path: getRandomBlobShape(),\r\n            color1: getRandomColor(),\r\n            color2: getRandomColor(),\r\n            eyes_pos: getRandomInt(1, 5).toString(),\r\n            mouth_type: getRandomInt(1, 4).toString(),\r\n            name: \"Choose me a name\"\r\n        };\r\n        this.onChange1 = this.onChange1.bind(this);\r\n        this.onChange2 = this.onChange2.bind(this);\r\n        this.onChangeEyes = this.onChangeEyes.bind(this);\r\n        this.onChangeName = this.onChangeName.bind(this);\r\n        this.onChangeMouth = this.onChangeMouth.bind(this);\r\n    }\r\n\r\n    onClick1 = () => {\r\n        this.setState({\r\n            showPicker1: !this.state.showPicker1\r\n        })\r\n    };\r\n\r\n    onClick2 = () => {\r\n        this.setState({\r\n            showPicker2: !this.state.showPicker2\r\n        })\r\n    };\r\n\r\n    onClose = () => {\r\n        this.setState({\r\n            showPicker1: false,\r\n            showPicker2: false\r\n        })\r\n    };\r\n\r\n    onChange1 = (color) => {\r\n        this.setState({\r\n            color1: color.hex\r\n        });\r\n        console.log(\"onChange1\");\r\n    };\r\n\r\n    onChange2 = (color) => {\r\n        this.setState({\r\n            color2: color.hex\r\n        });\r\n        console.log(\"onChange2\");\r\n    };\r\n\r\n    onChangeEyes = (e) => {\r\n        this.setState({\r\n            eyes_pos: e.target.value\r\n        });\r\n    };\r\n\r\n    onChangeMouth = (e) => {\r\n        this.setState({\r\n            mouth_type: e.target.value\r\n        });\r\n        console.log(\"onChangeMouth\", e);\r\n    };\r\n\r\n    onChangeName = (e) => {\r\n        this.setState({\r\n            name: e.target.value\r\n        });\r\n        console.log(\"onChangeName\", e);\r\n    };\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            address: nextProps.address\r\n        });\r\n    }\r\n\r\n    async mintBlob(name, color1, color2, eyes_pos, mouth_type, svgPath) {\r\n        return await createBlobRequest(name, color1, color2, eyes_pos, mouth_type, svgPath);\r\n    }\r\n\r\n    render() {\r\n        const styles = reactCSS({\r\n            'default': {\r\n                color1: {\r\n                    width: '40px',\r\n                    height: '15px',\r\n                    borderRadius: '3px',\r\n                    background: `${this.state.color1}`,\r\n                },\r\n                color2: {\r\n                    width: '40px',\r\n                    height: '15px',\r\n                    borderRadius: '3px',\r\n                    background: `${this.state.color2}`,\r\n                },\r\n                popover: {\r\n                    position: 'absolute',\r\n                    zIndex: '3',\r\n                },\r\n                cover: {\r\n                    position: 'fixed',\r\n                    top: '0px',\r\n                    right: '0px',\r\n                    bottom: '0px',\r\n                    left: '0px',\r\n                },\r\n                swatch: {\r\n                    padding: '6px',\r\n                    background: '#ffffff',\r\n                    borderRadius: '2px',\r\n                    cursor: 'pointer',\r\n                    display: 'inline-block',\r\n                    boxShadow: '0 0 0 1px rgba(0,0,0,.2)',\r\n                },\r\n            },\r\n        });\r\n\r\n        return (\r\n            <div className=\"container-sm w-75 \">\r\n                <br />\r\n\r\n                <div className=\"row w-100 justify-content-center\">\r\n                    <div className=\"container-sm w-25 m-2 p-2\" >\r\n                        <ErgBlob\r\n                            color1={this.state.color1}\r\n                            color2={this.state.color2}\r\n                            path={this.state.path}\r\n                            eyes_pos={this.state.eyes_pos}\r\n                            mouth_type={this.state.mouth_type}\r\n                            name={this.state.name}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card zonecard w-100 p-2\">\r\n                    <table>\r\n                        <tbody>\r\n                            <InputName\r\n                                onChange={this.onChangeName}\r\n                                value={this.state.name} />\r\n                            <tr>\r\n                                <td>\r\n                                    <label htmlFor=\"color1\">Color top</label>\r\n                                </td>\r\n                                <td>\r\n                                    <div style={styles.swatch} onClick={this.onClick1}>\r\n                                        <div style={styles.color1} />\r\n                                    </div>\r\n                                    {this.state.showPicker1 ? <div style={styles.popover} >\r\n                                        <div style={styles.cover} onClick={this.onClose} />\r\n                                        <SketchPicker id=\"color1\" color={this.state.color1} onChange={this.onChange1} />\r\n                                    </div> : null}\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td>\r\n                                    <label htmlFor=\"color2\">Color bottom</label>\r\n                                </td>\r\n                                <td>\r\n                                    <div style={styles.swatch} onClick={this.onClick2}>\r\n                                        <div style={styles.color2} />\r\n                                    </div>\r\n                                    {this.state.showPicker2 ? <div style={styles.popover}>\r\n                                        <div style={styles.cover} onClick={this.onClose} />\r\n                                        <SketchPicker id=\"color2\" color={this.state.color2} onChange={this.onChange2} />\r\n                                    </div> : null}\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <EyesPicker selected={this.state.eyes_pos} onChange={this.onChangeEyes} />\r\n\r\n                            <MouthPicker selected={this.state.mouth_type} onChange={this.onChangeMouth} />\r\n\r\n                            <tr>\r\n                                <td>\r\n                                    &nbsp;\r\n                                </td>\r\n                                <td >\r\n                                    <button className=\"btn btn-ultra-blue\"\r\n                                        onClick={(e) => {\r\n                                            this.setState({\r\n                                                path: getRandomBlobShape(),\r\n                                                color1: getRandomColor(),\r\n                                                color2: getRandomColor(),\r\n                                                eyes_pos: getRandomInt(1, 5).toString(),\r\n                                                mouth_type: getRandomInt(1, 4).toString(),\r\n                                                name: this.state.name\r\n                                            })\r\n                                        }}>\r\n                                        Random Blob\r\n                                    </button>\r\n                                    &nbsp;\r\n                                    <button className=\"btn btn-ultra-blue\"\r\n                                        onClick={(e) => {\r\n                                            this.setState({\r\n                                                path: getRandomBlobShape(),\r\n                                            })\r\n                                        }}>\r\n                                        Random Shape\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    &nbsp;\r\n                                </td>\r\n                                <td >\r\n                                    <button className=\"btn btn-ultra-voilet\"\r\n                                        onClick={() => this.mintBlob(\r\n                                            this.state.name.trim(),\r\n                                            this.state.color1,\r\n                                            this.state.color2,\r\n                                            this.state.eyes_pos,\r\n                                            this.state.mouth_type,\r\n                                            this.state.path\r\n                                        )}\r\n                                        disabled={this.state.name === \"Choose me a name\" || this.state.name.trim().length < 3}\r\n                                    >\r\n                                        Mint this Blob ({(BLOB_PRICE/NANOERG_TO_ERG).toFixed(4)} ERG)*\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    &nbsp;\r\n                                </td>\r\n                                <td >\r\n                                    <h6>* dApp Mint fee {(BLOB_MINT_FEE/NANOERG_TO_ERG).toFixed(4)} ERG</h6>\r\n                                    <h6>&nbsp;&nbsp;Miner fee {(TX_FEE/NANOERG_TO_ERG).toFixed(4)} ERG</h6>\r\n                                    <h6>&nbsp;&nbsp;Blob credited with {((BLOB_PRICE - BLOB_MINT_FEE - TX_FEE)/NANOERG_TO_ERG).toFixed(4)} ERG</h6>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BlobEditor","import JSONBigInt from 'json-bigint';\r\nimport { BLOB_MINT_FEE, BLOB_SCRIPT_ADDRESS, GAME_ADDRESS, GAME_SCRIPT_ADDRESS, GAME_TOKEN_ID, MIN_NANOERG_BOX_VALUE, NUM_OATMEAL_TOKEN_LOSER, NUM_OATMEAL_TOKEN_WINNER, OATMEAL_RESERVE_SCRIPT_ADDRESS, OATMEAL_TOKEN_ID, RESERVE_SCRIPT_ADDRESS, TX_FEE } from '../utils/constants.js';\r\nimport { currentHeight, getMempoolUnspentBoxesByAddresses, sendTx } from './explorer.js';\r\nimport { encodeLong, encodeLongArray } from './serializer.js';\r\nimport { createTransaction, signTransaction, signTransactionMultiContext } from './wasm.js';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n\r\nexport async function processBlobRequest(blobRequestJSON, currentReserveBox, currentConfigBox) {\r\n    try {\r\n        const wallet = (await ergolib).Wallet.from_mnemonic(\"\", \"\");\r\n        const creationHeight = await currentHeight();\r\n        const reserveIniWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(currentReserveBox));\r\n        const reserveIniTokenAmount = reserveIniWASM.tokens().get(0).amount().as_i64().as_num();\r\n        const newReserveTokenAmount = reserveIniTokenAmount - 2;\r\n        const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n        const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n        const inputs = [blobRequestJSON, currentReserveBox];\r\n        const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n        const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n        const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n        const boxWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blobRequestJSON));\r\n\r\n        const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n        // MINT BLOB BOX\r\n        const blobAmountNano = blobRequestJSON.value - BLOB_MINT_FEE - TX_FEE;\r\n        const blobboxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blobAmountNano.toString()));\r\n        const blobBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            blobboxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        blobBoxBuilder.set_register_value(4, boxWASM.register_value(4))\r\n        blobBoxBuilder.set_register_value(5, reserveIniWASM.register_value(5))\r\n        blobBoxBuilder.set_register_value(6, boxWASM.register_value(5))\r\n        blobBoxBuilder.set_register_value(7, (await encodeLong('0')))\r\n        blobBoxBuilder.set_register_value(8, (await encodeLong('0')))\r\n        blobBoxBuilder.set_register_value(9, reserveIniWASM.register_value(7))\r\n        blobBoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n        try {\r\n            outputCandidates.add(blobBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`processBlobRequests building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        // NEW RESERVE BOX\r\n        const newReserveTokenAmountWASM = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(newReserveTokenAmount.toString()));\r\n        const reserveValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(MIN_NANOERG_BOX_VALUE.toString()));\r\n        const reserveBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            reserveValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(RESERVE_SCRIPT_ADDRESS)),\r\n            creationHeight);\r\n        reserveBoxBuilder.set_register_value(4, reserveIniWASM.register_value(4));\r\n        reserveBoxBuilder.set_register_value(5, reserveIniWASM.register_value(5));\r\n        reserveBoxBuilder.set_register_value(6, reserveIniWASM.register_value(6));\r\n        const nextIdentifier = parseInt(reserveIniWASM.register_value(7).to_i64().to_str()) + 1;\r\n        reserveBoxBuilder.set_register_value(7, (await encodeLong(nextIdentifier.toString())));\r\n        reserveBoxBuilder.add_token(gameTokenId, newReserveTokenAmountWASM);\r\n        try {\r\n            outputCandidates.add(reserveBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`processBlobRequests building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        // DAPP MINT FEE\r\n        const mintFeeValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(BLOB_MINT_FEE.toString()));\r\n        const mintFeeBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            mintFeeValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(GAME_ADDRESS)),\r\n            creationHeight);\r\n        try {\r\n            outputCandidates.add(mintFeeBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`processBlobRequests building error: ${e}`);\r\n            throw e;\r\n        }\r\n\r\n        const tx = await createTransaction(boxSelection, outputCandidates, [currentConfigBox], GAME_ADDRESS, inputs);\r\n        //console.log(\"processBlobRequests signedTx\", JSONBigInt.stringify(tx));\r\n        const signedTx = JSONBigInt.parse(await signTransaction(tx, inputs, [currentConfigBox], wallet));\r\n        //console.log(\"processBlobRequests signedTx\", signedTx);\r\n        const txId = await sendTx(signedTx);\r\n        console.log(\"processBlobRequests txId\", txId);\r\n        return txId;\r\n        \r\n        \r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nexport async function engageFight(blob1, blob2, currentReserveBox, currentConfigBox) {\r\n    const wallet = (await ergolib).Wallet.from_mnemonic(\"\", \"\");\r\n    const creationHeight = await currentHeight();\r\n    const reserveIniWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(currentReserveBox));\r\n    const reserveIniTokenAmount = reserveIniWASM.tokens().get(0).amount().as_i64().as_num();\r\n    const newReserveTokenAmount = reserveIniTokenAmount - NUM_OATMEAL_TOKEN_LOSER - NUM_OATMEAL_TOKEN_WINNER;\r\n\r\n    const fightAmount = parseInt(blob1.additionalRegisters.R8.renderedValue)\r\n    const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n    const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"1\"));\r\n\r\n    const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n    // BLOB1 BOX\r\n    const blob1BoxWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blob1));\r\n\r\n    const blob1AmountNano = blob1.value - fightAmount;\r\n    const blob1boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blob1AmountNano.toString()));\r\n    const blob1BoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        blob1boxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n        creationHeight);\r\n    blob1BoxBuilder.set_register_value(4, blob1BoxWASM.register_value(4))\r\n    blob1BoxBuilder.set_register_value(5, blob1BoxWASM.register_value(5))\r\n    blob1BoxBuilder.set_register_value(6, blob1BoxWASM.register_value(6))\r\n    blob1BoxBuilder.set_register_value(7, (await encodeLong('3')))\r\n    blob1BoxBuilder.set_register_value(8, blob1BoxWASM.register_value(8))\r\n    blob1BoxBuilder.set_register_value(9, blob1BoxWASM.register_value(9))\r\n    blob1BoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n    try {\r\n        outputCandidates.add(blob1BoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n\r\n    // BLOB2 BOX\r\n    const blob2BoxWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blob2));\r\n    const blob2AmountNano = blob2.value - fightAmount;\r\n    const blob2boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blob2AmountNano.toString()));\r\n    const blob2BoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        blob2boxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n        creationHeight);\r\n    blob2BoxBuilder.set_register_value(4, blob2BoxWASM.register_value(4))\r\n    blob2BoxBuilder.set_register_value(5, blob2BoxWASM.register_value(5))\r\n    blob2BoxBuilder.set_register_value(6, blob2BoxWASM.register_value(6))\r\n    blob2BoxBuilder.set_register_value(7, (await encodeLong('3')))\r\n    blob2BoxBuilder.set_register_value(8, blob2BoxWASM.register_value(8))\r\n    blob2BoxBuilder.set_register_value(9, blob2BoxWASM.register_value(9))\r\n    blob2BoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n    try {\r\n        outputCandidates.add(blob2BoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n\r\n    // GAME BOX\r\n    const gameAmountNano = 2 * fightAmount - TX_FEE;\r\n    const gameBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(gameAmountNano.toString()));\r\n    const gameTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n    const gameBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        gameBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(GAME_SCRIPT_ADDRESS)),\r\n        creationHeight);\r\n    gameBoxBuilder.set_register_value(4, blob1BoxWASM.register_value(6))\r\n    gameBoxBuilder.set_register_value(5, blob1BoxWASM.register_value(9))\r\n    gameBoxBuilder.set_register_value(6, blob1BoxWASM.register_value(5))\r\n    gameBoxBuilder.set_register_value(7, blob2BoxWASM.register_value(6))\r\n    gameBoxBuilder.set_register_value(8, blob2BoxWASM.register_value(9))\r\n    gameBoxBuilder.set_register_value(9, blob2BoxWASM.register_value(5))\r\n    gameBoxBuilder.add_token(gameTokenId, gameTokenAmount);\r\n    const oatmealTokenId = (await ergolib).TokenId.from_str(OATMEAL_TOKEN_ID);\r\n    const oatmealTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str((NUM_OATMEAL_TOKEN_LOSER + NUM_OATMEAL_TOKEN_WINNER).toString()));\r\n    gameBoxBuilder.add_token(oatmealTokenId, oatmealTokenAmount);\r\n    try {\r\n        outputCandidates.add(gameBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n\r\n    // OATMEAL RESERVE BOX\r\n    const newReserveTokenAmountWASM = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(newReserveTokenAmount.toString()));\r\n    const reserveValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(MIN_NANOERG_BOX_VALUE.toString()));\r\n    const reserveBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        reserveValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(OATMEAL_RESERVE_SCRIPT_ADDRESS)),\r\n        creationHeight);\r\n    reserveBoxBuilder.add_token(oatmealTokenId, newReserveTokenAmountWASM);\r\n    try {\r\n        outputCandidates.add(reserveBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`processBlobRequests building error: ${e}`);\r\n        throw e;\r\n    }\r\n\r\n    // prepate tx inputs\r\n    var inputs = [blob1, blob2, currentReserveBox];\r\n    const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n    const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n\r\n    const tx = await createTransaction(boxSelection, outputCandidates, [currentConfigBox], GAME_ADDRESS, inputs);\r\n    //console.log(\"tx\", JSONBigInt.stringify(tx) );\r\n    const signedTx = JSONBigInt.parse(await signTransaction(tx, inputs, [currentConfigBox], wallet));\r\n    //console.log(\"signedTx\", signedTx);\r\n    const txId = await sendTx(signedTx);\r\n    console.log(\"txId\", txId);\r\n    return signedTx;\r\n}\r\n\r\nexport async function processFightResult(blob1, blob2, gameBox, currentConfigBox) {\r\n    console.log(\"FIGHT RESULT : \" + blob1.boxId + \" vs \" + blob2.boxId)\r\n    const gameAmount = parseInt(blob1.additionalRegisters.R8.renderedValue);\r\n    console.log(\"gameAmount: \", gameBox, gameAmount);\r\n    const wallet = (await ergolib).Wallet.from_mnemonic(\"\", \"\");\r\n    const creationHeight = await currentHeight();\r\n    const gameTokenId = (await ergolib).TokenId.from_str(GAME_TOKEN_ID);\r\n    const blobTokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(\"2\"));\r\n    var winningTx = [];\r\n    for (let i = 0; i < 2; i++) {\r\n        try {\r\n            var blob1AmountNano = blob1.value;\r\n            var blob2AmountNano = blob2.value;\r\n            var p1InfoArray = JSON.parse(gameBox.additionalRegisters.R6.renderedValue)\r\n            var p2InfoArray = JSON.parse(gameBox.additionalRegisters.R9.renderedValue)\r\n            var p1OatmealAmount = undefined;\r\n            var p2OatmealAmount = undefined;\r\n\r\n            // increase victory\r\n            if (i === 0) {\r\n                console.log(\"P1 win\");\r\n                blob1AmountNano = blob1.value + 2 * gameAmount - 2 * TX_FEE - 2 * MIN_NANOERG_BOX_VALUE;\r\n                p1InfoArray[3] = p1InfoArray[3] + 1;\r\n                p1OatmealAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str((NUM_OATMEAL_TOKEN_WINNER).toString()));\r\n                p2OatmealAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str((NUM_OATMEAL_TOKEN_LOSER).toString()));\r\n            } else if (i === 1) {\r\n                console.log(\"P2 win\");\r\n                blob2AmountNano = blob2.value + 2 * gameAmount - 2 * TX_FEE - 2 * MIN_NANOERG_BOX_VALUE;\r\n                p2InfoArray[3] = p2InfoArray[3] + 1;\r\n                p1OatmealAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str((NUM_OATMEAL_TOKEN_LOSER).toString()));\r\n                p2OatmealAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str((NUM_OATMEAL_TOKEN_WINNER).toString()));\r\n            }\r\n            p1InfoArray[2] = p1InfoArray[2] + 1;\r\n            p2InfoArray[2] = p2InfoArray[2] + 1;\r\n\r\n            const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n            // BLOB1 BOX\r\n            const blob1BoxWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blob1));\r\n\r\n            //const \r\n            const blob1boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blob1AmountNano.toString()));\r\n            const blob1BoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n                blob1boxValue,\r\n                (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n                creationHeight);\r\n            blob1BoxBuilder.set_register_value(4, blob1BoxWASM.register_value(4))\r\n            blob1BoxBuilder.set_register_value(5, await encodeLongArray(p1InfoArray))\r\n            blob1BoxBuilder.set_register_value(6, blob1BoxWASM.register_value(6))\r\n            blob1BoxBuilder.set_register_value(7, (await encodeLong('0')))\r\n            blob1BoxBuilder.set_register_value(8, (await encodeLong('0')))\r\n            blob1BoxBuilder.set_register_value(9, blob1BoxWASM.register_value(9))\r\n            blob1BoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n            try {\r\n                outputCandidates.add(blob1BoxBuilder.build());\r\n            } catch (e) {\r\n                console.log(`building error: ${e}`);\r\n                throw e;\r\n            }\r\n\r\n            // BLOB2 BOX\r\n            const blob2BoxWASM = (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(blob2));\r\n            const blob2boxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(blob2AmountNano.toString()));\r\n            const blob2BoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n                blob2boxValue,\r\n                (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(BLOB_SCRIPT_ADDRESS)),\r\n                creationHeight);\r\n            blob2BoxBuilder.set_register_value(4, blob2BoxWASM.register_value(4))\r\n            blob2BoxBuilder.set_register_value(5, await encodeLongArray(p2InfoArray))\r\n            blob2BoxBuilder.set_register_value(6, blob2BoxWASM.register_value(6))\r\n            blob2BoxBuilder.set_register_value(7, (await encodeLong('0')))\r\n            blob2BoxBuilder.set_register_value(8, (await encodeLong('0')))\r\n            blob2BoxBuilder.set_register_value(9, blob2BoxWASM.register_value(9))\r\n            blob2BoxBuilder.add_token(gameTokenId, blobTokenAmount);\r\n            try {\r\n                outputCandidates.add(blob2BoxBuilder.build());\r\n            } catch (e) {\r\n                console.log(`building error: ${e}`);\r\n                throw e;\r\n            }\r\n\r\n            const oatmealTokenId = (await ergolib).TokenId.from_str(OATMEAL_TOKEN_ID);\r\n            const oatmealBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(MIN_NANOERG_BOX_VALUE.toString()));\r\n            // P1 oatmeal box\r\n            const p1Script = blob1BoxWASM.register_value(6).encode_to_base16();\r\n            const p1Address = (await ergolib).Address.recreate_from_ergo_tree((await ergolib).ErgoTree.from_base16_bytes(\"00\" + p1Script));\r\n            const oatmeal1BoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n                oatmealBoxValue,\r\n                (await ergolib).Contract.pay_to_address(p1Address),\r\n                creationHeight);\r\n            oatmeal1BoxBuilder.add_token(oatmealTokenId, p1OatmealAmount);\r\n            try {\r\n                outputCandidates.add(oatmeal1BoxBuilder.build());\r\n            } catch (e) {\r\n                console.log(`building error: ${e}`);\r\n                throw e;\r\n            }\r\n\r\n            // P2 oatmeal box\r\n            const p2Script = blob2BoxWASM.register_value(6).encode_to_base16();\r\n            const p2Address = (await ergolib).Address.recreate_from_ergo_tree((await ergolib).ErgoTree.from_base16_bytes(\"00\" + p2Script));\r\n            const oatmeal2BoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n                oatmealBoxValue,\r\n                (await ergolib).Contract.pay_to_address(p2Address),\r\n                creationHeight);\r\n            oatmeal2BoxBuilder.add_token(oatmealTokenId, p2OatmealAmount);\r\n            try {\r\n                outputCandidates.add(oatmeal2BoxBuilder.build());\r\n            } catch (e) {\r\n                console.log(`building error: ${e}`);\r\n                throw e;\r\n            }\r\n\r\n            // prepate tx inputs\r\n            var inputs = [blob1, blob2, gameBox];\r\n            const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n            const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n            const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n            console.log(\"processFightResult\", )\r\n            const tx = await createTransaction(boxSelection, outputCandidates, [currentConfigBox], GAME_ADDRESS, inputs);\r\n            //console.log(\"tx\", JSONBigInt.stringify(tx));\r\n            const signedTx = JSONBigInt.parse(await signTransactionMultiContext(tx, inputs, [currentConfigBox], wallet));\r\n            console.log(\"signedTx\", signedTx);\r\n            const txId = await sendTx(signedTx);\r\n            if (txId) {\r\n                winningTx.push(txId)\r\n            }\r\n            //if (signedTx.id) {\r\n            //    winningTx.push(signedTx.id)\r\n            //}\r\n            \r\n            \r\n            console.log(\"### txId ###\", txId);\r\n            \r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n    console.log(\"winningTx\",winningTx)\r\n    if (winningTx.length === 2) {\r\n        return winningTx;\r\n    } else {\r\n        return ['',''];\r\n    }\r\n    \r\n}\r\n\r\n","import React, { useState } from \"react\"\r\n\r\nexport const Checkbox = () => {\r\n  const [checked, setChecked] = useState(false)\r\n  return (\r\n    <>\r\n      <input\r\n      className=\"zonecard m-1\"\r\n        type=\"checkbox\"\r\n        checked={checked}\r\n        id=\"checkbox\"\r\n        onChange={() => setChecked(!checked)}\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport { engageFight } from '../ergo-related/bot_wasm';\r\nimport { boxByTokenId, getMempoolUnspentBoxesByAddress, getUnspentBoxesByAddress } from '../ergo-related/explorer';\r\nimport { displayTransaction, waitingAlert, errorAlert } from '../utils/Alerts';\r\nimport { CONFIG_TOKEN_ID, GAME_SCRIPT_ADDRESS, OATMEAL_RESERVE_SCRIPT_ADDRESS } from '../utils/constants';\r\nimport { formatERGAmount } from '../utils/utils';\r\nimport BlobItem from './BlobItem';\r\nimport { Checkbox } from './Checkbox';\r\n\r\nexport default class BlobFightPicker extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            fightAmount: props.fightAmount ?? 0,\r\n            blobList: props.blobList ?? [],\r\n            selectedBlob: new Array(props.blobList.length).fill(0),\r\n        };\r\n        //this.handleChangeBlobList = this.handleChangeBlobList.bind(this);\r\n    }\r\n\r\n    selectUnselectBlob(boxId) {\r\n        console.log(\"selectUnselectBlob\", boxId)\r\n        const blobIndex = this.state.blobList.findIndex(box => box.boxId === boxId);\r\n        var newSelectBlob = this.state.selectedBlob;\r\n        if (this.state.selectedBlob[blobIndex] === 0) {\r\n            newSelectBlob[blobIndex] = 1;\r\n            this.setState({\r\n                selectedBlob: [...newSelectBlob],\r\n            })\r\n        } else {\r\n            newSelectBlob[blobIndex] = 0;\r\n            this.setState({\r\n                selectedBlob: [...newSelectBlob],\r\n            })\r\n        }\r\n    }\r\n\r\n    async engageFight() {\r\n        var alert = waitingAlert(\"Preparing the fight...\")\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        var reserveOatmealBoxes = await getUnspentBoxesByAddress(OATMEAL_RESERVE_SCRIPT_ADDRESS);\r\n        if (reserveOatmealBoxes.length === 0) {\r\n            console.log(\"processFigth: No Reserve box found\")\r\n            return;\r\n        }\r\n        const currentReserveBox = reserveOatmealBoxes[0];\r\n\r\n        const blobIndexes = [];\r\n        for (let index = 0; index < this.state.selectedBlob.length; index++) {\r\n            if (this.state.selectedBlob[index] === 1) {\r\n                blobIndexes.push(index);\r\n            }\r\n        }\r\n        console.log(\"blobIndexes\", blobIndexes)\r\n        if (blobIndexes.length === 2) {\r\n            const signedTx = await engageFight(this.state.blobList[blobIndexes[0]], this.state.blobList[blobIndexes[1]], currentReserveBox, currentConfigBox[0]);\r\n            alert = displayTransaction(signedTx.id)\r\n        } else {\r\n            errorAlert(\"Something went wrong\")\r\n        }\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        const numberOfSelectedBlobs = this.state.selectedBlob.reduce((a, b) => a + b, 0);\r\n        return (\r\n            <Fragment >\r\n                <div className=\"w-100 d-flex flex-column align-items-start color-nav m-2 p-2\" >\r\n                    <div className=\"w-100 d-flex flex-row justify-content-between\">\r\n                        <h5>Fights for {formatERGAmount(this.state.fightAmount)} ERG bet</h5>\r\n                        {\r\n                            numberOfSelectedBlobs === 2 ?\r\n                                <button className=\"btn btn-ultra-yellow\" onClick={() => this.engageFight()}>Engage fight</button>\r\n                                : null\r\n\r\n                        }\r\n                        <span>{numberOfSelectedBlobs} blob selected</span>\r\n                    </div>\r\n                    <div className=\"d-flex flex-wrap\" >\r\n                        {\r\n                            this.state.blobList.map((blob, index) =>\r\n                                <div className=\"d-flex flex-column align-items-center\" key={blob.boxId}>\r\n                                    <BlobItem blobBoxJSON={blob} updateList={this.fetchBlobs} disableActions={true} />\r\n                                    <div onClick={() => this.selectUnselectBlob(blob.boxId)}><Checkbox checked={this.state.selectedBlob[index] === 1} /></div>\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </div>)\r\n            </Fragment>\r\n        )\r\n    }\r\n}","import React, { Fragment } from 'react';\r\nimport { BLOB_SCRIPT_ADDRESS } from './utils/constants';\r\nimport { getUnspentBoxesForAddressUpdated } from './ergo-related/explorer';\r\nimport BlobFightPicker from './components/BlobFightPicker';\r\n\r\n\r\nexport default class MatchMakingPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            blobReadyToFightMap: {},\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.fetchBlobs();\r\n    }\r\n\r\n    async fetchBlobs() {\r\n        const blobBoxes = await getUnspentBoxesForAddressUpdated(BLOB_SCRIPT_ADDRESS);\r\n        var blobAmountDict = {};\r\n        for (const box of blobBoxes) {\r\n            try {\r\n                const blobState = box.additionalRegisters.R7.renderedValue;\r\n                const fightAmount = box.additionalRegisters.R8.renderedValue;\r\n                if (blobState === '1') {\r\n                    //console.log(\"fetchBlobs found waiting for fight \", box, fightAmount)\r\n                    if (blobAmountDict[fightAmount]) {\r\n                        blobAmountDict[fightAmount] = [...blobAmountDict[fightAmount], box];\r\n                    } else {\r\n                        blobAmountDict[fightAmount] = [box];\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchBlobs\", e)\r\n            }\r\n\r\n        }\r\n        //console.log(\"blobAmountDict \", blobAmountDict)\r\n        this.setState({\r\n            blobReadyToFightMap: blobAmountDict,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Fragment >\r\n                <div className=\"w-75 d-flex flex-column m-2\" >\r\n                    <h4>Pick two fighters for the same amount and trigger the fight.</h4>\r\n                    <h6>(No signing required)</h6>\r\n                    {\r\n                        Object.keys(this.state.blobReadyToFightMap).map(key =>\r\n                            <BlobFightPicker fightAmount={key} blobList={this.state.blobReadyToFightMap[key]} key={key} />\r\n                            )\r\n                    }\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport OctogonImage from \"../images/octogone.png\";\r\n\r\n\r\nexport class WinPercent extends React.Component {\r\n\r\n    render() {\r\n        const win_rate = this.props.win_rate;\r\n\r\n        return (\r\n            <div className=\"d-flex flex-column winning-percent\">\r\n                <div className=\"d-flex flex-column justify-content-center p-3\">\r\n                    <img src={OctogonImage} />\r\n                    <div className=\"centered\"><div>~Win %</div>\r\n                        <div>{(win_rate * 100).toFixed(2)}</div></div>\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n","export default \"data:image/png;base64,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\"","import React, { Fragment } from 'react';\r\nimport { DEFAULT_EXPLORER_ADDRESS } from '../utils/constants';\r\nimport OpenIcon from '../images/outline_open_in_new_black_24dp.png';\r\nimport { formatLongString } from '../utils/utils';\r\n\r\nexport class TransactionId extends React.Component {\r\n\r\n    render() {\r\n        const txId = this.props.txId;\r\n\r\n        return (\r\n            <Fragment>\r\n                {\r\n                    txId !== '' ?\r\n                        <div>\r\n                            {formatLongString(txId, 5)}\r\n                            <img className=\"transparent-image\" src={OpenIcon}\r\n                                onClick={() => {\r\n                                    const url = DEFAULT_EXPLORER_ADDRESS + 'en/transactions/' + txId;\r\n                                    window.open(url, '_blank').focus();\r\n                                }} />\r\n                        </div>\r\n                        : null\r\n                }\r\n            </Fragment>\r\n        )\r\n\r\n    }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAcUlEQVR4Ae2VsQ3AIBDEPEE6dkrGy2xsAIOQhtoSOppIWPoObD0NHFZ5gA4MmYmcEZpfDANywChA3RYQec0DLi95wOXkAZfnAZc7HnD5joDLoydyeR64RL5tg9fleWBuYuQBfhNowAinZR+OTwduVjh8GbqRVAucOQEAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport { computeP1WinningChance } from '../utils/utils';\r\nimport BlobItem from './BlobItem';\r\nimport { WinPercent } from './WinPercent';\r\nimport { processFightResult } from '../ergo-related/bot_wasm';\r\nimport { waitingAlert } from '../utils/Alerts';\r\nimport { boxByTokenId } from '../ergo-related/explorer';\r\nimport { CONFIG_TOKEN_ID } from '../utils/constants';\r\nimport { TransactionId } from './TransactionId';\r\n\r\nexport default class FightItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            blob1: props.blob1,\r\n            blob2: props.blob2,\r\n            gameBox: props.gameBox,\r\n            updateList: props.updateList,\r\n            p1WinTxId: '',\r\n            p2WinTxId: '',\r\n            winningTx: props.winningTx ?? undefined,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.state.winningTx) {\r\n            if (this.state.winningTx.inputs[0].value === this.state.winningTx.outputs[0].value) {\r\n                this.setState({\r\n                    p2WinTxId: this.state.winningTx.id,\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    p1WinTxId: this.state.winningTx.id,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    async processFight() {\r\n        var alert = waitingAlert(\"Preparing the fight results...\")\r\n        const currentConfigBox = await boxByTokenId(CONFIG_TOKEN_ID);\r\n        console.log(\"processFight\", this.state, currentConfigBox);\r\n        const [p1WinTxId, p2WinTxId] = await processFightResult(this.state.blob1, this.state.blob2, this.state.gameBox, currentConfigBox[0]);\r\n        console.log(\"processFight\", p1WinTxId, p2WinTxId)\r\n        this.setState({\r\n            p1WinTxId: p1WinTxId,\r\n            p2WinTxId: p2WinTxId,\r\n        })\r\n        alert.close();\r\n    }\r\n\r\n    render() {\r\n        const p1WinChance = computeP1WinningChance(this.state.blob1, this.state.blob2);\r\n        const p2WinChance = 1 - p1WinChance;\r\n        console.log(\"render FightItem\", this.state)\r\n        return (\r\n            <div className=\"w-100 zonefight d-flex flex-row justify-content-between m-2 p-2 align-items-center\">\r\n                <BlobItem\r\n                    key={this.state.blob1.boxId}\r\n                    blobBoxJSON={this.state.blob1}\r\n                    updateList={this.state.updateList}\r\n                />\r\n                <div>\r\n                    <WinPercent win_rate={p1WinChance} />\r\n                    {\r\n                        this.state.winningTx ?\r\n                            null\r\n                            :\r\n                            <TransactionId txId={this.state.p1WinTxId} />\r\n                    }\r\n                    \r\n                </div>\r\n                <div className='h-100 d-flex align-items-end'>\r\n                    {\r\n                        this.state.winningTx ?\r\n                            this.state.p1WinTxId !== '' ?\r\n                                <div><h3>P1 Won !</h3><TransactionId txId={this.state.p1WinTxId} /></div>\r\n                                :\r\n                                <div><h3>P2 Won !</h3><TransactionId txId={this.state.p1WinTxId} /></div>\r\n                            :\r\n                            <button className=\"btn btn-ultra-yellow\"\r\n                                onClick={() => this.processFight()}>Process fight results</button>\r\n                    }\r\n\r\n                </div>\r\n                <div>\r\n                    <WinPercent win_rate={p2WinChance} />\r\n                    {\r\n                        this.state.winningTx ?\r\n                            null\r\n                            :\r\n                            <TransactionId txId={this.state.p2WinTxId} />\r\n                    }\r\n                </div>\r\n                <BlobItem\r\n                    key={this.state.blob2.boxId}\r\n                    blobBoxJSON={this.state.blob2}\r\n                    updateList={this.state.updateList}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Fragment } from 'react';\r\nimport { BLOB_SCRIPT_ADDRESS, GAME_SCRIPT_ADDRESS } from './utils/constants';\r\nimport { getTransactionsByAddress, getUnspentBoxesForAddressUpdated } from './ergo-related/explorer';\r\nimport FightItem from './components/FightItem';\r\n\r\n\r\nexport default class FightsPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentFights: [],\r\n            previousFights: [],\r\n            gameBoxId: '',\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.fetchCurrentFights();\r\n        this.fetchOldFights();\r\n    }\r\n\r\n    async fetchCurrentFights() {\r\n        const fightBoxes = await getUnspentBoxesForAddressUpdated(GAME_SCRIPT_ADDRESS);\r\n        var blobFights = [];\r\n        for (const box of fightBoxes) {\r\n            try {\r\n                const blob1Id = box.additionalRegisters.R5.renderedValue;\r\n                const blob2Id = box.additionalRegisters.R8.renderedValue;\r\n                const blobBoxes = await getUnspentBoxesForAddressUpdated(BLOB_SCRIPT_ADDRESS);\r\n                var blob1 = undefined, blob2 = undefined;\r\n                for (const blob of blobBoxes) {\r\n                    if (blob.additionalRegisters.R9.renderedValue === blob1Id) {\r\n                        blob1 = blob;\r\n                    }\r\n                    if (blob.additionalRegisters.R9.renderedValue === blob2Id) {\r\n                        blob2 = blob;\r\n                    }\r\n                }\r\n                console.log(\"gamebox\", box)\r\n                if (blob1 && blob2 && box) {\r\n                    blobFights.push({\r\n                        blob1: blob1,\r\n                        blob2: blob2,\r\n                        gameBox: box,\r\n                        gameBoxId: box.boxId,\r\n                    })\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchBlobs\", e)\r\n            }\r\n\r\n        }\r\n        console.log(\"blobFights \", blobFights)\r\n        this.setState({\r\n            currentFights: blobFights,\r\n        })\r\n    }\r\n\r\n    async fetchOldFights() {\r\n        const fightTransactions = await getTransactionsByAddress(GAME_SCRIPT_ADDRESS);\r\n        var blobFights = [];\r\n        for (const tx of fightTransactions) {\r\n            try {\r\n                var blob1 = tx.inputs[0];\r\n                var blob2 = tx.inputs[1];\r\n                var gameBox = tx.inputs[2];\r\n                if (blob1.additionalRegisters.R7.renderedValue === '3') {\r\n                    console.log(\"gamebox\", gameBox)\r\n                    if (blob1 && blob2 && gameBox) {\r\n                        blobFights.push({\r\n                            blob1: blob1,\r\n                            blob2: blob2,\r\n                            gameBox: gameBox,\r\n                            gameBoxId: gameBox.boxId,\r\n                            winningTx: { ...tx },\r\n                        })\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchBlobs\", e)\r\n            }\r\n\r\n        }\r\n        console.log(\"blobFights \", blobFights)\r\n        this.setState({\r\n            previousFights: blobFights,\r\n        })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        console.log(\"FightsPage\", this.state.previousFights)\r\n        return (\r\n            <Fragment >\r\n                <div className=\"w-100 d-flex flex-column m-2 p-2 align-items-center\" >\r\n                    <h4>Current Fights</h4>\r\n\r\n                    {this.state.currentFights.length > 0 ?\r\n                        <div className=\"w-75 d-flex flex-wrap m-2 align-items-center\">\r\n                            {\r\n                                this.state.currentFights.map(fight =>\r\n                                    <FightItem blob1={fight.blob1} blob2={fight.blob2} gameBox={fight.gameBox} updateList={this.fetchCurrentFights} key={this.state.gameBoxId} />\r\n                                )\r\n                            }\r\n                        </div>\r\n                        : <div>No figth found currently</div>\r\n                    }\r\n\r\n                    <h4>Previous Fights</h4>\r\n                    <div className=\"w-75 d-flex flex-wrap\">\r\n                        {\r\n                            this.state.previousFights.map(fight =>\r\n                                <FightItem\r\n                                    blob1={fight.blob1}\r\n                                    blob2={fight.blob2}\r\n                                    gameBox={fight.gameBox}\r\n                                    updateList={this.fetchCurrentFights}\r\n                                    key={this.state.gameBoxId}\r\n                                    winningTx={fight.winningTx}\r\n                                />\r\n                            )\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n","import './App.css';\r\nimport MyBlobsPage from './my-blobs-page';\r\nimport Admin from \"./admin-page\";\r\nimport Home from './home-page';\r\nimport NavigationBar from './components/NavigationBar';\r\nimport 'react-bootstrap/dist/react-bootstrap.min.js';\r\nimport { BrowserRouter, Route, Routes } from 'react-router-dom';\r\nimport React from 'react';\r\nimport Footer from './components/Footer';\r\nimport BlobsShopPage from './blobs-shop';\r\nimport BlobEditor from './components/BlobEditor';\r\nimport MatchMakingPage from './match-making';\r\nimport FightsPage from './fights';\r\n\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      address: localStorage.getItem('address')\r\n    };\r\n    this.setAddress = this.setAddress.bind(this);\r\n    console.log(\"APP constructor\", localStorage.getItem('address'))\r\n  }\r\n\r\n  setAddress = (address) => {\r\n    this.setState({\r\n        address: address\r\n    });\r\n    localStorage.setItem('address', address);\r\n  };\r\n  \r\n  render() {\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n          <NavigationBar address={localStorage.getItem('address')} setAddress={this.setAddress} />\r\n          <Routes>\r\n            <Route path=\"/\" element={<Home />} />\r\n            <Route path=\"/create\" element={<BlobEditor />} />\r\n            <Route path=\"/myblobs\" element={<MyBlobsPage />} />\r\n            <Route path=\"/blobsshop\" element={<BlobsShopPage />} />\r\n            <Route path=\"/matchmaking\" element={<MatchMakingPage />} />\r\n            <Route path=\"/fights\" element={<FightsPage />} />\r\n            <Route path=\"/admin\" element={<Admin />} />\r\n          </Routes>\r\n          <Footer />\r\n        </BrowserRouter>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import React, { Fragment } from 'react';\r\nimport { NANOERG_TO_ERG } from '../utils/constants';\r\n\r\nexport class BlobState extends React.Component {\r\n    render() {\r\n        const STATE_LABEL_MAP = {\r\n            '0': 'Quiet',\r\n            '1': 'Waiting for fight',\r\n            '2': 'On sale',\r\n            '3': 'Fighting',\r\n        }\r\n\r\n        const STATE_VALUE_LABEL_MAP = {\r\n            '0': undefined,\r\n            '1': 'Bet',\r\n            '2': 'Price',\r\n            '3': 'Bet',\r\n        }\r\n\r\n        const STATE_COLOR_MAP = {\r\n            '0': 'green',\r\n            '1': 'yellow',\r\n            '2': 'blue',\r\n            '3': 'red',\r\n        }\r\n\r\n        const state = this.props.state;\r\n        const stateValue = this.props.stateValue;\r\n\r\n\r\n        return (\r\n            <Fragment>\r\n                <div className={\"m-1 p-1 btn-ultra-\" + STATE_COLOR_MAP[state]}>\r\n                    <div>{STATE_LABEL_MAP[state]}</div>\r\n                    {STATE_VALUE_LABEL_MAP[state] ?\r\n                        <div>\r\n                            {STATE_VALUE_LABEL_MAP[state] + \" \" + (parseInt(stateValue) / NANOERG_TO_ERG).toFixed(4) + \" ERG\"}\r\n                        </div>\r\n                        : <div>Waiting action</div>\r\n                    }\r\n\r\n                </div>\r\n            </Fragment>\r\n        )\r\n\r\n    }\r\n}","import React, { Fragment } from 'react';\r\nimport ErgBlob from './ErgBlob';\r\nimport { Rating } from 'react-simple-star-rating'\r\nimport { copySuccess, promptFeedAmount } from '../utils/Alerts';\r\nimport { NANOERG_TO_ERG } from '../utils/constants';\r\n\r\nimport { decodeString, decodeLongArray, ergoTreeToAddress } from '../ergo-related/serializer';\r\nimport { addWidthDrawBlob, buyBlob, feedBlob, killBlob, setBlobStatus } from '../ergo-related/blob';\r\nimport { BlobState } from './BlobState';\r\nimport { formatLongString } from '../utils/utils';\r\nimport CopyIcon from '../images/outline_content_copy_black_24dp.png';\r\nimport OpenAction from '../images/outline_keyboard_double_arrow_right_black_24dp.png';\r\nimport CloseAction from '../images/outline_keyboard_double_arrow_left_black_24dp.png';\r\n\r\nexport default class BlobItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            blobBoxJSON: props.blobBoxJSON,\r\n            path: '',\r\n            color1: '',\r\n            color2: '',\r\n            eyes_pos: 0,\r\n            mouth_type: 0,\r\n            name: '',\r\n            info: [],\r\n            power: 0,\r\n            defense: 0,\r\n            state: [0, 0],\r\n            updateList: props.updateList,\r\n            blobId: '0',\r\n            showActions: props.showActions ?? false,\r\n            ownerAddress: '',\r\n            rating: 0,\r\n            disableActions: props.disableActions ?? false,\r\n        };\r\n        this.toggleActions = this.toggleActions.bind(this);\r\n\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState) {\r\n        //console.log(\"BlobItem componentDidUpdate\", prevProps, this.props)\r\n        if (prevProps.blobBoxJSON.boxId !== this.props.blobBoxJSON.boxId) { await this.updateBlob(this.props.blobBoxJSON); }\r\n    }\r\n\r\n    async updateBlob(box) {\r\n\r\n        //console.log(\"blobBoxJSON\", box)\r\n        const desc = await decodeString(box.additionalRegisters.R4.serializedValue);\r\n        const descArray = desc.toString().split(\":\");\r\n        const decodedInfo = await decodeLongArray(box.additionalRegisters.R5.serializedValue);\r\n        const power = 10 * decodedInfo[0] + 5 * decodedInfo[1] + 4 * decodedInfo[2] + 8 * decodedInfo[3];\r\n        const defense = 10 * decodedInfo[1] + 10 * decodedInfo[2];\r\n        const ownerAddress = await ergoTreeToAddress(\"00\" + box.additionalRegisters.R6.serializedValue);\r\n        const averagePower = (power + defense) / 2;\r\n        //const averagePower = 6000;\r\n        const ratingRange = [250, 1000, 3000, 6000, 9000];\r\n        var rating = 0;\r\n        for (const i of ratingRange) {\r\n            if (averagePower >= i) {\r\n                rating++;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        console.log(\"rating\", rating);\r\n        console.log(\"ownerAddress\", ownerAddress);\r\n\r\n        this.setState({\r\n            boxId: box.boxId,\r\n            path: descArray[5],\r\n            color1: '#' + descArray[1],\r\n            color2: '#' + descArray[2],\r\n            eyes_pos: descArray[3],\r\n            mouth_type: descArray[4],\r\n            name: descArray[0],\r\n            info: decodedInfo,\r\n            power: power,\r\n            defense: defense,\r\n            blobId: box.additionalRegisters.R9.renderedValue,\r\n            state: [box.additionalRegisters.R7.renderedValue, box.additionalRegisters.R8.renderedValue],\r\n            ownerAddress: ownerAddress,\r\n            rating: rating,\r\n            showActions: this.state.showActions,\r\n        })\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.updateBlob(this.state.blobBoxJSON);\r\n    }\r\n\r\n    async kill(blobBoxJSON) {\r\n        await killBlob(blobBoxJSON);\r\n        await this.state.updateList();\r\n    }\r\n\r\n    async addWidthDraw(mode, blobBoxJSON) {\r\n        await addWidthDrawBlob(mode, blobBoxJSON);\r\n        await this.state.updateList();\r\n    }\r\n\r\n    async buy(blobBoxJSON) {\r\n        await buyBlob(blobBoxJSON)\r\n        await this.state.updateList();\r\n    }\r\n\r\n    async setStatus(mode, blobBoxJSON) {\r\n        await setBlobStatus(mode, blobBoxJSON);\r\n        await this.state.updateList();\r\n    }\r\n\r\n    async feed(blobBoxJSON) {\r\n        const [defAmount, attAmount] = await promptFeedAmount();\r\n        await feedBlob(blobBoxJSON, defAmount, attAmount)\r\n        await this.state.updateList();\r\n    }\r\n\r\n    toggleActions() {\r\n        this.setState({\r\n            showActions: !this.state.showActions,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const ownBlob = (this.state.ownerAddress === localStorage.getItem('address'));\r\n        return (\r\n            <div className=\"zonecard d-flex flex-row m-1 p-1 align-items-center\" >\r\n                <div className=\"d-flex flex-column zoneblob \" >\r\n                    <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                        <Rating initialValue={this.state.rating} readonly={true} size={20} />\r\n                        {\r\n                            this.state.disableActions ? null :\r\n                                this.state.showActions ?\r\n                                    <img className=\"transparent-image\" src={CloseAction} onClick={this.toggleActions} />\r\n                                    :\r\n                                    <img className=\"transparent-image\" src={OpenAction} onClick={this.toggleActions} />\r\n\r\n                        }\r\n                    </div>\r\n                    <ErgBlob key={\"ergblob\" + this.state.boxId}\r\n                        color1={this.state.color1}\r\n                        color2={this.state.color2}\r\n                        path={this.state.path}\r\n                        eyes_pos={this.state.eyes_pos}\r\n                        mouth_type={this.state.mouth_type}\r\n                        name={this.state.name}\r\n                    />\r\n                    <div className=\"border-white d-flex flex-column align-items-center p-2\" >\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div><strong>Value</strong></div>\r\n                            <div><strong>{parseInt(this.state.blobBoxJSON.value) / NANOERG_TO_ERG} ERG</strong></div>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div><strong>Attack power</strong></div>\r\n                            <div><strong>{this.state.power}</strong></div>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div><strong>Defense power</strong></div>\r\n                            <div><strong>{this.state.defense}</strong></div>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div>Attack</div>\r\n                            <div>{this.state.info[0]}</div>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div>Defense</div>\r\n                            <div>{this.state.info[1]}</div>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div>Fights</div>\r\n                            <div>{this.state.info[2]}</div>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div>Victories</div>\r\n                            <div>{this.state.info[3]}</div>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-between w-100\">\r\n                            <div>ID</div>\r\n                            <div>{this.state.blobId}</div>\r\n                        </div>\r\n                        <BlobState state={this.state.state[0]} stateValue={this.state.state[1]} />\r\n                        {\r\n                            this.state.state[0] === '2' ?\r\n                                <div className=\"m-2 d-flex flex-row justify-content-between w-100\">\r\n\r\n                                    <div >{formatLongString(this.state.ownerAddress, 5)}</div>\r\n                                    <img className=\"transparent-image\" src={CopyIcon} onClick={() => {\r\n                                        navigator.clipboard.writeText(this.state.ownerAddress);\r\n                                        copySuccess();\r\n                                    }} />\r\n                                </div>\r\n                                : null\r\n                        }\r\n\r\n                    </div>\r\n                </div>\r\n                {\r\n                    this.state.showActions ?\r\n                        <div className=\"d-flex flex-column \" >\r\n                            {\r\n                                ownBlob ?\r\n                                    <Fragment>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.kill(this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '0'} >Kill Blob</button>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.addWidthDraw('add', this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '0'} >Deposit</button>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.addWidthDraw('widthdraw', this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '0'} >Widthdraw</button>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.setStatus('sell', this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '0'} >Sell</button>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.setStatus('reset', this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '2'} >Cancel sell</button>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.setStatus('fight', this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '0'} >Fight</button>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.setStatus('reset', this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '1'} >Cancel fight</button>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.feed(this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '0'} >Feed</button>\r\n                                    </Fragment>\r\n                                    :\r\n                                    <Fragment>\r\n                                        <button className=\"btn btn-ultra-voilet m-1\" onClick={() => this.buy(this.state.blobBoxJSON)}\r\n                                            disabled={this.state.state[0] !== '2'} >Buy</button>\r\n                                    </Fragment>\r\n                            }\r\n                        </div>\r\n                        : null\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAASklEQVQ4y2NgGAXkgnoghAFRhr0MOoSU/2f4zaANVX4ZyNtLWHkYkvLLQJq6ysORlF9hEKOacjI0UKCFaE9TpIXoiCMjaYwCdAAAfY47haQWdCMAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAS0lEQVQ4T2NgGAWkAR2GvQyicF49EBIAexn+M1yGatFm+A3kEdAiClSO0BJGIy1iDFeQtITTRAuJGkhUTqKnSVRORsSRnDRGAS4AAMZuO4V+fLTkAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAARUlEQVQ4jWNgIAt4MDxm+I8DYgWPcCrHoQGnBC5AtgbcfnkMlMOiAZ9fHmHTgNtpaDKjGoaoBgLCQ0oD0ckbBojOQCQAACzEpqVaE9CbAAAAAElFTkSuQmCC\"","import React from 'react';\r\n\r\nimport { BlobMouth } from './BlobMouth';\r\nimport { BlobEyes } from './BlobEyes';\r\n\r\n\r\nexport class ErgBlob extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            path: this.props.path,\r\n            color1: this.props.color1,\r\n            color2: this.props.color2,\r\n            eyes_pos: this.props.eyes_pos,\r\n            mouth_type: this.props.mouth_type,\r\n            name: this.props.name,\r\n            rotate: this.props.rotate,\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps, nextState) {\r\n        this.setState({\r\n            path: nextProps.path,\r\n            color1: nextProps.color1,\r\n            color2: nextProps.color2,\r\n            eyes_pos: nextProps.eyes_pos,\r\n            mouth_type: nextProps.mouth_type,\r\n            name: nextProps.name\r\n        });\r\n    }\r\n\r\n    render() {\r\n        var pos_eyes_x = 110, pos_eyes_y = 120, eyes_dist = 30;\r\n        return (\r\n\r\n            <div className=\"container-md \" >\r\n                <strong>\r\n                    {this.state.name}\r\n                </strong>\r\n                <div className=\"card p-1 ergblob\">\r\n                    <div className={`shape ${this.props.rotate ? \"rotate\" : \"\"}`} >\r\n                        <svg viewBox=\"0 0 250 250\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\r\n                            <defs>\r\n                                <linearGradient id={`gradient_${this.props.color1 + this.props.color2}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n                                    <stop offset=\"0%\" style={{ \"stopColor\": this.state.color1 }} />\r\n                                    <stop offset=\"100%\" style={{ \"stopColor\": this.state.color2 }} />\r\n                                </linearGradient>\r\n                            </defs>\r\n                            <path d={this.state.path}\r\n                                fill={`url(#gradient_${this.props.color1 + this.props.color2})`} strokeWidth=\"2px\" stroke=\"#000000\" />\r\n                            <BlobEyes eyes_pos={this.state.eyes_pos} \r\n                                      pos_eyes_x={pos_eyes_x}\r\n                                      pos_eyes_y={pos_eyes_y} \r\n                                      eyes_dist={eyes_dist} \r\n                            />\r\n                            <BlobMouth\r\n                                mouth_type={this.state.mouth_type}\r\n                                pos_eyes_x={pos_eyes_x}\r\n                                pos_eyes_y={pos_eyes_y}\r\n                                eyes_dist={eyes_dist}\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ErgBlob;\r\n","import { NANOERG_TO_ERG } from \"./constants\";\r\nimport JSONBigInt from 'json-bigint';\r\n\r\nexport function formatLongString(str, num) {\r\n    if (typeof str !== 'string') return str;\r\n    if (str.length > 2 * num) {\r\n        return str.substring(0, num) + \"...\" + str.substring(str.length - num, str.length);\r\n    } else {\r\n        return str;\r\n    }\r\n}\r\nexport function formatERGAmount(amountStr) {\r\n    return parseFloat(parseInt(amountStr) / NANOERG_TO_ERG).toFixed(4);\r\n}\r\n\r\nfunction getRandomInt(max) {\r\n    return Math.floor(Math.random()*(max));\r\n  }\r\n\r\nexport function computeP1WinningChance(blob1, blob2) {\r\n    const maxPowerDiff = 6000;\r\n    const numberOfRound = 1000000;\r\n    const p1Info = JSONBigInt.parse(blob1.additionalRegisters.R5.renderedValue);\r\n    const p2Info = JSONBigInt.parse(blob2.additionalRegisters.R5.renderedValue);\r\n    const p1Power = 10*p1Info[0]+5*p1Info[1]+4*p1Info[2]+8*p1Info[3];\r\n    const p2Power = 10*p2Info[0]+5*p2Info[1]+4*p2Info[2]+8*p2Info[3];\r\n    const p1Def = 10*p1Info[0] + 10*p1Info[2];\r\n    const p2Def = 10*p2Info[0] + 10*p2Info[2];\r\n    const p1PowerAdj = Math.min(p2Power + maxPowerDiff, p1Power);\r\n    const p2PowerAdj = Math.min(p1Power + maxPowerDiff, p2Power);\r\n    const p1DefAdj = Math.min(p2Def + maxPowerDiff, p1Def);\r\n    const p2DefAdj = Math.min(p1Def + maxPowerDiff, p2Def);\r\n    var p1Win = 0;\r\n    \r\n    for (let i = 0; i < numberOfRound; i++) {\r\n        const p1Rand = getRandomInt(65535);\r\n        const p1Score = Math.max(p1Rand, p1DefAdj) + p1PowerAdj;\r\n        const p2Rand = getRandomInt(65535);\r\n        const p2Score = Math.max(p2Rand, p2DefAdj) + p2PowerAdj;\r\n        if (p1Score > p2Score) {\r\n            p1Win = p1Win + 1;\r\n        }\r\n    }\r\n    return p1Win / numberOfRound;\r\n}\r\n\r\n\r\n//export function isP1Win(blob1,blob2,blockId) {\r\n//    const maxPowerDiff = 6000;\r\n//    const p1Info = JSONBigInt.parse(blob1.additionalRegisters.R5.renderedValue);\r\n//    const p2Info = JSONBigInt.parse(blob2.additionalRegisters.R5.renderedValue);\r\n//    const p1Power = 10*p1Info[0]+5*p1Info[1]+4*p1Info[2]+8*p1Info[3];\r\n//    const p2Power = 10*p2Info[0]+5*p2Info[1]+4*p2Info[2]+8*p2Info[3];\r\n//    const p1Def = 10*p1Info[0] + 10*p1Info[2];\r\n//    const p2Def = 10*p2Info[0] + 10*p2Info[2];\r\n//    const p1PowerAdj = Math.min(p2Power + maxPowerDiff, p1Power);\r\n//    const p2PowerAdj = Math.min(p1Power + maxPowerDiff, p2Power);\r\n//    const p1DefAdj = Math.min(p2Def + maxPowerDiff, p1Def);\r\n//    const p2DefAdj = Math.min(p1Def + maxPowerDiff, p2Def);\r\n//    console.log(\"blockId\", blockId, blockId.slice(1,3), parseInt(blockId.slice(1,3), 16), blockId.slice(3,5), parseInt(blockId.slice(3,5), 16));\r\n//    console.log(\"blockId2\", blockId, blockId.slice(1,5), parseInt(blockId.slice(1,5), 16), blockId.slice(5,9), parseInt(blockId.slice(5,9), 16));\r\n//\r\n//    const p1Rand = parseInt(blockId.slice(1,5), 16);\r\n//    const p1Score = Math.max(p1Rand, p1DefAdj) + p1PowerAdj;\r\n//    const p2Rand = parseInt(blockId.slice(5,9), 16);\r\n//    const p2Score = Math.max(p2Rand, p2DefAdj) + p2PowerAdj;\r\n//    if (p1Score > p2Score) {\r\n//        console.log(\"P1 WIN !!\");\r\n//    } else {\r\n//        console.log(\"P2 WIN !!\");\r\n//    }\r\n//    return (p1Score > p2Score);\r\n//}\r\n","import JSONBigInt from 'json-bigint';\r\n\r\nexport async function post(url, body = {}, apiKey = '') {\r\n    return await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            api_key: apiKey,\r\n        },\r\n        body: JSON.stringify(body),\r\n    });\r\n}\r\nexport async function get(url, apiKey = '') {\r\n    try {\r\n        return await fetch(url, {\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                api_key: apiKey,\r\n            }\r\n        }).then(res => res.json());\r\n    } catch (e) {\r\n        console.error(e);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getStream(url, apiKey = '') {\r\n    try {\r\n        const response = await fetch(url)\r\n        const responseTxt = await response.text();\r\n        return responseTxt ;\r\n    } catch (e) {\r\n        console.error(e);\r\n        return \"\";\r\n    }\r\n}\r\n"],"sourceRoot":""}