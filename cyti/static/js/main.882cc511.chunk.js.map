{"version":3,"sources":["ergo-related/serializer.js","utils/utils.js","ergo-related/explorer.js","utils/Alerts.js","components/MintRequests.js","utils/CYTIRequest.js","components/MintRequest.js","ergo-related/wasm.js","ergo-related/wallet.js","components/InputAddress.js","images/ergo-erg-logo.png","components/HelpToolTip.js","images/help_outline_blue_48dp.png","components/ThemedSelect.js","components/MintTokens.js","components/Footer.js","images/Github.png","App.js","reportWebVitals.ts","index.tsx","ergo-related/rest.js","ergo-related/mint.js","utils/constants.js","components/TokenMedia.js"],"names":["ergolib","encodeLong","num","a","Constant","I64","from_str","from_i64","decodeLong","decode_from_base16","to_i64","to_str","encodeHexConst","reg","from_byte_array","Buffer","from","encodeStrConst","str","Serializer","stringToHex","toHexString","byteArray","Array","byte","toString","slice","join","decodeHex","encoded","to_byte_array","decodeStringArray","to_coll_coll_byte","map","r","stringFromHex","sigmaPropToAddress","sigmaProp","Address","ErgoTree","from_base16_bytes","recreate_from_ergo_tree","to_base58","encodeContract","address","Contract","from_base58","tmp","pay_to_address","ergo_tree","to_base16_bytes","byteArrayToBase64","binary","len","byteLength","i","String","fromCharCode","window","btoa","createHash","require","formatLongString","length","substring","formatERGAmount","amountStr","parseFloat","parseInt","NANOERG_TO_ERG","toFixed","downloadAndSetSHA256","url","getBlob","blob","hash","update","digest","console","log","promiseTimeout","ms","promise","timeout","Promise","resolve","reject","id","setTimeout","clearTimeout","race","sleep","explorerApi","DEFAULT_EXPLORER_API_ADDRESS","explorerApiV1","getRequest","get","then","res","data","getRequestV1","currentHeight","items","height","getUnspentBoxesByAddress","getUnconfirmedTxsFor","addr","getSpentAndUnspentBoxesFromMempool","unconfirmedTxs","spentBoxes","newBoxes","tx","inputs","flat","outputs","filter","box","getUnspentBoxesForAddressUpdated","boxesTmp","spentBlobBoxIds","boxId","boxes","concat","includes","getExplorerBlockHeaders","getExplorerBlockHeadersFull","getBalanceForAddress","waitingAlert","title","MySwal","withReactContent","Swal","fire","allowOutsideClick","showConfirmButton","errorAlert","msg","icon","text","displayErgoPayTransaction","txId","reducedTx","html","className","onClick","open","focus","location","reload","promptErgAddr","focusConfirm","showCancelButton","preConfirm","ergAddress","getPopup","querySelector","value","showValidationMessage","result","promptErgAddrList","addrList","inputOptions","input","inputValue","localStorage","getItem","customClass","inputValidator","MintRequests","props","state","userMintRequests","this","fetchMintRequests","CYTI_MINT_REQUEST_SCRIPT_ADDRESS","mintBoxes","spentBoxIds","addressSigmaPropHex","to_bytes","subarray","from_ecpoint_bytes","sigma_serialize_bytes","additionalRegisters","R6","mintSigmaProp","serializedValue","push","e","setState","cytiBoxJSON","React","Component","CYTIRequest","boxJSON","full","requestOwner","targetFirstChar","minerAddress","tokAmount","tokName","tokDesc","tokDecimals","tokType","tokMediaHash","tokMediaURL","isProcessed","getRegisterValue","tokInfo","tokTypeValue","Object","keys","NFT_TYPES","find","key","o","initialize","MintRequest","request","create","mintRequestJSON","refundMintRequest","connectedAddress","statusLabel","tokenType","labelMap","href","TokenMedia","type","width","lbl","htmlFor","startsWith","refund","boxCandidateToJsonMin","boxCandidate","as_i64","as_num","tokens","JSONBigInt","parse","to_json","boxCandidatesToJsonMin","boxCandidates","createTransaction","boxSelection","outputCandidates","dataInputs","changeAddress","utxos","creationHeight","outputJs","missingErgs","getMissingErg","BigInt","TX_FEE","getMissingTokens","BoxValue","changeBoxValue","ErgoBoxCandidateBuilder","changeBoxBuilder","tokId","tokenId","TokenId","TokenAmount","tokenAmount","add_token","add","build","TxBuilder","txBuilder","new","DataInputs","dataInputsWASM","boxIdWASM","BoxId","DataInput","dataInputWASM","set_data_inputs","parseUnsignedTx","unsignedTx","UnsignedTransaction","from_json","stringify","correctTx","fullBoxInfo","parseUtxo","utxo","extension","json","output","addExtention","mode","undefined","ergoTree","isArray","assets","asset","amount","name","decimals","isDict","parseAdditionalRegisters","transactionId","index","registterOut","entries","forEach","getUtxosListValue","reduce","acc","getTokenListFromUtxos","tokenList","amountIn","amountOut","tokensIn","tokensOut","token","register","v","Date","getErgoStateContext","block_headers","BlockHeaders","pre_header","PreHeader","from_block_header","ErgoStateContext","getTxReducedB64Safe","getTxReduced","txReducedBase64","ergoPayTx","replace","inputBoxes","ErgoBoxes","from_boxes_json","inputDataBoxes","ctx","ReducedTransaction","from_unsigned_tx","hasExtensionConnector","ergo_check_read_access","hasConnectorInjected","ergo","isWalletConnected","error","connectWallet","alreadyConnected","ergo_request_read_access","isValidWalletAddress","get_used_addresses","address_list","getWalletAddressList","getBalance","get_balance","balance","confirmed","nanoErgs","unconfirmed","tok","walletSignTx","alert","processTx","txFoundMempool","startWait","now","close","message","getUtxos","amountToSend","fullAmountToSend","get_utxos","filteredUtxos","ErgoBox","getUtxosExplorerByAddress","addressBoxes","selectedUtxos","unSelectedUtxos","amountSelected","amountInt","shift","signTx","txToBeSigned","sign_tx","submitTx","txToBeSubmitted","submit_tx","txToBeProcessed","s","signedTx","InputAddress","ergAmount","oatmealAmount","spicyOatmealAmount","ergopay","setAddress","bind","promptErgAddress","setItem","newAddr","nanoERGAmount","glowing","src","heigth","alt","HelpToolTip","data-tip","data-for","place","effect","data-html","delayShow","delayHide","insecure","multiline","backgroundColor","ThemedSelect","colors","danger","dangerLight","neutral0","neutral5","neutral10","neutral20","neutral30","neutral40","neutral50","neutral60","neutral70","neutral80","neutral90","primary","primary25","primary50","primary75","label","onChange","options","isSearchable","isMulti","theme","optionsType","MintTokens","setTokenName","tokenName","setTokenDescription","desc","tokenDescription","setTokenAmount","isValidTokenAmount","setTokenDecimals","dec","tokenDecimals","tokenMediaAddress","tokenMediaHash","split","splittedAmount","newAmount","setTokenType","setTokenIDStart","startID","fixedStartID","toLowerCase","RECOMMENDED_FEES","tokenIDStart","recommendedFee","fee","setFee","feeFloat","fixedFee","validAmount","match","validateAmountStrInt","splited","amountStrInt","optionsDecimals","walletList","setPage","setTokenMediaAddress","txFeeNano","Math","round","mintSimpleToken","mintCITYContract","target","autocomplete","rows","mintToken","disabled","Footer","rel","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","apiKey","fetch","headers","Accept","api_key","tokURL","tokHash","txAmount","MIN_NANOERG_BOX_VALUE","inputsWASM","ErgoBoxAssetsDataList","dataListWASM","BoxSelection","ErgoBoxCandidates","empty","tokenAmountAdjusted","pow","mintBoxValue","mintBoxBuilder","Token","from_box_id","mint_token","set_register_value","tokIdStart","txAmountBoxValue","mintCYTIBoxBuilder","tokenMintInfos","registerValue5","val","Uint8Array","from_coll_coll_byte","ownerSigmaProp","utxos1","utxosValue","refundBoxValue","refundBoxBuilder","controls"],"mappings":"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","file":"static/js/main.882cc511.chunk.js","sourcesContent":["import {Serializer} from \"@coinbarn/ergo-ts\";\r\nimport * as crypto from \"crypto-js\";\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n\r\nexport async function encodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.from_i32(n).encode_to_base16()\r\n    else return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(n)).encode_to_base16()\r\n}\r\n\r\nexport async function decodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.decode_from_base16(n).to_i32()\r\n    else return (await ergolib).Constant.decode_from_base16(n).to_i64().to_str()\r\n\r\n}\r\n\r\nexport async function encodeAddress(address) {\r\n    const byteArray = (await ergolib).Address.from_mainnet_str(address).to_bytes();\r\n    return (await ergolib).Constant.from_byte_array(byteArray);\r\n}\r\n\r\nexport async function decodeAddress(addr) {\r\n    const address = (await ergolib).Address.from_bytes(addr);\r\n    return address.to_base58();\r\n}\r\n\r\nexport async function encodeLongArray(longArray) {\r\n    return (await ergolib).Constant.from_i64_str_array(longArray);\r\n}\r\n\r\nexport async function decodeLongArray(encodedArray) {\r\n    return (await ergolib).Constant.decode_from_base16(encodedArray).to_i64_str_array().map(cur => parseInt(cur))\r\n}\r\n\r\nexport async function encodeIntArray(intArray) {\r\n    return (await ergolib).Constant.from_i32_array(intArray);\r\n}\r\n\r\nexport async function decodeIntArray(encodedArray) {\r\n    return (await ergolib).Constant.decode_from_base16(encodedArray).to_i32_array()\r\n}\r\n\r\nexport async function encodeInt(num) {\r\n    return (await ergolib).Constant.from_i32(num);\r\n}\r\nexport async function decodeInt(num) {\r\n    return num.to_i32();\r\n}\r\n\r\nexport async function getErgoBox(json) {\r\n    return (await ergolib).ErgoBox.from_json(json);\r\n}\r\n\r\nexport async function encodeLong(num) {\r\n    return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(num));\r\n}\r\nexport async function decodeLong(num) {\r\n    return (await ergolib).Constant.decode_from_base16(num).to_i64().to_str();\r\n}\r\n\r\nexport async function encodeHex(reg) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(reg, 'hex')).encode_to_base16();\r\n}\r\n\r\nexport async function encodeHexConst(reg) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(reg, 'hex'));\r\n}\r\n\r\nexport async function encodeStr(str) {\r\n    return encodeHex(Serializer.stringToHex(str))\r\n}\r\n\r\nexport async function encodeStrConst(str) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(Serializer.stringToHex(str), 'hex'));\r\n}\r\n\r\nexport function toHexString(byteArray) {\r\n    return Array.from(byteArray, function(byte) {\r\n        return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r\n    }).join('')\r\n}\r\n\r\nexport async function decodeString(encoded) {\r\n    return Serializer.stringFromHex(toHexString((await ergolib).Constant.decode_from_base16(encoded).to_byte_array()))\r\n}\r\n\r\nexport async function decodeHex(encoded) {\r\n    return toHexString((await ergolib).Constant.decode_from_base16(encoded).to_byte_array())\r\n}\r\n\r\nexport async function decodeHexArray(encoded) {\r\n    return (await ergolib).Constant.decode_from_base16(encoded).to_coll_coll_byte().map(r => toHexString(r))\r\n}\r\n\r\nexport async function decodeStringArray(encoded) {\r\n    return (await ergolib).Constant.decode_from_base16(encoded).to_coll_coll_byte().map(r => {\r\n        return Serializer.stringFromHex(toHexString(r));\r\n    })\r\n}\r\n\r\nexport async function sigmaPropToAddress(sigmaProp) {\r\n    return (await ergolib).Address.recreate_from_ergo_tree((await ergolib).ErgoTree.from_base16_bytes(\"00\" + sigmaProp)).to_base58();\r\n}\r\n\r\nexport function ergToNano(erg) {\r\n    if (erg === undefined) return 0\r\n    if (erg.startsWith('.')) return parseInt(erg.slice(1) + '0'.repeat(9 - erg.length + 1))\r\n    let parts = erg.split('.')\r\n    if (parts.length === 1) parts.push('')\r\n    if (parts[1].length > 9) return 0\r\n    return parseInt(parts[0] + parts[1] + '0'.repeat(9 - parts[1].length))\r\n}\r\n\r\n\r\nexport async function encodeContract(address) {\r\n    const tmp = (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address));\r\n    return tmp.ergo_tree().to_base16_bytes();\r\n}\r\n\r\nexport async function ergoTreeToAddress(ergoTree) {\r\n    //console.log(\"ergoTreeToAddress\",ergoTree);\r\n    const ergoT = (await ergolib).ErgoTree.from_base16_bytes(ergoTree);\r\n    const address = (await ergolib).Address.recreate_from_ergo_tree(ergoT);\r\n    return address.to_base58();\r\n}\r\n\r\nexport async function addressToErgoTree(addr) {\r\n    const addrWASM = (await ergolib).Address.from_base58(addr);\r\n    return addrWASM.to_ergo_tree().to_base16_bytes();\r\n}\r\n\r\nexport async function ergoTreeToTemplate(ergoTree) {\r\n    const ergoTreeWASM = (await ergolib).ErgoTree.from_base16_bytes(ergoTree);\r\n    return toHexString(ergoTreeWASM.template_bytes());\r\n}\r\n\r\nexport async function ergoTreeToTemplateHash(ergoTree) {\r\n    const ergoTreeTemplateHex = await ergoTreeToTemplate(ergoTree);\r\n    //return toHexString(ergoTreeWASM.template_bytes());\r\n    return crypto.SHA256(crypto.enc.Hex.parse(ergoTreeTemplateHex)).toString(crypto.enc.Hex);\r\n}\r\n\r\nexport function byteArrayToBase64( byteArray ) {\r\n    var binary = '';\r\n    var len = byteArray.byteLength;\r\n    for (var i = 0; i < len; i++) {\r\n        binary += String.fromCharCode( byteArray[ i ] );\r\n    }\r\n    return window.btoa( binary );\r\n}\r\n","import { getBlob } from \"../ergo-related/rest\";\r\nimport { NANOERG_TO_ERG } from \"./constants\";\r\nconst { createHash } = require('crypto');\r\n\r\n\r\nexport function formatLongString(str, num) {\r\n    if (typeof str !== 'string') return str;\r\n    if (str.length > 2 * num) {\r\n        return str.substring(0, num) + \"...\" + str.substring(str.length - num, str.length);\r\n    } else {\r\n        return str;\r\n    }\r\n}\r\n\r\nexport function formatERGAmount(amountStr) {\r\n    return parseFloat(parseInt(amountStr) / NANOERG_TO_ERG).toFixed(4);\r\n}\r\n\r\nexport async function downloadAndSetSHA256(url) {\r\n    try {\r\n        const blob = await getBlob(url);\r\n        const hash = createHash('sha256').update(blob).digest('hex');\r\n        console.log(\"HASH\", hash)\r\n        return hash;\r\n    } catch(e) {\r\n        console.log(e)\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport function promiseTimeout(ms, promise) {\r\n    // Create a promise that rejects in <ms> milliseconds\r\n    let timeout = new Promise((resolve, reject) => {\r\n        let id = setTimeout(() => {\r\n            clearTimeout(id);\r\n            reject('Timed out in ' + ms + 'ms.')\r\n        }, ms)\r\n    })\r\n    // Returns a race between our timeout and the passed in promise\r\n    return Promise.race([\r\n        promise,\r\n        timeout\r\n    ])\r\n}\r\n\r\nexport function sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}","import { get } from './rest';\r\nimport JSONBigInt from 'json-bigint';\r\nimport { DEFAULT_EXPLORER_API_ADDRESS } from '../utils/constants';\r\n\r\n\r\nexport const explorerApi = DEFAULT_EXPLORER_API_ADDRESS + '/api/v0';\r\nexport const explorerApiV1 = DEFAULT_EXPLORER_API_ADDRESS + '/api/v1';\r\n\r\nasync function getRequest(url) {\r\n    return get(explorerApi + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nasync function getRequestV1(url) {\r\n    return get(explorerApiV1 + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nasync function postTx(url, body = {}, apiKey = '') {\r\n    console.log(\"post0\", JSONBigInt.stringify(body));\r\n    const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'mode': 'cors',\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n        },\r\n        body: JSONBigInt.stringify(body)\r\n    });\r\n\r\n    const [responseOk, body2] = await Promise.all([response.ok, response.json()]);\r\n    console.log(\"post1\", body2, responseOk)\r\n    if (responseOk) {\r\n        if (typeof body2 === 'object') {\r\n            //console.log(\"post2\", body2.id)\r\n            return { result: true, data: body2.id };\r\n        } else {\r\n            return { result: true, data: body2 };\r\n        }\r\n    } else {\r\n        if (Object.keys(body2).includes(\"detail\")) {\r\n            return { result: false, data: body2.detail };\r\n        } else {\r\n            return { result: false, data: body2.reason };\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport async function postTxMempool(tx) {\r\n    try {\r\n        const res = await postTx(explorerApiV1 + '/mempool/transactions/submit', tx);\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(\"postTxMempool\", err);\r\n        return err.toString()\r\n    }\r\n}\r\n\r\nexport async function sendTx(json) {\r\n    const res = await postTxMempool(json);\r\n    //const res = await postRequest('transactions', json)\r\n    return res;\r\n}\r\n\r\nexport async function currentHeight() {\r\n    return getRequest('/blocks?limit=1')\r\n        .then(res => res.data)\r\n        .then(res => res.items[0].height);\r\n}\r\n\r\n/////\r\nexport async function getUnspentBoxesByAddress(address) {\r\n    const res = await getRequestV1(`/boxes/unspent/byAddress/${address}`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getBoxesByAddress(address, limit = 100) {\r\n    const res = await getRequestV1(`/boxes/byAddress/${address}?limit=${limit}`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function boxById(id) {\r\n    const res = await getRequest(`/transactions/boxes/${id}`);\r\n    return res.data;\r\n}\r\n\r\n/////\r\nexport async function boxByTokenId(tokenId) {\r\n    const res = await getRequestV1(`/boxes/unspent/byTokenId/${tokenId}`);\r\n    return res.data.items;\r\n}\r\n\r\n/////\r\nexport async function getTransactionsByAddress(addr) {\r\n    const res = await getRequestV1(`/addresses/${addr}/transactions`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getUnconfirmedTxsFor(addr) {\r\n    const res = await getRequestV1(`/mempool/transactions/byAddress/${addr}`);\r\n    //console.log(\"getUnconfirmedTxsFor\", res);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getSpentAndUnspentBoxesFromMempool(address) {\r\n    try {\r\n        var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n        var spentBoxes = [];\r\n        var newBoxes = [];\r\n        if (unconfirmedTxs && unconfirmedTxs.length > 0) {\r\n            spentBoxes = unconfirmedTxs.map(tx => tx.inputs).flat();\r\n            newBoxes = unconfirmedTxs.map(tx => tx.outputs).flat().filter(box => address === box.address);\r\n        }\r\n        //console.log(\"getSpentAndUnspentBoxesFromMempool\", address, spentBoxes, newBoxes)\r\n        return [spentBoxes, newBoxes];\r\n    } catch (e) {\r\n        console.log(e);\r\n        return [[], []];\r\n    }\r\n}\r\n\r\nexport async function getUnspentBoxesForAddressUpdated(address) {\r\n    try {\r\n        const boxesTmp = await getUnspentBoxesByAddress(address);\r\n        const [spentBoxes, newBoxes] = await getSpentAndUnspentBoxesFromMempool(address);\r\n        const spentBlobBoxIds = spentBoxes.map(box => box.boxId);\r\n        const boxes = newBoxes.concat(boxesTmp).filter(box => !spentBlobBoxIds.includes(box.boxId));\r\n        return boxes;\r\n    } catch (e) {\r\n        console.log(e);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getExplorerBlockHeaders() {\r\n    return (await getRequestV1(`/blocks/headers`)).data.items.slice(0, 10);\r\n}\r\nexport async function getExplorerBlockHeadersFull() {\r\n    return (await getRequestV1(`/blocks/headers`)).data.items;\r\n}\r\n\r\nexport async function getBalanceForAddress(addr) {\r\n    const res = await getRequestV1(`/addresses/${addr}/balance/total`);\r\n    console.log(\"getBalanceUnconfirmedForAddress\", res)\r\n    return res.data;\r\n}\r\n","import Swal from 'sweetalert2/src/sweetalert2.js';\r\nimport withReactContent from 'sweetalert2-react-content';\r\nimport { formatLongString } from './utils';\r\nimport { encodeContract } from '../ergo-related/serializer';\r\n\r\nexport function waitingAlert(title) {\r\n    const MySwal = withReactContent(Swal)\r\n    Swal.fire({\r\n        title: title,\r\n        allowOutsideClick: false,\r\n        showConfirmButton: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function errorAlert(title, msg) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: title,\r\n        icon: 'error',\r\n        text: msg,\r\n        allowOutsideClick: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function confirmAlert(msg, txt, confirmMsg = 'Yes', denyMsg = 'No') {\r\n    return Swal.fire({\r\n        title: msg,\r\n        html: txt,\r\n        showDenyButton: true,\r\n        confirmButtonText: confirmMsg,\r\n        denyButtonText: denyMsg,\r\n        allowOutsideClick: false,\r\n    })\r\n}\r\n\r\nexport function displayTransaction(txId) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: \"Transaction sent succesfully\",\r\n        allowOutsideClick: true,\r\n        icon: 'success',\r\n        showCloseButton: true,\r\n        html: `<p>The transaction will be visible in few seconds: <a href=\"https://explorer.ergoplatform.com/en/transactions/${txId}\" target=\"_blank\" > ${txId} </a></p>`,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function displayErgoPayTransaction(txId, reducedTx) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: \"Sign the transaction using ergo mobile wallet\",\r\n        allowOutsideClick: true,\r\n        icon: 'success',\r\n        showConfirmButton: true,\r\n        html: <div><p>Send the transaction to wallet </p>\r\n            <button className='btn btn-blue m-1' onClick={() => {\r\n                const url = `ergopay:${reducedTx}`;\r\n                window.open(url, '_blank').focus();\r\n            }} > Sign with ErgoPay\r\n            </button>\r\n        </div>\r\n        ,\r\n    },\r\n        function () {\r\n            window.location.reload();\r\n        });\r\n    return MySwal;\r\n}\r\n\r\nexport function promptErgAddr() {\r\n    return new Promise(function (resolve, reject) {\r\n        Swal.fire({\r\n            title: \"Set ERG address\",\r\n            html: `<div><input type=\"text\" id=\"ergAddress\" class=\"swal2-input\" placeholder=\"ERG address\"></div>`,\r\n            focusConfirm: false,\r\n            showCancelButton: true,\r\n            showConfirmButton: true,\r\n            preConfirm: async () => {\r\n                const ergAddress = Swal.getPopup().querySelector('#ergAddress').value;\r\n                try {\r\n                    await encodeContract(ergAddress)\r\n                } catch (e) {\r\n                    Swal.showValidationMessage(`The ERG address is invalid`);\r\n                }\r\n                return { ergAddress: ergAddress };\r\n            }\r\n        }).then((result) => {\r\n            if (result.value) {\r\n                resolve(result.value.ergAddress);\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport function promptErgAddrList(addrList) {\r\n    return new Promise(function (resolve, reject) {\r\n        var inputOptions = {};\r\n        for (const addr of addrList) {\r\n            inputOptions[addr] = formatLongString(addr, 10);\r\n        }\r\n        //console.log(\"inputOptions[addrList[0]]\",addrList[0]);\r\n        Swal.fire({\r\n            title: \"Set ERG address\",\r\n            input: 'select',\r\n            inputValue: localStorage.getItem('address') ?? '',\r\n            inputOptions: inputOptions,\r\n            focusConfirm: false,\r\n            showCancelButton: true,\r\n            showConfirmButton: true,\r\n            customClass: {\r\n                input: \"monotype\",\r\n            },\r\n            inputValidator: function (value) {\r\n                return new Promise(function (resolve, reject) {\r\n                    if (value !== '') {\r\n                        resolve()\r\n                    } else {\r\n                        reject('The ERG address is invalid')\r\n                    }\r\n                })\r\n            }\r\n        }).then(function (result) {\r\n            if (result.value) {\r\n                resolve(result.value);\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    });\r\n}\r\n","import React from 'react';\r\nimport { getUnconfirmedTxsFor, getUnspentBoxesForAddressUpdated } from '../ergo-related/explorer';\r\nimport { toHexString } from '../ergo-related/serializer';\r\nimport { CYTI_MINT_REQUEST_SCRIPT_ADDRESS } from '../utils/constants';\r\nimport MintRequest from './MintRequest';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n\r\nexport default class MintRequests extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userMintRequests: [],\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.fetchMintRequests();\r\n    }\r\n\r\n    async fetchMintRequests() {\r\n        var mintBoxes = await getUnspentBoxesForAddressUpdated(CYTI_MINT_REQUEST_SCRIPT_ADDRESS);\r\n        const address = localStorage.getItem('address') ?? '';\r\n\r\n        var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n        var spentBoxes = [];\r\n        var newBoxes = [];\r\n        if (unconfirmedTxs && unconfirmedTxs.length > 0) {\r\n            spentBoxes = unconfirmedTxs.map(tx => tx.inputs).flat();\r\n            newBoxes = unconfirmedTxs.map(tx => tx.outputs).flat().filter(box => address === box.CYTI_MINT_REQUEST_SCRIPT_ADDRESS);\r\n        }\r\n        const spentBoxIds = spentBoxes.map(box => box.boxId);\r\n        mintBoxes = newBoxes.concat(mintBoxes).filter(box => !spentBoxIds.includes(box.boxId));\r\n\r\n        var addressSigmaPropHex = '';\r\n        if (address !== '') {\r\n            addressSigmaPropHex = toHexString((await ergolib).Constant.from_ecpoint_bytes(\r\n                (await ergolib).Address.from_base58(localStorage.getItem('address')).to_bytes(0x00).subarray(1, 34)\r\n            ).sigma_serialize_bytes());\r\n        }\r\n        var userMintRequests = [];\r\n        for (const box of mintBoxes) {\r\n            try {\r\n                if (box.additionalRegisters.R6) {\r\n                    const mintSigmaProp = Buffer.from(box.additionalRegisters.R6.serializedValue, 'hex')\r\n                    if (toHexString(mintSigmaProp) === addressSigmaPropHex) {\r\n                        userMintRequests.push(box);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchMintRequests\", e)\r\n            }\r\n        }\r\n        this.setState({\r\n            userMintRequests: userMintRequests,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        return (\r\n            <div className='w-100 d-flex flex-column m-2 p-2'>\r\n                <br />\r\n                <div><h4>My CYTI mint requests</h4></div>\r\n                {\r\n                    this.state.userMintRequests.length === 0 ?\r\n                        <div className='d-flex flex-column m-1 p-1'>\r\n                            <h6>\r\n                                No CITY mint request found {address === '' ? null : \"for \" + address}\r\n                            </h6>\r\n                        </div>\r\n                        :\r\n                        <div className='d-flex flex-column m-1 p-1'>\r\n                            <div></div>\r\n                            <div className='d-flex flex-wrap justify-content-center m-1 p-1'>\r\n                                {\r\n                                    this.state.userMintRequests.map(box =>\r\n                                        <MintRequest key={box.boxId + \"_1\"} cytiBoxJSON={box} />\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { decodeHex, decodeLong, decodeStringArray, sigmaPropToAddress } from '../ergo-related/serializer';\r\nimport { getRegisterValue } from '../ergo-related/wasm';\r\nimport { NFT_TYPES } from './constants';\r\n\r\n\r\nexport class CYTIRequest {\r\n    constructor(boxJSON) {\r\n        this.full = boxJSON;\r\n        this.value = boxJSON.value;\r\n        this.requestOwner = '';\r\n        this.targetFirstChar = '';\r\n        this.minerAddress = '';\r\n        this.tokAmount = '0';\r\n        this.tokName = '';\r\n        this.tokDesc = '';\r\n        this.tokDecimals = 0;\r\n        this.tokType = 'Standard';\r\n        this.tokMediaHash = '';\r\n        this.tokMediaURL = '';\r\n        this.boxId = boxJSON.boxId;\r\n        this.isProcessed = false;\r\n    }\r\n\r\n    async initialize() {\r\n        this.tokAmount = await decodeLong(getRegisterValue(this.full, \"R4\"));\r\n        const tokInfo = await decodeStringArray(getRegisterValue(this.full, \"R5\"));\r\n        this.tokName = tokInfo[0] ?? '';\r\n        this.tokDesc = tokInfo[1] ?? '';\r\n        this.tokDecimals = tokInfo[2] ?? '';\r\n        const tokTypeValue = tokInfo[3] ?? '';\r\n        this.tokType = Object.keys(NFT_TYPES).find(key => NFT_TYPES[key] === tokTypeValue);\r\n        this.tokMediaHash = tokInfo[4] ?? '';\r\n        this.tokMediaURL = tokInfo[5] ?? '';\r\n        this.targetFirstChar = await decodeHex(getRegisterValue(this.full, \"R7\"));\r\n        this.isProcessed = this.boxId.substring(0, this.targetFirstChar.length) === this.targetFirstChar;\r\n        this.requestOwner = await sigmaPropToAddress(getRegisterValue(this.full, \"R6\"));\r\n        if (this.isProcessed) {\r\n            this.minerAddress = await sigmaPropToAddress(getRegisterValue(this.full, \"R8\"));\r\n        }\r\n        //console.log(\"this\",this);\r\n    }\r\n\r\n    static async create(boxJSON) {\r\n        const o = new CYTIRequest(boxJSON);\r\n        await o.initialize();\r\n        return o;\r\n    }\r\n}","import React, { Fragment } from 'react';\r\nimport { refundMintRequest } from '../ergo-related/mint';\r\nimport { CYTIRequest } from '../utils/CYTIRequest';\r\nimport { formatERGAmount, formatLongString } from '../utils/utils';\r\nimport TokenMedia from './TokenMedia';\r\n\r\n\r\nexport default class MintRequest extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            cytiBoxJSON: props.cytiBoxJSON,\r\n            request: {\"boxId\": \"\", \"targetFirstChar\": \"\"},\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const request = await CYTIRequest.create(this.state.cytiBoxJSON);\r\n        this.setState({\r\n            request: request,\r\n        });\r\n    }\r\n\r\n    async refund(mintRequestJSON) {\r\n        await refundMintRequest(mintRequestJSON);\r\n        \r\n    }\r\n\r\n    render() {\r\n        const connectedAddress = localStorage.getItem(\"address\");\r\n        var statusLabel = \"To be mined\";\r\n        if (this.state.request.isProcessed) {\r\n            statusLabel = \"Processed\";\r\n        }\r\n        const tokenType = this.state.request.tokType;\r\n        var labelMap = { // order matters\r\n            \"Fee\": formatERGAmount(this.state.request.value) + \" ERG\",\r\n            \"Owner\": formatLongString(this.state.request.requestOwner, 6),\r\n            \"Type\": this.state.request.tokType,\r\n            \"Name\": this.state.request.tokName,\r\n            \"Amount\": this.state.request.tokAmount,\r\n            \"Decimals\": this.state.request.tokDecimals,\r\n            \"Description\": this.state.request.tokDesc,\r\n            [tokenType]: \"\",\r\n            \"URL\": \"\",\r\n            \"ID first chars\": this.state.request.targetFirstChar,\r\n            \"Miner\": formatLongString(this.state.request.minerAddress, 6),\r\n            \"Status\": statusLabel,\r\n            \"boxId\": formatLongString(this.state.request.boxId, 6),\r\n        }\r\n        if (this.state.request.tokType !== 'Standard') {\r\n            labelMap[\"URL\"] = <a href={this.state.request.tokMediaURL}>{formatLongString(this.state.request.tokMediaURL, 15)}</a>;\r\n            labelMap[tokenType] = <TokenMedia type={this.state.request.tokType} address={this.state.request.tokMediaURL} width={50} />\r\n        }\r\n        return (\r\n\r\n            <Fragment >\r\n                <div className='card zonerequest d-flex flex-column justify-content-between m-2 p-2'>\r\n                <div className='d-flex flex-column'>\r\n                    {\r\n                        Object.keys(labelMap).filter(lbl => labelMap[lbl] !== \"\").map(lbl =>\r\n                            <div key={lbl} className='d-flex flex-row justify-content-between align-items-center'>\r\n                                <label htmlFor={lbl} className='col-sm d-flex align-items-start'>{lbl}</label>\r\n                                <div id={lbl} className='limit-width'>{labelMap[lbl]}</div>\r\n                            </div>\r\n                        )\r\n                    }\r\n                    </div>\r\n                    {\r\n                        this.state.request.requestOwner === connectedAddress &&\r\n                            !this.state.request.boxId.startsWith(this.state.request.targetFirstChar) ?\r\n                            <div className='w-100 d-flex flex-row justify-content-center'>\r\n                                <button className='btn btn-blue' onClick={() => this.refund(this.state.cytiBoxJSON)}>\r\n                                    Refund\r\n                                </button>\r\n                            </div>\r\n                            : null\r\n                    }\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n","import JSONBigInt from 'json-bigint';\r\nimport { currentHeight, getExplorerBlockHeaders, getExplorerBlockHeadersFull } from './explorer';\r\nimport { NANOERG_TO_ERG, TX_FEE } from '../utils/constants';\r\nimport { TextEncoder } from 'text-decoding';\r\nimport { byteArrayToBase64, encodeContract } from './serializer';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global BigInt */\r\n\r\nasync function boxCandidateToJsonMin(boxCandidate) {\r\n    var res = {};\r\n    res[\"value\"] = boxCandidate.value().as_i64().as_num().toString();\r\n    res[\"ergoTree\"] = boxCandidate.ergo_tree().to_base16_bytes();\r\n    res[\"address\"] = (await ergolib).Address.recreate_from_ergo_tree(boxCandidate.ergo_tree()).to_base58();\r\n    var tokens = [];\r\n    for (let i = 0; i < boxCandidate.tokens().len(); i++) {\r\n        tokens.push(JSONBigInt.parse(boxCandidate.tokens().get(i).to_json()))\r\n    }\r\n    res[\"assets\"] = tokens;\r\n    console.log(\"boxCandidateToJsonMin\", res)\r\n    return res;\r\n}\r\nasync function boxCandidatesToJsonMin(boxCandidates) {\r\n    var res = [];\r\n    for (let i = 0; i < boxCandidates.len(); i++) {\r\n        res.push(await boxCandidateToJsonMin(boxCandidates.get(i)))\r\n    }\r\n    return res;\r\n}\r\n\r\nexport async function createTransaction(boxSelection, outputCandidates, dataInputs, changeAddress, utxos) {\r\n    console.log(\"createTransaction utxos\", utxos);\r\n    const creationHeight = await currentHeight();\r\n\r\n    // build the change box\r\n    var outputJs = await boxCandidatesToJsonMin(outputCandidates);\r\n    const missingErgs = getMissingErg(utxos, outputJs) - BigInt(TX_FEE);\r\n    const tokens = getMissingTokens(utxos, outputJs);\r\n    console.log(\"missing tokens\", tokens);\r\n    \r\n    if (missingErgs > 0 || Object.keys(tokens) > 0) {\r\n        const changeBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(missingErgs.toString()));\r\n        const changeBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            changeBoxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(changeAddress)),\r\n            creationHeight);\r\n            for (const tokId of Object.keys(tokens)) {\r\n                const tokenId = (await ergolib).TokenId.from_str(tokId);\r\n                const tokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(tokens[tokId].toString()));\r\n                changeBoxBuilder.add_token(tokenId, tokenAmount);\r\n            }\r\n        try {\r\n            outputCandidates.add(changeBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n    }\r\n\r\n    const txBuilder = (await ergolib).TxBuilder.new(\r\n        boxSelection,\r\n        outputCandidates,\r\n        creationHeight,\r\n        (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(TX_FEE.toString())),\r\n        (await ergolib).Address.from_base58(changeAddress));\r\n    var dataInputsWASM = new (await ergolib).DataInputs();\r\n    for (const box of dataInputs) {\r\n        const boxIdWASM = (await ergolib).BoxId.from_str(box.boxId);\r\n        const dataInputWASM = new (await ergolib).DataInput(boxIdWASM);\r\n        dataInputsWASM.add(dataInputWASM);\r\n    }\r\n    txBuilder.set_data_inputs(dataInputsWASM);\r\n    const tx = parseUnsignedTx(txBuilder.build().to_json());\r\n    console.log(\"createTransaction tx\", tx);\r\n\r\n    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(tx))\r\n    var correctTx = parseUnsignedTx(unsignedTx.to_json());\r\n\r\n    // Put back complete selected inputs in the same order\r\n    correctTx.inputs = correctTx.inputs.map(box => {\r\n        const fullBoxInfo = parseUtxo(utxos.find(utxo => utxo.boxId === box.boxId));\r\n        return {\r\n            ...fullBoxInfo,\r\n            extension: {}\r\n        };\r\n    });\r\n    // Put back complete selected datainputs in the same order\r\n    correctTx.dataInputs = correctTx.dataInputs.map(box => {\r\n        const fullBoxInfo = parseUtxo(dataInputs.find(utxo => utxo.boxId === box.boxId));\r\n        return {\r\n            ...fullBoxInfo,\r\n            extension: {}\r\n        };\r\n    });\r\n\r\n    return correctTx;\r\n}\r\n\r\nexport function parseUnsignedTx(str) {\r\n    let json = JSONBigInt.parse(str);\r\n    return {\r\n        id: json.id,\r\n        inputs: json.inputs,\r\n        dataInputs: json.dataInputs,\r\n        outputs: json.outputs.map(output => (parseUtxo(output))),\r\n    };\r\n}\r\n\r\nexport function parseUtxo(json, addExtention = true, mode = 'input') {\r\n    if (json === undefined) {\r\n        return {};\r\n    }\r\n    var res = {};\r\n    if (mode === 'input') {\r\n        if (\"id\" in json) {\r\n            res[\"boxId\"] = json.id;\r\n        } else {\r\n            res[\"boxId\"] = json.boxId;\r\n        }\r\n    }\r\n    res[\"value\"] = json.value.toString();\r\n    res[\"ergoTree\"] = json.ergoTree;\r\n    if (Array.isArray(json.assets)) {\r\n        res[\"assets\"] = json.assets.map(asset => ({\r\n            tokenId: asset.tokenId,\r\n            amount: asset.amount.toString(),\r\n            name: asset.name ?? '',\r\n            decimals: asset.decimals ?? 0,\r\n        }));\r\n    } else {\r\n        res[\"assets\"] = [];\r\n    }\r\n    if (isDict(json[\"additionalRegisters\"])) {\r\n        res[\"additionalRegisters\"] = parseAdditionalRegisters(json.additionalRegisters);\r\n    } else {\r\n        res[\"additionalRegisters\"] = {};\r\n    }\r\n\r\n    res[\"creationHeight\"] = json.creationHeight;\r\n\r\n    if (\"address\" in json) {\r\n        res[\"address\"] = json.address;\r\n    }\r\n\r\n    if (mode === 'input') {\r\n        if (\"txId\" in json) {\r\n            res[\"transactionId\"] = json.txId;\r\n        } else {\r\n            res[\"transactionId\"] = json.transactionId;\r\n        }\r\n        res[\"index\"] = json.index;\r\n    }\r\n    if (addExtention) {\r\n        res[\"extension\"] = {};\r\n    }\r\n    return res;\r\n}\r\n\r\nexport function parseUtxos(utxos, addExtention, mode = 'input') {\r\n    var utxosFixed = [];\r\n    for (const i in utxos) {\r\n        utxosFixed.push(parseUtxo(utxos[i], addExtention, mode))\r\n    }\r\n    return utxosFixed;\r\n}\r\n\r\nfunction parseAdditionalRegisters(json) {\r\n    var registterOut = {};\r\n    //console.log(\"json\", json);\r\n    Object.entries(json).forEach(([key, value]) => {\r\n        //console.log(\"key\", key, \"value\", value);\r\n        if (isDict(value)) {\r\n            registterOut[key] = value[\"serializedValue\"];\r\n        } else {\r\n            registterOut[key] = value;\r\n        }\r\n    });\r\n    //console.log(\"registterOut\", registterOut);\r\n    return registterOut;\r\n}\r\n\r\nexport async function setBoxRegisterByteArray(box, register, str_value) {\r\n    const value_Uint8Array = new TextEncoder().encode(str_value);\r\n    box.set_register_value(register, (await ergolib).Constant.from_byte_array(value_Uint8Array));\r\n}\r\n\r\nexport async function addSimpleOutputBox(outputCandidates, amountErgsFloat, payToAddress, creationHeight) {\r\n    const amountNanoErgStr = Math.round((amountErgsFloat * NANOERG_TO_ERG)).toString();\r\n    const amountBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(amountNanoErgStr));\r\n    const outputBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        amountBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(payToAddress)),\r\n        creationHeight);\r\n    try {\r\n        outputCandidates.add(outputBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building output error: ${e}`);\r\n        throw e;\r\n    }\r\n}\r\n\r\n\r\nexport async function getTokens(tokenId, tokenAmount) {\r\n    var tokens = new (await ergolib).Tokens();\r\n    const _tokenId = (await ergolib).TokenId.from_str(tokenId);\r\n    const _tokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(tokenAmount.toString()));\r\n    tokens.add(new (await ergolib).Token(\r\n        _tokenId,\r\n        _tokenAmount)\r\n    );\r\n    return tokens;\r\n}\r\n\r\nexport function getUtxosListValue(utxos) {\r\n    return utxos.reduce((acc, utxo) => acc += BigInt(utxo.value), BigInt(0));\r\n}\r\n\r\nexport function getTokenListFromUtxos(utxos) {\r\n    var tokenList = {};\r\n    for (const i in utxos) {\r\n        console.log(\"utxos[i]\",utxos[i])\r\n        for (const asset of utxos[i].assets) {\r\n            if (Object.keys(tokenList).includes(asset.tokenId) ) {\r\n                tokenList[asset.tokenId] = BigInt(tokenList[asset.tokenId]) + BigInt(asset.amount);\r\n            } else {\r\n                console.log(\"tokenList\",tokenList, asset)\r\n                tokenList[asset.tokenId] = BigInt(asset.amount);\r\n            }\r\n        }\r\n    }\r\n    return tokenList;\r\n}\r\n\r\nexport function getMissingErg(inputs, outputs) {\r\n    const amountIn = getUtxosListValue(inputs);\r\n    const amountOut = getUtxosListValue(outputs);\r\n    if (amountIn >= amountOut) {\r\n        return amountIn - amountOut;\r\n    } else {\r\n        return BigInt(0);\r\n    }\r\n}\r\n\r\nexport function getMissingTokens(inputs, outputs) {\r\n    console.log(\"getMissingTokens\", inputs, outputs);\r\n    const tokensIn = getTokenListFromUtxos(inputs);\r\n    const tokensOut = getTokenListFromUtxos(outputs);\r\n    var res = {};\r\n    console.log(\"getMissingTokens\", tokensIn, tokensOut);\r\n    if (tokensIn !== {}) {\r\n        for (const token in tokensIn) {\r\n            if (tokensOut !== {} && token in tokensOut) {\r\n                if (tokensIn[token] - tokensOut[token] > 0) {\r\n                    res[token] = tokensIn[token] - tokensOut[token];\r\n                }\r\n            } else {\r\n                res[token] = tokensIn[token];\r\n            }\r\n        }\r\n    }\r\n    console.log(\"getMissingTokens\", tokensIn, tokensOut, res);\r\n    return res;\r\n}\r\n\r\nexport async function buildBalanceBox(inputs, outputs, address) {\r\n    const missingErgs = getMissingErg(inputs, outputs).toString();\r\n    const contract = await encodeContract(address);\r\n    const tokens = buildTokenList(getMissingTokens(inputs, outputs));\r\n    const height = await currentHeight();\r\n    console.log(\"buildBalanceBox\", missingErgs, contract, tokens, height)\r\n\r\n    return {\r\n        value: missingErgs,\r\n        ergoTree: contract,\r\n        assets: tokens,\r\n        additionalRegisters: {},\r\n        creationHeight: height,\r\n        extension: {},\r\n        index: undefined,\r\n        boxId: undefined,\r\n    };\r\n}\r\n\r\nexport function buildTokenList(tokens) {\r\n    var res = [];\r\n    if (tokens !== {}) {\r\n        for (const i in tokens) {\r\n            res.push({ \"tokenId\": i, \"amount\": tokens[i].toString() });\r\n        }\r\n    };\r\n    return res;\r\n}\r\n\r\nexport function getTokenAmount(box, tokenId) {\r\n    var tokenAmount = \"0\";\r\n    for (const asset of box.assets) {\r\n        if (asset.tokenId === tokenId) {\r\n            tokenAmount = asset.amount;\r\n        }\r\n    }\r\n    return tokenAmount;\r\n}\r\n\r\nexport function getRegisterValue(box, register) {\r\n    if (register in box.additionalRegisters) {\r\n        if (isDict(box.additionalRegisters[register])) {\r\n            //console.log(\"getRegisterValue\", box.additionalRegisters[register].serializedValue);\r\n            return box.additionalRegisters[register].serializedValue;\r\n        } else {\r\n            return box.additionalRegisters[register];\r\n        }\r\n    } else {\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport function getRegisterValue2(box, register) {\r\n\r\n    return box.additionalRegisters[register];\r\n}\r\n\r\nfunction isDict(v) {\r\n    return typeof v === 'object' && v !== null && !(v instanceof Array) && !(v instanceof Date);\r\n}\r\n\r\nexport async function getErgoStateContext() {\r\n    const res =  await getExplorerBlockHeaders();\r\n    const block_headers = (await ergolib).BlockHeaders.from_json(res);\r\n    const pre_header = (await ergolib).PreHeader.from_block_header(block_headers.get(0));\r\n    return new (await ergolib).ErgoStateContext(pre_header, block_headers);\r\n}\r\n\r\nexport async function getErgoStateContext2(contextId) {\r\n    const res = await getExplorerBlockHeadersFull();\r\n    console.log(\"getErgoStateContext2\", res);\r\n    const explorerContext = res.slice(contextId, 10 + contextId);\r\n    const block_headers = (await ergolib).BlockHeaders.from_json(explorerContext);\r\n    const pre_header = (await ergolib).PreHeader.from_block_header(block_headers.get(0));\r\n    return new (await ergolib).ErgoStateContext(pre_header, block_headers);\r\n}\r\n\r\nexport async function signTransactionMultiContext(unsignedTx, inputs, dataInputs, wallet) {\r\n    //console.log(\"signTransaction1\", unsignedTx, inputs, dataInputs);\r\n    const unsignedTransaction = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(unsignedTx));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const dataInputsBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    for (let i = 0; i < 10; i++) {\r\n        try {\r\n            console.log(\"try \"+i.toString())\r\n            const ctx = await getErgoStateContext2(i);\r\n            const signedTx = wallet.sign_transaction(ctx, unsignedTransaction, inputBoxes, dataInputsBoxes);\r\n            \r\n            return [signedTx.to_json(), i];\r\n        } catch(e) {\r\n            console.log(e);\r\n            continue;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport async function signTransaction(unsignedTx, inputs, dataInputs, wallet) {\r\n    //console.log(\"signTransaction1\", unsignedTx, inputs, dataInputs);\r\n    const unsignedTransaction = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(unsignedTx));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const dataInputsBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    const ctx = await getErgoStateContext();\r\n    //console.log(\"signTransaction2\", unsignedTx, inputs, dataInputs);\r\n    const signedTx = wallet.sign_transaction(ctx, unsignedTransaction, inputBoxes, dataInputsBoxes);\r\n    return signedTx.to_json();\r\n}\r\n\r\n// https://github.com/ergoplatform/eips/pull/37 ergopay:<txBase64safe>\r\nexport async function getTxReducedB64Safe(json, inputs, dataInputs = []) {\r\n    //console.log(\"getTxReducedB64Safe\", json, inputs, dataInputs);\r\n    const [txId, reducedTx] = await getTxReduced(json, inputs, dataInputs);\r\n    //console.log(\"getTxReducedB64Safe1\", json, inputs, dataInputs);\r\n    // Reduced transaction is encoded with Base64\r\n    const txReducedBase64 = byteArrayToBase64(reducedTx.sigma_serialize_bytes());\r\n    //console.log(\"getTxReducedB64Safe2\", json, inputs, dataInputs);\r\n    const ergoPayTx = txReducedBase64.replace(/\\//g, '_').replace(/\\+/g, '-');\r\n    //console.log(\"getTxReducedB64Safe3\", txId, ergoPayTx);\r\n    // split by chunk of 1000 char to generates the QR codes\r\n\r\n    return [txId, ergoPayTx];\r\n}\r\n\r\nasync function getTxReduced(json, inputs, dataInputs) {\r\n    // build ergolib objects from json\r\n    //console.log(\"getTxReduced\", json, inputs, dataInputs);\r\n    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(json));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const inputDataBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    const ctx = await getErgoStateContext();\r\n    return [unsignedTx.id().to_str(), (await ergolib).ReducedTransaction.from_unsigned_tx(unsignedTx, inputBoxes, inputDataBoxes, ctx)];\r\n}","import JSONBigInt from 'json-bigint';\r\nimport { displayErgoPayTransaction, errorAlert } from '../utils/Alerts';\r\nimport { promiseTimeout } from '../utils/utils';\r\nimport { getBalanceForAddress, getUnconfirmedTxsFor, getUnspentBoxesForAddressUpdated } from './explorer';\r\nimport { getTxReducedB64Safe } from './wasm';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global ergo BigInt */\r\n\r\nfunction hasExtensionConnector() {\r\n    if (typeof window.ergo_check_read_access !== 'undefined') {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction hasConnectorInjected() {\r\n    if (typeof ergo !== 'undefined') {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport async function isWalletConnected() {\r\n    if (hasExtensionConnector()) {\r\n        try {\r\n            const res = await window.ergo_check_read_access();\r\n            console.log(\"isWalletConnected\", res)\r\n            return Promise.resolve(res);\r\n        } catch (e) {\r\n            console.error(\"isWalletConnected error\", e);\r\n            //errorAlert(\"dApp connector not found 1\", \"Install Nautilus or SAFEW wallet in your browser\");\r\n            return Promise.resolve(false);\r\n        }\r\n    } else {\r\n        return Promise.resolve(true);\r\n    }\r\n}\r\n\r\n// Connect to browser extension wallet, return True if success\r\nexport async function connectWallet() {\r\n    if (hasExtensionConnector()) {\r\n        try {\r\n            const alreadyConnected = await isWalletConnected();\r\n            console.log(\"connectWallet alreadyConnected\", alreadyConnected);\r\n            if (!alreadyConnected) {\r\n              const res = await window.ergo_request_read_access();\r\n              await sleep(100)\r\n              return res\r\n            } else {\r\n                return true;\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            errorAlert(\"dApp connector not found 2\", \"Install Nautilus or SAFEW wallet in your browser\");\r\n            return false;\r\n        }\r\n    } else {\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\n// Check the address is in the connected wallet\r\nexport async function isValidWalletAddress(address) {\r\n    if (hasExtensionConnector()) {\r\n        const walletConnected = await connectWallet();\r\n        if (walletConnected && hasConnectorInjected()) {\r\n            const address_list = await ergo.get_used_addresses();\r\n            return address_list.includes(address);\r\n        } else {\r\n            return false;\r\n        }\r\n    } else {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport async function getWalletAddressList() {\r\n    if (hasExtensionConnector()) {\r\n        const walletConnected = await connectWallet();\r\n        if (walletConnected && hasConnectorInjected()) {\r\n            const address_list = await ergo.get_used_addresses();\r\n            return address_list;\r\n        } else {\r\n            return [];\r\n        }\r\n    } else {\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getBalance(tokenId = 'ERG') {\r\n    //console.log('getBalance', tokenId);\r\n    const walletConnected = await connectWallet();\r\n    //console.log('getBalance2', walletConnected, hasConnectorInjected());\r\n    if (walletConnected && hasConnectorInjected()) {\r\n        //console.log('getBalance3', walletConnected);\r\n        const amount = await ergo.get_balance(tokenId);\r\n        return amount;\r\n    } else {\r\n        //console.log('getBalance4', walletConnected);\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            const balance = await getBalanceForAddress(address);\r\n            if (balance.confirmed) {\r\n                if (tokenId === 'ERG') {\r\n                    return balance.confirmed.nanoErgs + balance.unconfirmed.nanoErgs;\r\n                } else {\r\n                    var tokenAmount = 0;\r\n                    for (const tok of balance.confirmed.tokens) {\r\n                        if (tok.tokenId === tokenId) {\r\n                            tokenAmount = tok.amount;\r\n                        }\r\n                    }\r\n                    for (const tok of balance.unconfirmed.tokens) {\r\n                        if (tok.tokenId === tokenId) {\r\n                            tokenAmount = tokenAmount + tok.amount;\r\n                        }\r\n                    }\r\n                    return tokenAmount;\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function walletSignTx(alert, tx, address) {\r\n    alert.update({ title: \"Connecting to wallet...\" });\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted) {\r\n        if (isValidWalletAddress(address)) {\r\n            alert.update({ title: \"Waiting for the transaction signing...\" });\r\n            const txId = await processTx(tx);\r\n            if (txId && hasExtensionConnector()) {\r\n                console.log('[txId]', txId);\r\n                alert.update(\r\n                    {\r\n                        title: \"Waiting for the transaction to reach the mempool\",\r\n                        allowOutsideClick: false,\r\n                        html: `<p>The transaction will be visible in the mempool in few seconds: <a href=\"https://explorer.ergoplatform.com/en/transactions/${txId}\" target=\"_blank\" > ${txId} </a></p>`,\r\n                        showConfirmButton: true,\r\n                    }\r\n                );\r\n                var txFoundMempool = false;\r\n                const startWait = Date.now();\r\n                while (!txFoundMempool && Date.now() - startWait < 60000) {\r\n                    await sleep(3000);\r\n                    try {\r\n                        var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n                        //console.log(\"unconfirmedTxs\", unconfirmedTxs)\r\n                        const unconfirmedTx = unconfirmedTxs.filter(tx => tx.id === txId);\r\n                        if (unconfirmedTx.length > 0) {\r\n                            txFoundMempool = true;\r\n                        }\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                    }\r\n                }\r\n                alert.close();\r\n                if (txFoundMempool) {\r\n                    window.location.reload();\r\n                } else {\r\n                    errorAlert(\"The transaction failed to reach the mempool but should be mined in few minutes\")\r\n                }\r\n            } else {\r\n                if (hasExtensionConnector()) {\r\n                    const title = \"Transaction not signed\";\r\n                    const message = \"Something went wrong, the transaction was not sent.\";\r\n                    errorAlert(title, message);\r\n                }\r\n            }\r\n        } else {\r\n            alert.close();\r\n            const title = \"Wrong address\";\r\n            const message = \"The address \" + address + \" is not found in the connected wallet. Please double check the ERG address provided and the connected wallet.\";\r\n            errorAlert(title, message);\r\n        }\r\n    }\r\n    else {\r\n        alert.close();\r\n        console.log('Wallet access denied');\r\n    }\r\n}\r\n\r\n// Get the utxos for the amout of nanoERG in parameter\r\nexport async function getUtxos(amountToSend) {\r\n    const fullAmountToSend = BigInt(amountToSend);\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const utxos = await ergo.get_utxos(fullAmountToSend.toString());\r\n        const filteredUtxos = [];\r\n        if (utxos && Array.isArray(utxos)) {\r\n            for (const utxo of utxos) {\r\n                try {\r\n                    (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n                    filteredUtxos.push(utxo);\r\n                } catch (e) {\r\n                    console.error('[getUtxos] UTxO failed parsing:', utxo, e);\r\n                }\r\n            }\r\n        }\r\n        return filteredUtxos;\r\n    } else {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            return await getUtxosExplorerByAddress(address, fullAmountToSend)\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nasync function getUtxosExplorerByAddress(address, amount, tokenId = 'ERG') {\r\n    const addressBoxes = await getUnspentBoxesForAddressUpdated(address);\r\n    var selectedUtxos = [], unSelectedUtxos = addressBoxes, amountSelected = BigInt(0);\r\n    if (amount) {\r\n        const amountInt = BigInt(amount.toString());\r\n        if (tokenId === 'ERG') {\r\n            while (amountSelected < amountInt && unSelectedUtxos.length > 0) {\r\n                selectedUtxos.push(unSelectedUtxos.shift());\r\n                amountSelected = selectedUtxos.reduce((acc, utxo) => acc += BigInt(utxo.value), BigInt(0));\r\n            }\r\n            if (amountSelected < amountInt) {\r\n                selectedUtxos = undefined;\r\n            }\r\n        } else {\r\n            unSelectedUtxos = unSelectedUtxos.filter(utxo => utxo.assets.map(tok => tok.tokenId).includes(tokenId));\r\n            while (amountSelected < amountInt && unSelectedUtxos.length > 0) {\r\n                selectedUtxos.push(unSelectedUtxos.shift());\r\n                amountSelected = selectedUtxos.reduce((acc, utxo) => acc += BigInt(utxo.assets.find(tok => tok.tokenId === tokenId).amount), BigInt(0));\r\n            }\r\n            if (amountSelected < amountInt) {\r\n                selectedUtxos = undefined;\r\n            }\r\n        }\r\n    } else { // all utxos\r\n        selectedUtxos = addressBoxes;\r\n    }\r\n    return selectedUtxos;\r\n}\r\n\r\nexport async function getTokenUtxos(amountTokenToSend, tokenId) {\r\n    const fullAmountToSend = BigInt(amountTokenToSend);\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const utxos = await ergo.get_utxos(fullAmountToSend.toString(), tokenId);\r\n        //console.log(\"getTokenUtxos\", utxos)\r\n        const filteredUtxos = [];\r\n        if (utxos) {\r\n            for (const utxo of utxos) {\r\n                try {\r\n                    (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n                    filteredUtxos.push(utxo);\r\n                } catch (e) {\r\n                    console.error('[getUtxos] UTxO failed parsing:', utxo, e);\r\n                }\r\n            }\r\n        } else {\r\n            errorAlert(\"Not enough token found: \" + tokenId + \" amount: \" + amountTokenToSend)\r\n        }\r\n        return filteredUtxos;\r\n    } else {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            const explorerUtxos = await getUtxosExplorerByAddress(address, fullAmountToSend, tokenId);\r\n            if (explorerUtxos) {\r\n                return explorerUtxos;\r\n            } else {\r\n                errorAlert(\"Not enough token found: \" + tokenId + \" amount: \" + amountTokenToSend);\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getAllUtxos() {\r\n    var filteredUtxos = [];\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const utxos = await ergo.get_utxos();\r\n        for (const utxo of utxos) {\r\n            try {\r\n                (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n                filteredUtxos.push(utxo);\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        }\r\n        return filteredUtxos;\r\n    } else {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            const explorerUtxos = await getUtxosExplorerByAddress(address);\r\n            return explorerUtxos;\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nasync function signTx(txToBeSigned) {\r\n    try {\r\n        console.log(\"signTx\", txToBeSigned);\r\n        return await ergo.sign_tx(txToBeSigned);\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nasync function submitTx(txToBeSubmitted) {\r\n    try {\r\n        console.log(\"submitTx\");\r\n        const res = await promiseTimeout(30000, ergo.submit_tx(txToBeSubmitted));\r\n        return res;\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nasync function processTx(txToBeProcessed) {\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const msg = s => {\r\n            console.log('[processTx]', s);\r\n        };\r\n        const signedTx = await signTx(txToBeProcessed);\r\n        if (!signedTx) {\r\n            console.error(`No signed transaction found`);\r\n            return null;\r\n        }\r\n        msg(\"Transaction signed - awaiting submission\");\r\n        const txId = await submitTx(signedTx);\r\n        //const txId = await postTxMempool(signedTx);\r\n        if (!txId) {\r\n            console.log(`No submitted tx ID`);\r\n            return null;\r\n        }\r\n        msg(\"Transaction submitted \");\r\n        return txId;\r\n    } else {\r\n        const [txId, ergoPayTx] = await getTxReducedB64Safe(txToBeProcessed, txToBeProcessed.inputs, txToBeProcessed.dataInputs);\r\n        displayErgoPayTransaction(txId, ergoPayTx);\r\n        return txId;\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { getBalance, getWalletAddressList, isValidWalletAddress } from '../ergo-related/wallet';\r\nimport { promptErgAddr, promptErgAddrList } from \"../utils/Alerts\"\r\nimport { formatERGAmount, formatLongString, sleep } from '../utils/utils';\r\nimport ergoLogo from \"../images/ergo-erg-logo.png\";\r\n\r\n\r\nexport default class InputAddress extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ergAmount: 0,\r\n            oatmealAmount: 0,\r\n            spicyOatmealAmount: 0,\r\n            ergopay: false,\r\n        };\r\n        this.setAddress = this.setAddress.bind(this);\r\n        this.promptErgAddress = this.promptErgAddress.bind(this);\r\n    }\r\n\r\n    setAddress(address) {\r\n        const oldAddr = localStorage.getItem('address') ?? '';\r\n        if (oldAddr !== address) {\r\n            localStorage.setItem('address', address);\r\n            window.location.reload();\r\n        }\r\n    };\r\n\r\n    async promptErgAddress() {\r\n        const addrList = await getWalletAddressList();\r\n        var newAddr = '';\r\n        if (addrList.length > 0) {\r\n            newAddr = await promptErgAddrList(addrList);\r\n        } else {\r\n            newAddr = await promptErgAddr();\r\n        }\r\n\r\n        if (newAddr) {\r\n            this.setAddress(newAddr)\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await sleep(200);\r\n        const nanoERGAmount = await getBalance('ERG');\r\n        if (!(await isValidWalletAddress(localStorage.getItem('address')))) {\r\n            localStorage.setItem('address', '');\r\n        }\r\n        var ergopay = false;\r\n        if (typeof ergo === 'undefined') {\r\n            ergopay = true;\r\n        }\r\n        //console.log(\"InputAddress componentDidMount\", nanoERGAmount, oatmealAmount)\r\n        this.setState({\r\n            ergAmount: nanoERGAmount,\r\n            ergopay: ergopay,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        var glowing = \"\";\r\n        if (address === '') {\r\n            glowing = \"glowing\";\r\n        }\r\n        return (\r\n            <div className=\"zoneaddress d-flex flex-row m-2 p-1 align-items-center\">\r\n                <div className='d-flex flex-column'>\r\n                    <button\r\n                        className={\"btn btn-address m-1 \" + glowing }\r\n                        onClick={this.promptErgAddress}>\r\n                        {\r\n                            address === '' ?\r\n                                <div>Set ERG address</div>\r\n                                :\r\n                                <div>\r\n                                    {formatLongString(address, 6)}\r\n                                    {this.state.ergopay ?\r\n                                        <div>ergopay</div>\r\n                                        : null\r\n                                    }\r\n                                </div>\r\n                        }\r\n                    </button>\r\n                </div>\r\n                {\r\n                    address === '' ?\r\n                        null\r\n                        :\r\n                        <div className=\"d-flex flex-column m-1 p-1 w-100\">\r\n                            <div className=\"w-100 d-flex flex-row justify-content-between align-items-center\">\r\n                                <div><strong>{formatERGAmount(this.state.ergAmount)} </strong></div>\r\n                                &nbsp;\r\n                                <img src={ergoLogo} width=\"20px\" heigth=\"20px\" alt=\"ERG\" />\r\n\r\n                            </div>\r\n                        </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6EAYAAABe6f1VAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAJwAAACcBKgmRTwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAeCSURBVHja7Z1pSFVbFIDTrmWaL83SMBqw0rTAJhqkwdJstLQJSRLLMkpSykiCAoWgwog0NTVnojkSiygryihKioombbLMksJMCxs09b4fq/Ue+7x9zt3n3nPvGd5Zfz64xzOsvfa49tpLO6PRaDQau2lMnJyAK1cC168HensDy8qAhw8D79zRWgnYacOwaLC4OODatUB3d7b7a2qAxcXA/HxgU5NqiwQNqw7a2wNDQoAnTwI7OoySyq9f5PPxfXZ2aikvhbdYV1fg6tXAjRuBw4ez3d/VBayoAFZXk120p6e473n2jGzRpaWKbdnKqmkjRwLT04GtreJa2tevwNxcoL8//T3du9Nb/u/fWmnZMr0YCzYsDHj5MrCrS1zB1tQAExOBvXtb9l0DBwKTk4G1teZ15S9ekM/x8NCoYT09SUXr6sQVVGcn8Nw527YMvjG9vV3c97e1kd+/fDlZwVVj2PHjyS7x509xBfHpE3DPHuDgwcoaMrCiYk/x+LF5Lbu+3lp6SqTo1KnABw/MU/D2bWBUFLBHD3XN1rHnCAoCHjliXoXGv589W2bDOjkBGxvFfXhhIdmy1bbsYqWbGzAhAfjoEVs5VVXJbNjYWOEPfPOGHFv79dO2IVk5aRLw9Gnh8psyRSbD3r1L/6CLF609OdAGcRbf3Ewvx+PHzX2+vXmr34kTgRMm0K9nZQE7O7vpIiCtrcCCAvr1pUuBgwaJfbKZht2wgf57fT3wwgXdaGLk4EFgRwf5u8FAetysZlh08a1YQb+OuyV6SxUndXXA8nL6ddydcna2kmHXrCG3xVCwphUW6kayRNLT6b+7uQGjoiT2FeM67flz+iB/5ow+GZKSfJPSp09ZPW6MLTYkBOjjQ7+em2vdmhwaitVQGYyJsa6+mZn03/39gcHBEnXFfJOl2lrglSt6NyqlHDsG/PiRfj0x0ULDenkBFy4Ubqm476mLNNLeLtwTLlgA9PXle4JB+AU4G3NwoL8YQ0lstd5jFexBmput8z1v39pG7+xsYHIy0NERaGcHjI8HJiQwTp4MBuD79/RB/OhReSYVW7ey+Vrv3we6umpjMlVcTNfz2zdgnz6MLsVly4QLbsYMeRVNTWUz8K1bQGdndRt27FhhPTdvZjTs1av0B1RXKyuoa9cuNgNjhIajo7oNXFkpvNnyr2+ec+OIEcIhKrixrDSFd+9mM3BZGdDBQZ2GXbJEWL/wcB7DHjhAv+HHD2DfvspWfO9eNgOfOqXO3Sf83tev6Xpdu8YxbK9ewKYm+g1FReqKZMjMZDMw6qWeeGFgUpKwXgEBjBvmkyerM1QlO5vNwBkZ6tLvr7+AGG7LlYKCbmTMEVcePlT3ZAOjDHFsNSVbtqhLv/x8uh5fvtgL+4CrqtTtwRk1Cjh9uvDfNTQAz55Vl34BAbwnFsDCOTliF8DKprc3sKFBuIW2tOCYpC79xowR1mvVqj9/6OurzmUOlxhxz7e9iPL9Oxk2q7YhJi+Prtfnz7he59xw6RL9BjzqoNTlAfYo6ErkE4zgnzdPnQZ1cSF7Uq6kpfGsY+fPFy6YxYuVpSgu027cEP5uPCISGanuyWB8PF0/7Gl9fHgMi8sEdB3yL4DlJXqOzp9nm+2qZSgxRb6TFtjTmvQV89UMFBy85VqfomPBlOzcqQ2DBgYK6xkRwWhYPLqhNE/U/v1sBs3K0lYMVEkJXU+c9f/X923iRPu+fcCkJPL3tjbg0KHCIRxSCa5DKyuF/w4jOa5ft25kR1oaEE/KW0sw3PfDB3p0aEoKMDVVZJTikCFAvhwPKSm2qbGhoUZFSUyMbfRGTxhX8OQ9HtQWHaVoKpAZg9wwZEMXaSU2lv472gNbstlRinyBzB4ewMhI3QhSysyZZLgpVw4dkihg3FQgM57oVtv2l1KJp+y48uoVubkh2Wk7PEXHldGjgUFBemuzRPr3B4aHC7dU05NCkYa1PJBZFyHBjHI9e9JXIZhXyrSINCy+IC+Pfj0sDDhsmG4kMYJxwnjojSsnTgAbG61kWG6XjIb+53F/nrdpk24sMTJnDpAv4xzDZMmyyROXpaXa2seVy0VaXk4vR/QN2yxVAUpGBv13FxdyTJ41i+xy/q+C5YIn1J88IYcwruTkmP0qaWrezZtsHpuXL4HbtgExEZZWWyQGMGCwHF/wGVcw2Qjuv8qWwGvaNDIygVUwFR2mssPEVabXacqM9120CFhRIRyRYqriBwdb+l0SK+jlBdyxA4hHD8QKBkRv3w4cMEBZhnR3J3sesXrixj/uJ8+dK3WFlilxtNgkk7gJgWdwrJ9kkuS4cUDMDSm2Z8KgObzfz8/a3y1zkknM2IZdkFjBY55SJZnEHI5YcbAiiRWMvYqLA9r+tJ/Cxipu1lQ8MyS2i+O2bDzvy30fdvFYwTAbqblzBOyZ9NTxjL7T6GjgunVA/iP6dHn3DlhSAvTzI32yBgPbczCwHFMIoAfO2oEGsi135G7ZYsc8Vrl3DxgdzReColRqZL2IHi4c0/DMEatgul30pKntZIDqumJLJTAQiP+PJyKCjDzAFIFFRcCWFq1o/jcTyVXl/3AfQAAAAABJRU5ErkJggg==\"","import React, { Fragment } from 'react';\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport HelpImage from \"../images/help_outline_blue_48dp.png\";\r\n\r\n\r\nexport default function HelpToolTip(props) {\r\n    return (\r\n        <Fragment>\r\n            &nbsp;\r\n            <div className=\"d-flex flex-column align-items-center\">\r\n                <img className=\"armor\"\r\n                    src={HelpImage}\r\n                    alt={\"help tooltip\"}\r\n                    width=\"24px\"\r\n                    data-tip\r\n                    data-for={props.id}\r\n                />\r\n                <ReactTooltip id={props.id}\r\n                    place=\"right\"\r\n                    effect=\"solid\"\r\n                    data-html={true}\r\n                    delayShow={300}\r\n                    delayHide={300}\r\n                    insecure={true}\r\n                    multiline={true}\r\n                    backgroundColor=\"black\"\r\n                    >\r\n                    <div className=\"d-flex flex-column align-items-start\">\r\n                        {props.html}\r\n                    </div>\r\n                </ReactTooltip>\r\n            </div>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwEAYAAAAHkiXEAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAJwAAACcBKgmRTwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAg3SURBVHic7VxbbE1ZGP5W9fScEpdSl4nbGJdkPLgE8TCTGMK4J0ZEVCJeXCMkjEvxoH1QPWR4QNDhTVRcQtK0Ex6QDB7UrV4IQkYQ9+oULYez5uGzrB7de+11dvfpqUy/l332Wmv//9rrX+tf//r/fx8hpZRSohVpQka6O/B/R6sA0oxWAaQZmenugIIQhYVARgaQlQUMGgRICQwZwrL+/Xnfuzfvc3L4VCSSSKW+nu1eveL9w4e83r3L527cANauBW7f5r6X/t1PpGsTFuKPP4DcXODTJ2DqVCAeB8aOZW2XLqnkDLx4QX7nzgEfPgDl5VJu2sTy5kWzCYAzvEMHztp581g6fjxnYWYaV6IQwMeP/H36NO8PHpRy7Vqgtjbl3FMtACG2bQPGjOFMX7yYpe3bp45jEKit5cTYs0fK9euBv/9OFafABcCZnpnJmb54MV9k0qTkqNTV8VpZyRl54wZ1+L17VB3PnlHfv32rn4lEgHbtWN+9O9v366f3EgAYNYrX7Oxk3gioqACuXAFKSqQ8coSTKRgEJgAhdu4EwmEOSn4+S0eOtHlSb5qHDwNt2wJnzki5fDnw/n3Te+bUvzFjyHfWLArou+/s+llZScEXF3PP+PChyf1qqgD0jA+HgY0bWeo18LEYX+jIEb7QyZN8ofp6/z1JDrrfWVnAjBnsz9y5rA2FTE9SEFeuAJs3N3VFBCCAaBRYtsxO1VRXs11REXXrrVv+OQcLIbZuBX78kSpswwaWdupkegKoqJBy3Tpgzx7ffP0KIHFzXb3a3NF//uFsKyiQ8vffkzH3hCguBr7/nne//srr0KGk262bbikl9wYhgOvXadmcPi3lxo3kb8tvyxaga1fuIZs2kW7fvub3i0YpiPPnbfl8eTpZAWhzMhwG9u5lqZtVU13N5bxqle3AC1FSwmeqq4EFCzgAkyerWvueAnxWCOCvv6je/vyTqk6ZnaZ+KEEIAWzfzlK3FVFTQ4EtXZqs+erDFdHQjncaeCG4OSlV42fgCwr4/JQpmqYfCKHpZGUBhYVa95tBFfn8OQe2qIilsZhz644dyUftIfawFgA7npvLu/Hjza2PHk1ex796BSxcmGg2BgkhSDcc5sqyA2f0zZu8Ky01tQQmTuTKsT/JJ7ECsrPpMnA7uSpzklaNLdVEHW/axJULQUqguJgDOXu2vgoBbNnCto8fm7lOnkzjoU8f237SJD5xgr+fPHFuEwpxxUydakvVUwDaSdbQV+OGw4eTNyeFACZM0L+d6l+84HXFCq6sCxekXLkSqKvT13XrgIsX2VdlFLx86cwzI4OCVJu6NxL3juPHTS2BsWP5Jt6q02IFKO8k4L606urUAcqb3teIx4Hhw831+/fbbm66nRDA/v3uLYUAhg1Lvr/v39OJJ4T7RMvN5WocONCLmoUAbHRyZaX/k6sQem9xQiQCXL2aPN02bYBr19zrpUw0Y+2gV7iUwOXLZv7ee5mFF1L5492gfDX+IGV+PnV40Hj7lvtDOOxcL4S7VWOLqipef/65cZ2UwIABXhQsN+FevQwkPjvJWhoiEWD0aHObBw/80//4Ebh/371eSqBnTy8qlgJQESgnvHsHPH1qRyf1oFU1YAAHYP58c+vycv+cQiF3a4g9ATp39qJiIQAhvN23795500ktaH//9FOiOdqunXPr8+fpsb1wwT/HnBzze0tp4/ZuMTFhv+CMz8ujKszL0+6Hxi21O3nHDjpg0h8TtrSCVIDEDW3bBtMde9B7OWsW7+bOdR94gOZxfT1dI8H48ekyMb23EN7jZr0Cqqt5dfL9ZGUBPXrw97//2tHzDyG2b2d2RDyufVLOLRnjzc8Hdu0KfsYLwfd2o9kwO8MdlpuwSu9wJPE59NdciMWAadM0byfcucMZv3t36lRNPG5+byGAR4+8qFgK4O5d97pUOc9M/AYPNrcpLaWqicdT25ehQ93r4nHzuBEWAlAJTSaMGqVjrs2Brl3d64QAbt9OFWf6xiIR8jGFXjMz9UHN0MqbJTPJgGhUeyO/dh1kZ+tgN0Ddmxrw5DxnTqroeyMcBn75hePwdWYeQME8fw6sWRPICtApfCqTzA3MMrANeHxr0AEjlU3h3hI4e9Y29TGJgWIKH6U+Y0bjuIBK71BZBgBw7Jg9fTvQ7i8rc6vnCpk+PWi+XP2//UaV3L27U884RqFQMids64BMYu6kScUwvUNnGXzb4Al78GB6N/Py3FtKCZw6xfiEt/mp4CMmzNxJ/q6pcW4TCqn0Dh3c/raQGJRfv96cw1pby5VhClk6I2kB6ICHlMC+febWnTqp9I5vRRCJA19QwFJTfpCUPG/4S+YNKDFr6dLELAY3vH6tsgwSg93ph1Y1QujErI4dzU+VlXHPKSnxzbfpApg9m/pxxAimJkqpk2DdoAIhpaUq2G2brxMUtLUWCgEzZ2odb5Muf+kSo3RFRWlPTfxCSBQW0gKKROh/sRGEgvKrHz+uYq5B54rqA5Sy4xsm5zpZNU64dIn9i0ZbTHJuI4IJK2LRIjvVlEihccy1qkpHoFQgxC09PRajkywUAn74QbtK1MnV7QBlQlkZZ/yBAy02Pd2VgYhGGTOVEliyhKVeujXdqKlJ/ECjKYEbM5rxE6WtW+nOVil8zCRjrSkdPPU906mUp05RxRw6RBXz5k3KuafvI70dOxgzjcX0R3rjxrHWlKbSdM701cTjwNmzVEfl5ckeoALrTUv5qwKdSaYSmlRejUrvaJhl0KVL41h1w8jdy5faH6/cwso7SSfZ//4z1VYQrV/KpxmtAkgzWgWQZvwHgl/8Mza9GeYAAAAASUVORK5CYII=\"","import React, { Fragment } from 'react';\r\nimport Select from 'react-select';\r\n\r\nexport default function ThemedSelect(props) {\r\n    const colors = {\r\n        /*\r\n         * multiValue(remove)/color:hover\r\n         */\r\n        danger: 'var(--danger)',\r\n\r\n        /*\r\n         * multiValue(remove)/backgroundColor(focused)\r\n         * multiValue(remove)/backgroundColor:hover\r\n         */\r\n        dangerLight: 'var(--danger-light)',\r\n\r\n        /*\r\n         * control/backgroundColor\r\n         * menu/backgroundColor\r\n         * option/color(selected)\r\n         */\r\n        neutral0: 'var(--my-bg-color1)',\r\n\r\n        /*\r\n          * control/backgroundColor(disabled)\r\n         */\r\n        neutral5: 'var(--neutral-5)',\r\n\r\n        /*\r\n         * control/borderColor(disabled)\r\n         * multiValue/backgroundColor\r\n         * indicators(separator)/backgroundColor(disabled)\r\n         */\r\n        neutral10: 'var(--neutral-10)',\r\n\r\n        /*\r\n         * control/borderColor\r\n         * option/color(disabled)\r\n         * indicators/color\r\n         * indicators(separator)/backgroundColor\r\n         * indicators(loading)/color\r\n         */\r\n        neutral20: 'var(--neutral-20)',\r\n\r\n        /*\r\n         * control/borderColor(focused)\r\n         * control/borderColor:hover\r\n         */\r\n        neutral30: 'var(--neutral-30)',\r\n\r\n        /*\r\n         * menu(notice)/color\r\n         * singleValue/color(disabled)\r\n         * indicators/color:hover\r\n         */\r\n        neutral40: 'var(--neutral-40)',\r\n\r\n        /*\r\n         * placeholder/color\r\n         */\r\n        neutral50: 'var(--neutral-50)',\r\n\r\n        /*\r\n         * indicators/color(focused)\r\n         * indicators(loading)/color(focused)\r\n         */\r\n        neutral60: 'var(--neutral-60)',\r\n\r\n        neutral70: 'var(--neutral-70)',\r\n\r\n        /*\r\n         * input/color\r\n         * multiValue(label)/color\r\n          * singleValue/color\r\n         * indicators/color(focused)\r\n         * indicators/color:hover(focused)\r\n         */\r\n        neutral80: 'var(--neutral-80)',\r\n\r\n        neutral90: 'var(--neutral-90)',\r\n\r\n        /*\r\n         * control/boxShadow(focused)\r\n         * control/borderColor(focused)\r\n         * control/borderColor:hover(focused)\r\n         * option/backgroundColor(selected)\r\n         * option/backgroundColor:active(selected)\r\n         */\r\n        primary: 'var(--my-bg-color4)',\r\n\r\n        /*\r\n         * option/backgroundColor(focused)\r\n         */\r\n        primary25: 'var(--my-bg-color2)',\r\n\r\n        /*\r\n         * option/backgroundColor:active\r\n         */\r\n        primary50: 'var(--my-bg-color3)',\r\n\r\n        primary75: 'var(--my-bg-color3)',\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <Select id={props.id}\r\n                className='d-flex justify-content-start selectReact '\r\n                value={{\r\n                    value: props.value,\r\n                    label: props.value\r\n                }}\r\n                onChange={props.onChange}\r\n                options={props.options}\r\n                isSearchable={false}\r\n                isMulti={false}\r\n                theme={theme => ({\r\n                    ...theme,\r\n                    colors: {\r\n                        ...colors\r\n                    }\r\n                })}\r\n            />\r\n        </Fragment>\r\n\r\n    )\r\n}","import React, { Fragment } from 'react';\r\nimport { mintCITYContract, mintSimpleToken } from '../ergo-related/mint';\r\nimport { TX_FEE, RECOMMENDED_FEES, NANOERG_TO_ERG } from '../utils/constants';\r\nimport { downloadAndSetSHA256, formatERGAmount } from '../utils/utils';\r\nimport HelpToolTip from './HelpToolTip';\r\nimport ThemedSelect from './ThemedSelect';\r\nimport TokenMedia from './TokenMedia';\r\n\r\n/* global BigInt */\r\n\r\nconst MAX_SIGNIFICANT_NUMBER_TOKEN = 19;\r\n\r\nconst optionsType = [\r\n    { value: 'Standard', label: 'Standard' },\r\n    { value: 'Picture', label: 'Picture' },\r\n    { value: 'Audio', label: 'Audio' },\r\n    { value: 'Video', label: 'Video' },\r\n]\r\n\r\nexport default class MintTokens extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        var optionsDecimals = [];\r\n        for (var i = 0; i < 10; i++) {\r\n            optionsDecimals.push({ value: i.toString(), label: i.toString() })\r\n        }\r\n        this.state = {\r\n            walletList: [],\r\n            setPage: props.setPage,\r\n            tokenName: '',\r\n            tokenAmount: '1',\r\n            tokenDescription: '',\r\n            tokenDecimals: '0',\r\n            tokenType: 'Standard',\r\n            tokenMediaHash: '',\r\n            tokenMediaAddress: '',\r\n            optionsDecimals: optionsDecimals,\r\n            tokenIDStart: '',\r\n            recommendedFee: TX_FEE,\r\n            fee: parseFloat(TX_FEE / NANOERG_TO_ERG),\r\n        };\r\n        this.setTokenName = this.setTokenName.bind(this);\r\n        this.setTokenDescription = this.setTokenDescription.bind(this);\r\n        this.setTokenAmount = this.setTokenAmount.bind(this);\r\n        this.setTokenDecimals = this.setTokenDecimals.bind(this);\r\n        this.setTokenType = this.setTokenType.bind(this);\r\n        this.setTokenMediaAddress = this.setTokenMediaAddress.bind(this);\r\n        this.isValidTokenAmount = this.isValidTokenAmount.bind(this);\r\n        this.validateAmountStrInt = this.validateAmountStrInt.bind(this);\r\n    }\r\n    setTokenName = (name) => { this.setState({ tokenName: name }); };\r\n    setTokenDescription = (desc) => { this.setState({ tokenDescription: desc }); };\r\n    setTokenAmount = (amount) => {\r\n        if (this.isValidTokenAmount(amount)) {\r\n            this.setState({ tokenAmount: amount });\r\n        }\r\n    };\r\n    setTokenDecimals = (dec) => {\r\n        this.setState({\r\n            tokenDecimals: dec,\r\n            tokenMediaAddress: '',\r\n            tokenMediaHash: '',\r\n        });\r\n        if (dec === '0') {\r\n            this.setTokenAmount(this.state.tokenAmount.split('.')[0]);\r\n        } else {\r\n            const splittedAmount = this.state.tokenAmount.split('.');\r\n            var newAmount = splittedAmount[0];\r\n            if (splittedAmount.length > 1 && typeof splittedAmount[1] === 'string' && splittedAmount[1].length > 0) {\r\n                newAmount = newAmount + '.' + splittedAmount[1].substring(0, dec);\r\n            }\r\n            if (newAmount.toString().length + parseInt(dec) <= 19) {\r\n                this.setTokenAmount(newAmount);\r\n            } else { // token amount too big with new decimals\r\n                this.setTokenAmount(\"1\");\r\n            }\r\n        }\r\n    };\r\n    setTokenType = (type) => {\r\n        var decimals = this.state.tokenDecimals;\r\n        if (type !== 'Standard') {\r\n            decimals = '0';\r\n        }\r\n        this.setState({\r\n            tokenType: type,\r\n        });\r\n        this.setTokenDecimals(decimals);\r\n    };\r\n    async setTokenMediaAddress(addr) {\r\n        this.setState({ tokenMediaAddress: addr, tokenMediaHash: await downloadAndSetSHA256(addr) });\r\n    };\r\n    setTokenIDStart = (startID) => {\r\n        const fixedStartID = startID.toLowerCase().replace(/[^a-f0-9]/gi, '').substring(0, RECOMMENDED_FEES.length - 1)\r\n        this.setState({\r\n            tokenIDStart: fixedStartID,\r\n            recommendedFee: RECOMMENDED_FEES[fixedStartID.length],\r\n            fee: parseFloat(RECOMMENDED_FEES[fixedStartID.length] / NANOERG_TO_ERG).toFixed(4),\r\n        });\r\n    };\r\n    setFee = (feeFloat) => {\r\n        const fixedFee = feeFloat.replace(',', '.').replace(/[^0-9\\.]/g, ''); //eslint-disable-line\r\n        this.setState({\r\n            fee: fixedFee,\r\n        });\r\n\r\n    }\r\n\r\n    isValidTokenAmount = (amount) => {\r\n        var validAmount = false;\r\n        if (amount.match(\"^[0-9\\.]+$\") != null) { //eslint-disable-line\r\n            if (this.state.tokenDecimals === '0') { // No decimals\r\n                if (amount.match(\"^[0-9]+$\") != null) {\r\n                    validAmount = this.validateAmountStrInt(amount);\r\n                }\r\n            } else { // Token decimals allowed\r\n                var splited = amount.split('.');\r\n                if (splited.length === 1) { // no decimals\r\n                    validAmount = this.validateAmountStrInt(amount + parseInt(this.state.tokenDecimals));\r\n                }\r\n                if (splited.length === 2) {\r\n                    if (amount.length - 1 < MAX_SIGNIFICANT_NUMBER_TOKEN) {\r\n                        if (splited[1].length <= parseInt(this.state.tokenDecimals)) {\r\n                            validAmount = this.validateAmountStrInt(splited[0] + splited[1]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return validAmount;\r\n    }\r\n    validateAmountStrInt = (amountStrInt) => {\r\n        if (amountStrInt.length <= MAX_SIGNIFICANT_NUMBER_TOKEN) {\r\n            try {\r\n                BigInt(amountStrInt);\r\n                return true;\r\n            } catch (e) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    async mintToken() {\r\n        const txFeeNano = Math.round(parseFloat(this.state.fee) * NANOERG_TO_ERG);\r\n        if (this.state.tokenIDStart.length === 0) {\r\n            await mintSimpleToken(this.state.tokenName, this.state.tokenDescription, this.state.tokenAmount, this.state.tokenDecimals,\r\n                this.state.tokenType, this.state.tokenMediaAddress, this.state.tokenMediaHash, txFeeNano);\r\n        } else {\r\n            await mintCITYContract(this.state.tokenName, this.state.tokenDescription, this.state.tokenAmount, this.state.tokenDecimals,\r\n                this.state.tokenType, this.state.tokenMediaAddress, this.state.tokenMediaHash, txFeeNano, this.state.tokenIDStart);\r\n        }\r\n        //\r\n    }\r\n\r\n    render() {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        return (\r\n            <Fragment >\r\n                <div className=\"w-75 p-1 m-1\">\r\n                    <h4>Mint tokens</h4>\r\n                    <h5>Use CYTI minable smart contract to choose your token ID</h5>\r\n                </div>\r\n                <div className=\"w-75 card zonemint container p-1 m-1\">\r\n                    <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                        <label htmlFor=\"tokenType\" className='col-sm-4 d-flex align-items-start'>Type</label>\r\n                        <div className='w-100 d-flex flex-row'>\r\n                            <ThemedSelect id=\"tokenType\"\r\n                                value={this.state.tokenType}\r\n                                onChange={(type) => this.setTokenType(type.value)}\r\n                                options={optionsType}\r\n                            />\r\n                            <div></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                        <label htmlFor=\"tokenName\" className='col-sm-4 d-flex align-items-start'>Name</label>\r\n                        <input type=\"text\"\r\n                            id=\"tokenName\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenName(e.target.value)}\r\n                            value={this.state.tokenName}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-center m-1 p-1'>\r\n                        <label htmlFor=\"tokenDescription\" className='col-sm-4 d-flex align-items-start'>Description</label>\r\n                        <textarea id=\"tokenDescription\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenDescription(e.target.value)}\r\n                            value={this.state.tokenDescription}\r\n                            rows=\"4\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                        <label htmlFor=\"tokenAmount\" className='col-sm-4 d-flex justify-content-start align-items-start'>Amount</label>\r\n                        <input type=\"text\"\r\n                            id=\"tokenAmount\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenAmount(e.target.value)}\r\n                            value={this.state.tokenAmount}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    {\r\n                        this.state.tokenType === 'Standard' ?\r\n                            <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                                <label htmlFor=\"tokenDecimals\" className='col-sm-4 d-flex align-items-start'>Decimals</label>\r\n                                <div className='w-100 d-flex flex-row justify-content-between '>\r\n                                    <ThemedSelect id=\"tokenDecimals\"\r\n                                        value={this.state.tokenDecimals}\r\n                                        onChange={(dec) => this.setTokenDecimals(dec.value)}\r\n                                        options={this.state.optionsDecimals}\r\n                                    />\r\n                                    <div></div>\r\n                                </div>\r\n                            </div>\r\n                            : null\r\n                    }\r\n                    <TokenMedia type={this.state.tokenType} address={this.state.tokenMediaAddress} width={200} />\r\n                    {\r\n                        this.state.tokenType === \"Standard\" ? null\r\n                            :\r\n                            <Fragment>\r\n\r\n                                <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                                    <label htmlFor=\"tokenMediaAddr\" className='col-sm-4 d-flex align-items-start'>{this.state.tokenType} URL</label>\r\n                                    <input type=\"text\"\r\n                                        id=\"tokenMediaAddr\"\r\n                                        className=\"form-control col-sm input-dark\"\r\n                                        onChange={e => this.setTokenMediaAddress(e.target.value)}\r\n                                        value={this.state.tokenMediaAddress}\r\n                                        autocomplete=\"off\"\r\n                                    />\r\n                                </div>\r\n                            </Fragment>\r\n                    }\r\n                    <div className='d-flex flex-row justify-content-between align-items-center m-1 p-1'>\r\n                        <label htmlFor=\"tokenIdStart\" className='col-sm-4 d-flex align-items-center'>Desired token ID start\r\n                            <HelpToolTip id=\"tokenIdStartToolTip\" html={\r\n                                <Fragment>\r\n                                    <div>Hexadecimal ([0-9a-f]) characters chosen for the begining of the minted token ID. </div>\r\n                                    <div>The maximum allowed length is currently 8 characters given the performance of the miner.</div>\r\n                                    <div>The difficulty goes by two charracters: 1 and 2 character length will have the same difficulty, like 3 and 4 ...</div>\r\n                                    <div>Leave empty to mint a standard token instead of a minable CYTI contract.</div>\r\n                                </Fragment>\r\n                            } />\r\n                        </label>\r\n                        <input type=\"text\"\r\n                            id=\"tokenIdStart\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenIDStart(e.target.value)}\r\n                            value={this.state.tokenIDStart}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-center m-1 p-1'>\r\n                        <label htmlFor=\"recommendedFee\" className='col-sm-4 d-flex align-items-end'>Recommended fee\r\n                            <HelpToolTip id=\"recommendedFeeToolTip\" html={\r\n                                <Fragment>\r\n                                    <div>Fee recommended by default in the miner configuration.</div>\r\n                                </Fragment>\r\n                            } />\r\n                        </label>\r\n                        <div className='w-100 d-flex flex-row justify-content-between align-items-center'>\r\n                            <div id=\"recommendedFee\" className='d-flex align-items-start'>{formatERGAmount(this.state.recommendedFee)} ERG</div>\r\n                            <div></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-left  m-1 p-1'>\r\n                        <label htmlFor=\"fee\" className='col-sm-4 d-flex align-items-center'>Fee\r\n                            <HelpToolTip id=\"feeToolTip\" html={\r\n                                <Fragment>\r\n                                    <div>Fee for transaction miners and token ID miners.</div>\r\n                                    <div>The minimal fee for a CYTI contrat is 0.0042 ERG so it can technically be excuted.</div>\r\n                                    <div>The miners are configuring a price for each difficulty level (number of characters you require for the start of the token ID).</div>\r\n                                    <div>A CYTI contract with a too low fee might never be mined but is refundable.</div>\r\n                                </Fragment>\r\n                            } />\r\n                        </label>\r\n                        <input type=\"text\"\r\n                            id=\"fee\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setFee(e.target.value)}\r\n                            value={this.state.fee}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-center align-items-center m-1 p-1'>\r\n                        <button className='btn btn-blue'\r\n                            onClick={() => this.mintToken()}\r\n                            disabled={this.state.tokenName.length === 0 }\r\n                        >\r\n                            {\r\n                                this.state.tokenIDStart.length > 0 ?\r\n                                    \"Mint CYTI\"\r\n                                    : \"Mint\"\r\n                            }\r\n\r\n                        </button>\r\n                    </div>\r\n                </div >\r\n            </Fragment >\r\n        )\r\n    }\r\n}\r\n","import githubLogo from \"../images/Github.png\";\r\n\r\n\r\nexport default function Footer() {\r\n    return (\r\n        <div className=\"bggrey w-100\">\r\n            <div >\r\n                © 2022 Haileypdll/ThierryM1212\r\n                &nbsp;\r\n                <a href=\"https://github.com/ThierryM1212/cyti\" target=\"_blank\" rel=\"noreferrer\">\r\n                    <img src={githubLogo} width=\"20\" height=\"20\" className=\"d-inline-block align-top\" alt=\"github\" />\r\n                </a>\r\n            </div>\r\n        </div>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII=\"","import './App.css';\r\nimport React from 'react';\r\nimport InputAddress from './components/InputAddress';\r\nimport MintTokens from './components/MintTokens';\r\nimport MintRequests from './components/MintRequests';\r\nimport Footer from './components/Footer';\r\n\r\nexport default class App extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App d-flex flex-column justify-content-between align-items-center\">\r\n        <div className=\"w-100 d-flex flex-column align-items-center\">\r\n          <div className=\"w-100 d-flex flex-row justify-content-between align-items-center bggrey\">\r\n            <div className='d-flex flex-column  align-items-start m-1 p-1'>\r\n              <h2>&nbsp;C.Y.T.I<span className='hidden-mobile'> - Choose Your Token ID</span></h2>\r\n              <div>\r\n                <button className='btn btn-yellow'\r\n                  onClick={() => {\r\n                    const url = 'https://github.com/ThierryM1212/cyti/releases';\r\n                    window.open(url, '_blank').focus();\r\n                  }}\r\n                >\r\n                  Get CYTI miner\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <InputAddress />\r\n          </div>\r\n\r\n          <MintTokens />\r\n          <MintRequests />\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","\r\nexport async function post(url, body = {}, apiKey = '') {\r\n    return await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'mode': 'cors',\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n            'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\r\n            api_key: apiKey,\r\n        },\r\n        body: JSON.stringify(body),\r\n    });\r\n}\r\nexport async function get(url, apiKey = '') {\r\n    try {\r\n        return await fetch(url, {\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'mode': 'cors',\r\n                'Access-Control-Allow-Origin': '*',\r\n                'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n                'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\r\n                api_key: apiKey,\r\n            }\r\n        }).then(res => res.json());\r\n    } catch (e) {\r\n        console.error(e);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getStream(url, apiKey = '') {\r\n    try {\r\n        const response = await fetch(url)\r\n        const responseTxt = await response.text();\r\n        return responseTxt;\r\n    } catch (e) {\r\n        console.error(e);\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport async function getBlob(url) {\r\n    try {\r\n        const result = await fetch(url).then(res => res.blob());\r\n        return result;\r\n    } catch (e) {\r\n        console.error(e);\r\n        return [];\r\n    }\r\n}\r\n","import { waitingAlert } from \"../utils/Alerts\";\r\nimport { encodeHexConst, encodeLong, encodeStrConst } from \"./serializer\";\r\nimport { CYTI_MINT_REQUEST_SCRIPT_ADDRESS, MIN_NANOERG_BOX_VALUE, NFT_TYPES, TX_FEE } from \"../utils/constants\";\r\nimport { getUtxos, walletSignTx } from \"./wallet\";\r\nimport { Serializer } from \"@coinbarn/ergo-ts\";\r\nimport { currentHeight } from \"./explorer\";\r\nimport { createTransaction, getUtxosListValue } from \"./wasm\";\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global BigInt */\r\n\r\nexport async function mintSimpleToken(tokName, tokDesc, tokAmount, tokDecimals, tokType, tokURL, tokHash, txFeeNano) {\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    const address = localStorage.getItem('address');\r\n    var txAmount = txFeeNano;\r\n    if (txFeeNano < TX_FEE + MIN_NANOERG_BOX_VALUE) {\r\n        txAmount = TX_FEE + MIN_NANOERG_BOX_VALUE;\r\n    }\r\n    const utxos = await getUtxos(txAmount);\r\n    const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n    const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n    const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n    const creationHeight = await currentHeight();\r\n    const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n    const tokenAmountAdjusted = BigInt(tokAmount * Math.pow(10, tokDecimals)).toString();\r\n    const mintBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(MIN_NANOERG_BOX_VALUE.toString()));\r\n    const mintBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        mintBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address)),\r\n        creationHeight);\r\n    const token = new (await ergolib).Token(\r\n        (await ergolib).TokenId.from_box_id((await ergolib).BoxId.from_str(utxos[0].boxId)),\r\n        (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(tokenAmountAdjusted))\r\n    );\r\n    mintBoxBuilder.mint_token(token, tokName, tokDesc, tokDecimals);\r\n    mintBoxBuilder.set_register_value(7, await encodeStrConst(NFT_TYPES[tokType]));\r\n    mintBoxBuilder.set_register_value(8, await encodeStrConst(tokHash));\r\n    mintBoxBuilder.set_register_value(9, await encodeStrConst(tokURL));\r\n    try {\r\n        outputCandidates.add(mintBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n    var tx = await createTransaction(boxSelection, outputCandidates, [], address, utxos);\r\n    console.log(\"tx\", tx)\r\n    const txId = await walletSignTx(alert, tx, address);\r\n    return txId;\r\n}\r\n\r\nexport async function mintCITYContract(tokName, tokDesc, tokAmount, tokDecimals, tokType, tokURL, tokHash, txFeeNano, tokIdStart) {\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    const address = localStorage.getItem('address');\r\n    var txAmount = txFeeNano; // initial amount in the contract\r\n    if (txFeeNano < 2 * (TX_FEE + MIN_NANOERG_BOX_VALUE)) {\r\n        txAmount = 2 * (TX_FEE + MIN_NANOERG_BOX_VALUE);\r\n    }\r\n    const utxos = await getUtxos(txAmount + TX_FEE);\r\n    const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n    const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n    const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n    const creationHeight = await currentHeight();\r\n    const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n    const tokenAmountAdjusted = BigInt(tokAmount * Math.pow(10, tokDecimals)).toString();\r\n    // fix required tokIdStart if number of char if odd\r\n    if (tokIdStart.length % 2 === 1) {\r\n        tokIdStart = tokIdStart + '0';\r\n    }\r\n    // MINT CYTI\r\n    const txAmountBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str((txAmount).toString()));\r\n    const mintCYTIBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        txAmountBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(CYTI_MINT_REQUEST_SCRIPT_ADDRESS)),\r\n        creationHeight);\r\n    mintCYTIBoxBuilder.set_register_value(4, await encodeLong(tokenAmountAdjusted));\r\n    const tokenMintInfos = [tokName, tokDesc, tokDecimals, NFT_TYPES[tokType], tokHash, tokURL];\r\n    console.log(\"mint info\", [tokName, tokDesc, tokDecimals, NFT_TYPES[tokType], tokHash, tokURL]);\r\n    const registerValue5 = tokenMintInfos.map((val) => {\r\n        return new Uint8Array(Buffer.from(Serializer.stringToHex(val), 'hex'))\r\n\r\n    });\r\n    mintCYTIBoxBuilder.set_register_value(5, (await ergolib).Constant.from_coll_coll_byte(registerValue5));\r\n    const ownerSigmaProp = (await ergolib).Constant.from_ecpoint_bytes(\r\n        (await ergolib).Address.from_base58(address).to_bytes(0x00).subarray(1, 34)\r\n    );\r\n    mintCYTIBoxBuilder.set_register_value(6, ownerSigmaProp);\r\n    mintCYTIBoxBuilder.set_register_value(7, await encodeHexConst(tokIdStart));\r\n    mintCYTIBoxBuilder.set_register_value(8, ownerSigmaProp);\r\n    mintCYTIBoxBuilder.set_register_value(9, await encodeHexConst(\"000000\"));\r\n    try {\r\n        outputCandidates.add(mintCYTIBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n\r\n    var tx = await createTransaction(boxSelection, outputCandidates, [], address, utxos);\r\n    console.log(\"tx\", tx)\r\n    const txId = await walletSignTx(alert, tx, address);\r\n    return txId;\r\n}\r\n\r\nexport async function refundMintRequest(mintRequestJSON) {\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    const address = localStorage.getItem('address');\r\n    var utxos = [mintRequestJSON];\r\n    if (parseInt(mintRequestJSON.value) < TX_FEE + MIN_NANOERG_BOX_VALUE) {\r\n        const utxos1 = await getUtxos(TX_FEE);\r\n        utxos = utxos.concat(utxos1)\r\n    }\r\n    const utxosValue = getUtxosListValue(utxos);\r\n    const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n    const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n    const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n    const creationHeight = await currentHeight();\r\n    const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n    const refundBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str((parseInt(utxosValue) - TX_FEE).toString()));\r\n    const refundBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        refundBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address)),\r\n        creationHeight);\r\n    try {\r\n        outputCandidates.add(refundBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n    var tx = await createTransaction(boxSelection, outputCandidates, [], address, utxos);\r\n    console.log(\"tx\", tx)\r\n    const txId = await walletSignTx(alert, tx, address);\r\n    return txId;\r\n}\r\n\r\n","export const NANOERG_TO_ERG = 1000000000;\r\nexport const MIN_NANOERG_BOX_VALUE = 0.001 * NANOERG_TO_ERG;\r\nexport const TX_FEE = 1100000;\r\n\r\nexport const DEFAULT_EXPLORER_API_ADDRESS = \"https://api.ergoplatform.com/\";\r\nexport const DEFAULT_EXPLORER_ADDRESS = \"https://explorer.ergoplatform.com/\";\r\n\r\nexport const NFT_TYPES = {\r\n    'Standard': \"\",\r\n    'Picture': \"\u0001\u0001\",\r\n    'Audio': \"\u0001\u0002\",\r\n    'Video': \"\u0001\u0003\",\r\n}\r\n\r\nexport const RECOMMENDED_FEES = [\r\n    TX_FEE,\r\n    0.01 * NANOERG_TO_ERG,\r\n    0.01 * NANOERG_TO_ERG,\r\n    0.1 * NANOERG_TO_ERG,\r\n    0.1 * NANOERG_TO_ERG,\r\n    1 * NANOERG_TO_ERG,\r\n    1 * NANOERG_TO_ERG,\r\n    20 * NANOERG_TO_ERG,\r\n    20 * NANOERG_TO_ERG,\r\n];\r\n\r\nexport const CYTI_MINT_REQUEST_SCRIPT=\"1020040004000404040005c0a3860105c0b5fa02010004060580897a05c0a38601040204020580897a04020402040204000402040004020400040204020402040404020406040204080402040a0100d80ad601e4c6a70608d602c5a7d603e4c6a7070ed604b17203d605b4720273007204d6069472057203d607b1a5d608b2a5730100d609e4c6a70405d60ae4c6a7051aeb02ea027201d17206d1ec95eded937207730293b4c572087303720472037206edededededededed93c27208c2a793c1720899c1a7730492c17208730593e4c672080405720993e4c67208051a720a93e4c672080608720193e4c67208070e7203e6c672080808e6c67208090e730695ed93720773079372057203edededededededededededed93c27208d0e4c6a7080892c172089999c1a77308730993c2b2a5730a00d0720193c1b2a5730b00730c93b1db6308b2a5730d00730e938cb2db6308b2a5730f00731000017202938cb2db6308b2a573110073120002720993e4c6b2a5731300040eb2720a73140093e4c6b2a5731500050eb2720a73160093e4c6b2a5731700060eb2720a73180093e4c6b2a5731900070eb2720a731a0093e4c6b2a5731b00080eb2720a731c0093e4c6b2a5731d00090eb2720a731e00731f\";\r\nexport const CYTI_MINT_REQUEST_SCRIPT_HASH=\"08262f1f872737e3f62af908517603572e8fd5ae0c019ce94bb91ed27ef281c4\";\r\nexport const CYTI_MINT_REQUEST_SCRIPT_ADDRESS=\"PjsKkeMDreCAE9RoZm6ocrrMg7Pes8tHL7yCfdDJRi6NWT3Ds7vQoi69rMNmn7Ma6RtJp2jmAMcwHD4GyRuqXr6H5vy1CDEPTzq23XYCCocDEvGrwFXUK4h7SVtXSpJWJrGZHqw5vSvHE2hHGM7uvhcJHVxkAFUttLUxdWgVGnAH6YqbUKs95Ky6Hgz4peTjs95Zo2QcmAJkdCD6XZKZ5iztvQdMb9jHv9QdGhh7Ls8SnQ2qLaWkDH1NghFwvrqhb99whJZe2wt1PDzNVHjzvL7XXnjDfUKQXG1N4qE1Nzpjz3cdQLojNNMr48u9op9rs21amziXfWmS9rjtZn5jeaiNXdmMqastrSdDXcijpru3wUetrvdnzUXCDKP9Gs7AHMBCiRwr2FrXHZ1Lf71UT1uwVLzfrJ4PFYL7APYL5pkJJF9Q7i9v7kFsQd4iHFwD52NnZiiqS14gYu4SQppFL9pBWotug7rQHuNZ11gEbvvH1EYwMvDRKnRzmGqbs28Uoco1ZGeAu7aK7cppNAHy7vmgqM1c8ch9gWMSdxs5ecMQwCgwjH8fLZxMEEEt7SekgTpifCDNGKFumiiGHRwcysgmA9wmb8ReazWoiMgw1yTz7w1vykT4iu85JnEcSGThG\";\r\n\r\n","import React, { Fragment } from 'react';\r\n\r\n\r\nexport default function TokenMedia(props) {\r\n    return (\r\n        <Fragment>\r\n            {\r\n                props.type === \"Standard\" || props.address === '' ? null :\r\n                    <div className='d-flex flex-row justify-content-center align-items-center m-1 p-1'>\r\n                        {\r\n                            props.type === \"Picture\" ?\r\n                                <img src={props.address} alt=\"token\" width={props.width} />\r\n                                : null\r\n                        }\r\n                        {\r\n                            props.type === \"Video\" ?\r\n                                <video controls src={props.address} alt=\"token\" width={props.width} />\r\n                                : null\r\n                        }\r\n                        {\r\n                            props.type === \"Audio\" ?\r\n                                <audio controls src={props.address} alt=\"token\" width={props.width} />\r\n                                : null\r\n                        }\r\n                    </div>\r\n            }\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n"],"sourceRoot":""}