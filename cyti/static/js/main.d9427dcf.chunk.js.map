{"version":3,"sources":["ergo-related/serializer.js","utils/utils.js","ergo-related/explorer.js","utils/Alerts.js","components/MintRequests.js","utils/CYTIRequest.js","components/MintRequest.js","ergo-related/wasm.js","ergo-related/wallet.js","components/InputAddress.js","images/ergo-erg-logo.png","components/HelpToolTip.js","images/help_outline_blue_48dp.png","components/ThemedSelect.js","components/MintTokens.js","components/Footer.js","images/Github.png","App.js","reportWebVitals.ts","index.tsx","ergo-related/rest.js","ergo-related/mint.js","utils/constants.js","components/TokenMedia.js"],"names":["ergolib","encodeLong","num","a","Constant","I64","from_str","from_i64","decodeLong","decode_from_base16","to_i64","to_str","encodeHexConst","reg","from_byte_array","Buffer","from","encodeStrConst","str","Serializer","stringToHex","toHexString","byteArray","Array","byte","toString","slice","join","decodeHex","encoded","to_byte_array","sigmaPropToAddress","sigmaProp","Address","ErgoTree","from_base16_bytes","recreate_from_ergo_tree","to_base58","encodeContract","address","Contract","from_base58","tmp","pay_to_address","ergo_tree","to_base16_bytes","byteArrayToBase64","binary","len","byteLength","i","String","fromCharCode","window","btoa","createHash","require","formatLongString","length","substring","formatERGAmount","amountStr","parseFloat","parseInt","NANOERG_TO_ERG","toFixed","downloadAndSetSHA256","url","getBlob","blob","hash","update","Uint8Array","digest","console","log","promiseTimeout","ms","promise","timeout","Promise","resolve","reject","id","setTimeout","clearTimeout","race","sleep","explorerApi","DEFAULT_EXPLORER_API_ADDRESS","explorerApiV1","getRequest","get","then","res","data","getRequestV1","currentHeight","items","height","getUnspentBoxesByAddress","getUnconfirmedTxsFor","addr","getSpentAndUnspentBoxesFromMempool","unconfirmedTxs","spentBoxes","newBoxes","map","tx","inputs","flat","outputs","filter","box","getUnspentBoxesForAddressUpdated","boxesTmp","spentBlobBoxIds","boxId","boxes","concat","includes","getExplorerBlockHeaders","getExplorerBlockHeadersFull","getBalanceForAddress","waitingAlert","title","MySwal","withReactContent","Swal","fire","allowOutsideClick","showConfirmButton","errorAlert","msg","icon","text","displayErgoPayTransaction","txId","reducedTx","html","className","onClick","open","focus","location","reload","promptErgAddr","focusConfirm","showCancelButton","preConfirm","ergAddress","getPopup","querySelector","value","showValidationMessage","result","promptErgAddrList","addrList","inputOptions","input","inputValue","localStorage","getItem","customClass","inputValidator","MintRequests","props","state","userMintRequests","this","fetchMintRequests","CYTI_MINT_REQUEST_SCRIPT_ADDRESS","mintBoxes","spentBoxIds","addressSigmaPropHex","to_bytes","subarray","from_ecpoint_bytes","sigma_serialize_bytes","additionalRegisters","R6","mintSigmaProp","serializedValue","push","e","setState","cytiBoxJSON","React","Component","CYTIRequest","boxJSON","full","requestOwner","targetFirstChar","minerAddress","tokAmount","tokName","tokDesc","tokDecimals","tokType","tokMediaHash","tokMediaURL","isProcessed","getRegisterValue","decodeR5Array","tokInfo","tokTypeValue","Object","keys","NFT_TYPES","find","key","o","initialize","to_coll_coll_byte","r","stringFromHex","MintRequest","request","create","mintRequestJSON","refundMintRequest","connectedAddress","statusLabel","tokenType","labelMap","href","TokenMedia","type","width","lbl","htmlFor","startsWith","refund","boxCandidateToJsonMin","boxCandidate","as_i64","as_num","tokens","JSONBigInt","parse","to_json","boxCandidatesToJsonMin","boxCandidates","createTransaction","boxSelection","outputCandidates","dataInputs","changeAddress","utxos","creationHeight","outputJs","missingErgs","getMissingErg","BigInt","TX_FEE","getMissingTokens","BoxValue","changeBoxValue","ErgoBoxCandidateBuilder","changeBoxBuilder","tokId","tokenId","TokenId","TokenAmount","tokenAmount","add_token","add","build","TxBuilder","txBuilder","new","DataInputs","dataInputsWASM","boxIdWASM","BoxId","DataInput","dataInputWASM","set_data_inputs","parseUnsignedTx","unsignedTx","UnsignedTransaction","from_json","stringify","correctTx","fullBoxInfo","parseUtxo","utxo","extension","json","output","addExtention","mode","undefined","ergoTree","isArray","assets","asset","amount","name","decimals","isDict","parseAdditionalRegisters","transactionId","index","registterOut","entries","forEach","getUtxosListValue","reduce","acc","getTokenListFromUtxos","tokenList","amountIn","amountOut","tokensIn","tokensOut","token","register","v","Date","getErgoStateContext","block_headers","BlockHeaders","pre_header","PreHeader","from_block_header","ErgoStateContext","getTxReducedB64Safe","getTxReduced","txReducedBase64","ergoPayTx","replace","inputBoxes","ErgoBoxes","from_boxes_json","inputDataBoxes","ctx","ReducedTransaction","from_unsigned_tx","hasExtensionConnector","ergo_check_read_access","hasConnectorInjected","ergo","isWalletConnected","error","connectWallet","alreadyConnected","ergo_request_read_access","isValidWalletAddress","get_used_addresses","address_list","getWalletAddressList","getBalance","get_balance","balance","confirmed","nanoErgs","unconfirmed","tok","walletSignTx","alert","processTx","txFoundMempool","startWait","now","close","message","getUtxos","amountToSend","fullAmountToSend","get_utxos","filteredUtxos","ErgoBox","getUtxosExplorerByAddress","addressBoxes","selectedUtxos","unSelectedUtxos","amountSelected","amountInt","shift","signTx","txToBeSigned","sign_tx","submitTx","txToBeSubmitted","submit_tx","txToBeProcessed","s","signedTx","InputAddress","ergAmount","oatmealAmount","spicyOatmealAmount","ergopay","setAddress","bind","promptErgAddress","setItem","newAddr","nanoERGAmount","glowing","src","heigth","alt","HelpToolTip","data-tip","data-for","place","effect","data-html","delayShow","delayHide","insecure","multiline","backgroundColor","ThemedSelect","colors","danger","dangerLight","neutral0","neutral5","neutral10","neutral20","neutral30","neutral40","neutral50","neutral60","neutral70","neutral80","neutral90","primary","primary25","primary50","primary75","label","onChange","options","isSearchable","isMulti","theme","optionsType","MintTokens","setTokenName","tokenName","setTokenDescription","desc","tokenDescription","setTokenAmount","isValidTokenAmount","setTokenDecimals","dec","tokenDecimals","tokenMediaAddress","tokenMediaHash","split","splittedAmount","newAmount","setTokenType","setTokenIDStart","startID","fixedStartID","toLowerCase","RECOMMENDED_FEES","tokenIDStart","recommendedFee","fee","setFee","feeFloat","fixedFee","validAmount","match","validateAmountStrInt","splited","amountStrInt","optionsDecimals","walletList","setPage","setTokenMediaAddress","txFeeNano","Math","round","mintSimpleToken","mintCITYContract","target","autocomplete","rows","mintToken","disabled","Footer","rel","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","apiKey","fetch","headers","Accept","api_key","arrayBuffer","tokURL","tokHash","txAmount","MIN_NANOERG_BOX_VALUE","inputsWASM","ErgoBoxAssetsDataList","dataListWASM","BoxSelection","ErgoBoxCandidates","empty","tokenAmountAdjusted","pow","mintBoxValue","mintBoxBuilder","Token","from_box_id","mint_token","set_register_value","tokIdStart","txAmountBoxValue","mintCYTIBoxBuilder","tokenMintInfos","registerValue5","val","from_coll_coll_byte","ownerSigmaProp","utxos1","utxosValue","refundBoxValue","refundBoxBuilder","controls"],"mappings":"mdAEIA,G,MAAU,8BAmDP,SAAeC,EAAtB,kC,4CAAO,WAA0BC,GAA1B,SAAAC,EAAA,sEACWH,EADX,0BACoBI,SADpB,SAC6CJ,EAD7C,0BACsDK,IAAIC,SAASJ,GADnE,uBAC6BK,SAD7B,6D,sBAGA,SAAeC,EAAtB,kC,4CAAO,WAA0BN,GAA1B,SAAAC,EAAA,sEACWH,EADX,uCACoBI,SAASK,mBAAmBP,GAAKQ,SAASC,UAD9D,4C,sBAQA,SAAeC,EAAtB,kC,4CAAO,WAA8BC,GAA9B,SAAAV,EAAA,sEACWH,EADX,uCACoBI,SAASU,gBAAgBC,EAAOC,KAAKH,EAAK,SAD9D,4C,sBAQA,SAAeI,EAAtB,kC,4CAAO,WAA8BC,GAA9B,SAAAf,EAAA,sEACWH,EADX,uCACoBI,SAASU,gBAAgBC,EAAOC,KAAKG,aAAWC,YAAYF,GAAM,SADtF,4C,sBAIA,SAASG,EAAYC,GACxB,OAAOC,MAAMP,KAAKM,GAAW,SAASE,GAClC,OAAQ,KAAc,IAAPA,GAAaC,SAAS,KAAKC,OAAO,MAClDC,KAAK,IAOL,SAAeC,EAAtB,kC,4CAAO,WAAyBC,GAAzB,SAAA1B,EAAA,kEACIkB,EADJ,SACuBrB,EADvB,0BACgCI,SAASK,mBAAmBoB,GAASC,gBADrE,8E,sBAcA,SAAeC,EAAtB,kC,4CAAO,WAAkCC,GAAlC,SAAA7B,EAAA,sEACWH,EADX,0BACoBiC,QADpB,SAC2DjC,EAD3D,0BACoEkC,SAASC,kBAAkB,KAAOH,GADtG,uBAC4BI,wBAD5B,gBACkHC,aADlH,4C,sBAoBA,SAAeC,EAAtB,kC,4CAAO,WAA8BC,GAA9B,eAAApC,EAAA,sEACgBH,EADhB,0BACyBwC,SADzB,SACwDxC,EADxD,0BACiEiC,QAAQQ,YAAYF,GAAlFG,EADH,KACkCC,eADlC,kCAEID,EAAIE,YAAYC,mBAFpB,4C,sBA4BA,SAASC,EAAmBxB,GAG/B,IAFA,IAAIyB,EAAS,GACTC,EAAM1B,EAAU2B,WACXC,EAAI,EAAGA,EAAIF,EAAKE,IACrBH,GAAUI,OAAOC,aAAc9B,EAAW4B,IAE9C,OAAOG,OAAOC,KAAMP,M,6QCxJhBQ,EAAeC,EAAQ,KAAvBD,WAGD,SAASE,EAAiBvC,EAAKhB,GAClC,MAAmB,kBAARgB,EAAyBA,EAChCA,EAAIwC,OAAS,EAAIxD,EACVgB,EAAIyC,UAAU,EAAGzD,GAAO,MAAQgB,EAAIyC,UAAUzC,EAAIwC,OAASxD,EAAKgB,EAAIwC,QAEpExC,EAIR,SAAS0C,EAAgBC,GAC5B,OAAOC,WAAWC,SAASF,GAAaG,KAAgBC,QAAQ,GAG7D,SAAeC,EAAtB,kC,4CAAO,WAAoCC,GAApC,iBAAAhE,EAAA,+EAEoBiE,YAAQD,GAF5B,cAEOE,EAFP,OAGOC,EAAOf,EAAW,UAAUgB,OAAO,IAAIC,WAAWH,IAAOI,OAAO,OACtEC,QAAQC,IAAI,OAAQL,GAJrB,kBAKQA,GALR,gCAOCI,QAAQC,IAAR,MAPD,iCASI,IATJ,0D,sBAYA,SAASC,EAAeC,EAAIC,GAE/B,IAAIC,EAAU,IAAIC,SAAQ,SAACC,EAASC,GAChC,IAAIC,EAAKC,YAAW,WAChBC,aAAaF,GACbD,EAAO,gBAAkBL,EAAK,SAC/BA,MAGP,OAAOG,QAAQM,KAAK,CAChBR,EACAC,IAID,SAASQ,EAAMV,GAClB,OAAO,IAAIG,SAAQ,SAAAC,GAAO,OAAIG,WAAWH,EAASJ,Q,sSCzCzCW,EAAcC,IAA+B,UAC7CC,EAAgBD,IAA+B,U,SAE7CE,E,8EAAf,WAA0BxB,GAA1B,SAAAhE,EAAA,+EACWyF,YAAIJ,EAAcrB,GAAK0B,MAAK,SAAAC,GAC/B,MAAO,CAAEC,KAAMD,OAFvB,4C,+BAMeE,E,8EAAf,WAA4B7B,GAA5B,SAAAhE,EAAA,+EACWyF,YAAIF,EAAgBvB,GAAK0B,MAAK,SAAAC,GACjC,MAAO,CAAEC,KAAMD,OAFvB,4C,sBAuDO,SAAeG,IAAtB,+B,4CAAO,sBAAA9F,EAAA,+EACIwF,EAAW,mBACbE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,QAChBF,MAAK,SAAAC,GAAG,OAAIA,EAAII,MAAM,GAAGC,WAH3B,4C,sBAOA,SAAeC,EAAtB,kC,4CAAO,WAAwC7D,GAAxC,eAAApC,EAAA,sEACe6F,EAAa,4BAAD,OAA6BzD,IADxD,cACGuD,EADH,yBAEIA,EAAIC,KAAKG,OAFb,4C,sBA2BA,SAAeG,EAAtB,kC,4CAAO,WAAoCC,GAApC,eAAAnG,EAAA,sEACe6F,EAAa,mCAAD,OAAoCM,IAD/D,cACGR,EADH,yBAGIA,EAAIC,KAAKG,OAHb,4C,sBAMA,SAAeK,EAAtB,kC,4CAAO,WAAkDhE,GAAlD,mBAAApC,EAAA,+EAE4BkG,EAAqB9D,GAFjD,cAEKiE,EAFL,OAGKC,EAAa,GACbC,EAAW,GACXF,GAAkBA,EAAe9C,OAAS,IAC1C+C,EAAaD,EAAeG,KAAI,SAAAC,GAAE,OAAIA,EAAGC,UAAQC,OACjDJ,EAAWF,EAAeG,KAAI,SAAAC,GAAE,OAAIA,EAAGG,WAASD,OAAOE,QAAO,SAAAC,GAAG,OAAI1E,IAAY0E,EAAI1E,YAP1F,kBAUQ,CAACkE,EAAYC,IAVrB,yCAYChC,QAAQC,IAAR,MAZD,kBAaQ,CAAC,GAAI,KAbb,2D,sBAiBA,SAAeuC,EAAtB,kC,4CAAO,WAAgD3E,GAAhD,2BAAApC,EAAA,+EAEwBiG,EAAyB7D,GAFjD,cAEO4E,EAFP,gBAGsCZ,EAAmChE,GAHzE,0CAGQkE,EAHR,KAGoBC,EAHpB,KAIOU,EAAkBX,EAAWE,KAAI,SAAAM,GAAG,OAAIA,EAAII,SAC5CC,EAAQZ,EAASa,OAAOJ,GAAUH,QAAO,SAAAC,GAAG,OAAKG,EAAgBI,SAASP,EAAII,UALrF,kBAMQC,GANR,yCAQC5C,QAAQC,IAAR,MARD,kBASQ,IATR,2D,sBAaA,SAAe8C,IAAtB,+B,4CAAO,sBAAAtH,EAAA,sEACW6F,EAAa,mBADxB,uCAC4CD,KAAKG,MAAMxE,MAAM,EAAG,KADhE,4C,sBAGA,SAAegG,IAAtB,+B,4CAAO,sBAAAvH,EAAA,sEACW6F,EAAa,mBADxB,uCAC4CD,KAAKG,OADjD,4C,sBAIA,SAAeyB,EAAtB,kC,4CAAO,WAAoCrB,GAApC,eAAAnG,EAAA,sEACe6F,EAAa,cAAD,OAAeM,EAAf,mBAD3B,cACGR,EADH,OAEHpB,QAAQC,IAAI,kCAAmCmB,GAF5C,kBAGIA,EAAIC,MAHR,4C,qTC7IA,SAAS6B,EAAaC,GACzB,IAAMC,EAASC,IAAiBC,KAMhC,OALAA,IAAKC,KAAK,CACNJ,MAAOA,EACPK,mBAAmB,EACnBC,mBAAmB,IAEhBL,EAGJ,SAASM,EAAWP,EAAOQ,GAC9B,IAAMP,EAASC,IAAiBC,KAOhC,OANAF,EAAOG,KAAK,CACRJ,MAAOA,EACPS,KAAM,QACNC,KAAMF,EACNH,mBAAmB,IAEhBJ,EA0BJ,SAASU,EAA0BC,EAAMC,GAC5C,IAAMZ,EAASC,IAAiBC,KAkBhC,OAjBAF,EAAOG,KAAK,CACRJ,MAAO,gDACPK,mBAAmB,EACnBI,KAAM,UACNH,mBAAmB,EACnBQ,KAAM,gCAAK,gEACP,wBAAQC,UAAU,mBAAmBC,QAAS,WAC1C,IAAM1E,EAAG,kBAAcuE,GACvBrF,OAAOyF,KAAK3E,EAAK,UAAU4E,SAF/B,qCAQJ,WACI1F,OAAO2F,SAASC,YAEjBnB,EAGJ,SAASoB,IACZ,OAAO,IAAIlE,SAAQ,SAAUC,EAASC,GAClC8C,IAAKC,KAAK,CACNJ,MAAO,kBACPc,KAAK,+FACLQ,cAAc,EACdC,kBAAkB,EAClBjB,mBAAmB,EACnBkB,WAAW,WAAD,4BAAE,4BAAAlJ,EAAA,6DACFmJ,EAAatB,IAAKuB,WAAWC,cAAc,eAAeC,MADxD,kBAGEnH,YAAegH,GAHjB,sDAKJtB,IAAK0B,sBAAL,8BALI,gCAOD,CAAEJ,WAAYA,IAPb,yDAAF,kDAAC,KASZzD,MAAK,SAAC8D,GACDA,EAAOF,MACPxE,EAAQ0E,EAAOF,MAAMH,YAErBpE,UAMT,SAAS0E,EAAkBC,GAC9B,OAAO,IAAI7E,SAAQ,SAAUC,EAASC,GAAS,IAAD,IACtC4E,EAAe,GADuB,cAEvBD,GAFuB,IAE1C,2BAA6B,CAAC,IAAnBvD,EAAkB,QACzBwD,EAAaxD,GAAQ7C,YAAiB6C,EAAM,KAHN,8BAM1C0B,IAAKC,KAAK,CACNJ,MAAO,kBACPkC,MAAO,SACPC,WAAU,UAAEC,aAAaC,QAAQ,kBAAvB,QAAqC,GAC/CJ,aAAcA,EACdX,cAAc,EACdC,kBAAkB,EAClBjB,mBAAmB,EACnBgC,YAAa,CACTJ,MAAO,YAEXK,eAAgB,SAAUX,GACtB,OAAO,IAAIzE,SAAQ,SAAUC,EAASC,GACpB,KAAVuE,EACAxE,IAEAC,EAAO,oCAIpBW,MAAK,SAAU8D,GACVA,EAAOF,MACPxE,EAAQ0E,EAAOF,OAEfvE,Y,wMC5HZlF,EAAU,6BAGOqK,E,kDACjB,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTC,iBAAkB,IAHP,E,0LAQTC,KAAKC,oB,wSAIWxD,YAAiCyD,K,cAAnDC,E,OACErI,E,UAAU0H,aAAaC,QAAQ,kB,QAAc,G,SAExB7D,YAAqB9D,G,UAA5CiE,E,OACAC,EAAa,GACbC,EAAW,GACXF,GAAkBA,EAAe9C,OAAS,IAC1C+C,EAAaD,EAAeG,KAAI,SAAAC,GAAE,OAAIA,EAAGC,UAAQC,OACjDJ,EAAWF,EAAeG,KAAI,SAAAC,GAAE,OAAIA,EAAGG,WAASD,OAAOE,QAAO,SAAAC,GAAG,OAAI1E,IAAY0E,EAAI0D,qCAEnFE,EAAcpE,EAAWE,KAAI,SAAAM,GAAG,OAAIA,EAAII,SAC9CuD,EAAYlE,EAASa,OAAOqD,GAAW5D,QAAO,SAAAC,GAAG,OAAK4D,EAAYrD,SAASP,EAAII,UAE3EyD,EAAsB,GACV,KAAZvI,E,6BACsBlB,I,UAAmBrB,E,2BAASI,S,UACvCJ,E,oBAASiC,QAAQQ,YAAYwH,aAAaC,QAAQ,YAAYa,SAAS,GAAMC,SAAS,EAAG,I,UADzCC,mB,gBAEzDC,wBAFFJ,G,sBAIAN,EAAmB,G,cACLI,G,IAAlB,2BAA6B,CAAlB3D,EAAkB,QACzB,IACQA,EAAIkE,oBAAoBC,KAClBC,EAAgBtK,EAAOC,KAAKiG,EAAIkE,oBAAoBC,GAAGE,gBAAiB,OAC1EjK,YAAYgK,KAAmBP,GAC/BN,EAAiBe,KAAKtE,IAGhC,MAAOuE,GACL9G,QAAQC,IAAI,oBAAqB6G,K,8BAGzCf,KAAKgB,SAAS,CACVjB,iBAAkBA,I,sIAIhB,IAAD,EACCjI,EAAO,UAAG0H,aAAaC,QAAQ,kBAAxB,QAAsC,GACnD,OACI,sBAAKtB,UAAU,mCAAf,UACI,uBACA,8BAAK,yDAEsC,IAAvC6B,KAAKF,MAAMC,iBAAiB9G,OACxB,qBAAKkF,UAAU,6BAAf,SACI,6DAC4C,KAAZrG,EAAiB,KAAO,OAASA,OAIrE,sBAAKqG,UAAU,6BAAf,UACI,wBACA,qBAAKA,UAAU,kDAAf,SAEQ6B,KAAKF,MAAMC,iBAAiB7D,KAAI,SAAAM,GAAG,OAC/B,cAAC,IAAD,CAAoCyE,YAAazE,GAA/BA,EAAII,MAAQ,qB,GArE5BsE,IAAMC,a,2NCJ5C5L,EAAU,6BAED6L,EAAb,WACI,WAAYC,GAAU,oBAClBrB,KAAKsB,KAAOD,EACZrB,KAAKhB,MAAQqC,EAAQrC,MACrBgB,KAAKuB,aAAe,GACpBvB,KAAKwB,gBAAkB,GACvBxB,KAAKyB,aAAe,GACpBzB,KAAK0B,UAAY,IACjB1B,KAAK2B,QAAU,GACf3B,KAAK4B,QAAU,GACf5B,KAAK6B,YAAc,EACnB7B,KAAK8B,QAAU,WACf9B,KAAK+B,aAAe,GACpB/B,KAAKgC,YAAc,GACnBhC,KAAKpD,MAAQyE,EAAQzE,MACrBoD,KAAKiC,aAAc,EAf3B,uMAmB+BlM,YAAWmM,YAAiBlC,KAAKsB,KAAM,OAnBtE,cAmBQtB,KAAK0B,UAnBb,gBAoB8BS,EAAcD,YAAiBlC,KAAKsB,KAAM,OApBxE,cAoBcc,EApBd,OAqBQpC,KAAK2B,QAAL,UAAeS,EAAQ,UAAvB,QAA6B,GAC7BpC,KAAK4B,QAAL,UAAeQ,EAAQ,UAAvB,QAA6B,GAC7BpC,KAAK6B,YAAL,UAAmBO,EAAQ,UAA3B,QAAiC,GAC3BC,EAxBd,UAwB6BD,EAAQ,UAxBrC,QAwB2C,GACnCpC,KAAK8B,QAAUQ,OAAOC,KAAKC,KAAWC,MAAK,SAAAC,GAAG,OAAIF,IAAUE,KAASL,KACrErC,KAAK+B,aAAL,UAAoBK,EAAQ,UAA5B,QAAkC,GAClCpC,KAAKgC,YAAL,UAAmBI,EAAQ,UAA3B,QAAiC,GA3BzC,UA4BqCjL,YAAU+K,YAAiBlC,KAAKsB,KAAM,OA5B3E,eA4BQtB,KAAKwB,gBA5Bb,OA6BQxB,KAAKiC,YAAcjC,KAAKpD,MAAM1D,UAAU,EAAG8G,KAAKwB,gBAAgBvI,UAAY+G,KAAKwB,gBA7BzF,UA8BkClK,YAAmB4K,YAAiBlC,KAAKsB,KAAM,OA9BjF,WA8BQtB,KAAKuB,aA9Bb,QA+BYvB,KAAKiC,YA/BjB,kCAgCsC3K,YAAmB4K,YAAiBlC,KAAKsB,KAAM,OAhCrF,QAgCYtB,KAAKyB,aAhCjB,sLAqCwBJ,GArCxB,8EAsCcsB,EAAI,IAAIvB,EAAYC,GAtClC,SAuCcsB,EAAEC,aAvChB,gCAwCeD,GAxCf,yGA4CO,SAAeR,EAAtB,kC,4CAAO,WAA6B/K,GAA7B,SAAA1B,EAAA,sEACWH,EADX,uCACoBI,SAASK,mBAAmBoB,GAASyL,oBAAoB3G,KAAI,SAAC4G,EAAGrK,GACpF,OAAW,IAANA,EACM7B,YAAYkM,GAEZpM,aAAWqM,cAAcnM,YAAYkM,QALjD,4C,0CC3CcE,E,kDACjB,WAAYnD,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTmB,YAAapB,EAAMoB,YACnBgC,QAAS,CAAC,MAAS,GAAI,gBAAmB,KAJ/B,E,gMASO7B,EAAY8B,OAAOlD,KAAKF,MAAMmB,a,OAA9CgC,E,OACNjD,KAAKgB,SAAS,CACViC,QAASA,I,4KAIJE,G,iFACHC,YAAkBD,G,iIAIlB,IAAD,SACCE,EAAmB7D,aAAaC,QAAQ,WAC1C6D,EAAc,cACdtD,KAAKF,MAAMmD,QAAQhB,cACnBqB,EAAc,aAElB,IAAMC,EAAYvD,KAAKF,MAAMmD,QAAQnB,QACjC0B,GAAQ,GACR,IAAOrK,YAAgB6G,KAAKF,MAAMmD,QAAQjE,OAAS,OACnD,MAAShG,YAAiBgH,KAAKF,MAAMmD,QAAQ1B,aAAc,GAC3D,KAAQvB,KAAKF,MAAMmD,QAAQnB,QAC3B,KAAQ9B,KAAKF,MAAMmD,QAAQtB,QAC3B,OAAU3B,KAAKF,MAAMmD,QAAQvB,UAC7B,SAAY1B,KAAKF,MAAMmD,QAAQpB,YAC/B,YAAe7B,KAAKF,MAAMmD,QAAQrB,SAP1B,cAQP2B,EAAY,IARL,cASR,MAAO,IATC,cAUR,iBAAkBvD,KAAKF,MAAMmD,QAAQzB,iBAV7B,cAWR,QAASxI,YAAiBgH,KAAKF,MAAMmD,QAAQxB,aAAc,IAXnD,cAYR,SAAU6B,GAZF,cAaR,QAAStK,YAAiBgH,KAAKF,MAAMmD,QAAQrG,MAAO,IAb5C,GAmBZ,MAJmC,aAA/BoD,KAAKF,MAAMmD,QAAQnB,UACnB0B,EAAQ,IAAU,mBAAGC,KAAMzD,KAAKF,MAAMmD,QAAQjB,YAA5B,SAA0ChJ,YAAiBgH,KAAKF,MAAMmD,QAAQjB,YAAa,MAC7GwB,EAASD,GAAa,cAACG,EAAA,EAAD,CAAYC,KAAM3D,KAAKF,MAAMmD,QAAQnB,QAAShK,QAASkI,KAAKF,MAAMmD,QAAQjB,YAAa4B,MAAO,MAIpH,cAAC,WAAD,UACI,sBAAKzF,UAAU,sEAAf,UACA,qBAAKA,UAAU,qBAAf,SAEQmE,OAAOC,KAAKiB,GAAUjH,QAAO,SAAAsH,GAAG,MAAsB,KAAlBL,EAASK,MAAa3H,KAAI,SAAA2H,GAAG,OAC7D,sBAAe1F,UAAU,6DAAzB,UACI,uBAAO2F,QAASD,EAAK1F,UAAU,kCAA/B,SAAkE0F,IAClE,qBAAKnJ,GAAImJ,EAAK1F,UAAU,cAAxB,SAAuCqF,EAASK,OAF1CA,QAQd7D,KAAKF,MAAMmD,QAAQ1B,eAAiB8B,GAC/BrD,KAAKF,MAAMmD,QAAQrG,MAAMmH,WAAW/D,KAAKF,MAAMmD,QAAQzB,iBAMtD,KALF,qBAAKrD,UAAU,+CAAf,SACI,wBAAQA,UAAU,eAAeC,QAAS,kBAAM,EAAK4F,OAAO,EAAKlE,MAAMmB,cAAvE,+B,GAjESC,IAAMC,Y,gWCF3C5L,EAAU,6B,SAIC0O,E,8EAAf,WAAqCC,GAArC,mBAAAxO,EAAA,6DACQ2F,EAAM,IACP,MAAY6I,EAAalF,QAAQmF,SAASC,SAASpN,WACtDqE,EAAG,SAAe6I,EAAa/L,YAAYC,kBAH/C,SAI4B7C,EAJ5B,OAMI,IAFA8F,EAAG,QAJP,OAIqC7D,QAAQG,wBAAwBuM,EAAa/L,aAAaP,YACvFyM,EAAS,GACJ5L,EAAI,EAAGA,EAAIyL,EAAaG,SAAS9L,MAAOE,IAC7C4L,EAAOvD,KAAKwD,IAAWC,MAAML,EAAaG,SAASlJ,IAAI1C,GAAG+L,YAPlE,OASInJ,EAAG,OAAagJ,EAChBpK,QAAQC,IAAI,wBAAyBmB,GAVzC,kBAWWA,GAXX,6C,+BAaeoJ,E,8EAAf,WAAsCC,GAAtC,iBAAAhP,EAAA,sDACQ2F,EAAM,GACD5C,EAAI,EAFjB,YAEoBA,EAAIiM,EAAcnM,OAFtC,6BAGQ8C,EAHR,SAGuB4I,EAAsBS,EAAcvJ,IAAI1C,IAH/D,wBAGYqI,KAHZ,uBAE6CrI,IAF7C,gDAKW4C,GALX,6C,sBAQO,SAAesJ,EAAtB,0C,4CAAO,WAAiCC,EAAcC,EAAkBC,EAAYC,EAAeC,GAA5F,uDAAAtP,EAAA,6DACHuE,QAAQC,IAAI,0BAA2B8K,GADpC,SAE0BxJ,cAF1B,cAEGyJ,EAFH,gBAKkBR,EAAuBI,GALzC,UAKCK,EALD,OAMGC,EAAcC,EAAcJ,EAAOE,GAAYG,OAAOC,KACtDjB,EAASkB,EAAiBP,EAAOE,GACvCjL,QAAQC,IAAI,iBAAkBmK,KAE1Bc,EAAc,GAAK7C,OAAOC,KAAK8B,GAAU,GAV1C,kCAW+B9O,EAX/B,2BAWwCiQ,SAXxC,UAWiEjQ,EAXjE,2BAW0EK,IAAIC,SAASsP,EAAYnO,YAA5FyO,EAXP,KAWiD3P,SAXjD,0BAYqCP,EAZrC,2BAY8CmQ,wBAZ9C,KAaKD,EAbL,UAcYlQ,EAdZ,2BAcqBwC,SAdrB,UAcoDxC,EAdpD,oBAc6DiC,QAAQQ,YAAY+M,GAdjF,UAc8B7M,eAd9B,qBAeK+M,EAHEU,EAZP,+BAgByBrD,OAAOC,KAAK8B,GAhBrC,iDAgBgBuB,EAhBhB,eAiBgCrQ,EAjBhC,eAiBesQ,EAjBf,OAiByCC,QAAQjQ,SAAS+P,GAjB1D,UAkBoCrQ,EAlBpC,2BAkB6CwQ,YAlB7C,UAkByExQ,EAlBzE,oBAkBkFK,IAAIC,SAASwO,EAAOuB,GAAO5O,YAA9FgP,EAlBf,KAkByDlQ,SAlBzD,gBAmBS6P,EAAiBM,UAAUJ,EAASG,GAnB7C,8CAsBKnB,EAAiBqB,IAAIP,EAAiBQ,SAtB3C,0DAwBKlM,QAAQC,IAAR,kCAxBL,+BA6BsB3E,EA7BtB,4BA6B+B6Q,UA7B/B,MA8BCxB,EA9BD,MA+BCC,EA/BD,MAgCCI,EAhCD,UAiCQ1P,EAjCR,4BAiCiBiQ,SAjCjB,UAiC0CjQ,EAjC1C,4BAiCmDK,IAAIC,SAASyP,IAAOtO,YAjCvE,YAiC0BlB,SAjC1B,4BAkCQP,EAlCR,4BAkCiBiC,QAAQQ,YAAY+M,GALlCsB,EA7BH,MA6ByCC,IA7BzC,oDAmC6B/Q,EAnC7B,qBAmCsCgR,WAArCC,EAnCD,wBAoCe1B,GApCf,kEAoCQtI,EApCR,kBAqC0BjH,EArC1B,eAqCOkR,EArCP,OAqCmCC,MAAM7Q,SAAS2G,EAAII,OArCtD,UAsCkCrH,EAtClC,qBAsC2CoR,UAtC3C,MAsCqDF,EAA9CG,EAtCP,iBAuCCJ,EAAeN,IAAIU,GAvCpB,2JAyCHP,EAAUQ,gBAAgBL,GACpBrK,EAAK2K,EAAgBT,EAAUF,QAAQ3B,WAC7CvK,QAAQC,IAAI,uBAAwBiC,GA3CjC,WA6CuB5G,EA7CvB,gBA6CGwR,EA7CH,OA6CgCC,oBAAoBC,UAAU3C,IAAW4C,UAAU/K,KAClFgL,EAAYL,EAAgBC,EAAWvC,YAGjCpI,OAAS+K,EAAU/K,OAAOF,KAAI,SAAAM,GACpC,IAAM4K,EAAcC,EAAUrC,EAAMvC,MAAK,SAAA6E,GAAI,OAAIA,EAAK1K,QAAUJ,EAAII,UACpE,OAAO,2BACAwK,GADP,IAEIG,UAAW,QAInBJ,EAAUrC,WAAaqC,EAAUrC,WAAW5I,KAAI,SAAAM,GAC5C,IAAM4K,EAAcC,EAAUvC,EAAWrC,MAAK,SAAA6E,GAAI,OAAIA,EAAK1K,QAAUJ,EAAII,UACzE,OAAO,2BACAwK,GADP,IAEIG,UAAW,QA7DhB,kBAiEIJ,GAjEJ,4E,sBAoEA,SAASL,EAAgBrQ,GAC5B,IAAI+Q,EAAOlD,IAAWC,MAAM9N,GAC5B,MAAO,CACHiE,GAAI8M,EAAK9M,GACT0B,OAAQoL,EAAKpL,OACb0I,WAAY0C,EAAK1C,WACjBxI,QAASkL,EAAKlL,QAAQJ,KAAI,SAAAuL,GAAM,OAAKJ,EAAUI,OAIhD,SAASJ,EAAUG,GAA4C,IAAtCE,IAAqC,yDAAhBC,EAAgB,uDAAT,QACxD,QAAaC,IAATJ,EACA,MAAO,GAEX,IAAInM,EAAM,GA2CV,MA1Ca,UAATsM,IAEItM,EAAG,MADH,OAAQmM,EACOA,EAAK9M,GAEL8M,EAAK5K,OAG5BvB,EAAG,MAAYmM,EAAKxI,MAAMhI,WAC1BqE,EAAG,SAAemM,EAAKK,SACnB/Q,MAAMgR,QAAQN,EAAKO,QACnB1M,EAAG,OAAamM,EAAKO,OAAO7L,KAAI,SAAA8L,GAAK,cAAK,CACtCnC,QAASmC,EAAMnC,QACfoC,OAAQD,EAAMC,OAAOjR,WACrBkR,KAAI,UAAEF,EAAME,YAAR,QAAgB,GACpBC,SAAQ,UAAEH,EAAMG,gBAAR,QAAoB,MAGhC9M,EAAG,OAAa,GAEhB+M,EAAOZ,EAAI,qBACXnM,EAAG,oBAA0BgN,EAAyBb,EAAK9G,qBAE3DrF,EAAG,oBAA0B,GAGjCA,EAAG,eAAqBmM,EAAKvC,eAEzB,YAAauC,IACbnM,EAAG,QAAcmM,EAAK1P,SAGb,UAAT6P,IAEItM,EAAG,cADH,SAAUmM,EACaA,EAAKxJ,KAELwJ,EAAKc,cAEhCjN,EAAG,MAAYmM,EAAKe,OAEpBb,IACArM,EAAG,UAAgB,IAEhBA,EAWX,SAASgN,EAAyBb,GAC9B,IAAIgB,EAAe,GAWnB,OATAlG,OAAOmG,QAAQjB,GAAMkB,SAAQ,YAAmB,IAAD,mBAAhBhG,EAAgB,KAAX1D,EAAW,KAEvCoJ,EAAOpJ,GACPwJ,EAAa9F,GAAO1D,EAAK,gBAEzBwJ,EAAa9F,GAAO1D,KAIrBwJ,EAmCJ,SAASG,EAAkB3D,GAC9B,OAAOA,EAAM4D,QAAO,SAACC,EAAKvB,GAAN,OAAeuB,EAAOxD,OAAOiC,EAAKtI,SAAQqG,OAAO,IAGlE,SAASyD,EAAsB9D,GAClC,IAAI+D,EAAY,GAChB,IAAK,IAAMtQ,KAAKuM,EAAO,CACnB/K,QAAQC,IAAI,WAAW8K,EAAMvM,IADV,oBAECuM,EAAMvM,GAAGsP,QAFV,IAEnB,2BAAqC,CAAC,IAA3BC,EAA0B,QAC7B1F,OAAOC,KAAKwG,GAAWhM,SAASiL,EAAMnC,SACtCkD,EAAUf,EAAMnC,SAAWR,OAAO0D,EAAUf,EAAMnC,UAAYR,OAAO2C,EAAMC,SAE3EhO,QAAQC,IAAI,YAAY6O,EAAWf,GACnCe,EAAUf,EAAMnC,SAAWR,OAAO2C,EAAMC,UAP7B,+BAWvB,OAAOc,EAGJ,SAAS3D,EAAchJ,EAAQE,GAClC,IAAM0M,EAAWL,EAAkBvM,GAC7B6M,EAAYN,EAAkBrM,GACpC,OAAI0M,GAAYC,EACLD,EAAWC,EAEX5D,OAAO,GAIf,SAASE,EAAiBnJ,EAAQE,GACrCrC,QAAQC,IAAI,mBAAoBkC,EAAQE,GACxC,IAAM4M,EAAWJ,EAAsB1M,GACjC+M,EAAYL,EAAsBxM,GACpCjB,EAAM,GAEV,GADApB,QAAQC,IAAI,mBAAoBgP,EAAUC,GACtCD,IAAa,GACb,IAAK,IAAME,KAASF,EACZC,IAAc,IAAMC,KAASD,EACzBD,EAASE,GAASD,EAAUC,GAAS,IACrC/N,EAAI+N,GAASF,EAASE,GAASD,EAAUC,IAG7C/N,EAAI+N,GAASF,EAASE,GAKlC,OADAnP,QAAQC,IAAI,mBAAoBgP,EAAUC,EAAW9N,GAC9CA,EA0CJ,SAAS6G,EAAiB1F,EAAK6M,GAClC,OAAIA,KAAY7M,EAAIkE,oBACZ0H,EAAO5L,EAAIkE,oBAAoB2I,IAExB7M,EAAIkE,oBAAoB2I,GAAUxI,gBAElCrE,EAAIkE,oBAAoB2I,GAG5B,GASf,SAASjB,EAAOkB,GACZ,MAAoB,kBAANA,GAAwB,OAANA,KAAgBA,aAAaxS,UAAYwS,aAAaC,MAGnF,SAAeC,IAAtB,+B,4CAAO,gCAAA9T,EAAA,sEACgBsH,cADhB,cACG3B,EADH,gBAE0B9F,EAF1B,cAEGkU,EAFH,OAEmCC,aAAazC,UAAU5L,GAF1D,SAGuB9F,EAHvB,cAGGoU,EAHH,OAGgCC,UAAUC,kBAAkBJ,EAActO,IAAI,IAH9E,UAIe5F,EAJf,2BAIwBuU,iBAJxB,KAIyCH,EAJzC,KAIqDF,EAJrD,oF,sBAgDA,SAAeM,EAAtB,oC,4CAAO,WAAmCvC,EAAMpL,GAAzC,uCAAA1G,EAAA,6DAAiDoP,EAAjD,+BAA8D,GAA9D,SAE6BkF,EAAaxC,EAAMpL,EAAQ0I,GAFxD,0CAEI9G,EAFJ,KAEUC,EAFV,KAKGgM,EAAkB5R,YAAkB4F,EAAUwC,yBAE9CyJ,EAAYD,EAAgBE,QAAQ,MAAO,KAAKA,QAAQ,MAAO,KAPlE,kBAWI,CAACnM,EAAMkM,IAXX,6C,+BAcQF,E,kFAAf,WAA4BxC,EAAMpL,EAAQ0I,GAA1C,qBAAApP,EAAA,sEAG8BH,EAH9B,cAGUwR,EAHV,OAGuCC,oBAAoBC,UAAU3C,IAAW4C,UAAUM,IAH1F,SAI8BjS,EAJ9B,cAIU6U,EAJV,OAIuCC,UAAUC,gBAAgBlO,GAJjE,SAKkC7G,EALlC,cAKUgV,EALV,OAK2CF,UAAUC,gBAAgBxF,GALrE,UAMsB0E,IANtB,eAMUgB,EANV,YAOYzD,EAAWrM,KAAKxE,SAP5B,UAO6CX,EAP7C,2BAOsDkV,mBAAmBC,iBAAiB3D,EAAYqD,EAAYG,EAAgBC,GAPlI,4E,8dC9XIjV,EAAU,6BAId,SAASoV,IACL,MAA6C,qBAAlC/R,OAAOgS,uBAOtB,SAASC,IACL,MAAoB,qBAATC,KAOR,SAAeC,IAAtB,+B,4CAAO,4BAAArV,EAAA,0DACCiV,IADD,0CAGuB/R,OAAOgS,yBAH9B,cAGWvP,EAHX,OAIKpB,QAAQC,IAAI,oBAAqBmB,GAJtC,kBAKYd,QAAQC,QAAQa,IAL5B,uCAOKpB,QAAQ+Q,MAAM,0BAAd,MAPL,kBASYzQ,QAAQC,SAAQ,IAT5B,yDAYQD,QAAQC,SAAQ,IAZxB,0D,sBAiBA,SAAeyQ,IAAtB,+B,4CAAO,8BAAAvV,EAAA,0DACCiV,IADD,0CAGoCI,IAHpC,UAGWG,EAHX,OAIKjR,QAAQC,IAAI,iCAAkCgR,GACzCA,EALV,iCAMyBtS,OAAOuS,2BANhC,cAMa9P,EANb,iBAOaP,EAAM,KAPnB,iCAQcO,GARd,kCAUgB,GAVhB,iEAaKpB,QAAQ+Q,MAAR,MACArN,YAAW,6BAA8B,oDAd9C,mBAeY,GAfZ,0DAkBQ,GAlBR,2D,sBAwBA,SAAeyN,EAAtB,kC,4CAAO,WAAoCtT,GAApC,eAAApC,EAAA,0DACCiV,IADD,iCAE+BM,IAF/B,oBAGwBJ,IAHxB,iCAIgCC,KAAKO,qBAJrC,cAIWC,EAJX,yBAKYA,EAAavO,SAASjF,IALlC,kCAOY,GAPZ,0DAUQ,GAVR,6C,sBAcA,SAAeyT,IAAtB,+B,4CAAO,4BAAA7V,EAAA,0DACCiV,IADD,iCAE+BM,IAF/B,oBAGwBJ,IAHxB,iCAIgCC,KAAKO,qBAJrC,cAIWC,EAJX,yBAKYA,GALZ,iCAOY,IAPZ,yDAUQ,IAVR,6C,sBAcA,SAAeE,IAAtB,+B,4CAAO,8DAAA9V,EAAA,6DAA0BmQ,EAA1B,+BAAoC,MAApC,SAE2BoF,IAF3B,oBAIoBJ,IAJpB,iCAMsBC,KAAKW,YAAY5F,GANvC,cAMOoC,EANP,yBAOQA,GAPR,WAWiB,MADVnQ,EAVP,UAUiB0H,aAAaC,QAAQ,kBAVtC,QAUoD,IAVpD,kCAY2BvC,YAAqBpF,GAZhD,aAYW4T,EAZX,QAaiBC,UAbjB,oBAcyB,QAAZ9F,EAdb,0CAeoB6F,EAAQC,UAAUC,SAAWF,EAAQG,YAAYD,UAfrE,QAiBiB5F,EAAc,EAjB/B,cAkB+B0F,EAAQC,UAAUtH,QAlBjD,IAkBa,4BAAWyH,EAAiC,SAChCjG,UAAYA,IAChBG,EAAc8F,EAAI7D,QApBvC,4CAuB+ByD,EAAQG,YAAYxH,QAvBnD,IAuBa,4BAAWyH,EAAmC,SAClCjG,UAAYA,IAChBG,GAA4B8F,EAAI7D,QAzBrD,uDA4BoBjC,GA5BpB,iCAgCQ,GAhCR,6C,sBAoCP,SAASlL,EAAMV,GACX,OAAO,IAAIG,SAAQ,SAAAC,GAAO,OAAIG,WAAWH,EAASJ,MAG/C,SAAe2R,EAAtB,sC,4CAAO,WAA4BC,EAAO7P,EAAIrE,GAAvC,mBAAApC,EAAA,6DACHsW,EAAMlS,OAAO,CAAEsD,MAAO,4BADnB,SAE+B6N,IAF/B,uCAIKG,EAAqBtT,GAJ1B,yCAAApC,EAAA,oCAAAA,EAAA,6DAKKsW,EAAMlS,OAAO,CAAEsD,MAAO,2CAL3B,SAMwB6O,EAAU9P,GANlC,YAMW6B,EANX,UAOiB2M,IAPjB,iBAQS1Q,QAAQC,IAAI,SAAU8D,GACtBgO,EAAMlS,OACF,CACIsD,MAAO,mDACPK,mBAAmB,EACnBS,KAAK,gIAAD,OAAkIF,EAAlI,+BAA6JA,EAA7J,aACJN,mBAAmB,IAGvBwO,GAAiB,EACfC,EAAY5C,KAAK6C,MAlBhC,UAmBiBF,KAAkB3C,KAAK6C,MAAQD,EAAY,KAnB5D,kCAoBmBrR,EAAM,KApBzB,mCAsB4Cc,YAAqB9D,GAtBjE,QAsBqBiE,EAtBrB,OAwBuCA,EAAeQ,QAAO,SAAAJ,GAAE,OAAIA,EAAGzB,KAAOsD,KAC1C/E,OAAS,IACvBiT,GAAiB,GA1BtC,mDA6BiBjS,QAAQC,IAAR,MA7BjB,+BAgCS8R,EAAMK,QACFH,EACAtT,OAAO2F,SAASC,SAEhBb,YAAW,kFApCxB,wBAuCagN,MACc,yBACE,sDAChBhN,YAFc,yBACE,wDAzC7B,kGA8CKqO,EAAMK,QACQ,gBACRC,EAAU,eAAiBxU,EAAU,gHAC3C6F,YAFc,gBAEI2O,GAjDvB,gCAqDCN,EAAMK,QACNpS,QAAQC,IAAI,wBAtDb,6C,sBA2DA,SAAeqS,EAAtB,kC,4CAAO,WAAwBC,GAAxB,6BAAA9W,EAAA,6DACG+W,EAAmBpH,OAAOmH,GAD7B,SAE+BvB,IAF/B,oBAGwBN,IAHxB,iCAIqBG,KAAK4B,UAAUD,EAAiBzV,YAJrD,UAIOgO,EAJP,OAKO2H,EAAgB,IAClB3H,IAASlO,MAAMgR,QAAQ9C,GAN5B,+BAOwBA,GAPxB,kEAOgBsC,EAPhB,4BASoB/R,EATpB,eAS6BqX,QAAQ3F,UAAU3C,IAAW4C,UAAUI,IACvDqF,EAAc7L,KAAKwG,GAVhC,mDAYarN,QAAQ+Q,MAAM,kCAAmC1D,EAAjD,MAZb,0KAgBQqF,GAhBR,WAmBiB,MADV7U,EAlBP,UAkBiB0H,aAAaC,QAAQ,kBAlBtC,QAkBoD,IAlBpD,kCAoBkBoN,EAA0B/U,EAAS2U,GApBrD,0EAsBQ,IAtBR,0E,+BA0BQI,E,gFAAf,WAAyC/U,EAASmQ,GAAlD,qCAAAvS,EAAA,6DAA0DmQ,EAA1D,+BAAoE,MAApE,SAC+BpJ,YAAiC3E,GADhE,OAGI,GAFMgV,EADV,OAEQC,EAAgB,GAAIC,EAAkBF,EAAcG,EAAiB5H,OAAO,GAC5E4C,EAEA,GADMiF,EAAY7H,OAAO4C,EAAOjR,YAChB,QAAZ6O,EAAmB,CACnB,KAAOoH,EAAiBC,GAAaF,EAAgB/T,OAAS,GAC1D8T,EAAcjM,KAAKkM,EAAgBG,SACnCF,EAAiBF,EAAcnE,QAAO,SAACC,EAAKvB,GAAN,OAAeuB,EAAOxD,OAAOiC,EAAKtI,SAAQqG,OAAO,IAEvF4H,EAAiBC,IACjBH,OAAgBnF,OAEjB,CAEH,IADAoF,EAAkBA,EAAgBzQ,QAAO,SAAA+K,GAAI,OAAIA,EAAKS,OAAO7L,KAAI,SAAA4P,GAAG,OAAIA,EAAIjG,WAAS9I,SAAS8I,MACvFoH,EAAiBC,GAAaF,EAAgB/T,OAAS,GAC1D8T,EAAcjM,KAAKkM,EAAgBG,SACnCF,EAAiBF,EAAcnE,QAAO,SAACC,EAAKvB,GAAN,OAAeuB,EAAOxD,OAAOiC,EAAKS,OAAOtF,MAAK,SAAAqJ,GAAG,OAAIA,EAAIjG,UAAYA,KAASoC,UAAS5C,OAAO,IAEpI4H,EAAiBC,IACjBH,OAAgBnF,QAIxBmF,EAAgBD,EAxBxB,yBA0BWC,GA1BX,4C,+BAuFeK,E,8EAAf,WAAsBC,GAAtB,SAAA3X,EAAA,sEAEQuE,QAAQC,IAAI,SAAUmT,GAF9B,SAGqBvC,KAAKwC,QAAQD,GAHlC,+EAKQpT,QAAQC,IAAR,MALR,kBAMe,MANf,0D,+BAUeqT,E,8EAAf,WAAwBC,GAAxB,eAAA9X,EAAA,sEAEQuE,QAAQC,IAAI,YAFpB,SAG0BC,YAAe,IAAO2Q,KAAK2C,UAAUD,IAH/D,cAGcnS,EAHd,yBAIeA,GAJf,uCAMQpB,QAAQC,IAAR,MANR,kBAOe,MAPf,0D,+BAWe+R,E,8EAAf,WAAyByB,GAAzB,2BAAAhY,EAAA,sEACsCuV,IADtC,oBAE+BN,IAF/B,wBAGc/M,EAAM,SAAA+P,GACR1T,QAAQC,IAAI,cAAeyT,IAJvC,SAM+BP,EAAOM,GANtC,UAMcE,EANd,+BAQY3T,QAAQ+Q,MAAR,+BARZ,kBASmB,MATnB,eAWQpN,EAAI,4CAXZ,UAY2B2P,EAASK,GAZpC,WAYc5P,EAZd,+BAeY/D,QAAQC,IAAR,sBAfZ,kBAgBmB,MAhBnB,eAkBQ0D,EAAI,0BAlBZ,kBAmBeI,GAnBf,yBAqBwC+L,YAAoB2D,EAAiBA,EAAgBtR,OAAQsR,EAAgB5I,YArBrH,2CAqBe9G,EArBf,KAqBqBkM,EArBrB,KAsBQnM,YAA0BC,EAAMkM,GAtBxC,kBAuBelM,GAvBf,6C,2UChUqB6P,E,kDACjB,WAAYhO,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTgO,UAAW,EACXC,cAAe,EACfC,mBAAoB,EACpBC,SAAS,GAEb,EAAKC,WAAa,EAAKA,WAAWC,KAAhB,gBAClB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBATT,E,uDAYRrW,GAAU,IAAD,GACH,UAAG0H,aAAaC,QAAQ,kBAAxB,QAAsC,MACnC3H,IACZ0H,aAAa6O,QAAQ,UAAWvW,GAChCc,OAAO2F,SAASC,Y,2KAKG+M,c,UAAjBnM,E,OACFkP,EAAU,KACVlP,EAASnG,OAAS,G,iCACFkG,YAAkBC,G,OAAlCkP,E,gDAEgB7P,c,QAAhB6P,E,eAGAA,GACAtO,KAAKkO,WAAWI,G,mRAKdxT,YAAM,K,uBACgB0Q,YAAW,O,cAAjC+C,E,gBACMnD,YAAqB5L,aAAaC,QAAQ,Y,iCAClDD,aAAa6O,QAAQ,UAAW,I,OAEhCJ,GAAU,EACM,qBAATnD,OACPmD,GAAU,GAGdjO,KAAKgB,SAAS,CACV8M,UAAWS,EACXN,QAASA,I,sIAIP,IAAD,EACCnW,EAAO,UAAG0H,aAAaC,QAAQ,kBAAxB,QAAsC,GAC/C+O,EAAU,GAId,MAHgB,KAAZ1W,IACA0W,EAAU,WAGV,sBAAKrQ,UAAU,yDAAf,UACI,qBAAKA,UAAU,qBAAf,SACI,wBACIA,UAAW,uBAAyBqQ,EACpCpQ,QAAS4B,KAAKoO,iBAFlB,SAIoB,KAAZtW,EACI,kDAEA,gCACKkB,YAAiBlB,EAAS,GAC1BkI,KAAKF,MAAMmO,QACR,0CACE,YAOV,KAAZnW,EACI,KAEA,qBAAKqG,UAAU,mCAAf,SACI,sBAAKA,UAAU,mEAAf,UACI,8BAAK,mCAAShF,YAAgB6G,KAAKF,MAAMgO,WAApC,SADT,OAGI,qBAAKW,IC7FtB,6sFD6FqC7K,MAAM,OAAO8K,OAAO,OAAOC,IAAI,oB,GAtFzCzN,IAAMC,W,wBEFjC,SAASyN,EAAY/O,GAChC,OACI,eAAC,WAAD,kBAEI,sBAAK1B,UAAU,wCAAf,UACI,qBAAKA,UAAU,QACXsQ,ICXL,67FDYKE,IAAK,eACL/K,MAAM,OACNiL,YAAA,EACAC,WAAUjP,EAAMnF,KAEpB,cAAC,IAAD,CAAcA,GAAImF,EAAMnF,GACpBqU,MAAM,QACNC,OAAO,QACPC,aAAW,EACXC,UAAW,IACXC,UAAW,IACXC,UAAU,EACVC,WAAW,EACXC,gBAAgB,QARpB,SAUI,qBAAKnR,UAAU,uCAAf,SACK0B,EAAM3B,e,qBEzBhB,SAASqR,EAAa1P,GACjC,IAAM2P,EAAS,CAIXC,OAAQ,gBAMRC,YAAa,sBAObC,SAAU,sBAKVC,SAAU,mBAOVC,UAAW,oBASXC,UAAW,oBAMXC,UAAW,oBAOXC,UAAW,oBAKXC,UAAW,oBAMXC,UAAW,oBAEXC,UAAW,oBASXC,UAAW,oBAEXC,UAAW,oBASXC,QAAS,sBAKTC,UAAW,sBAKXC,UAAW,sBAEXC,UAAW,uBAGf,OACI,cAAC,WAAD,UACI,cAAC,IAAD,CAAQ/V,GAAImF,EAAMnF,GACdyD,UAAU,4CACVa,MAAO,CACHA,MAAOa,EAAMb,MACb0R,MAAO7Q,EAAMb,OAEjB2R,SAAU9Q,EAAM8Q,SAChBC,QAAS/Q,EAAM+Q,QACfC,cAAc,EACdC,SAAS,EACTC,MAAO,SAAAA,GAAK,kCACLA,GADK,IAERvB,OAAO,eACAA,U,YC1GrBwB,EAAc,CAChB,CAAEhS,MAAO,WAAY0R,MAAO,YAC5B,CAAE1R,MAAO,UAAW0R,MAAO,WAC3B,CAAE1R,MAAO,QAAS0R,MAAO,SACzB,CAAE1R,MAAO,QAAS0R,MAAO,UAGRO,E,kDACjB,WAAYpR,GAAQ,IAAD,uBACf,cAAMA,IA6BVqR,aAAe,SAAChJ,GAAW,EAAKlH,SAAS,CAAEmQ,UAAWjJ,KA9BnC,EA+BnBkJ,oBAAsB,SAACC,GAAW,EAAKrQ,SAAS,CAAEsQ,iBAAkBD,KA/BjD,EAgCnBE,eAAiB,SAACtJ,GACV,EAAKuJ,mBAAmBvJ,IACxB,EAAKjH,SAAS,CAAEgF,YAAaiC,KAlClB,EAqCnBwJ,iBAAmB,SAACC,GAMhB,GALA,EAAK1Q,SAAS,CACV2Q,cAAeD,EACfE,kBAAmB,GACnBC,eAAgB,KAER,MAARH,EACA,EAAKH,eAAe,EAAKzR,MAAMkG,YAAY8L,MAAM,KAAK,QACnD,CACH,IAAMC,EAAiB,EAAKjS,MAAMkG,YAAY8L,MAAM,KAChDE,EAAYD,EAAe,GAC3BA,EAAe9Y,OAAS,GAAkC,kBAAtB8Y,EAAe,IAAmBA,EAAe,GAAG9Y,OAAS,IACjG+Y,EAAYA,EAAY,IAAMD,EAAe,GAAG7Y,UAAU,EAAGwY,IAE7DM,EAAUhb,WAAWiC,OAASK,SAASoY,IAAQ,GAC/C,EAAKH,eAAeS,GAEpB,EAAKT,eAAe,OAtDb,EA0DnBU,aAAe,SAACtO,GACZ,IAAIwE,EAAW,EAAKrI,MAAM6R,cACb,aAAThO,IACAwE,EAAW,KAEf,EAAKnH,SAAS,CACVuC,UAAWI,IAEf,EAAK8N,iBAAiBtJ,IAlEP,EAuEnB+J,gBAAkB,SAACC,GACf,IAAMC,EAAeD,EAAQE,cAAclI,QAAQ,cAAe,IAAIjR,UAAU,EAAGoZ,IAAiBrZ,OAAS,GAC7G,EAAK+H,SAAS,CACVuR,aAAcH,EACdI,eAAgBF,IAAiBF,EAAanZ,QAC9CwZ,IAAKpZ,WAAWiZ,IAAiBF,EAAanZ,QAAUM,KAAgBC,QAAQ,MA5ErE,EA+EnBkZ,OAAS,SAACC,GACN,IAAMC,EAAWD,EAASxI,QAAQ,IAAK,KAAKA,QAAQ,YAAa,IACjE,EAAKnJ,SAAS,CACVyR,IAAKG,KAlFM,EAuFnBpB,mBAAqB,SAACvJ,GAClB,IAAI4K,GAAc,EAClB,GAAkC,MAA9B5K,EAAO6K,MAAM,aACb,GAAiC,MAA7B,EAAKhT,MAAM6R,cACqB,MAA5B1J,EAAO6K,MAAM,cACbD,EAAc,EAAKE,qBAAqB9K,QAEzC,CACH,IAAI+K,EAAU/K,EAAO6J,MAAM,KACJ,IAAnBkB,EAAQ/Z,SACR4Z,EAAc,EAAKE,qBAAqB9K,EAAS3O,SAAS,EAAKwG,MAAM6R,iBAElD,IAAnBqB,EAAQ/Z,QACJgP,EAAOhP,OAAS,EA9GH,IA+GT+Z,EAAQ,GAAG/Z,QAAUK,SAAS,EAAKwG,MAAM6R,iBACzCkB,EAAc,EAAKE,qBAAqBC,EAAQ,GAAKA,EAAQ,KAMjF,OAAOH,GA5GQ,EA8GnBE,qBAAuB,SAACE,GACpB,GAAIA,EAAaha,QAzHY,GA0HzB,IAEI,OADAoM,OAAO4N,IACA,EACT,MAAOlS,GACL,OAAO,EAGf,OAAO,GApHP,IADA,IAAImS,EAAkB,GACbza,EAAI,EAAGA,EAAI,GAAIA,IACpBya,EAAgBpS,KAAK,CAAE9B,MAAOvG,EAAEzB,WAAY0Z,MAAOjY,EAAEzB,aAJ1C,OAMf,EAAK8I,MAAQ,CACTqT,WAAY,GACZC,QAASvT,EAAMuT,QACfjC,UAAW,GACXnL,YAAa,IACbsL,iBAAkB,GAClBK,cAAe,IACfpO,UAAW,WACXsO,eAAgB,GAChBD,kBAAmB,GACnBsB,gBAAiBA,EACjBX,aAAc,GACdC,eAAgBlN,IAChBmN,IAAKpZ,WAAWiM,IAAS/L,MAE7B,EAAK2X,aAAe,EAAKA,aAAa/C,KAAlB,gBACpB,EAAKiD,oBAAsB,EAAKA,oBAAoBjD,KAAzB,gBAC3B,EAAKoD,eAAiB,EAAKA,eAAepD,KAApB,gBACtB,EAAKsD,iBAAmB,EAAKA,iBAAiBtD,KAAtB,gBACxB,EAAK8D,aAAe,EAAKA,aAAa9D,KAAlB,gBACpB,EAAKkF,qBAAuB,EAAKA,qBAAqBlF,KAA1B,gBAC5B,EAAKqD,mBAAqB,EAAKA,mBAAmBrD,KAAxB,gBAC1B,EAAK4E,qBAAuB,EAAKA,qBAAqB5E,KAA1B,gBA5Bb,E,0GAoEQtS,G,6EACvBmE,K,KAAmCnE,E,SAA4BpC,YAAqBoC,G,yBAApE+V,kB,KAAyBC,e,WAApC7Q,S,4QAsDCsS,EAAYC,KAAKC,MAAMna,WAAW2G,KAAKF,MAAM2S,KAAOlZ,KACnB,IAAnCyG,KAAKF,MAAMyS,aAAatZ,O,gCAClBwa,YAAgBzT,KAAKF,MAAMqR,UAAWnR,KAAKF,MAAMwR,iBAAkBtR,KAAKF,MAAMkG,YAAahG,KAAKF,MAAM6R,cACxG3R,KAAKF,MAAMyD,UAAWvD,KAAKF,MAAM8R,kBAAmB5R,KAAKF,MAAM+R,eAAgByB,G,6CAE7EI,YAAiB1T,KAAKF,MAAMqR,UAAWnR,KAAKF,MAAMwR,iBAAkBtR,KAAKF,MAAMkG,YAAahG,KAAKF,MAAM6R,cACzG3R,KAAKF,MAAMyD,UAAWvD,KAAKF,MAAM8R,kBAAmB5R,KAAKF,MAAM+R,eAAgByB,EAAWtT,KAAKF,MAAMyS,c,qIAKvG,IAAD,SACCza,EAAO,UAAG0H,aAAaC,QAAQ,kBAAxB,QAAsC,GACnD,OACI,eAAC,WAAD,WACI,sBAAKtB,UAAU,eAAf,UACI,6CACA,4FAEJ,sBAAKA,UAAU,uCAAf,UACI,sBAAKA,UAAU,kEAAf,UACI,uBAAO2F,QAAQ,YAAY3F,UAAU,oCAArC,kBACA,sBAAKA,UAAU,wBAAf,UACI,cAACoR,EAAD,CAAc7U,GAAG,YACbsE,MAAOgB,KAAKF,MAAMyD,UAClBoN,SAAU,SAAChN,GAAD,OAAU,EAAKsO,aAAatO,EAAK3E,QAC3C4R,QAASI,IAEb,8BAGR,sBAAK7S,UAAU,kEAAf,UACI,uBAAO2F,QAAQ,YAAY3F,UAAU,oCAArC,kBACA,uBAAOwF,KAAK,OACRjJ,GAAG,YACHyD,UAAU,iCACVwS,SAAU,SAAA5P,GAAC,OAAI,EAAKmQ,aAAanQ,EAAE4S,OAAO3U,QAC1CA,MAAOgB,KAAKF,MAAMqR,UAClByC,aAAa,WAGrB,sBAAKzV,UAAU,qEAAf,UACI,uBAAO2F,QAAQ,mBAAmB3F,UAAU,oCAA5C,yBACA,0BAAUzD,GAAG,mBACTyD,UAAU,iCACVwS,SAAU,SAAA5P,GAAC,OAAI,EAAKqQ,oBAAoBrQ,EAAE4S,OAAO3U,QACjDA,MAAOgB,KAAKF,MAAMwR,iBAClBuC,KAAK,SAGb,sBAAK1V,UAAU,kEAAf,UACI,uBAAO2F,QAAQ,cAAc3F,UAAU,0DAAvC,oBACA,uBAAOwF,KAAK,OACRjJ,GAAG,cACHyD,UAAU,iCACVwS,SAAU,SAAA5P,GAAC,OAAI,EAAKwQ,eAAexQ,EAAE4S,OAAO3U,QAC5CA,MAAOgB,KAAKF,MAAMkG,YAClB4N,aAAa,WAIQ,aAAzB5T,KAAKF,MAAMyD,UACP,sBAAKpF,UAAU,kEAAf,UACI,uBAAO2F,QAAQ,gBAAgB3F,UAAU,oCAAzC,sBACA,sBAAKA,UAAU,iDAAf,UACI,cAACoR,EAAD,CAAc7U,GAAG,gBACbsE,MAAOgB,KAAKF,MAAM6R,cAClBhB,SAAU,SAACe,GAAD,OAAS,EAAKD,iBAAiBC,EAAI1S,QAC7C4R,QAAS5Q,KAAKF,MAAMoT,kBAExB,8BAGN,KAEV,cAACxP,EAAA,EAAD,CAAYC,KAAM3D,KAAKF,MAAMyD,UAAWzL,QAASkI,KAAKF,MAAM8R,kBAAmBhO,MAAO,MAEzD,aAAzB5D,KAAKF,MAAMyD,UAA2B,KAElC,cAAC,WAAD,UAEI,sBAAKpF,UAAU,kEAAf,UACI,wBAAO2F,QAAQ,iBAAiB3F,UAAU,oCAA1C,UAA+E6B,KAAKF,MAAMyD,UAA1F,UACA,uBAAOI,KAAK,OACRjJ,GAAG,iBACHyD,UAAU,iCACVwS,SAAU,SAAA5P,GAAC,OAAI,EAAKsS,qBAAqBtS,EAAE4S,OAAO3U,QAClDA,MAAOgB,KAAKF,MAAM8R,kBAClBgC,aAAa,aAKjC,sBAAKzV,UAAU,qEAAf,UACI,wBAAO2F,QAAQ,eAAe3F,UAAU,qCAAxC,mCACI,cAACyQ,EAAD,CAAalU,GAAG,sBAAsBwD,KAClC,eAAC,WAAD,WACI,qHACA,2HACA,mJACA,mHAIZ,uBAAOyF,KAAK,OACRjJ,GAAG,eACHyD,UAAU,iCACVwS,SAAU,SAAA5P,GAAC,OAAI,EAAKmR,gBAAgBnR,EAAE4S,OAAO3U,QAC7CA,MAAOgB,KAAKF,MAAMyS,aAClBqB,aAAa,WAGrB,sBAAKzV,UAAU,qEAAf,UACI,wBAAO2F,QAAQ,iBAAiB3F,UAAU,kCAA1C,4BACI,cAACyQ,EAAD,CAAalU,GAAG,wBAAwBwD,KACpC,cAAC,WAAD,UACI,gGAIZ,sBAAKC,UAAU,mEAAf,UACI,sBAAKzD,GAAG,iBAAiByD,UAAU,2BAAnC,UAA+DhF,YAAgB6G,KAAKF,MAAM0S,gBAA1F,UACA,8BAGR,sBAAKrU,UAAU,gDAAf,UACI,wBAAO2F,QAAQ,MAAM3F,UAAU,qCAA/B,gBACI,cAACyQ,EAAD,CAAalU,GAAG,aAAawD,KACzB,eAAC,WAAD,WACI,kFACA,qHACA,iKACA,qHAIZ,uBAAOyF,KAAK,OACRjJ,GAAG,MACHyD,UAAU,iCACVwS,SAAU,SAAA5P,GAAC,OAAI,EAAK2R,OAAO3R,EAAE4S,OAAO3U,QACpCA,MAAOgB,KAAKF,MAAM2S,IAClBmB,aAAa,WAGrB,qBAAKzV,UAAU,oEAAf,SACI,wBAAQA,UAAU,eACdC,QAAS,kBAAM,EAAK0V,aACpBC,SAA0C,IAAhC/T,KAAKF,MAAMqR,UAAUlY,QAA4B,KAAZnB,EAFnD,SAKQkI,KAAKF,MAAMyS,aAAatZ,OAAS,EAC7B,YACE,qB,GApREiI,IAAMC,W,SChB/B,SAAS6S,IACpB,OACI,qBAAK7V,UAAU,eAAf,SACI,yEAGI,mBAAGsF,KAAK,uCAAuCkQ,OAAO,SAASM,IAAI,aAAnE,SACI,qBAAKxF,ICVV,6jGDU2B7K,MAAM,KAAKlI,OAAO,KAAKyC,UAAU,2BAA2BwQ,IAAI,kB,IEHrFuF,E,uKAGjB,OACE,sBAAK/V,UAAU,oEAAf,UACE,sBAAKA,UAAU,8CAAf,UACE,sBAAKA,UAAU,0EAAf,UACE,sBAAKA,UAAU,gDAAf,UACE,6CAAiB,sBAAMA,UAAU,gBAAhB,wCACjB,8BACE,wBAAQA,UAAU,iBAChBC,QAAS,WAEPxF,OAAOyF,KADK,gDACK,UAAUC,SAH/B,iCAUJ,cAAC,EAAD,OAGF,cAAC,EAAD,IACA,cAACsB,EAAA,EAAD,OAEF,cAACoU,EAAD,W,GA1ByB9S,IAAMC,WCOxBgT,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBjZ,MAAK,YAAkD,IAA/CkZ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,K,+HCAO,SAAehZ,EAAtB,kC,4CAAO,WAAmBzB,GAAnB,2BAAAhE,EAAA,6DAAwBsf,EAAxB,+BAAiC,GAAjC,kBAEcC,MAAMvb,EAAK,CACpBwb,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChB,KAAQ,OACR,8BAA+B,IAC/B,+BAAgC,iDAChC,+BAAgC,4BAChCC,QAASJ,KAEd5Z,MAAK,SAAAC,GAAG,OAAIA,EAAImM,UAZpB,+EAcCvN,QAAQ+Q,MAAR,MAdD,kBAeQ,IAfR,0D,sBA8BA,SAAerR,EAAtB,kC,4CAAO,WAAuBD,GAAvB,eAAAhE,EAAA,+EAEsBuf,MAAMvb,GAAK0B,MAAK,SAAAC,GAAG,OAAIA,EAAIga,iBAFjD,cAEOnW,EAFP,yBAGQA,GAHR,uCAKCjF,QAAQ+Q,MAAR,MALD,kBAMQ,IANR,0D,6PCvCHzV,EAAU,6BAIP,SAAeke,EAAtB,gD,4CAAO,WAA+B9R,EAASC,EAASF,EAAWG,EAAaC,EAASwT,EAAQC,EAASjC,GAAnG,2CAAA5d,EAAA,6DACGsW,EAAQ7O,YAAa,gCACrBrF,EAAU0H,aAAaC,QAAQ,WACjC+V,EAAWlC,EACXA,EAAYhO,IAASmQ,MACrBD,EAAWlQ,IAASmQ,KALrB,SAOiBlJ,YAASiJ,GAP1B,cAOGxQ,EAPH,gBAQuBzP,EARvB,cAQGmgB,EARH,OAQgCrL,UAAUC,gBAAgBtF,GAR1D,UAS6BzP,EAT7B,2BASsCogB,sBAAnCC,EATH,mBAU6BrgB,EAV7B,2BAUsCsgB,aAVtC,KAUmDH,EAVnD,KAU+DE,EAA5DhR,EAVH,8BAW0BpJ,cAX1B,eAWGyJ,EAXH,iBAY6B1P,EAZ7B,eAYGsP,EAZH,OAYsCiR,kBAAkBC,QACrDC,EAAsB3Q,OAAO3D,EAAY6R,KAAK0C,IAAI,GAAIpU,IAAc7K,WAbvE,UAcyBzB,EAdzB,2BAckCiQ,SAdlC,UAc2DjQ,EAd3D,2BAcoEK,IAAIC,SAAS4f,IAAsBze,YAApGkf,EAdH,KAc2CpgB,SAd3C,0BAe+BP,EAf/B,2BAewCmQ,wBAfxC,KAgBCwQ,EAhBD,UAiBQ3gB,EAjBR,2BAiBiBwC,SAjBjB,UAiBgDxC,EAjBhD,2BAiByDiC,QAAQQ,YAAYF,GAjB7E,WAiB0BI,eAjB1B,sBAkBC+M,EAHEkR,EAfH,qCAmBsB5gB,EAnBtB,4BAmB+B6gB,MAnB/B,UAoBQ7gB,EApBR,4BAoBiBuQ,QApBjB,UAoB4CvQ,EApB5C,4BAoBqDmR,MAAM7Q,SAASmP,EAAM,GAAGpI,OApB7E,YAoByByZ,YApBzB,4BAqBQ9gB,EArBR,4BAqBiBwQ,YArBjB,UAqB6CxQ,EArB7C,4BAqBsDK,IAAIC,SAASmgB,GArBnE,YAqB6BlgB,SArB7B,kBAmBGsT,EAnBH,uBAuBH+M,EAAeG,WAAWlN,EAAOzH,EAASC,EAASC,GAvBhD,MAwBHsU,EAxBG,UAwBwC3f,YAAegM,IAAUV,IAxBjE,kCAwBYyU,mBAxBZ,WAwB+B,EAxB/B,aAyBHJ,EAzBG,UAyBwChgB,YAAeof,GAzBvD,kCAyBYgB,mBAzBZ,WAyB+B,EAzB/B,aA0BHJ,EA1BG,UA0BwC3f,YAAe8e,GA1BvD,2BA0BYiB,mBA1BZ,WA0B+B,EA1B/B,iBA4BC1R,EAAiBqB,IAAIiQ,EAAehQ,SA5BrC,0DA8BClM,QAAQC,IAAR,kCA9BD,+BAiCYyK,YAAkBC,EAAcC,EAAkB,GAAI/M,EAASkN,GAjC3E,eAiCC7I,EAjCD,OAkCHlC,QAAQC,IAAI,KAAMiC,GAlCf,UAmCgB4P,YAAaC,EAAO7P,EAAIrE,GAnCxC,eAmCGkG,EAnCH,yBAoCIA,GApCJ,4D,sBAuCA,SAAe0V,EAAtB,kD,4CAAO,WAAgC/R,EAASC,EAASF,EAAWG,EAAaC,EAASwT,EAAQC,EAASjC,EAAWkD,GAA/G,+CAAA9gB,EAAA,6DACGsW,EAAQ7O,YAAa,gCACrBrF,EAAU0H,aAAaC,QAAQ,WACjC+V,EAAWlC,EACXA,EAAY,GAAKhO,IAASmQ,OAC1BD,EAAW,GAAKlQ,IAASmQ,MAL1B,SAOiBlJ,YAASiJ,EAAWlQ,KAPrC,cAOGN,EAPH,gBAQuBzP,EARvB,cAQGmgB,EARH,OAQgCrL,UAAUC,gBAAgBtF,GAR1D,UAS6BzP,EAT7B,2BASsCogB,sBAAnCC,EATH,mBAU6BrgB,EAV7B,2BAUsCsgB,aAVtC,KAUmDH,EAVnD,KAU+DE,EAA5DhR,EAVH,8BAW0BpJ,cAX1B,eAWGyJ,EAXH,iBAY6B1P,EAZ7B,eAYGsP,EAZH,OAYsCiR,kBAAkBC,QACrDC,EAAsB3Q,OAAO3D,EAAY6R,KAAK0C,IAAI,GAAIpU,IAAc7K,WAEtEwf,EAAWvd,OAAS,IAAM,IAC1Bud,GAA0B,KAhB3B,UAmB6BjhB,EAnB7B,2BAmBsCiQ,SAnBtC,UAmB+DjQ,EAnB/D,2BAmBwEK,IAAIC,SAAU2f,EAAUxe,YAA7Fyf,EAnBH,KAmB+C3gB,SAnB/C,0BAoBmCP,EApBnC,2BAoB4CmQ,wBApB5C,KAqBC+Q,EArBD,UAsBQlhB,EAtBR,2BAsBiBwC,SAtBjB,UAsBgDxC,EAtBhD,2BAsByDiC,QAAQQ,YAAYkI,KAtB7E,WAsB0BhI,eAtB1B,sBAuBC+M,EAHEyR,EApBH,iCAwBHA,EAxBG,UAwB4ClhB,YAAWwgB,GAxBvD,kCAwBgBO,mBAxBhB,WAwBmC,EAxBnC,OAyBGI,EAAiB,CAAChV,EAASC,EAASC,EAAaW,IAAUV,GAAUyT,EAASD,GACpFrb,QAAQC,IAAI,YAAa,CAACyH,EAASC,EAASC,EAAaW,IAAUV,GAAUyT,EAASD,IAChFsB,EAAiBD,EAAeza,KAAI,SAAC2a,EAAKtO,GAC5C,OAAc,IAAVA,EACO,IAAIxO,WAAWzD,EAAOC,KAAKsgB,EAAK,QAEhC,IAAI9c,WAAWzD,EAAOC,KAAKG,aAAWC,YAAYkgB,GAAM,WA/BpE,MAkCHH,EAlCG,UAkC6CnhB,EAlC7C,4BAkCsDI,SAASmhB,oBAAoBF,GAlCnF,MAkCgBL,mBAlChB,WAkCmC,EAlCnC,iBAmC2BhhB,EAnC3B,4BAmCoCI,SAnCpC,UAoCQJ,EApCR,4BAoCiBiC,QAAQQ,YAAYF,GAASwI,SAAS,GAAMC,SAAS,EAAG,IADtEwW,EAnCH,MAmC6CvW,mBAnC7C,kBAsCHkW,EAAmBH,mBAAmB,EAAGQ,GAtCtC,MAuCHL,EAvCG,UAuC4CvgB,YAAeqgB,GAvC3D,kCAuCgBD,mBAvChB,WAuCmC,EAvCnC,OAwCHG,EAAmBH,mBAAmB,EAAGQ,GAxCtC,MAyCHL,EAzCG,UAyC4CvgB,YAAe,UAzC3D,2BAyCgBogB,mBAzChB,WAyCmC,EAzCnC,iBA2CC1R,EAAiBqB,IAAIwQ,EAAmBvQ,SA3CzC,0DA6CClM,QAAQC,IAAR,kCA7CD,+BAiDYyK,YAAkBC,EAAcC,EAAkB,GAAI/M,EAASkN,GAjD3E,eAiDC7I,EAjDD,OAkDHlC,QAAQC,IAAI,KAAMiC,GAlDf,UAmDgB4P,YAAaC,EAAO7P,EAAIrE,GAnDxC,eAmDGkG,EAnDH,yBAoDIA,GApDJ,4D,sBAuDA,SAAeoF,EAAtB,kC,4CAAO,WAAiCD,GAAjC,yCAAAzN,EAAA,yDACGsW,EAAQ7O,YAAa,gCACrBrF,EAAU0H,aAAaC,QAAQ,WACjCuF,EAAQ,CAAC7B,KACT7J,SAAS6J,EAAgBnE,OAASsG,IAASmQ,KAJ5C,gCAKsBlJ,YAASjH,KAL/B,OAKO0R,EALP,OAMChS,EAAQA,EAAMlI,OAAOka,GANtB,cAQGC,EAAatO,YAAkB3D,GARlC,UASuBzP,EATvB,eASGmgB,EATH,OASgCrL,UAAUC,gBAAgBtF,GAT1D,UAU6BzP,EAV7B,2BAUsCogB,sBAAnCC,EAVH,mBAW6BrgB,EAX7B,2BAWsCsgB,aAXtC,KAWmDH,EAXnD,KAW+DE,EAA5DhR,EAXH,8BAY0BpJ,cAZ1B,eAYGyJ,EAZH,iBAa6B1P,EAb7B,eAaGsP,EAbH,OAasCiR,kBAAkBC,QAbxD,UAc2BxgB,EAd3B,2BAcoCiQ,SAdpC,UAc6DjQ,EAd7D,2BAcsEK,IAAIC,UAAUyD,SAAS2d,GAAc3R,KAAQtO,YAAhHkgB,EAdH,KAc6CphB,SAd7C,0BAeiCP,EAfjC,2BAe0CmQ,wBAf1C,KAgBCwR,EAhBD,UAiBQ3hB,EAjBR,2BAiBiBwC,SAjBjB,UAiBgDxC,EAjBhD,oBAiByDiC,QAAQQ,YAAYF,GAjB7E,WAiB0BI,eAjB1B,sBAkBC+M,EAHEkS,EAfH,qCAoBCtS,EAAiBqB,IAAIiR,EAAiBhR,SApBvC,0DAsBClM,QAAQC,IAAR,kCAtBD,+BAyBYyK,YAAkBC,EAAcC,EAAkB,GAAI/M,EAASkN,GAzB3E,eAyBC7I,EAzBD,OA0BHlC,QAAQC,IAAI,KAAMiC,GA1Bf,UA2BgB4P,YAAaC,EAAO7P,EAAIrE,GA3BxC,eA2BGkG,EA3BH,yBA4BIA,GA5BJ,4D,iFCzGP,8OAAO,IAAMzE,EAAiB,IACjBkc,EAAwB,KAAQlc,EAChC+L,EAAS,KAETtK,EAA+B,gCAG/BwH,EAAY,CACrB,SAAY,GACZ,QAAW,WACX,MAAS,WACT,MAAS,YAGA8P,EAAmB,CAC5BhN,EACA,KAAQ/L,EACR,KAAQA,EACR,IAAOA,EACP,IAAOA,EACP,GAAMA,EACN,GAAMA,EACN,EAAIA,EACJ,EAAIA,GAKK2G,EAAiC,qoB,oFCzB/B,SAASwD,EAAW7D,GAC/B,OACI,cAAC,WAAD,UAEuB,aAAfA,EAAM8D,MAAyC,KAAlB9D,EAAM/H,QAAiB,KAChD,sBAAKqG,UAAU,oEAAf,UAEuB,YAAf0B,EAAM8D,KACF,qBAAK8K,IAAK5O,EAAM/H,QAAS6W,IAAI,QAAQ/K,MAAO/D,EAAM+D,QAChD,KAGS,UAAf/D,EAAM8D,KACF,uBAAOyT,UAAQ,EAAC3I,IAAK5O,EAAM/H,QAAS6W,IAAI,QAAQ/K,MAAO/D,EAAM+D,QAC3D,KAGS,UAAf/D,EAAM8D,KACF,uBAAOyT,UAAQ,EAAC3I,IAAK5O,EAAM/H,QAAS6W,IAAI,QAAQ/K,MAAO/D,EAAM+D,QAC3D,a","file":"static/js/main.d9427dcf.chunk.js","sourcesContent":["import {Serializer} from \"@coinbarn/ergo-ts\";\r\nimport * as crypto from \"crypto-js\";\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n\r\nexport async function encodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.from_i32(n).encode_to_base16()\r\n    else return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(n)).encode_to_base16()\r\n}\r\n\r\nexport async function decodeNum(n, isInt = false) {\r\n    if (isInt) return (await ergolib).Constant.decode_from_base16(n).to_i32()\r\n    else return (await ergolib).Constant.decode_from_base16(n).to_i64().to_str()\r\n\r\n}\r\n\r\nexport async function encodeAddress(address) {\r\n    const byteArray = (await ergolib).Address.from_mainnet_str(address).to_bytes();\r\n    return (await ergolib).Constant.from_byte_array(byteArray);\r\n}\r\n\r\nexport async function decodeAddress(addr) {\r\n    const address = (await ergolib).Address.from_bytes(addr);\r\n    return address.to_base58();\r\n}\r\n\r\nexport async function encodeLongArray(longArray) {\r\n    return (await ergolib).Constant.from_i64_str_array(longArray);\r\n}\r\n\r\nexport async function decodeLongArray(encodedArray) {\r\n    return (await ergolib).Constant.decode_from_base16(encodedArray).to_i64_str_array().map(cur => parseInt(cur))\r\n}\r\n\r\nexport async function encodeIntArray(intArray) {\r\n    return (await ergolib).Constant.from_i32_array(intArray);\r\n}\r\n\r\nexport async function decodeIntArray(encodedArray) {\r\n    return (await ergolib).Constant.decode_from_base16(encodedArray).to_i32_array()\r\n}\r\n\r\nexport async function encodeInt(num) {\r\n    return (await ergolib).Constant.from_i32(num);\r\n}\r\nexport async function decodeInt(num) {\r\n    return num.to_i32();\r\n}\r\n\r\nexport async function getErgoBox(json) {\r\n    return (await ergolib).ErgoBox.from_json(json);\r\n}\r\n\r\nexport async function encodeLong(num) {\r\n    return (await ergolib).Constant.from_i64((await ergolib).I64.from_str(num));\r\n}\r\nexport async function decodeLong(num) {\r\n    return (await ergolib).Constant.decode_from_base16(num).to_i64().to_str();\r\n}\r\n\r\nexport async function encodeHex(reg) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(reg, 'hex')).encode_to_base16();\r\n}\r\n\r\nexport async function encodeHexConst(reg) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(reg, 'hex'));\r\n}\r\n\r\nexport async function encodeStr(str) {\r\n    return encodeHex(Serializer.stringToHex(str))\r\n}\r\n\r\nexport async function encodeStrConst(str) {\r\n    return (await ergolib).Constant.from_byte_array(Buffer.from(Serializer.stringToHex(str), 'hex'));\r\n}\r\n\r\nexport function toHexString(byteArray) {\r\n    return Array.from(byteArray, function(byte) {\r\n        return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r\n    }).join('')\r\n}\r\n\r\nexport async function decodeString(encoded) {\r\n    return Serializer.stringFromHex(toHexString((await ergolib).Constant.decode_from_base16(encoded).to_byte_array()))\r\n}\r\n\r\nexport async function decodeHex(encoded) {\r\n    return toHexString((await ergolib).Constant.decode_from_base16(encoded).to_byte_array())\r\n}\r\n\r\nexport async function decodeHexArray(encoded) {\r\n    return (await ergolib).Constant.decode_from_base16(encoded).to_coll_coll_byte().map(r => toHexString(r))\r\n}\r\n\r\nexport async function decodeStringArray(encoded) {\r\n    return (await ergolib).Constant.decode_from_base16(encoded).to_coll_coll_byte().map(r => {\r\n        return Serializer.stringFromHex(toHexString(r));\r\n    })\r\n}\r\n\r\nexport async function sigmaPropToAddress(sigmaProp) {\r\n    return (await ergolib).Address.recreate_from_ergo_tree((await ergolib).ErgoTree.from_base16_bytes(\"00\" + sigmaProp)).to_base58();\r\n}\r\n\r\nexport async function addressToSigmaPropHex(address) {\r\n    return toHexString((await ergolib).Constant.from_ecpoint_bytes(\r\n        (await ergolib).Address.from_base58(address).to_bytes(0x00).subarray(1, 34)\r\n    ).sigma_serialize_bytes());\r\n}\r\n\r\nexport function ergToNano(erg) {\r\n    if (erg === undefined) return 0\r\n    if (erg.startsWith('.')) return parseInt(erg.slice(1) + '0'.repeat(9 - erg.length + 1))\r\n    let parts = erg.split('.')\r\n    if (parts.length === 1) parts.push('')\r\n    if (parts[1].length > 9) return 0\r\n    return parseInt(parts[0] + parts[1] + '0'.repeat(9 - parts[1].length))\r\n}\r\n\r\n\r\nexport async function encodeContract(address) {\r\n    const tmp = (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address));\r\n    return tmp.ergo_tree().to_base16_bytes();\r\n}\r\n\r\nexport async function ergoTreeToAddress(ergoTree) {\r\n    //console.log(\"ergoTreeToAddress\",ergoTree);\r\n    const ergoT = (await ergolib).ErgoTree.from_base16_bytes(ergoTree);\r\n    const address = (await ergolib).Address.recreate_from_ergo_tree(ergoT);\r\n    return address.to_base58();\r\n}\r\n\r\nexport async function addressToErgoTree(addr) {\r\n    const addrWASM = (await ergolib).Address.from_base58(addr);\r\n    return addrWASM.to_ergo_tree().to_base16_bytes();\r\n}\r\n\r\nexport async function ergoTreeToTemplate(ergoTree) {\r\n    const ergoTreeWASM = (await ergolib).ErgoTree.from_base16_bytes(ergoTree);\r\n    return toHexString(ergoTreeWASM.template_bytes());\r\n}\r\n\r\nexport async function ergoTreeToTemplateHash(ergoTree) {\r\n    const ergoTreeTemplateHex = await ergoTreeToTemplate(ergoTree);\r\n    //return toHexString(ergoTreeWASM.template_bytes());\r\n    return crypto.SHA256(crypto.enc.Hex.parse(ergoTreeTemplateHex)).toString(crypto.enc.Hex);\r\n}\r\n\r\nexport function byteArrayToBase64( byteArray ) {\r\n    var binary = '';\r\n    var len = byteArray.byteLength;\r\n    for (var i = 0; i < len; i++) {\r\n        binary += String.fromCharCode( byteArray[ i ] );\r\n    }\r\n    return window.btoa( binary );\r\n}\r\n","import { getBlob } from \"../ergo-related/rest\";\r\nimport { NANOERG_TO_ERG } from \"./constants\";\r\nconst { createHash } = require('crypto');\r\n\r\n\r\nexport function formatLongString(str, num) {\r\n    if (typeof str !== 'string') return str;\r\n    if (str.length > 2 * num) {\r\n        return str.substring(0, num) + \"...\" + str.substring(str.length - num, str.length);\r\n    } else {\r\n        return str;\r\n    }\r\n}\r\n\r\nexport function formatERGAmount(amountStr) {\r\n    return parseFloat(parseInt(amountStr) / NANOERG_TO_ERG).toFixed(4);\r\n}\r\n\r\nexport async function downloadAndSetSHA256(url) {\r\n    try {\r\n        const blob = await getBlob(url);\r\n        const hash = createHash('sha256').update(new Uint8Array(blob)).digest('hex');\r\n        console.log(\"HASH\", hash)\r\n        return hash;\r\n    } catch(e) {\r\n        console.log(e)\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport function promiseTimeout(ms, promise) {\r\n    // Create a promise that rejects in <ms> milliseconds\r\n    let timeout = new Promise((resolve, reject) => {\r\n        let id = setTimeout(() => {\r\n            clearTimeout(id);\r\n            reject('Timed out in ' + ms + 'ms.')\r\n        }, ms)\r\n    })\r\n    // Returns a race between our timeout and the passed in promise\r\n    return Promise.race([\r\n        promise,\r\n        timeout\r\n    ])\r\n}\r\n\r\nexport function sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}","import { get } from './rest';\r\nimport JSONBigInt from 'json-bigint';\r\nimport { DEFAULT_EXPLORER_API_ADDRESS } from '../utils/constants';\r\n\r\n\r\nexport const explorerApi = DEFAULT_EXPLORER_API_ADDRESS + '/api/v0';\r\nexport const explorerApiV1 = DEFAULT_EXPLORER_API_ADDRESS + '/api/v1';\r\n\r\nasync function getRequest(url) {\r\n    return get(explorerApi + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nasync function getRequestV1(url) {\r\n    return get(explorerApiV1 + url).then(res => {\r\n        return { data: res };\r\n    });\r\n}\r\n\r\nasync function postTx(url, body = {}, apiKey = '') {\r\n    console.log(\"post0\", JSONBigInt.stringify(body));\r\n    const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'mode': 'cors',\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n        },\r\n        body: JSONBigInt.stringify(body)\r\n    });\r\n\r\n    const [responseOk, body2] = await Promise.all([response.ok, response.json()]);\r\n    console.log(\"post1\", body2, responseOk)\r\n    if (responseOk) {\r\n        if (typeof body2 === 'object') {\r\n            //console.log(\"post2\", body2.id)\r\n            return { result: true, data: body2.id };\r\n        } else {\r\n            return { result: true, data: body2 };\r\n        }\r\n    } else {\r\n        if (Object.keys(body2).includes(\"detail\")) {\r\n            return { result: false, data: body2.detail };\r\n        } else {\r\n            return { result: false, data: body2.reason };\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport async function postTxMempool(tx) {\r\n    try {\r\n        const res = await postTx(explorerApiV1 + '/mempool/transactions/submit', tx);\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(\"postTxMempool\", err);\r\n        return err.toString()\r\n    }\r\n}\r\n\r\nexport async function sendTx(json) {\r\n    const res = await postTxMempool(json);\r\n    //const res = await postRequest('transactions', json)\r\n    return res;\r\n}\r\n\r\nexport async function currentHeight() {\r\n    return getRequest('/blocks?limit=1')\r\n        .then(res => res.data)\r\n        .then(res => res.items[0].height);\r\n}\r\n\r\n/////\r\nexport async function getUnspentBoxesByAddress(address) {\r\n    const res = await getRequestV1(`/boxes/unspent/byAddress/${address}`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getBoxesByAddress(address, limit = 100) {\r\n    const res = await getRequestV1(`/boxes/byAddress/${address}?limit=${limit}`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function boxById(id) {\r\n    const res = await getRequest(`/transactions/boxes/${id}`);\r\n    return res.data;\r\n}\r\n\r\n/////\r\nexport async function boxByTokenId(tokenId) {\r\n    const res = await getRequestV1(`/boxes/unspent/byTokenId/${tokenId}`);\r\n    return res.data.items;\r\n}\r\n\r\n/////\r\nexport async function getTransactionsByAddress(addr) {\r\n    const res = await getRequestV1(`/addresses/${addr}/transactions`);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getUnconfirmedTxsFor(addr) {\r\n    const res = await getRequestV1(`/mempool/transactions/byAddress/${addr}`);\r\n    //console.log(\"getUnconfirmedTxsFor\", res);\r\n    return res.data.items;\r\n}\r\n\r\nexport async function getSpentAndUnspentBoxesFromMempool(address) {\r\n    try {\r\n        var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n        var spentBoxes = [];\r\n        var newBoxes = [];\r\n        if (unconfirmedTxs && unconfirmedTxs.length > 0) {\r\n            spentBoxes = unconfirmedTxs.map(tx => tx.inputs).flat();\r\n            newBoxes = unconfirmedTxs.map(tx => tx.outputs).flat().filter(box => address === box.address);\r\n        }\r\n        //console.log(\"getSpentAndUnspentBoxesFromMempool\", address, spentBoxes, newBoxes)\r\n        return [spentBoxes, newBoxes];\r\n    } catch (e) {\r\n        console.log(e);\r\n        return [[], []];\r\n    }\r\n}\r\n\r\nexport async function getUnspentBoxesForAddressUpdated(address) {\r\n    try {\r\n        const boxesTmp = await getUnspentBoxesByAddress(address);\r\n        const [spentBoxes, newBoxes] = await getSpentAndUnspentBoxesFromMempool(address);\r\n        const spentBlobBoxIds = spentBoxes.map(box => box.boxId);\r\n        const boxes = newBoxes.concat(boxesTmp).filter(box => !spentBlobBoxIds.includes(box.boxId));\r\n        return boxes;\r\n    } catch (e) {\r\n        console.log(e);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getExplorerBlockHeaders() {\r\n    return (await getRequestV1(`/blocks/headers`)).data.items.slice(0, 10);\r\n}\r\nexport async function getExplorerBlockHeadersFull() {\r\n    return (await getRequestV1(`/blocks/headers`)).data.items;\r\n}\r\n\r\nexport async function getBalanceForAddress(addr) {\r\n    const res = await getRequestV1(`/addresses/${addr}/balance/total`);\r\n    console.log(\"getBalanceUnconfirmedForAddress\", res)\r\n    return res.data;\r\n}\r\n","import Swal from 'sweetalert2/src/sweetalert2.js';\r\nimport withReactContent from 'sweetalert2-react-content';\r\nimport { formatLongString } from './utils';\r\nimport { encodeContract } from '../ergo-related/serializer';\r\n\r\nexport function waitingAlert(title) {\r\n    const MySwal = withReactContent(Swal)\r\n    Swal.fire({\r\n        title: title,\r\n        allowOutsideClick: false,\r\n        showConfirmButton: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function errorAlert(title, msg) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: title,\r\n        icon: 'error',\r\n        text: msg,\r\n        allowOutsideClick: false,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function confirmAlert(msg, txt, confirmMsg = 'Yes', denyMsg = 'No') {\r\n    return Swal.fire({\r\n        title: msg,\r\n        html: txt,\r\n        showDenyButton: true,\r\n        confirmButtonText: confirmMsg,\r\n        denyButtonText: denyMsg,\r\n        allowOutsideClick: false,\r\n    })\r\n}\r\n\r\nexport function displayTransaction(txId) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: \"Transaction sent succesfully\",\r\n        allowOutsideClick: true,\r\n        icon: 'success',\r\n        showCloseButton: true,\r\n        html: `<p>The transaction will be visible in few seconds: <a href=\"https://explorer.ergoplatform.com/en/transactions/${txId}\" target=\"_blank\" > ${txId} </a></p>`,\r\n    });\r\n    return MySwal;\r\n}\r\n\r\nexport function displayErgoPayTransaction(txId, reducedTx) {\r\n    const MySwal = withReactContent(Swal)\r\n    MySwal.fire({\r\n        title: \"Sign the transaction using ergo mobile wallet\",\r\n        allowOutsideClick: true,\r\n        icon: 'success',\r\n        showConfirmButton: true,\r\n        html: <div><p>Send the transaction to wallet </p>\r\n            <button className='btn btn-blue m-1' onClick={() => {\r\n                const url = `ergopay:${reducedTx}`;\r\n                window.open(url, '_blank').focus();\r\n            }} > Sign with ErgoPay\r\n            </button>\r\n        </div>\r\n        ,\r\n    },\r\n        function () {\r\n            window.location.reload();\r\n        });\r\n    return MySwal;\r\n}\r\n\r\nexport function promptErgAddr() {\r\n    return new Promise(function (resolve, reject) {\r\n        Swal.fire({\r\n            title: \"Set ERG address\",\r\n            html: `<div><input type=\"text\" id=\"ergAddress\" class=\"swal2-input\" placeholder=\"ERG address\"></div>`,\r\n            focusConfirm: false,\r\n            showCancelButton: true,\r\n            showConfirmButton: true,\r\n            preConfirm: async () => {\r\n                const ergAddress = Swal.getPopup().querySelector('#ergAddress').value;\r\n                try {\r\n                    await encodeContract(ergAddress)\r\n                } catch (e) {\r\n                    Swal.showValidationMessage(`The ERG address is invalid`);\r\n                }\r\n                return { ergAddress: ergAddress };\r\n            }\r\n        }).then((result) => {\r\n            if (result.value) {\r\n                resolve(result.value.ergAddress);\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport function promptErgAddrList(addrList) {\r\n    return new Promise(function (resolve, reject) {\r\n        var inputOptions = {};\r\n        for (const addr of addrList) {\r\n            inputOptions[addr] = formatLongString(addr, 10);\r\n        }\r\n        //console.log(\"inputOptions[addrList[0]]\",addrList[0]);\r\n        Swal.fire({\r\n            title: \"Set ERG address\",\r\n            input: 'select',\r\n            inputValue: localStorage.getItem('address') ?? '',\r\n            inputOptions: inputOptions,\r\n            focusConfirm: false,\r\n            showCancelButton: true,\r\n            showConfirmButton: true,\r\n            customClass: {\r\n                input: \"monotype\",\r\n            },\r\n            inputValidator: function (value) {\r\n                return new Promise(function (resolve, reject) {\r\n                    if (value !== '') {\r\n                        resolve()\r\n                    } else {\r\n                        reject('The ERG address is invalid')\r\n                    }\r\n                })\r\n            }\r\n        }).then(function (result) {\r\n            if (result.value) {\r\n                resolve(result.value);\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    });\r\n}\r\n","import React from 'react';\r\nimport { getUnconfirmedTxsFor, getUnspentBoxesForAddressUpdated } from '../ergo-related/explorer';\r\nimport { toHexString } from '../ergo-related/serializer';\r\nimport { CYTI_MINT_REQUEST_SCRIPT_ADDRESS } from '../utils/constants';\r\nimport MintRequest from './MintRequest';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n\r\nexport default class MintRequests extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userMintRequests: [],\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.fetchMintRequests();\r\n    }\r\n\r\n    async fetchMintRequests() {\r\n        var mintBoxes = await getUnspentBoxesForAddressUpdated(CYTI_MINT_REQUEST_SCRIPT_ADDRESS);\r\n        const address = localStorage.getItem('address') ?? '';\r\n\r\n        var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n        var spentBoxes = [];\r\n        var newBoxes = [];\r\n        if (unconfirmedTxs && unconfirmedTxs.length > 0) {\r\n            spentBoxes = unconfirmedTxs.map(tx => tx.inputs).flat();\r\n            newBoxes = unconfirmedTxs.map(tx => tx.outputs).flat().filter(box => address === box.CYTI_MINT_REQUEST_SCRIPT_ADDRESS);\r\n        }\r\n        const spentBoxIds = spentBoxes.map(box => box.boxId);\r\n        mintBoxes = newBoxes.concat(mintBoxes).filter(box => !spentBoxIds.includes(box.boxId));\r\n\r\n        var addressSigmaPropHex = '';\r\n        if (address !== '') {\r\n            addressSigmaPropHex = toHexString((await ergolib).Constant.from_ecpoint_bytes(\r\n                (await ergolib).Address.from_base58(localStorage.getItem('address')).to_bytes(0x00).subarray(1, 34)\r\n            ).sigma_serialize_bytes());\r\n        }\r\n        var userMintRequests = [];\r\n        for (const box of mintBoxes) {\r\n            try {\r\n                if (box.additionalRegisters.R6) {\r\n                    const mintSigmaProp = Buffer.from(box.additionalRegisters.R6.serializedValue, 'hex')\r\n                    if (toHexString(mintSigmaProp) === addressSigmaPropHex) {\r\n                        userMintRequests.push(box);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.log(\"fetchMintRequests\", e)\r\n            }\r\n        }\r\n        this.setState({\r\n            userMintRequests: userMintRequests,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        return (\r\n            <div className='w-100 d-flex flex-column m-2 p-2'>\r\n                <br />\r\n                <div><h4>My CYTI mint requests</h4></div>\r\n                {\r\n                    this.state.userMintRequests.length === 0 ?\r\n                        <div className='d-flex flex-column m-1 p-1'>\r\n                            <h6>\r\n                                No CITY mint request found {address === '' ? null : \"for \" + address}\r\n                            </h6>\r\n                        </div>\r\n                        :\r\n                        <div className='d-flex flex-column m-1 p-1'>\r\n                            <div></div>\r\n                            <div className='d-flex flex-wrap justify-content-center m-1 p-1'>\r\n                                {\r\n                                    this.state.userMintRequests.map(box =>\r\n                                        <MintRequest key={box.boxId + \"_1\"} cytiBoxJSON={box} />\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { decodeHex, decodeLong, sigmaPropToAddress, toHexString } from '../ergo-related/serializer';\r\nimport { getRegisterValue } from '../ergo-related/wasm';\r\nimport { NFT_TYPES } from './constants';\r\nimport {Serializer} from \"@coinbarn/ergo-ts\";\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\nexport class CYTIRequest {\r\n    constructor(boxJSON) {\r\n        this.full = boxJSON;\r\n        this.value = boxJSON.value;\r\n        this.requestOwner = '';\r\n        this.targetFirstChar = '';\r\n        this.minerAddress = '';\r\n        this.tokAmount = '0';\r\n        this.tokName = '';\r\n        this.tokDesc = '';\r\n        this.tokDecimals = 0;\r\n        this.tokType = 'Standard';\r\n        this.tokMediaHash = '';\r\n        this.tokMediaURL = '';\r\n        this.boxId = boxJSON.boxId;\r\n        this.isProcessed = false;\r\n    }\r\n\r\n    async initialize() {\r\n        this.tokAmount = await decodeLong(getRegisterValue(this.full, \"R4\"));\r\n        const tokInfo = await decodeR5Array(getRegisterValue(this.full, \"R5\"));\r\n        this.tokName = tokInfo[0] ?? '';\r\n        this.tokDesc = tokInfo[1] ?? '';\r\n        this.tokDecimals = tokInfo[2] ?? '';\r\n        const tokTypeValue = tokInfo[3] ?? '';\r\n        this.tokType = Object.keys(NFT_TYPES).find(key => NFT_TYPES[key] === tokTypeValue);\r\n        this.tokMediaHash = tokInfo[4] ?? '';\r\n        this.tokMediaURL = tokInfo[5] ?? '';\r\n        this.targetFirstChar = await decodeHex(getRegisterValue(this.full, \"R7\"));\r\n        this.isProcessed = this.boxId.substring(0, this.targetFirstChar.length) === this.targetFirstChar;\r\n        this.requestOwner = await sigmaPropToAddress(getRegisterValue(this.full, \"R6\"));\r\n        if (this.isProcessed) {\r\n            this.minerAddress = await sigmaPropToAddress(getRegisterValue(this.full, \"R8\"));\r\n        }\r\n        //console.log(\"this\",this);\r\n    }\r\n\r\n    static async create(boxJSON) {\r\n        const o = new CYTIRequest(boxJSON);\r\n        await o.initialize();\r\n        return o;\r\n    }\r\n}\r\n\r\nexport async function decodeR5Array(encoded) {\r\n    return (await ergolib).Constant.decode_from_base16(encoded).to_coll_coll_byte().map((r, i) => {\r\n        if ( i === 4) {\r\n            return toHexString(r);\r\n        } else {\r\n            return Serializer.stringFromHex(toHexString(r));\r\n        }\r\n        \r\n    })\r\n}","import React, { Fragment } from 'react';\r\nimport { refundMintRequest } from '../ergo-related/mint';\r\nimport { CYTIRequest } from '../utils/CYTIRequest';\r\nimport { formatERGAmount, formatLongString } from '../utils/utils';\r\nimport TokenMedia from './TokenMedia';\r\n\r\n\r\nexport default class MintRequest extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            cytiBoxJSON: props.cytiBoxJSON,\r\n            request: {\"boxId\": \"\", \"targetFirstChar\": \"\"},\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const request = await CYTIRequest.create(this.state.cytiBoxJSON);\r\n        this.setState({\r\n            request: request,\r\n        });\r\n    }\r\n\r\n    async refund(mintRequestJSON) {\r\n        await refundMintRequest(mintRequestJSON);\r\n        \r\n    }\r\n\r\n    render() {\r\n        const connectedAddress = localStorage.getItem(\"address\");\r\n        var statusLabel = \"To be mined\";\r\n        if (this.state.request.isProcessed) {\r\n            statusLabel = \"Processed\";\r\n        }\r\n        const tokenType = this.state.request.tokType;\r\n        var labelMap = { // order matters\r\n            \"Fee\": formatERGAmount(this.state.request.value) + \" ERG\",\r\n            \"Owner\": formatLongString(this.state.request.requestOwner, 6),\r\n            \"Type\": this.state.request.tokType,\r\n            \"Name\": this.state.request.tokName,\r\n            \"Amount\": this.state.request.tokAmount,\r\n            \"Decimals\": this.state.request.tokDecimals,\r\n            \"Description\": this.state.request.tokDesc,\r\n            [tokenType]: \"\",\r\n            \"URL\": \"\",\r\n            \"ID first chars\": this.state.request.targetFirstChar,\r\n            \"Miner\": formatLongString(this.state.request.minerAddress, 6),\r\n            \"Status\": statusLabel,\r\n            \"boxId\": formatLongString(this.state.request.boxId, 6),\r\n        }\r\n        if (this.state.request.tokType !== 'Standard') {\r\n            labelMap[\"URL\"] = <a href={this.state.request.tokMediaURL}>{formatLongString(this.state.request.tokMediaURL, 15)}</a>;\r\n            labelMap[tokenType] = <TokenMedia type={this.state.request.tokType} address={this.state.request.tokMediaURL} width={50} />\r\n        }\r\n        return (\r\n\r\n            <Fragment >\r\n                <div className='card zonerequest d-flex flex-column justify-content-between m-2 p-2'>\r\n                <div className='d-flex flex-column'>\r\n                    {\r\n                        Object.keys(labelMap).filter(lbl => labelMap[lbl] !== \"\").map(lbl =>\r\n                            <div key={lbl} className='d-flex flex-row justify-content-between align-items-center'>\r\n                                <label htmlFor={lbl} className='col-sm d-flex align-items-start'>{lbl}</label>\r\n                                <div id={lbl} className='limit-width'>{labelMap[lbl]}</div>\r\n                            </div>\r\n                        )\r\n                    }\r\n                    </div>\r\n                    {\r\n                        this.state.request.requestOwner === connectedAddress &&\r\n                            !this.state.request.boxId.startsWith(this.state.request.targetFirstChar) ?\r\n                            <div className='w-100 d-flex flex-row justify-content-center'>\r\n                                <button className='btn btn-blue' onClick={() => this.refund(this.state.cytiBoxJSON)}>\r\n                                    Refund\r\n                                </button>\r\n                            </div>\r\n                            : null\r\n                    }\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n","import JSONBigInt from 'json-bigint';\r\nimport { currentHeight, getExplorerBlockHeaders, getExplorerBlockHeadersFull } from './explorer';\r\nimport { NANOERG_TO_ERG, TX_FEE } from '../utils/constants';\r\nimport { TextEncoder } from 'text-decoding';\r\nimport { byteArrayToBase64, encodeContract } from './serializer';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global BigInt */\r\n\r\nasync function boxCandidateToJsonMin(boxCandidate) {\r\n    var res = {};\r\n    res[\"value\"] = boxCandidate.value().as_i64().as_num().toString();\r\n    res[\"ergoTree\"] = boxCandidate.ergo_tree().to_base16_bytes();\r\n    res[\"address\"] = (await ergolib).Address.recreate_from_ergo_tree(boxCandidate.ergo_tree()).to_base58();\r\n    var tokens = [];\r\n    for (let i = 0; i < boxCandidate.tokens().len(); i++) {\r\n        tokens.push(JSONBigInt.parse(boxCandidate.tokens().get(i).to_json()))\r\n    }\r\n    res[\"assets\"] = tokens;\r\n    console.log(\"boxCandidateToJsonMin\", res)\r\n    return res;\r\n}\r\nasync function boxCandidatesToJsonMin(boxCandidates) {\r\n    var res = [];\r\n    for (let i = 0; i < boxCandidates.len(); i++) {\r\n        res.push(await boxCandidateToJsonMin(boxCandidates.get(i)))\r\n    }\r\n    return res;\r\n}\r\n\r\nexport async function createTransaction(boxSelection, outputCandidates, dataInputs, changeAddress, utxos) {\r\n    console.log(\"createTransaction utxos\", utxos);\r\n    const creationHeight = await currentHeight();\r\n\r\n    // build the change box\r\n    var outputJs = await boxCandidatesToJsonMin(outputCandidates);\r\n    const missingErgs = getMissingErg(utxos, outputJs) - BigInt(TX_FEE);\r\n    const tokens = getMissingTokens(utxos, outputJs);\r\n    console.log(\"missing tokens\", tokens);\r\n    \r\n    if (missingErgs > 0 || Object.keys(tokens) > 0) {\r\n        const changeBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(missingErgs.toString()));\r\n        const changeBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n            changeBoxValue,\r\n            (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(changeAddress)),\r\n            creationHeight);\r\n            for (const tokId of Object.keys(tokens)) {\r\n                const tokenId = (await ergolib).TokenId.from_str(tokId);\r\n                const tokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(tokens[tokId].toString()));\r\n                changeBoxBuilder.add_token(tokenId, tokenAmount);\r\n            }\r\n        try {\r\n            outputCandidates.add(changeBoxBuilder.build());\r\n        } catch (e) {\r\n            console.log(`building error: ${e}`);\r\n            throw e;\r\n        }\r\n    }\r\n\r\n    const txBuilder = (await ergolib).TxBuilder.new(\r\n        boxSelection,\r\n        outputCandidates,\r\n        creationHeight,\r\n        (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(TX_FEE.toString())),\r\n        (await ergolib).Address.from_base58(changeAddress));\r\n    var dataInputsWASM = new (await ergolib).DataInputs();\r\n    for (const box of dataInputs) {\r\n        const boxIdWASM = (await ergolib).BoxId.from_str(box.boxId);\r\n        const dataInputWASM = new (await ergolib).DataInput(boxIdWASM);\r\n        dataInputsWASM.add(dataInputWASM);\r\n    }\r\n    txBuilder.set_data_inputs(dataInputsWASM);\r\n    const tx = parseUnsignedTx(txBuilder.build().to_json());\r\n    console.log(\"createTransaction tx\", tx);\r\n\r\n    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(tx))\r\n    var correctTx = parseUnsignedTx(unsignedTx.to_json());\r\n\r\n    // Put back complete selected inputs in the same order\r\n    correctTx.inputs = correctTx.inputs.map(box => {\r\n        const fullBoxInfo = parseUtxo(utxos.find(utxo => utxo.boxId === box.boxId));\r\n        return {\r\n            ...fullBoxInfo,\r\n            extension: {}\r\n        };\r\n    });\r\n    // Put back complete selected datainputs in the same order\r\n    correctTx.dataInputs = correctTx.dataInputs.map(box => {\r\n        const fullBoxInfo = parseUtxo(dataInputs.find(utxo => utxo.boxId === box.boxId));\r\n        return {\r\n            ...fullBoxInfo,\r\n            extension: {}\r\n        };\r\n    });\r\n\r\n    return correctTx;\r\n}\r\n\r\nexport function parseUnsignedTx(str) {\r\n    let json = JSONBigInt.parse(str);\r\n    return {\r\n        id: json.id,\r\n        inputs: json.inputs,\r\n        dataInputs: json.dataInputs,\r\n        outputs: json.outputs.map(output => (parseUtxo(output))),\r\n    };\r\n}\r\n\r\nexport function parseUtxo(json, addExtention = true, mode = 'input') {\r\n    if (json === undefined) {\r\n        return {};\r\n    }\r\n    var res = {};\r\n    if (mode === 'input') {\r\n        if (\"id\" in json) {\r\n            res[\"boxId\"] = json.id;\r\n        } else {\r\n            res[\"boxId\"] = json.boxId;\r\n        }\r\n    }\r\n    res[\"value\"] = json.value.toString();\r\n    res[\"ergoTree\"] = json.ergoTree;\r\n    if (Array.isArray(json.assets)) {\r\n        res[\"assets\"] = json.assets.map(asset => ({\r\n            tokenId: asset.tokenId,\r\n            amount: asset.amount.toString(),\r\n            name: asset.name ?? '',\r\n            decimals: asset.decimals ?? 0,\r\n        }));\r\n    } else {\r\n        res[\"assets\"] = [];\r\n    }\r\n    if (isDict(json[\"additionalRegisters\"])) {\r\n        res[\"additionalRegisters\"] = parseAdditionalRegisters(json.additionalRegisters);\r\n    } else {\r\n        res[\"additionalRegisters\"] = {};\r\n    }\r\n\r\n    res[\"creationHeight\"] = json.creationHeight;\r\n\r\n    if (\"address\" in json) {\r\n        res[\"address\"] = json.address;\r\n    }\r\n\r\n    if (mode === 'input') {\r\n        if (\"txId\" in json) {\r\n            res[\"transactionId\"] = json.txId;\r\n        } else {\r\n            res[\"transactionId\"] = json.transactionId;\r\n        }\r\n        res[\"index\"] = json.index;\r\n    }\r\n    if (addExtention) {\r\n        res[\"extension\"] = {};\r\n    }\r\n    return res;\r\n}\r\n\r\nexport function parseUtxos(utxos, addExtention, mode = 'input') {\r\n    var utxosFixed = [];\r\n    for (const i in utxos) {\r\n        utxosFixed.push(parseUtxo(utxos[i], addExtention, mode))\r\n    }\r\n    return utxosFixed;\r\n}\r\n\r\nfunction parseAdditionalRegisters(json) {\r\n    var registterOut = {};\r\n    //console.log(\"json\", json);\r\n    Object.entries(json).forEach(([key, value]) => {\r\n        //console.log(\"key\", key, \"value\", value);\r\n        if (isDict(value)) {\r\n            registterOut[key] = value[\"serializedValue\"];\r\n        } else {\r\n            registterOut[key] = value;\r\n        }\r\n    });\r\n    //console.log(\"registterOut\", registterOut);\r\n    return registterOut;\r\n}\r\n\r\nexport async function setBoxRegisterByteArray(box, register, str_value) {\r\n    const value_Uint8Array = new TextEncoder().encode(str_value);\r\n    box.set_register_value(register, (await ergolib).Constant.from_byte_array(value_Uint8Array));\r\n}\r\n\r\nexport async function addSimpleOutputBox(outputCandidates, amountErgsFloat, payToAddress, creationHeight) {\r\n    const amountNanoErgStr = Math.round((amountErgsFloat * NANOERG_TO_ERG)).toString();\r\n    const amountBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(amountNanoErgStr));\r\n    const outputBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        amountBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(payToAddress)),\r\n        creationHeight);\r\n    try {\r\n        outputCandidates.add(outputBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building output error: ${e}`);\r\n        throw e;\r\n    }\r\n}\r\n\r\n\r\nexport async function getTokens(tokenId, tokenAmount) {\r\n    var tokens = new (await ergolib).Tokens();\r\n    const _tokenId = (await ergolib).TokenId.from_str(tokenId);\r\n    const _tokenAmount = (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(tokenAmount.toString()));\r\n    tokens.add(new (await ergolib).Token(\r\n        _tokenId,\r\n        _tokenAmount)\r\n    );\r\n    return tokens;\r\n}\r\n\r\nexport function getUtxosListValue(utxos) {\r\n    return utxos.reduce((acc, utxo) => acc += BigInt(utxo.value), BigInt(0));\r\n}\r\n\r\nexport function getTokenListFromUtxos(utxos) {\r\n    var tokenList = {};\r\n    for (const i in utxos) {\r\n        console.log(\"utxos[i]\",utxos[i])\r\n        for (const asset of utxos[i].assets) {\r\n            if (Object.keys(tokenList).includes(asset.tokenId) ) {\r\n                tokenList[asset.tokenId] = BigInt(tokenList[asset.tokenId]) + BigInt(asset.amount);\r\n            } else {\r\n                console.log(\"tokenList\",tokenList, asset)\r\n                tokenList[asset.tokenId] = BigInt(asset.amount);\r\n            }\r\n        }\r\n    }\r\n    return tokenList;\r\n}\r\n\r\nexport function getMissingErg(inputs, outputs) {\r\n    const amountIn = getUtxosListValue(inputs);\r\n    const amountOut = getUtxosListValue(outputs);\r\n    if (amountIn >= amountOut) {\r\n        return amountIn - amountOut;\r\n    } else {\r\n        return BigInt(0);\r\n    }\r\n}\r\n\r\nexport function getMissingTokens(inputs, outputs) {\r\n    console.log(\"getMissingTokens\", inputs, outputs);\r\n    const tokensIn = getTokenListFromUtxos(inputs);\r\n    const tokensOut = getTokenListFromUtxos(outputs);\r\n    var res = {};\r\n    console.log(\"getMissingTokens\", tokensIn, tokensOut);\r\n    if (tokensIn !== {}) {\r\n        for (const token in tokensIn) {\r\n            if (tokensOut !== {} && token in tokensOut) {\r\n                if (tokensIn[token] - tokensOut[token] > 0) {\r\n                    res[token] = tokensIn[token] - tokensOut[token];\r\n                }\r\n            } else {\r\n                res[token] = tokensIn[token];\r\n            }\r\n        }\r\n    }\r\n    console.log(\"getMissingTokens\", tokensIn, tokensOut, res);\r\n    return res;\r\n}\r\n\r\nexport async function buildBalanceBox(inputs, outputs, address) {\r\n    const missingErgs = getMissingErg(inputs, outputs).toString();\r\n    const contract = await encodeContract(address);\r\n    const tokens = buildTokenList(getMissingTokens(inputs, outputs));\r\n    const height = await currentHeight();\r\n    console.log(\"buildBalanceBox\", missingErgs, contract, tokens, height)\r\n\r\n    return {\r\n        value: missingErgs,\r\n        ergoTree: contract,\r\n        assets: tokens,\r\n        additionalRegisters: {},\r\n        creationHeight: height,\r\n        extension: {},\r\n        index: undefined,\r\n        boxId: undefined,\r\n    };\r\n}\r\n\r\nexport function buildTokenList(tokens) {\r\n    var res = [];\r\n    if (tokens !== {}) {\r\n        for (const i in tokens) {\r\n            res.push({ \"tokenId\": i, \"amount\": tokens[i].toString() });\r\n        }\r\n    };\r\n    return res;\r\n}\r\n\r\nexport function getTokenAmount(box, tokenId) {\r\n    var tokenAmount = \"0\";\r\n    for (const asset of box.assets) {\r\n        if (asset.tokenId === tokenId) {\r\n            tokenAmount = asset.amount;\r\n        }\r\n    }\r\n    return tokenAmount;\r\n}\r\n\r\nexport function getRegisterValue(box, register) {\r\n    if (register in box.additionalRegisters) {\r\n        if (isDict(box.additionalRegisters[register])) {\r\n            //console.log(\"getRegisterValue\", box.additionalRegisters[register].serializedValue);\r\n            return box.additionalRegisters[register].serializedValue;\r\n        } else {\r\n            return box.additionalRegisters[register];\r\n        }\r\n    } else {\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport function getRegisterValue2(box, register) {\r\n\r\n    return box.additionalRegisters[register];\r\n}\r\n\r\nfunction isDict(v) {\r\n    return typeof v === 'object' && v !== null && !(v instanceof Array) && !(v instanceof Date);\r\n}\r\n\r\nexport async function getErgoStateContext() {\r\n    const res =  await getExplorerBlockHeaders();\r\n    const block_headers = (await ergolib).BlockHeaders.from_json(res);\r\n    const pre_header = (await ergolib).PreHeader.from_block_header(block_headers.get(0));\r\n    return new (await ergolib).ErgoStateContext(pre_header, block_headers);\r\n}\r\n\r\nexport async function getErgoStateContext2(contextId) {\r\n    const res = await getExplorerBlockHeadersFull();\r\n    console.log(\"getErgoStateContext2\", res);\r\n    const explorerContext = res.slice(contextId, 10 + contextId);\r\n    const block_headers = (await ergolib).BlockHeaders.from_json(explorerContext);\r\n    const pre_header = (await ergolib).PreHeader.from_block_header(block_headers.get(0));\r\n    return new (await ergolib).ErgoStateContext(pre_header, block_headers);\r\n}\r\n\r\nexport async function signTransactionMultiContext(unsignedTx, inputs, dataInputs, wallet) {\r\n    //console.log(\"signTransaction1\", unsignedTx, inputs, dataInputs);\r\n    const unsignedTransaction = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(unsignedTx));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const dataInputsBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    for (let i = 0; i < 10; i++) {\r\n        try {\r\n            console.log(\"try \"+i.toString())\r\n            const ctx = await getErgoStateContext2(i);\r\n            const signedTx = wallet.sign_transaction(ctx, unsignedTransaction, inputBoxes, dataInputsBoxes);\r\n            \r\n            return [signedTx.to_json(), i];\r\n        } catch(e) {\r\n            console.log(e);\r\n            continue;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport async function signTransaction(unsignedTx, inputs, dataInputs, wallet) {\r\n    //console.log(\"signTransaction1\", unsignedTx, inputs, dataInputs);\r\n    const unsignedTransaction = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(unsignedTx));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const dataInputsBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    const ctx = await getErgoStateContext();\r\n    //console.log(\"signTransaction2\", unsignedTx, inputs, dataInputs);\r\n    const signedTx = wallet.sign_transaction(ctx, unsignedTransaction, inputBoxes, dataInputsBoxes);\r\n    return signedTx.to_json();\r\n}\r\n\r\n// https://github.com/ergoplatform/eips/pull/37 ergopay:<txBase64safe>\r\nexport async function getTxReducedB64Safe(json, inputs, dataInputs = []) {\r\n    //console.log(\"getTxReducedB64Safe\", json, inputs, dataInputs);\r\n    const [txId, reducedTx] = await getTxReduced(json, inputs, dataInputs);\r\n    //console.log(\"getTxReducedB64Safe1\", json, inputs, dataInputs);\r\n    // Reduced transaction is encoded with Base64\r\n    const txReducedBase64 = byteArrayToBase64(reducedTx.sigma_serialize_bytes());\r\n    //console.log(\"getTxReducedB64Safe2\", json, inputs, dataInputs);\r\n    const ergoPayTx = txReducedBase64.replace(/\\//g, '_').replace(/\\+/g, '-');\r\n    //console.log(\"getTxReducedB64Safe3\", txId, ergoPayTx);\r\n    // split by chunk of 1000 char to generates the QR codes\r\n\r\n    return [txId, ergoPayTx];\r\n}\r\n\r\nasync function getTxReduced(json, inputs, dataInputs) {\r\n    // build ergolib objects from json\r\n    //console.log(\"getTxReduced\", json, inputs, dataInputs);\r\n    const unsignedTx = (await ergolib).UnsignedTransaction.from_json(JSONBigInt.stringify(json));\r\n    const inputBoxes = (await ergolib).ErgoBoxes.from_boxes_json(inputs);\r\n    const inputDataBoxes = (await ergolib).ErgoBoxes.from_boxes_json(dataInputs);\r\n    const ctx = await getErgoStateContext();\r\n    return [unsignedTx.id().to_str(), (await ergolib).ReducedTransaction.from_unsigned_tx(unsignedTx, inputBoxes, inputDataBoxes, ctx)];\r\n}","import JSONBigInt from 'json-bigint';\r\nimport { displayErgoPayTransaction, errorAlert } from '../utils/Alerts';\r\nimport { promiseTimeout } from '../utils/utils';\r\nimport { getBalanceForAddress, getUnconfirmedTxsFor, getUnspentBoxesForAddressUpdated } from './explorer';\r\nimport { getTxReducedB64Safe } from './wasm';\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global ergo BigInt */\r\n\r\nfunction hasExtensionConnector() {\r\n    if (typeof window.ergo_check_read_access !== 'undefined') {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction hasConnectorInjected() {\r\n    if (typeof ergo !== 'undefined') {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport async function isWalletConnected() {\r\n    if (hasExtensionConnector()) {\r\n        try {\r\n            const res = await window.ergo_check_read_access();\r\n            console.log(\"isWalletConnected\", res)\r\n            return Promise.resolve(res);\r\n        } catch (e) {\r\n            console.error(\"isWalletConnected error\", e);\r\n            //errorAlert(\"dApp connector not found 1\", \"Install Nautilus or SAFEW wallet in your browser\");\r\n            return Promise.resolve(false);\r\n        }\r\n    } else {\r\n        return Promise.resolve(true);\r\n    }\r\n}\r\n\r\n// Connect to browser extension wallet, return True if success\r\nexport async function connectWallet() {\r\n    if (hasExtensionConnector()) {\r\n        try {\r\n            const alreadyConnected = await isWalletConnected();\r\n            console.log(\"connectWallet alreadyConnected\", alreadyConnected);\r\n            if (!alreadyConnected) {\r\n              const res = await window.ergo_request_read_access();\r\n              await sleep(100)\r\n              return res\r\n            } else {\r\n                return true;\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            errorAlert(\"dApp connector not found 2\", \"Install Nautilus or SAFEW wallet in your browser\");\r\n            return false;\r\n        }\r\n    } else {\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\n// Check the address is in the connected wallet\r\nexport async function isValidWalletAddress(address) {\r\n    if (hasExtensionConnector()) {\r\n        const walletConnected = await connectWallet();\r\n        if (walletConnected && hasConnectorInjected()) {\r\n            const address_list = await ergo.get_used_addresses();\r\n            return address_list.includes(address);\r\n        } else {\r\n            return false;\r\n        }\r\n    } else {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport async function getWalletAddressList() {\r\n    if (hasExtensionConnector()) {\r\n        const walletConnected = await connectWallet();\r\n        if (walletConnected && hasConnectorInjected()) {\r\n            const address_list = await ergo.get_used_addresses();\r\n            return address_list;\r\n        } else {\r\n            return [];\r\n        }\r\n    } else {\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getBalance(tokenId = 'ERG') {\r\n    //console.log('getBalance', tokenId);\r\n    const walletConnected = await connectWallet();\r\n    //console.log('getBalance2', walletConnected, hasConnectorInjected());\r\n    if (walletConnected && hasConnectorInjected()) {\r\n        //console.log('getBalance3', walletConnected);\r\n        const amount = await ergo.get_balance(tokenId);\r\n        return amount;\r\n    } else {\r\n        //console.log('getBalance4', walletConnected);\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            const balance = await getBalanceForAddress(address);\r\n            if (balance.confirmed) {\r\n                if (tokenId === 'ERG') {\r\n                    return balance.confirmed.nanoErgs + balance.unconfirmed.nanoErgs;\r\n                } else {\r\n                    var tokenAmount = 0;\r\n                    for (const tok of balance.confirmed.tokens) {\r\n                        if (tok.tokenId === tokenId) {\r\n                            tokenAmount = tok.amount;\r\n                        }\r\n                    }\r\n                    for (const tok of balance.unconfirmed.tokens) {\r\n                        if (tok.tokenId === tokenId) {\r\n                            tokenAmount = tokenAmount + tok.amount;\r\n                        }\r\n                    }\r\n                    return tokenAmount;\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function walletSignTx(alert, tx, address) {\r\n    alert.update({ title: \"Connecting to wallet...\" });\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted) {\r\n        if (isValidWalletAddress(address)) {\r\n            alert.update({ title: \"Waiting for the transaction signing...\" });\r\n            const txId = await processTx(tx);\r\n            if (txId && hasExtensionConnector()) {\r\n                console.log('[txId]', txId);\r\n                alert.update(\r\n                    {\r\n                        title: \"Waiting for the transaction to reach the mempool\",\r\n                        allowOutsideClick: false,\r\n                        html: `<p>The transaction will be visible in the mempool in few seconds: <a href=\"https://explorer.ergoplatform.com/en/transactions/${txId}\" target=\"_blank\" > ${txId} </a></p>`,\r\n                        showConfirmButton: true,\r\n                    }\r\n                );\r\n                var txFoundMempool = false;\r\n                const startWait = Date.now();\r\n                while (!txFoundMempool && Date.now() - startWait < 60000) {\r\n                    await sleep(3000);\r\n                    try {\r\n                        var unconfirmedTxs = await getUnconfirmedTxsFor(address);\r\n                        //console.log(\"unconfirmedTxs\", unconfirmedTxs)\r\n                        const unconfirmedTx = unconfirmedTxs.filter(tx => tx.id === txId);\r\n                        if (unconfirmedTx.length > 0) {\r\n                            txFoundMempool = true;\r\n                        }\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                    }\r\n                }\r\n                alert.close();\r\n                if (txFoundMempool) {\r\n                    window.location.reload();\r\n                } else {\r\n                    errorAlert(\"The transaction failed to reach the mempool but should be mined in few minutes\")\r\n                }\r\n            } else {\r\n                if (hasExtensionConnector()) {\r\n                    const title = \"Transaction not signed\";\r\n                    const message = \"Something went wrong, the transaction was not sent.\";\r\n                    errorAlert(title, message);\r\n                }\r\n            }\r\n        } else {\r\n            alert.close();\r\n            const title = \"Wrong address\";\r\n            const message = \"The address \" + address + \" is not found in the connected wallet. Please double check the ERG address provided and the connected wallet.\";\r\n            errorAlert(title, message);\r\n        }\r\n    }\r\n    else {\r\n        alert.close();\r\n        console.log('Wallet access denied');\r\n    }\r\n}\r\n\r\n// Get the utxos for the amout of nanoERG in parameter\r\nexport async function getUtxos(amountToSend) {\r\n    const fullAmountToSend = BigInt(amountToSend);\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const utxos = await ergo.get_utxos(fullAmountToSend.toString());\r\n        const filteredUtxos = [];\r\n        if (utxos && Array.isArray(utxos)) {\r\n            for (const utxo of utxos) {\r\n                try {\r\n                    (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n                    filteredUtxos.push(utxo);\r\n                } catch (e) {\r\n                    console.error('[getUtxos] UTxO failed parsing:', utxo, e);\r\n                }\r\n            }\r\n        }\r\n        return filteredUtxos;\r\n    } else {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            return await getUtxosExplorerByAddress(address, fullAmountToSend)\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nasync function getUtxosExplorerByAddress(address, amount, tokenId = 'ERG') {\r\n    const addressBoxes = await getUnspentBoxesForAddressUpdated(address);\r\n    var selectedUtxos = [], unSelectedUtxos = addressBoxes, amountSelected = BigInt(0);\r\n    if (amount) {\r\n        const amountInt = BigInt(amount.toString());\r\n        if (tokenId === 'ERG') {\r\n            while (amountSelected < amountInt && unSelectedUtxos.length > 0) {\r\n                selectedUtxos.push(unSelectedUtxos.shift());\r\n                amountSelected = selectedUtxos.reduce((acc, utxo) => acc += BigInt(utxo.value), BigInt(0));\r\n            }\r\n            if (amountSelected < amountInt) {\r\n                selectedUtxos = undefined;\r\n            }\r\n        } else {\r\n            unSelectedUtxos = unSelectedUtxos.filter(utxo => utxo.assets.map(tok => tok.tokenId).includes(tokenId));\r\n            while (amountSelected < amountInt && unSelectedUtxos.length > 0) {\r\n                selectedUtxos.push(unSelectedUtxos.shift());\r\n                amountSelected = selectedUtxos.reduce((acc, utxo) => acc += BigInt(utxo.assets.find(tok => tok.tokenId === tokenId).amount), BigInt(0));\r\n            }\r\n            if (amountSelected < amountInt) {\r\n                selectedUtxos = undefined;\r\n            }\r\n        }\r\n    } else { // all utxos\r\n        selectedUtxos = addressBoxes;\r\n    }\r\n    return selectedUtxos;\r\n}\r\n\r\nexport async function getTokenUtxos(amountTokenToSend, tokenId) {\r\n    const fullAmountToSend = BigInt(amountTokenToSend);\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const utxos = await ergo.get_utxos(fullAmountToSend.toString(), tokenId);\r\n        //console.log(\"getTokenUtxos\", utxos)\r\n        const filteredUtxos = [];\r\n        if (utxos) {\r\n            for (const utxo of utxos) {\r\n                try {\r\n                    (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n                    filteredUtxos.push(utxo);\r\n                } catch (e) {\r\n                    console.error('[getUtxos] UTxO failed parsing:', utxo, e);\r\n                }\r\n            }\r\n        } else {\r\n            errorAlert(\"Not enough token found: \" + tokenId + \" amount: \" + amountTokenToSend)\r\n        }\r\n        return filteredUtxos;\r\n    } else {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            const explorerUtxos = await getUtxosExplorerByAddress(address, fullAmountToSend, tokenId);\r\n            if (explorerUtxos) {\r\n                return explorerUtxos;\r\n            } else {\r\n                errorAlert(\"Not enough token found: \" + tokenId + \" amount: \" + amountTokenToSend);\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getAllUtxos() {\r\n    var filteredUtxos = [];\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const utxos = await ergo.get_utxos();\r\n        for (const utxo of utxos) {\r\n            try {\r\n                (await ergolib).ErgoBox.from_json(JSONBigInt.stringify(utxo));\r\n                filteredUtxos.push(utxo);\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        }\r\n        return filteredUtxos;\r\n    } else {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        if (address !== '') {\r\n            const explorerUtxos = await getUtxosExplorerByAddress(address);\r\n            return explorerUtxos;\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nasync function signTx(txToBeSigned) {\r\n    try {\r\n        console.log(\"signTx\", txToBeSigned);\r\n        return await ergo.sign_tx(txToBeSigned);\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nasync function submitTx(txToBeSubmitted) {\r\n    try {\r\n        console.log(\"submitTx\");\r\n        const res = await promiseTimeout(30000, ergo.submit_tx(txToBeSubmitted));\r\n        return res;\r\n    } catch (e) {\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nasync function processTx(txToBeProcessed) {\r\n    const walletAccessGranted = await connectWallet();\r\n    if (walletAccessGranted && hasExtensionConnector()) {\r\n        const msg = s => {\r\n            console.log('[processTx]', s);\r\n        };\r\n        const signedTx = await signTx(txToBeProcessed);\r\n        if (!signedTx) {\r\n            console.error(`No signed transaction found`);\r\n            return null;\r\n        }\r\n        msg(\"Transaction signed - awaiting submission\");\r\n        const txId = await submitTx(signedTx);\r\n        //const txId = await postTxMempool(signedTx);\r\n        if (!txId) {\r\n            console.log(`No submitted tx ID`);\r\n            return null;\r\n        }\r\n        msg(\"Transaction submitted \");\r\n        return txId;\r\n    } else {\r\n        const [txId, ergoPayTx] = await getTxReducedB64Safe(txToBeProcessed, txToBeProcessed.inputs, txToBeProcessed.dataInputs);\r\n        displayErgoPayTransaction(txId, ergoPayTx);\r\n        return txId;\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { getBalance, getWalletAddressList, isValidWalletAddress } from '../ergo-related/wallet';\r\nimport { promptErgAddr, promptErgAddrList } from \"../utils/Alerts\"\r\nimport { formatERGAmount, formatLongString, sleep } from '../utils/utils';\r\nimport ergoLogo from \"../images/ergo-erg-logo.png\";\r\n\r\n\r\nexport default class InputAddress extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ergAmount: 0,\r\n            oatmealAmount: 0,\r\n            spicyOatmealAmount: 0,\r\n            ergopay: false,\r\n        };\r\n        this.setAddress = this.setAddress.bind(this);\r\n        this.promptErgAddress = this.promptErgAddress.bind(this);\r\n    }\r\n\r\n    setAddress(address) {\r\n        const oldAddr = localStorage.getItem('address') ?? '';\r\n        if (oldAddr !== address) {\r\n            localStorage.setItem('address', address);\r\n            window.location.reload();\r\n        }\r\n    };\r\n\r\n    async promptErgAddress() {\r\n        const addrList = await getWalletAddressList();\r\n        var newAddr = '';\r\n        if (addrList.length > 0) {\r\n            newAddr = await promptErgAddrList(addrList);\r\n        } else {\r\n            newAddr = await promptErgAddr();\r\n        }\r\n\r\n        if (newAddr) {\r\n            this.setAddress(newAddr)\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await sleep(200);\r\n        const nanoERGAmount = await getBalance('ERG');\r\n        if (!(await isValidWalletAddress(localStorage.getItem('address')))) {\r\n            localStorage.setItem('address', '');\r\n        }\r\n        var ergopay = false;\r\n        if (typeof ergo === 'undefined') {\r\n            ergopay = true;\r\n        }\r\n        //console.log(\"InputAddress componentDidMount\", nanoERGAmount, oatmealAmount)\r\n        this.setState({\r\n            ergAmount: nanoERGAmount,\r\n            ergopay: ergopay,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        var glowing = \"\";\r\n        if (address === '') {\r\n            glowing = \"glowing\";\r\n        }\r\n        return (\r\n            <div className=\"zoneaddress d-flex flex-row m-2 p-1 align-items-center\">\r\n                <div className='d-flex flex-column'>\r\n                    <button\r\n                        className={\"btn btn-address m-1 \" + glowing }\r\n                        onClick={this.promptErgAddress}>\r\n                        {\r\n                            address === '' ?\r\n                                <div>Set ERG address</div>\r\n                                :\r\n                                <div>\r\n                                    {formatLongString(address, 6)}\r\n                                    {this.state.ergopay ?\r\n                                        <div>ergopay</div>\r\n                                        : null\r\n                                    }\r\n                                </div>\r\n                        }\r\n                    </button>\r\n                </div>\r\n                {\r\n                    address === '' ?\r\n                        null\r\n                        :\r\n                        <div className=\"d-flex flex-column m-1 p-1 w-100\">\r\n                            <div className=\"w-100 d-flex flex-row justify-content-between align-items-center\">\r\n                                <div><strong>{formatERGAmount(this.state.ergAmount)} </strong></div>\r\n                                &nbsp;\r\n                                <img src={ergoLogo} width=\"20px\" heigth=\"20px\" alt=\"ERG\" />\r\n\r\n                            </div>\r\n                        </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","export default \"data:image/png;base64,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\"","import React, { Fragment } from 'react';\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport HelpImage from \"../images/help_outline_blue_48dp.png\";\r\n\r\n\r\nexport default function HelpToolTip(props) {\r\n    return (\r\n        <Fragment>\r\n            &nbsp;\r\n            <div className=\"d-flex flex-column align-items-center\">\r\n                <img className=\"armor\"\r\n                    src={HelpImage}\r\n                    alt={\"help tooltip\"}\r\n                    width=\"24px\"\r\n                    data-tip\r\n                    data-for={props.id}\r\n                />\r\n                <ReactTooltip id={props.id}\r\n                    place=\"right\"\r\n                    effect=\"solid\"\r\n                    data-html={true}\r\n                    delayShow={300}\r\n                    delayHide={300}\r\n                    insecure={true}\r\n                    multiline={true}\r\n                    backgroundColor=\"black\"\r\n                    >\r\n                    <div className=\"d-flex flex-column align-items-start\">\r\n                        {props.html}\r\n                    </div>\r\n                </ReactTooltip>\r\n            </div>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","export default \"data:image/png;base64,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\"","import React, { Fragment } from 'react';\r\nimport Select from 'react-select';\r\n\r\nexport default function ThemedSelect(props) {\r\n    const colors = {\r\n        /*\r\n         * multiValue(remove)/color:hover\r\n         */\r\n        danger: 'var(--danger)',\r\n\r\n        /*\r\n         * multiValue(remove)/backgroundColor(focused)\r\n         * multiValue(remove)/backgroundColor:hover\r\n         */\r\n        dangerLight: 'var(--danger-light)',\r\n\r\n        /*\r\n         * control/backgroundColor\r\n         * menu/backgroundColor\r\n         * option/color(selected)\r\n         */\r\n        neutral0: 'var(--my-bg-color1)',\r\n\r\n        /*\r\n          * control/backgroundColor(disabled)\r\n         */\r\n        neutral5: 'var(--neutral-5)',\r\n\r\n        /*\r\n         * control/borderColor(disabled)\r\n         * multiValue/backgroundColor\r\n         * indicators(separator)/backgroundColor(disabled)\r\n         */\r\n        neutral10: 'var(--neutral-10)',\r\n\r\n        /*\r\n         * control/borderColor\r\n         * option/color(disabled)\r\n         * indicators/color\r\n         * indicators(separator)/backgroundColor\r\n         * indicators(loading)/color\r\n         */\r\n        neutral20: 'var(--neutral-20)',\r\n\r\n        /*\r\n         * control/borderColor(focused)\r\n         * control/borderColor:hover\r\n         */\r\n        neutral30: 'var(--neutral-30)',\r\n\r\n        /*\r\n         * menu(notice)/color\r\n         * singleValue/color(disabled)\r\n         * indicators/color:hover\r\n         */\r\n        neutral40: 'var(--neutral-40)',\r\n\r\n        /*\r\n         * placeholder/color\r\n         */\r\n        neutral50: 'var(--neutral-50)',\r\n\r\n        /*\r\n         * indicators/color(focused)\r\n         * indicators(loading)/color(focused)\r\n         */\r\n        neutral60: 'var(--neutral-60)',\r\n\r\n        neutral70: 'var(--neutral-70)',\r\n\r\n        /*\r\n         * input/color\r\n         * multiValue(label)/color\r\n          * singleValue/color\r\n         * indicators/color(focused)\r\n         * indicators/color:hover(focused)\r\n         */\r\n        neutral80: 'var(--neutral-80)',\r\n\r\n        neutral90: 'var(--neutral-90)',\r\n\r\n        /*\r\n         * control/boxShadow(focused)\r\n         * control/borderColor(focused)\r\n         * control/borderColor:hover(focused)\r\n         * option/backgroundColor(selected)\r\n         * option/backgroundColor:active(selected)\r\n         */\r\n        primary: 'var(--my-bg-color4)',\r\n\r\n        /*\r\n         * option/backgroundColor(focused)\r\n         */\r\n        primary25: 'var(--my-bg-color2)',\r\n\r\n        /*\r\n         * option/backgroundColor:active\r\n         */\r\n        primary50: 'var(--my-bg-color3)',\r\n\r\n        primary75: 'var(--my-bg-color3)',\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <Select id={props.id}\r\n                className='d-flex justify-content-start selectReact '\r\n                value={{\r\n                    value: props.value,\r\n                    label: props.value\r\n                }}\r\n                onChange={props.onChange}\r\n                options={props.options}\r\n                isSearchable={false}\r\n                isMulti={false}\r\n                theme={theme => ({\r\n                    ...theme,\r\n                    colors: {\r\n                        ...colors\r\n                    }\r\n                })}\r\n            />\r\n        </Fragment>\r\n\r\n    )\r\n}","import React, { Fragment } from 'react';\r\nimport { mintCITYContract, mintSimpleToken } from '../ergo-related/mint';\r\nimport { TX_FEE, RECOMMENDED_FEES, NANOERG_TO_ERG } from '../utils/constants';\r\nimport { downloadAndSetSHA256, formatERGAmount } from '../utils/utils';\r\nimport HelpToolTip from './HelpToolTip';\r\nimport ThemedSelect from './ThemedSelect';\r\nimport TokenMedia from './TokenMedia';\r\n\r\n/* global BigInt */\r\n\r\nconst MAX_SIGNIFICANT_NUMBER_TOKEN = 19;\r\n\r\nconst optionsType = [\r\n    { value: 'Standard', label: 'Standard' },\r\n    { value: 'Picture', label: 'Picture' },\r\n    { value: 'Audio', label: 'Audio' },\r\n    { value: 'Video', label: 'Video' },\r\n]\r\n\r\nexport default class MintTokens extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        var optionsDecimals = [];\r\n        for (var i = 0; i < 10; i++) {\r\n            optionsDecimals.push({ value: i.toString(), label: i.toString() })\r\n        }\r\n        this.state = {\r\n            walletList: [],\r\n            setPage: props.setPage,\r\n            tokenName: '',\r\n            tokenAmount: '1',\r\n            tokenDescription: '',\r\n            tokenDecimals: '0',\r\n            tokenType: 'Standard',\r\n            tokenMediaHash: '',\r\n            tokenMediaAddress: '',\r\n            optionsDecimals: optionsDecimals,\r\n            tokenIDStart: '',\r\n            recommendedFee: TX_FEE,\r\n            fee: parseFloat(TX_FEE / NANOERG_TO_ERG),\r\n        };\r\n        this.setTokenName = this.setTokenName.bind(this);\r\n        this.setTokenDescription = this.setTokenDescription.bind(this);\r\n        this.setTokenAmount = this.setTokenAmount.bind(this);\r\n        this.setTokenDecimals = this.setTokenDecimals.bind(this);\r\n        this.setTokenType = this.setTokenType.bind(this);\r\n        this.setTokenMediaAddress = this.setTokenMediaAddress.bind(this);\r\n        this.isValidTokenAmount = this.isValidTokenAmount.bind(this);\r\n        this.validateAmountStrInt = this.validateAmountStrInt.bind(this);\r\n    }\r\n    setTokenName = (name) => { this.setState({ tokenName: name }); };\r\n    setTokenDescription = (desc) => { this.setState({ tokenDescription: desc }); };\r\n    setTokenAmount = (amount) => {\r\n        if (this.isValidTokenAmount(amount)) {\r\n            this.setState({ tokenAmount: amount });\r\n        }\r\n    };\r\n    setTokenDecimals = (dec) => {\r\n        this.setState({\r\n            tokenDecimals: dec,\r\n            tokenMediaAddress: '',\r\n            tokenMediaHash: '',\r\n        });\r\n        if (dec === '0') {\r\n            this.setTokenAmount(this.state.tokenAmount.split('.')[0]);\r\n        } else {\r\n            const splittedAmount = this.state.tokenAmount.split('.');\r\n            var newAmount = splittedAmount[0];\r\n            if (splittedAmount.length > 1 && typeof splittedAmount[1] === 'string' && splittedAmount[1].length > 0) {\r\n                newAmount = newAmount + '.' + splittedAmount[1].substring(0, dec);\r\n            }\r\n            if (newAmount.toString().length + parseInt(dec) <= 19) {\r\n                this.setTokenAmount(newAmount);\r\n            } else { // token amount too big with new decimals\r\n                this.setTokenAmount(\"1\");\r\n            }\r\n        }\r\n    };\r\n    setTokenType = (type) => {\r\n        var decimals = this.state.tokenDecimals;\r\n        if (type !== 'Standard') {\r\n            decimals = '0';\r\n        }\r\n        this.setState({\r\n            tokenType: type,\r\n        });\r\n        this.setTokenDecimals(decimals);\r\n    };\r\n    async setTokenMediaAddress(addr) {\r\n        this.setState({ tokenMediaAddress: addr, tokenMediaHash: await downloadAndSetSHA256(addr) });\r\n    };\r\n    setTokenIDStart = (startID) => {\r\n        const fixedStartID = startID.toLowerCase().replace(/[^a-f0-9]/gi, '').substring(0, RECOMMENDED_FEES.length - 1)\r\n        this.setState({\r\n            tokenIDStart: fixedStartID,\r\n            recommendedFee: RECOMMENDED_FEES[fixedStartID.length],\r\n            fee: parseFloat(RECOMMENDED_FEES[fixedStartID.length] / NANOERG_TO_ERG).toFixed(4),\r\n        });\r\n    };\r\n    setFee = (feeFloat) => {\r\n        const fixedFee = feeFloat.replace(',', '.').replace(/[^0-9\\.]/g, ''); //eslint-disable-line\r\n        this.setState({\r\n            fee: fixedFee,\r\n        });\r\n\r\n    }\r\n\r\n    isValidTokenAmount = (amount) => {\r\n        var validAmount = false;\r\n        if (amount.match(\"^[0-9\\.]+$\") != null) { //eslint-disable-line\r\n            if (this.state.tokenDecimals === '0') { // No decimals\r\n                if (amount.match(\"^[0-9]+$\") != null) {\r\n                    validAmount = this.validateAmountStrInt(amount);\r\n                }\r\n            } else { // Token decimals allowed\r\n                var splited = amount.split('.');\r\n                if (splited.length === 1) { // no decimals\r\n                    validAmount = this.validateAmountStrInt(amount + parseInt(this.state.tokenDecimals));\r\n                }\r\n                if (splited.length === 2) {\r\n                    if (amount.length - 1 < MAX_SIGNIFICANT_NUMBER_TOKEN) {\r\n                        if (splited[1].length <= parseInt(this.state.tokenDecimals)) {\r\n                            validAmount = this.validateAmountStrInt(splited[0] + splited[1]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return validAmount;\r\n    }\r\n    validateAmountStrInt = (amountStrInt) => {\r\n        if (amountStrInt.length <= MAX_SIGNIFICANT_NUMBER_TOKEN) {\r\n            try {\r\n                BigInt(amountStrInt);\r\n                return true;\r\n            } catch (e) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    async mintToken() {\r\n        const txFeeNano = Math.round(parseFloat(this.state.fee) * NANOERG_TO_ERG);\r\n        if (this.state.tokenIDStart.length === 0) {\r\n            await mintSimpleToken(this.state.tokenName, this.state.tokenDescription, this.state.tokenAmount, this.state.tokenDecimals,\r\n                this.state.tokenType, this.state.tokenMediaAddress, this.state.tokenMediaHash, txFeeNano);\r\n        } else {\r\n            await mintCITYContract(this.state.tokenName, this.state.tokenDescription, this.state.tokenAmount, this.state.tokenDecimals,\r\n                this.state.tokenType, this.state.tokenMediaAddress, this.state.tokenMediaHash, txFeeNano, this.state.tokenIDStart);\r\n        }\r\n        //\r\n    }\r\n\r\n    render() {\r\n        const address = localStorage.getItem('address') ?? '';\r\n        return (\r\n            <Fragment >\r\n                <div className=\"w-75 p-1 m-1\">\r\n                    <h4>Mint tokens</h4>\r\n                    <h5>Use CYTI minable smart contract to choose your token ID</h5>\r\n                </div>\r\n                <div className=\"w-75 card zonemint container p-1 m-1\">\r\n                    <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                        <label htmlFor=\"tokenType\" className='col-sm-4 d-flex align-items-start'>Type</label>\r\n                        <div className='w-100 d-flex flex-row'>\r\n                            <ThemedSelect id=\"tokenType\"\r\n                                value={this.state.tokenType}\r\n                                onChange={(type) => this.setTokenType(type.value)}\r\n                                options={optionsType}\r\n                            />\r\n                            <div></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                        <label htmlFor=\"tokenName\" className='col-sm-4 d-flex align-items-start'>Name</label>\r\n                        <input type=\"text\"\r\n                            id=\"tokenName\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenName(e.target.value)}\r\n                            value={this.state.tokenName}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-center m-1 p-1'>\r\n                        <label htmlFor=\"tokenDescription\" className='col-sm-4 d-flex align-items-start'>Description</label>\r\n                        <textarea id=\"tokenDescription\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenDescription(e.target.value)}\r\n                            value={this.state.tokenDescription}\r\n                            rows=\"4\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                        <label htmlFor=\"tokenAmount\" className='col-sm-4 d-flex justify-content-start align-items-start'>Amount</label>\r\n                        <input type=\"text\"\r\n                            id=\"tokenAmount\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenAmount(e.target.value)}\r\n                            value={this.state.tokenAmount}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    {\r\n                        this.state.tokenType === 'Standard' ?\r\n                            <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                                <label htmlFor=\"tokenDecimals\" className='col-sm-4 d-flex align-items-start'>Decimals</label>\r\n                                <div className='w-100 d-flex flex-row justify-content-between '>\r\n                                    <ThemedSelect id=\"tokenDecimals\"\r\n                                        value={this.state.tokenDecimals}\r\n                                        onChange={(dec) => this.setTokenDecimals(dec.value)}\r\n                                        options={this.state.optionsDecimals}\r\n                                    />\r\n                                    <div></div>\r\n                                </div>\r\n                            </div>\r\n                            : null\r\n                    }\r\n                    <TokenMedia type={this.state.tokenType} address={this.state.tokenMediaAddress} width={200} />\r\n                    {\r\n                        this.state.tokenType === \"Standard\" ? null\r\n                            :\r\n                            <Fragment>\r\n\r\n                                <div className='d-flex flex-row justify-content-between align-items-end m-1 p-1'>\r\n                                    <label htmlFor=\"tokenMediaAddr\" className='col-sm-4 d-flex align-items-start'>{this.state.tokenType} URL</label>\r\n                                    <input type=\"text\"\r\n                                        id=\"tokenMediaAddr\"\r\n                                        className=\"form-control col-sm input-dark\"\r\n                                        onChange={e => this.setTokenMediaAddress(e.target.value)}\r\n                                        value={this.state.tokenMediaAddress}\r\n                                        autocomplete=\"off\"\r\n                                    />\r\n                                </div>\r\n                            </Fragment>\r\n                    }\r\n                    <div className='d-flex flex-row justify-content-between align-items-center m-1 p-1'>\r\n                        <label htmlFor=\"tokenIdStart\" className='col-sm-4 d-flex align-items-center'>Desired token ID start\r\n                            <HelpToolTip id=\"tokenIdStartToolTip\" html={\r\n                                <Fragment>\r\n                                    <div>Hexadecimal ([0-9a-f]) characters chosen for the begining of the minted token ID. </div>\r\n                                    <div>The maximum allowed length is currently 8 characters given the performance of the miner.</div>\r\n                                    <div>The difficulty goes by two charracters: 1 and 2 character length will have the same difficulty, like 3 and 4 ...</div>\r\n                                    <div>Leave empty to mint a standard token instead of a minable CYTI contract.</div>\r\n                                </Fragment>\r\n                            } />\r\n                        </label>\r\n                        <input type=\"text\"\r\n                            id=\"tokenIdStart\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setTokenIDStart(e.target.value)}\r\n                            value={this.state.tokenIDStart}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-between align-items-center m-1 p-1'>\r\n                        <label htmlFor=\"recommendedFee\" className='col-sm-4 d-flex align-items-end'>Recommended fee\r\n                            <HelpToolTip id=\"recommendedFeeToolTip\" html={\r\n                                <Fragment>\r\n                                    <div>Fee recommended by default in the miner configuration.</div>\r\n                                </Fragment>\r\n                            } />\r\n                        </label>\r\n                        <div className='w-100 d-flex flex-row justify-content-between align-items-center'>\r\n                            <div id=\"recommendedFee\" className='d-flex align-items-start'>{formatERGAmount(this.state.recommendedFee)} ERG</div>\r\n                            <div></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-left  m-1 p-1'>\r\n                        <label htmlFor=\"fee\" className='col-sm-4 d-flex align-items-center'>Fee\r\n                            <HelpToolTip id=\"feeToolTip\" html={\r\n                                <Fragment>\r\n                                    <div>Fee for transaction miners and token ID miners.</div>\r\n                                    <div>The minimal fee for a CYTI contrat is 0.0042 ERG so it can technically be excuted.</div>\r\n                                    <div>The miners are configuring a price for each difficulty level (number of characters you require for the start of the token ID).</div>\r\n                                    <div>A CYTI contract with a too low fee might never be mined but is refundable.</div>\r\n                                </Fragment>\r\n                            } />\r\n                        </label>\r\n                        <input type=\"text\"\r\n                            id=\"fee\"\r\n                            className=\"form-control col-sm input-dark\"\r\n                            onChange={e => this.setFee(e.target.value)}\r\n                            value={this.state.fee}\r\n                            autocomplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    <div className='d-flex flex-row justify-content-center align-items-center m-1 p-1'>\r\n                        <button className='btn btn-blue'\r\n                            onClick={() => this.mintToken()}\r\n                            disabled={this.state.tokenName.length === 0 || address === ''}\r\n                        >\r\n                            {\r\n                                this.state.tokenIDStart.length > 0 ?\r\n                                    \"Mint CYTI\"\r\n                                    : \"Mint\"\r\n                            }\r\n\r\n                        </button>\r\n                    </div>\r\n                </div >\r\n            </Fragment >\r\n        )\r\n    }\r\n}\r\n","import githubLogo from \"../images/Github.png\";\r\n\r\n\r\nexport default function Footer() {\r\n    return (\r\n        <div className=\"bggrey w-100\">\r\n            <div >\r\n                © 2022 Haileypdll/ThierryM1212\r\n                &nbsp;\r\n                <a href=\"https://github.com/ThierryM1212/cyti\" target=\"_blank\" rel=\"noreferrer\">\r\n                    <img src={githubLogo} width=\"20\" height=\"20\" className=\"d-inline-block align-top\" alt=\"github\" />\r\n                </a>\r\n            </div>\r\n        </div>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII=\"","import './App.css';\r\nimport React from 'react';\r\nimport InputAddress from './components/InputAddress';\r\nimport MintTokens from './components/MintTokens';\r\nimport MintRequests from './components/MintRequests';\r\nimport Footer from './components/Footer';\r\n\r\nexport default class App extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App d-flex flex-column justify-content-between align-items-center\">\r\n        <div className=\"w-100 d-flex flex-column align-items-center\">\r\n          <div className=\"w-100 d-flex flex-row justify-content-between align-items-center bggrey\">\r\n            <div className='d-flex flex-column  align-items-start m-1 p-1'>\r\n              <h2>&nbsp;C.Y.T.I<span className='hidden-mobile'> - Choose Your Token ID</span></h2>\r\n              <div>\r\n                <button className='btn btn-yellow'\r\n                  onClick={() => {\r\n                    const url = 'https://github.com/ThierryM1212/cyti/releases';\r\n                    window.open(url, '_blank').focus();\r\n                  }}\r\n                >\r\n                  Get CYTI miner\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <InputAddress />\r\n          </div>\r\n\r\n          <MintTokens />\r\n          <MintRequests />\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","\r\nexport async function post(url, body = {}, apiKey = '') {\r\n    return await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'mode': 'cors',\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n            'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\r\n            api_key: apiKey,\r\n        },\r\n        body: JSON.stringify(body),\r\n    });\r\n}\r\nexport async function get(url, apiKey = '') {\r\n    try {\r\n        return await fetch(url, {\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'mode': 'cors',\r\n                'Access-Control-Allow-Origin': '*',\r\n                'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n                'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\r\n                api_key: apiKey,\r\n            }\r\n        }).then(res => res.json());\r\n    } catch (e) {\r\n        console.error(e);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getStream(url, apiKey = '') {\r\n    try {\r\n        const response = await fetch(url)\r\n        const responseTxt = await response.text();\r\n        return responseTxt;\r\n    } catch (e) {\r\n        console.error(e);\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport async function getBlob(url) {\r\n    try {\r\n        const result = await fetch(url).then(res => res.arrayBuffer());\r\n        return result;\r\n    } catch (e) {\r\n        console.error(e);\r\n        return [];\r\n    }\r\n}\r\n","import { waitingAlert } from \"../utils/Alerts\";\r\nimport { encodeHexConst, encodeLong, encodeStrConst } from \"./serializer\";\r\nimport { CYTI_MINT_REQUEST_SCRIPT_ADDRESS, MIN_NANOERG_BOX_VALUE, NFT_TYPES, TX_FEE } from \"../utils/constants\";\r\nimport { getUtxos, walletSignTx } from \"./wallet\";\r\nimport { Serializer } from \"@coinbarn/ergo-ts\";\r\nimport { currentHeight } from \"./explorer\";\r\nimport { createTransaction, getUtxosListValue } from \"./wasm\";\r\nlet ergolib = import('ergo-lib-wasm-browser');\r\n\r\n/* global BigInt */\r\n\r\nexport async function mintSimpleToken(tokName, tokDesc, tokAmount, tokDecimals, tokType, tokURL, tokHash, txFeeNano) {\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    const address = localStorage.getItem('address');\r\n    var txAmount = txFeeNano;\r\n    if (txFeeNano < TX_FEE + MIN_NANOERG_BOX_VALUE) {\r\n        txAmount = TX_FEE + MIN_NANOERG_BOX_VALUE;\r\n    }\r\n    const utxos = await getUtxos(txAmount);\r\n    const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n    const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n    const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n    const creationHeight = await currentHeight();\r\n    const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n    const tokenAmountAdjusted = BigInt(tokAmount * Math.pow(10, tokDecimals)).toString();\r\n    const mintBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str(MIN_NANOERG_BOX_VALUE.toString()));\r\n    const mintBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        mintBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address)),\r\n        creationHeight);\r\n    const token = new (await ergolib).Token(\r\n        (await ergolib).TokenId.from_box_id((await ergolib).BoxId.from_str(utxos[0].boxId)),\r\n        (await ergolib).TokenAmount.from_i64((await ergolib).I64.from_str(tokenAmountAdjusted))\r\n    );\r\n    mintBoxBuilder.mint_token(token, tokName, tokDesc, tokDecimals);\r\n    mintBoxBuilder.set_register_value(7, await encodeStrConst(NFT_TYPES[tokType]));\r\n    mintBoxBuilder.set_register_value(8, await encodeHexConst(tokHash));\r\n    mintBoxBuilder.set_register_value(9, await encodeStrConst(tokURL));\r\n    try {\r\n        outputCandidates.add(mintBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n    var tx = await createTransaction(boxSelection, outputCandidates, [], address, utxos);\r\n    console.log(\"tx\", tx)\r\n    const txId = await walletSignTx(alert, tx, address);\r\n    return txId;\r\n}\r\n\r\nexport async function mintCITYContract(tokName, tokDesc, tokAmount, tokDecimals, tokType, tokURL, tokHash, txFeeNano, tokIdStart) {\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    const address = localStorage.getItem('address');\r\n    var txAmount = txFeeNano; // initial amount in the contract\r\n    if (txFeeNano < 2 * (TX_FEE + MIN_NANOERG_BOX_VALUE)) {\r\n        txAmount = 2 * (TX_FEE + MIN_NANOERG_BOX_VALUE);\r\n    }\r\n    const utxos = await getUtxos(txAmount + TX_FEE);\r\n    const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n    const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n    const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n    const creationHeight = await currentHeight();\r\n    const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n    const tokenAmountAdjusted = BigInt(tokAmount * Math.pow(10, tokDecimals)).toString();\r\n    // fix required tokIdStart if number of char if odd\r\n    if (tokIdStart.length % 2 === 1) {\r\n        tokIdStart = tokIdStart + '0';\r\n    }\r\n    // MINT CYTI\r\n    const txAmountBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str((txAmount).toString()));\r\n    const mintCYTIBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        txAmountBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(CYTI_MINT_REQUEST_SCRIPT_ADDRESS)),\r\n        creationHeight);\r\n    mintCYTIBoxBuilder.set_register_value(4, await encodeLong(tokenAmountAdjusted));\r\n    const tokenMintInfos = [tokName, tokDesc, tokDecimals, NFT_TYPES[tokType], tokHash, tokURL];\r\n    console.log(\"mint info\", [tokName, tokDesc, tokDecimals, NFT_TYPES[tokType], tokHash, tokURL]);\r\n    const registerValue5 = tokenMintInfos.map((val, index) => {\r\n        if (index === 4) { // encode hash as hex\r\n            return new Uint8Array(Buffer.from(val, 'hex'))\r\n        } else {\r\n            return new Uint8Array(Buffer.from(Serializer.stringToHex(val), 'hex'))\r\n        }\r\n    });\r\n    mintCYTIBoxBuilder.set_register_value(5, (await ergolib).Constant.from_coll_coll_byte(registerValue5));\r\n    const ownerSigmaProp = (await ergolib).Constant.from_ecpoint_bytes(\r\n        (await ergolib).Address.from_base58(address).to_bytes(0x00).subarray(1, 34)\r\n    );\r\n    mintCYTIBoxBuilder.set_register_value(6, ownerSigmaProp);\r\n    mintCYTIBoxBuilder.set_register_value(7, await encodeHexConst(tokIdStart));\r\n    mintCYTIBoxBuilder.set_register_value(8, ownerSigmaProp);\r\n    mintCYTIBoxBuilder.set_register_value(9, await encodeHexConst(\"000000\"));\r\n    try {\r\n        outputCandidates.add(mintCYTIBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n\r\n    var tx = await createTransaction(boxSelection, outputCandidates, [], address, utxos);\r\n    console.log(\"tx\", tx)\r\n    const txId = await walletSignTx(alert, tx, address);\r\n    return txId;\r\n}\r\n\r\nexport async function refundMintRequest(mintRequestJSON) {\r\n    const alert = waitingAlert(\"Preparing the transaction...\");\r\n    const address = localStorage.getItem('address');\r\n    var utxos = [mintRequestJSON];\r\n    if (parseInt(mintRequestJSON.value) < TX_FEE + MIN_NANOERG_BOX_VALUE) {\r\n        const utxos1 = await getUtxos(TX_FEE);\r\n        utxos = utxos.concat(utxos1)\r\n    }\r\n    const utxosValue = getUtxosListValue(utxos);\r\n    const inputsWASM = (await ergolib).ErgoBoxes.from_boxes_json(utxos);\r\n    const dataListWASM = new (await ergolib).ErgoBoxAssetsDataList();\r\n    const boxSelection = new (await ergolib).BoxSelection(inputsWASM, dataListWASM);\r\n    const creationHeight = await currentHeight();\r\n    const outputCandidates = (await ergolib).ErgoBoxCandidates.empty();\r\n    const refundBoxValue = (await ergolib).BoxValue.from_i64((await ergolib).I64.from_str((parseInt(utxosValue) - TX_FEE).toString()));\r\n    const refundBoxBuilder = new (await ergolib).ErgoBoxCandidateBuilder(\r\n        refundBoxValue,\r\n        (await ergolib).Contract.pay_to_address((await ergolib).Address.from_base58(address)),\r\n        creationHeight);\r\n    try {\r\n        outputCandidates.add(refundBoxBuilder.build());\r\n    } catch (e) {\r\n        console.log(`building error: ${e}`);\r\n        throw e;\r\n    }\r\n    var tx = await createTransaction(boxSelection, outputCandidates, [], address, utxos);\r\n    console.log(\"tx\", tx)\r\n    const txId = await walletSignTx(alert, tx, address);\r\n    return txId;\r\n}\r\n\r\n","export const NANOERG_TO_ERG = 1000000000;\r\nexport const MIN_NANOERG_BOX_VALUE = 0.001 * NANOERG_TO_ERG;\r\nexport const TX_FEE = 1100000;\r\n\r\nexport const DEFAULT_EXPLORER_API_ADDRESS = \"https://api.ergoplatform.com/\";\r\nexport const DEFAULT_EXPLORER_ADDRESS = \"https://explorer.ergoplatform.com/\";\r\n\r\nexport const NFT_TYPES = {\r\n    'Standard': \"\",\r\n    'Picture': \"\u0001\u0001\",\r\n    'Audio': \"\u0001\u0002\",\r\n    'Video': \"\u0001\u0003\",\r\n}\r\n\r\nexport const RECOMMENDED_FEES = [\r\n    TX_FEE,\r\n    0.005 * NANOERG_TO_ERG,  // 2 char\r\n    0.005 * NANOERG_TO_ERG,  // 2 char\r\n    0.01 * NANOERG_TO_ERG,   // 4 char\r\n    0.01 * NANOERG_TO_ERG,   // 4 char\r\n    0.1 * NANOERG_TO_ERG,    // 6 char\r\n    0.1 * NANOERG_TO_ERG,    // 6 char\r\n    1 * NANOERG_TO_ERG,      // 8 char \r\n    1 * NANOERG_TO_ERG,      // 8 char  \r\n];\r\n\r\nexport const CYTI_MINT_REQUEST_SCRIPT=\"1020040004000404040005c0a3860105c0b5fa02010004060580897a05c0a38601040204020580897a04020402040204000402040004020400040204020402040404020406040204080402040a0100d80ad601e4c6a70608d602c5a7d603e4c6a7070ed604b17203d605b4720273007204d6069472057203d607b1a5d608b2a5730100d609e4c6a70405d60ae4c6a7051aeb02ea027201d17206d1ec95eded937207730293b4c572087303720472037206edededededededed93c27208c2a793c1720899c1a7730492c17208730593e4c672080405720993e4c67208051a720a93e4c672080608720193e4c67208070e7203e6c672080808e6c67208090e730695ed93720773079372057203edededededededededededed93c27208d0e4c6a7080892c172089999c1a77308730993c2b2a5730a00d0720193c1b2a5730b00730c93b1db6308b2a5730d00730e938cb2db6308b2a5730f00731000017202938cb2db6308b2a573110073120002720993e4c6b2a5731300040eb2720a73140093e4c6b2a5731500050eb2720a73160093e4c6b2a5731700060eb2720a73180093e4c6b2a5731900070eb2720a731a0093e4c6b2a5731b00080eb2720a731c0093e4c6b2a5731d00090eb2720a731e00731f\";\r\nexport const CYTI_MINT_REQUEST_SCRIPT_HASH=\"08262f1f872737e3f62af908517603572e8fd5ae0c019ce94bb91ed27ef281c4\";\r\nexport const CYTI_MINT_REQUEST_SCRIPT_ADDRESS=\"PjsKkeMDreCAE9RoZm6ocrrMg7Pes8tHL7yCfdDJRi6NWT3Ds7vQoi69rMNmn7Ma6RtJp2jmAMcwHD4GyRuqXr6H5vy1CDEPTzq23XYCCocDEvGrwFXUK4h7SVtXSpJWJrGZHqw5vSvHE2hHGM7uvhcJHVxkAFUttLUxdWgVGnAH6YqbUKs95Ky6Hgz4peTjs95Zo2QcmAJkdCD6XZKZ5iztvQdMb9jHv9QdGhh7Ls8SnQ2qLaWkDH1NghFwvrqhb99whJZe2wt1PDzNVHjzvL7XXnjDfUKQXG1N4qE1Nzpjz3cdQLojNNMr48u9op9rs21amziXfWmS9rjtZn5jeaiNXdmMqastrSdDXcijpru3wUetrvdnzUXCDKP9Gs7AHMBCiRwr2FrXHZ1Lf71UT1uwVLzfrJ4PFYL7APYL5pkJJF9Q7i9v7kFsQd4iHFwD52NnZiiqS14gYu4SQppFL9pBWotug7rQHuNZ11gEbvvH1EYwMvDRKnRzmGqbs28Uoco1ZGeAu7aK7cppNAHy7vmgqM1c8ch9gWMSdxs5ecMQwCgwjH8fLZxMEEEt7SekgTpifCDNGKFumiiGHRwcysgmA9wmb8ReazWoiMgw1yTz7w1vykT4iu85JnEcSGThG\";\r\n\r\n","import React, { Fragment } from 'react';\r\n\r\n\r\nexport default function TokenMedia(props) {\r\n    return (\r\n        <Fragment>\r\n            {\r\n                props.type === \"Standard\" || props.address === '' ? null :\r\n                    <div className='d-flex flex-row justify-content-center align-items-center m-1 p-1'>\r\n                        {\r\n                            props.type === \"Picture\" ?\r\n                                <img src={props.address} alt=\"token\" width={props.width} />\r\n                                : null\r\n                        }\r\n                        {\r\n                            props.type === \"Video\" ?\r\n                                <video controls src={props.address} alt=\"token\" width={props.width} />\r\n                                : null\r\n                        }\r\n                        {\r\n                            props.type === \"Audio\" ?\r\n                                <audio controls src={props.address} alt=\"token\" width={props.width} />\r\n                                : null\r\n                        }\r\n                    </div>\r\n            }\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n"],"sourceRoot":""}